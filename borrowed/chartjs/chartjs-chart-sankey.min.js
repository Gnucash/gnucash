/*!
 * chartjs-chart-sankey v0.1.5
 * https://github.com/kurkle/chartjs-chart-sankey#readme
 * (c) 2020 Jukka Kurkela
 * Released under the MIT license
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("chart.js")):"function"==typeof define&&define.amd?define(["chart.js"],e):e((t=t||self).Chart)}(this,(function(t){"use strict";var e="default"in t?t.default:t;function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,r){return e&&o(t.prototype,e),r&&o(t,r),t}function f(){return(f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function s(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?l(t):e}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=u(t);if(e){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function d(t){return function(t){if(Array.isArray(t))return g(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||y(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){if(t){if("string"==typeof t)return g(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(t,e):void 0}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function b(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=y(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,f=!0,i=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return f=t.done,t},e:function(t){i=!0,a=t},f:function(){try{f||null==r.return||r.return()}finally{if(i)throw a}}}}function v(t,e){var r=t.filter((function(t){return!e.has(t)}));return r.length?r:t.slice(0,1)}var p=function(t,e){return t.x!==e.x?t.x-e.x:t.y-e.y},m=function t(e,r){return e.reduce((function(e,n){return e+n.node[r].length+t(n.node[r],r)}),0)},x=function(t){return function(e,r){return m(e.node[t],t)-m(r.node[t],t)}};function w(t,e){return t.to.sort(x("to")).forEach((function(t){var r=t.node;"y"in r||(r.y=e,e=Math.max(e+r.in,w(r,e)))})),e}function k(t,e){var r=function(t){return t.sort((function(t,e){return Math.max(e.in,e.out)-Math.max(t.in,t.out)}))[0]}(t);r.y=0;var n=function t(e,r){return e.from.sort(x("from")).forEach((function(e){var n=e.node;"y"in n||(n.y=r,r=Math.max(r+n.out,t(n,r)))})),r}(r,0),o=w(r,0),a=function(t,e){var r=t.filter((function(t){return 0===t.x})),n=t.filter((function(t){return t.x===e})),o=r.reduce((function(t,e){return Math.max(t,e.y+e.out||0)}),0),a=n.reduce((function(t,e){return Math.max(t,e.y+e.out||0)}),0);return o>=a?(r.forEach((function(t){"y"in t?o=t.y:t.y=o,o=Math.max(o+t.out,w(t,o))})),n.forEach((function(t){"y"in t?a=t.y:t.y=a,a=Math.max(a+t.in,w(t,a))}))):(n.forEach((function(t){"y"in t?a=t.y:t.y=a,a=Math.max(a+t.in,w(t,a))})),r.forEach((function(t){"y"in t?o=t.y:t.y=o,o=Math.max(o+t.out,w(t,o))}))),Math.max(o,a)}(t,e);return Math.max(n,o,a)}function S(t,e){var r=d(t.values()),n=function(t,e){for(var r=new Set(e.map((function(t){return t.to}))),n=new Set(e.map((function(t){return t.from}))),o=new Set(d(t.keys())),a=0;o.size;){for(var f=v(d(o),r),i=0;i<f.length;i++)t.get(f[i]).x=a,o.delete(f[i]);o.size&&(r.clear(),e.filter((function(t){return o.has(t.from)})).forEach((function(t){return r.add(t.to)})),a++)}return d(t.keys()).filter((function(t){return!n.has(t)})).forEach((function(e){t.get(e).x=a})),a}(t,e),o=k(r,n),a=function(t,e){for(var r=0,n=function(e){r=Math.max(r,t.filter((function(t){return t.x===e})).length)},o=0;o<=e;o++)n(o);return r}(r,n),f=.03*o;return function(t,e){var r=1,n=0,o=0,a=[];t.sort(p).forEach((function(t){if(t.y){if(0===t.x)a.push(t.y);else{for(n!==t.x&&(n=t.x,o=0),r=o+1;r<a.length&&!(a[r]>t.y);r++);o=r}t.y+=r*e,r++}}))}(r,f),function(t){t.forEach((function(t){var e=0;t.from.sort((function(t,e){return t.node.y+t.node.out/2-(e.node.y+e.node.out/2)})).forEach((function(t){t.addY=e,e+=t.flow})),e=0,t.to.sort((function(t,e){return t.node.y+t.node.in/2-(e.node.y+e.node.in/2)})).forEach((function(t){t.addY=e,e+=t.flow}))}))}(r),{maxX:n,maxY:o+a*f}}function M(t,e){for(var r=0;r<t.length;r++)if(t[r].key===e)return t[r].addY;return 0}var _=function(t){i(r,t);var e=h(r);function r(){return n(this,r),e.apply(this,arguments)}return a(r,[{key:"parseObjectData",value:function(t,e,r,n){var o=t.xScale,a=t.yScale,f=[],i=this._nodes=function(t){for(var e=new Map,r=0;r<t.length;r++){var n=t[r];if(e.has(n.from)){var o=e.get(n.from);o.out+=n.flow,o.to.push({key:n.to,flow:n.flow})}else e.set(n.from,{key:n.from,in:0,out:n.flow,from:[],to:[{key:n.to,flow:n.flow}]});if(e.has(n.to)){var a=e.get(n.to);a.in+=n.flow,a.from.push({key:n.from,flow:n.flow})}else e.set(n.to,{key:n.to,in:n.flow,out:0,from:[{key:n.from,flow:n.flow}],to:[]})}var f=function(t,e){return e.flow-t.flow};return d(e.values()).forEach((function(t){var r=0;t.from=t.from.sort(f),t.from.forEach((function(t){t.node=e.get(t.key),t.addY=r,r+=t.flow})),r=0,t.to=t.to.sort(f),t.to.forEach((function(t){t.node=e.get(t.key),t.addY=r,r+=t.flow}))})),e}(e),u=S(i,e),c=u.maxX,l=u.maxY;o.options.max=c,a.options.max=l;for(var s=0,h=e.length;s<h;++s){var y=e[s],g=i.get(y.from),b=i.get(y.to),v=g.y+M(g.to,y.to),p=b.y+M(b.from,y.from);f.push({x:o.parse(g.x,s),y:a.parse(v,s),_custom:{from:g,to:b,x:o.parse(b.x,s),y:a.parse(p,s),height:a.parse(y.flow,s)}})}return f.slice(r,r+n)}},{key:"update",value:function(t){var e=this._cachedMeta;this.updateElements(e.data,0,t)}},{key:"updateElements",value:function(t,e,r){for(var n=this,o=n._cachedMeta,a=o.xScale,f=o.yScale,i=n.resolveDataElementOptions(e,r),u=n.getSharedOptions(r,t[e],i),c=0;c<t.length;c++){var l=e+c,s=n.getParsed(l),h=s._custom,d=f.getPixelForValue(s.y);n.updateElement(t[c],l,{x:a.getPixelForValue(s.x)+11,y:d,x2:a.getPixelForValue(h.x)-1,y2:f.getPixelForValue(h.y),from:h.from,to:h.to,progress:"reset"===r?0:1,height:Math.abs(f.getPixelForValue(s.y+h.height)-d),options:n.resolveDataElementOptions(c,r)},r)}n.updateSharedOptions(u,r)}},{key:"_drawLabels",value:function(){var t=this._ctx,e=this._nodes||new Map,r=this._cachedMeta,n=r.xScale,o=r.yScale;t.save();var a,f=this.chart.chartArea,i=b(e.values());try{for(i.s();!(a=i.n()).done;){var u=a.value,c=n.getPixelForValue(u.x),l=o.getPixelForValue(u.y),s=Math.max(u.in,u.out),h=Math.abs(o.getPixelForValue(u.y+s)-l);t.fillStyle="black",t.textBaseline="middle",c<f.width/2?(t.textAlign="left",t.fillText(u.key,c+15,l+h/2)):(t.textAlign="right",t.fillText(u.key,c-5,l+h/2))}}catch(t){i.e(t)}finally{i.f()}t.restore()}},{key:"_drawNodes",value:function(){var t=this._ctx,e=this._nodes||new Map,r=this._cachedMeta,n=r.xScale,o=r.yScale;t.save(),t.strokeStyle="black";var a,f=b(e.values());try{for(f.s();!(a=f.n()).done;){var i=a.value;t.fillStyle=i.color;var u=n.getPixelForValue(i.x),c=o.getPixelForValue(i.y),l=Math.max(i.in,i.out),s=Math.abs(o.getPixelForValue(i.y+l)-c);t.strokeRect(u,c,10,s),t.fillRect(u,c,10,s)}}catch(t){f.e(t)}finally{f.f()}t.restore()}},{key:"draw",value:function(){for(var t=this._ctx,e=this.getMeta().data||[],r=0,n=e.length;r<n;++r){var o=e[r];o.from.color=o.options.colorFrom,o.to.color=o.options.colorTo}this._drawLabels(),this._drawNodes();for(var a=0,f=e.length;a<f;++a)e[a].draw(t)}}]),r}(t.DatasetController);_.id="sankey",_.defaults={dataElementType:"flow",dataElementOptions:["colorFrom","colorTo"],hover:{mode:"nearest",intersect:!0},datasets:{animation:function(t){var e=0,r=0,n=t.chart.getDatasetMeta(t.datasetIndex).controller.getParsed(t.dataIndex);return n&&(e=500*n.x+20*t.dataIndex,r=200*(n._custom.x-n.x)),{numbers:{type:"number",properties:["x","y","x2","y2","height"]},progress:{easing:"linear",duration:r,delay:e},colors:{type:"color",properties:["colorFrom","colorTo"]},hide:{colors:{type:"color",properties:["colorFrom","colorTo"],to:"transparent"}},show:{colors:{type:"color",properties:["colorFrom","colorTo"],from:"transparent"}}}},color:function(){return"#efefef"}},tooltips:{mode:"nearest",intersect:!0,callbacks:{title:function(){return""},label:function(t){var e=t.dataset.data[t.dataIndex];return e.from+" -> "+e.to+": "+e.flow}}},legend:{display:!1},scales:{x:{type:"linear",display:!1,min:0,offset:!0},y:{type:"linear",display:!1,min:0,reverse:!0,offset:!0}}};
/*!
 * Chart.js v3.0.0-alpha.2
 * https://www.chartjs.org
 * (c) 2020 Chart.js Contributors
 * Released under the MIT License
 */
/*!
 * @kurkle/color v0.1.9
 * https://github.com/kurkle/color#readme
 * (c) 2020 Jukka Kurkela
 * Released under the MIT License
 */
var E={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},P="0123456789ABCDEF",Y=function(t){return P[15&t]},F=function(t){return P[(240&t)>>4]+P[15&t]},O=function(t){return(240&t)>>4==(15&t)};function T(t){var e=function(t){return O(t.r)&&O(t.g)&&O(t.b)&&O(t.a)}(t)?Y:F;return t?"#"+e(t.r)+e(t.g)+e(t.b)+(t.a<255?e(t.a):""):t}function R(t){return t+.5|0}var A=function(t,e,r){return Math.max(Math.min(t,r),e)};function X(t){return A(R(2.55*t),0,255)}function j(t){return A(R(255*t),0,255)}function V(t){return A(R(t/2.55)/100,0,1)}function C(t){return A(R(100*t),0,100)}var Z=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;var I=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function U(t,e,r){var n=e*Math.min(r,1-r),o=function(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e+t/30)%12;return r-n*Math.max(Math.min(o-3,9-o,1),-1)};return[o(0),o(8),o(4)]}function D(t,e,r){var n=function(n){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(n+t/60)%6;return r-r*e*Math.max(Math.min(o,4-o,1),0)};return[n(5),n(3),n(1)]}function L(t,e,r){var n,o=U(t,1,.5);for(e+r>1&&(e*=n=1/(e+r),r*=n),n=0;n<3;n++)o[n]*=1-e-r,o[n]+=e;return o}function W(t){var e,r,n,o=t.r/255,a=t.g/255,f=t.b/255,i=Math.max(o,a,f),u=Math.min(o,a,f),c=(i+u)/2;return i!==u&&(n=i-u,r=c>.5?n/(2-i-u):n/(i+u),e=60*(e=i===o?(a-f)/n+(a<f?6:0):i===a?(f-o)/n+2:(o-a)/n+4)+.5),[0|e,r||0,c]}function N(t,e,r,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,r,n)).map(j)}function q(t,e,r){return N(U,t,e,r)}function H(t){return(t%360+360)%360}function K(t){var e,r=I.exec(t),n=255;if(r){r[5]!==e&&(n=r[6]?X(+r[5]):j(+r[5]));var o=H(+r[2]),a=+r[3]/100,f=+r[4]/100;return{r:(e="hwb"===r[1]?function(t,e,r){return N(L,t,e,r)}(o,a,f):"hsv"===r[1]?function(t,e,r){return N(D,t,e,r)}(o,a,f):q(o,a,f))[0],g:e[1],b:e[2],a:n}}}var z,B={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Q={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function G(t){z||((z=function(){var t,e,r,n,o,a={},f=Object.keys(Q),i=Object.keys(B);for(t=0;t<f.length;t++){for(n=o=f[t],e=0;e<i.length;e++)r=i[e],o=o.replace(r,B[r]);r=parseInt(Q[n],16),a[o]=[r>>16&255,r>>8&255,255&r]}return a}()).transparent=[0,0,0,0]);var e=z[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}function $(t,e,r){if(t){var n=W(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*r,0===e?360:1)),n=q(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function J(t,e){return t?f(e||{},t):t}function tt(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=j(t[3]))):(e=J(t,{r:0,g:0,b:0,a:1})).a=j(e.a),e}function et(t){return"r"===t.charAt(0)?function(t){var e,r,n,o=Z.exec(t),a=255;if(o){if(o[7]!==e){var f=+o[7];a=255&(o[8]?X(f):255*f)}return e=+o[1],r=+o[3],n=+o[5],{r:e=255&(o[2]?X(e):e),g:r=255&(o[4]?X(r):r),b:n=255&(o[6]?X(n):n),a:a}}}(t):K(t)}var rt=function(){function t(e){if(n(this,t),e instanceof t)return e;var o,a,f,i,u=r(e);"object"===u?o=tt(e):"string"===u&&(i=(a=e).length,"#"===a[0]&&(4===i||5===i?f={r:255&17*E[a[1]],g:255&17*E[a[2]],b:255&17*E[a[3]],a:5===i?17*E[a[4]]:255}:7!==i&&9!==i||(f={r:E[a[1]]<<4|E[a[2]],g:E[a[3]]<<4|E[a[4]],b:E[a[5]]<<4|E[a[6]],a:9===i?E[a[7]]<<4|E[a[8]]:255})),o=f||G(e)||et(e)),this._rgb=o,this._valid=!!o}return a(t,[{key:"rgbString",value:function(){return this._valid?(t=this._rgb)&&(t.a<255?"rgba(".concat(t.r,", ").concat(t.g,", ").concat(t.b,", ").concat(V(t.a),")"):"rgb(".concat(t.r,", ").concat(t.g,", ").concat(t.b,")")):this._rgb;var t}},{key:"hexString",value:function(){return this._valid?T(this._rgb):this._rgb}},{key:"hslString",value:function(){return this._valid?function(t){if(t){var e=W(t),r=e[0],n=C(e[1]),o=C(e[2]);return t.a<255?"hsla(".concat(r,", ").concat(n,"%, ").concat(o,"%, ").concat(V(t.a),")"):"hsl(".concat(r,", ").concat(n,"%, ").concat(o,"%)")}}(this._rgb):this._rgb}},{key:"mix",value:function(t,e){if(t){var r,n=this.rgb,o=t.rgb,a=e===r?.5:e,f=2*a-1,i=n.a-o.a,u=((f*i==-1?f:(f+i)/(1+f*i))+1)/2;r=1-u,n.r=255&u*n.r+r*o.r+.5,n.g=255&u*n.g+r*o.g+.5,n.b=255&u*n.b+r*o.b+.5,n.a=a*n.a+(1-a)*o.a,this.rgb=n}return this}},{key:"clone",value:function(){return new t(this.rgb)}},{key:"alpha",value:function(t){return this._rgb.a=j(t),this}},{key:"clearer",value:function(t){return this._rgb.a*=1-t,this}},{key:"greyscale",value:function(){var t=this._rgb,e=R(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}},{key:"opaquer",value:function(t){return this._rgb.a*=1+t,this}},{key:"negate",value:function(){var t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}},{key:"lighten",value:function(t){return $(this._rgb,2,t),this}},{key:"darken",value:function(t){return $(this._rgb,2,-t),this}},{key:"saturate",value:function(t){return $(this._rgb,1,t),this}},{key:"desaturate",value:function(t){return $(this._rgb,1,-t),this}},{key:"rotate",value:function(t){return function(t,e){var r=W(t);r[0]=H(r[0]+e),r=q(r),t.r=r[0],t.g=r[1],t.b=r[2]}(this._rgb,t),this}},{key:"valid",get:function(){return this._valid}},{key:"rgb",get:function(){var t=J(this._rgb);return t&&(t.a=V(t.a)),t},set:function(t){this._rgb=tt(t)}}]),t}();function nt(t){return function(t){return t instanceof CanvasGradient||t instanceof CanvasPattern}(t)?t:new rt(t)}var ot=function(t,e,r,n){return t<r?{cp1:{x:t+(r-t)/3*2,y:e},cp2:{x:t+(r-t)/3,y:n}}:{cp1:{x:t-(t-r)/3,y:0},cp2:{x:r+(t-r)/3,y:0}}},at=function(t,e,r){return{x:t.x+r*(e.x-t.x),y:t.y+r*(e.y-t.y)}},ft=function(t){i(r,t);var e=h(r);function r(t){var o;return n(this,r),(o=e.call(this)).options=void 0,o.x=void 0,o.y=void 0,o.x2=void 0,o.y2=void 0,o.height=void 0,t&&f(l(o),t),o}return a(r,[{key:"draw",value:function(t){var e=this,r=e.x,n=e.x2,o=e.y,a=e.y2,f=e.height,i=e.progress,u=ot(r,o,n,a),c=u.cp1,l=u.cp2,s=e.options;if(0!==i){t.save(),i<1&&(t.beginPath(),t.rect(r,Math.min(o,a),(n-r)*i+1,Math.abs(a-o)+f+1),t.clip());var h=t.createLinearGradient(r,0,n,0);h.addColorStop(0,nt(s.colorFrom).alpha(.5).rgbString()),h.addColorStop(1,nt(s.colorTo).alpha(.5).rgbString()),t.fillStyle=h,t.strokeStyle=h,t.lineWidth=.5,t.beginPath(),t.moveTo(r,o),t.bezierCurveTo(c.x,c.y,l.x,l.y,n,a),t.lineTo(n,a+f),t.bezierCurveTo(l.x,l.y+f,c.x,c.y+f,r,o+f),t.lineTo(r,o),t.stroke(),t.closePath(),t.fill(),t.restore()}}},{key:"inRange",value:function(t,e,r){var n=this.getProps(["x","y","x2","y2","height"],r),o=n.x,a=n.y,f=n.x2,i=n.y2,u=n.height;if(t<o||t>f)return!1;var c=ot(o,a,f,i),l=c.cp1,s=c.cp2,h=(t-o)/(f-o),d={x:f,y:i},y=at({x:o,y:a},l,h),g=at(l,s,h),b=at(s,d,h),v=at(y,g,h),p=at(g,b,h),m=at(v,p,h).y;return e>=m&&e<=m+u}},{key:"inXRange",value:function(t,e){var r=this.getProps(["x","x2"],e),n=r.x,o=r.x2;return t>=n&&t<=o}},{key:"inYRange",value:function(t,e){var r=this.getProps(["y","y2","height"],e),n=r.y,o=r.y2,a=r.height,f=Math.min(n,o),i=Math.max(n,o)+a;return t>=f&&t<=i}},{key:"getCenterPoint",value:function(t){var e=this.getProps(["x","y","x2","y2","height"],t),r=e.x,n=e.y;return{x:(r+e.x2)/2,y:(n+e.y2+e.height)/2}}},{key:"tooltipPosition",value:function(){return this.getCenterPoint()}},{key:"getRange",value:function(t){return"x"===t?this.width/2:this.height/2}}]),r}(t.Element);ft.id="flow",ft.defaults={colorFrom:"red",colorTo:"green"},e.register(_,ft)}));
