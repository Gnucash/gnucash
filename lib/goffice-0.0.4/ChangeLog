2005-09-08  Jody Goldberg <jody@gnome.org>

	* Release 0.0.4

2005-09-05  Jody Goldberg <jody@gnome.org>

	* goffice/utils/format.c (go_format_number) : Show 0/??? for fractions
	  with no integer component. [#315018]

2005-09-05  Jody Goldberg <jody@gnome.org>

	* goffice/utils/go-format-match.c (format_create_regexp) : match
	  correct number of digits in denominator.

2005-09-05  Stepan Kasal  <kasal@ucw.cz>

	* goffice/graph/gog-reg-curve.c (skip_invalid_toggled_cb): Move this
	function next to gog_reg_curve_populate_editor, where it is used.
	(gog_reg_curve_set_property), (gog_reg_curve_class_init): Fix consts.

2005-09-05  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-reg-curve-prefs.glade: add a check box to allow
	invalid data skipping [#312788].
	* goffice/graph/gog-reg-curve.c: (skip_invalid_toggled_cb),
	(gog_reg_curve_populate_editor), (gog_reg_curve_get_property),
	(gog_reg_curve_set_property), (gog_reg_curve_class_init): ditto.
	* goffice/graph/gog-reg-curve.h: add skip_invalid to GogRegCurve and
	remove obsolete members.
	* plugins/reg_linear/gog-lin-reg.c: (gog_lin_reg_curve_update): use
	GogRegCurve::skip_invalid [#312788] and use code in go-regression.c.

2005-09-04  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-renderer-svg.c (fill_properties): set fill pattern
	opacity.

2005-09-02  Jody Goldberg <jody@gnome.org>

	* goffice/app/io-context.c (gnm_io_context_processing_file) : people
	  do not want to see escaped uri's in the progress bar.

2005-09-02  Jody Goldberg <jody@gnome.org>

	* goffice/utils/format.c : Add GOFormatElement::forces_text.
	(format_entry_ctor) : initialize it to FALSE.
	(format_compile) : '@' sets it to TRUE.

2005-08-31  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/Makefile.am: add go-regression.* and go-rangefuncs.*
	* goffice/utils/go-rangefunc.c: imported various functions from gnumeric
	and build both double and long double versions if long double is available.
	* goffice/utils/go-rangefunc.h: ditto.
	* goffice/utils/go-regression.c: ditto.
	* goffice/utils/go-regression.h: ditto.

2005-08-29  Jody Goldberg <jody@gnome.org>

	* goffice/utils/format-impl.h : s/StyleFormatEntry/GOFormatElement/
	  Move the regexp into here from.
	* goffice/utils/go-format.h : here.
	  s/StyleFormat/GOFormat/

2005-08-26  Jody Goldberg <jody@gnome.org>

	* goffice/graph/gog-plot.c (gog_plot_new_series) : add some safety.
	* goffice/graph/gog-data-set.c (gog_dataset_set_dim) : add some safety
	  for invalid datasets, being careful to avoid leaking the new val.

2005-08-24  Stepan Kasal  <kasal@ucw.cz>

	The roles hash is now inherited by subclasses, with copy-on-write.

	* goffice/graph/gog-object.h (GogObject) <roles_allocated>: New flag,
	indicates whether this function is resposible to free the hash.
	(gog_object_unregister_role): Removed.
	* goffice/graph/gog-object.c (gog_object_unregister_role): Removed.
	(gog_object_base_finalize): Free the hash, if it's ours.
	(gog_object_base_init): Set roles_allocated to FALSE, indicating that
	the inherited hash is read-only.
	(gog_object_register_roles): When first used for a class, call ...
	(gog_object_allocate_roles): ... this new function, which creates
	a new hash and fill is with inherited values, if any, using...
	(cb_copy_hash_table): ... this new helper function.

	* goffice/graph/gog-series.c (gog_series_base_init): Nuke, moving the
	roles registration code ...
	(gog_series_class_init): ... here.
	* plugins/plot_barcol/gog-1.5d.c (gog_series1_5d_base_class_finalize): Nuke.
	* plugins/plot_xy/gog-xy.c (gog_xy_series_base_finalize): Nuke.

2005-08-24  Stepan Kasal  <kasal@ucw.cz>

	* goffice/utils/go-math.c (go_math_init): Fix the bugzilla URL.

2005-08-18  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-reg-curve.c (gog_reg_curve_view_render): clip to
	residual area.
	* plugins/plot_xy/gog-xy.c (gog_xy_view_render): don't clip children,
	we want to be able to show equation outside of plot area.

2005-08-18  Stepan Kasal  <kasal@ucw.cz>

	* goffice/utils/go-pattern.c (go_pattern_get_svg_path): Issue an
	  error if the pattern is not found.
	* plugins/plot_xy/gog-xy.c (gog_xy_view_render): Silence the compiler.

2005-08-18  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	Make GogRegEqn and GogLabel a derived class of GogText.

	* goffice/graph/gog-reg-eqn.[ch]: removed.
	* goffice/graph/Makefile.am: remove references to gog-reg-eqn.[ch].
	* goffice/graph/gog-label.c: rename GogLabel class to GogText.
	Implement GogLabel as a derived class of GogText and a GogDataSet
	interface.
	(gog_text_get_str): new.
	Implement GogRegEqn as a derived class of GogText.
	(gog_reg_eqn_populate_editor): remove code related to position.
	(gog_reg_eqn_class_init): remove position properties.
	rename GogLabelView to GogTextView.
	(gog_text_view_render): get content from gog_text_get_str.
	* goffice/graph/gog-reg-eqn-prefs.glade: fix layout. Remove position
	widgets.
	* goffice/graph/gog-reg-curve-prefs.glade: fix layout.

2005-08-16  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	Fix position constistency between discrete and linear axes. Enable
	user set bounds for discrete axes [#309468].

	* goffice/graph/gog-chart.c (gog_chart_map_new): th1 = maximum now, 
	not maximum + 1.
	(calc_polygon_parameters): ditto. take start theta (th0) into 
	account.
	* goffice/graph/gog-axis-line.c (axis_circle_render): ditto.
	(radar_process): ditto.
	* goffice/graph/gog-grid-line.c (gog_grid_line_view_render): ditto.
	* goffice/graph/gog-grid.c (gog_grid_view_render): ditto.
	* goffice/utils/go-math.c (go_rint): new.
	* goffice/graph/gog-axis.c (map_discrete_calc_ticks): fix label when
	minimum != 1.
	(gog_axis_populate_editor): enable minimum et maximum editor for
	discrete axes.
	* plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_axis_get_bounds):
	minimum = 1.0 now.
	* plugins/plot_barcol/gog-barcol.c (gog_barcol_view_render): use GogChartMap
	facilities. minimum = 1.0 now.
	* plugins/plot_barcol/gog-line.c (gog_line_view_render): minimum = 1.0 now.
	* plugins/plot_radar/gog-radar.c (gog_rt_plot_update): ditto.
	(gog_rt_view_render): take start theta (th0) into account.
	
2005-08-17  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_boxes/gog-boxplot.c: (gog_box_plot_update),
	(gog_box_plot_view_render), (float_compare),
	(gog_box_plot_series_update): use raw data instead of min, max, median
	and quartiles. Fixes #308136.
	* plugins/plot_boxes/plot-types.xml.in: removed obsolete comment.

2005-08-16  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* plugins/plot_xy/gog-xy.c (gog_xy_view_render): use GogChartMap
	facilities.
	* plugins/plot_barcol/gog-line.c (gog_line_view_render): ditto. be 
	consistent with GogXYPlot. 

2005-08-16  Stepan Kasal  <kasal@ucw.cz>

	* goffice/graph/gog-axis.c (gog_axis_get_grid_line): Fix typo
	  in the comment.

2005-08-15  Morten Welinder <terra@gnome.org>

	* configure.in: Post release bump

2005-08-15  Morten Welinder <terra@gnome.org>

	* Release 0.0.3

2005-08-15  Jean Brefort  <jean.brefort@normalesup.org>
	* goffice/graph/gog-object-xml.c: (gog_object_new_from_xml): return NULL
	if dynamic type is not available.

2005-08-15  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-guru.c (cb_graph_guru_add_plot): call
	gog_plot_guru_helper if plot is added from porerty editor page.

2005-08-15  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-axis.c (map_bounds): minimum or maximum may be
	NULL.
	(map_log_bounds): ditto.
	* goffice/graph/gog-series-lines.c (gog_series_lines_render): draw
	sharp lines.
	* plugins/plot_xy/gog-xy.c (gog_xy_view_render): draw drop lines from
	point to axis start.

2005-08-15  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/goffice-graph.h: new GOG_POSITION_IS_SPECIAL and
	GOG_POSITION_IS_PADDING macros for determining GogPosition type.
	Simple == test doesn't work.
	* goffice/graph/gog-axis.c (gog_axis_view_padding_request): use these
	macros.
	(gog_axis_view_size_allocate): ditto.
	* goffice/graph/gog-chart.c (gog_chart_view_size_allocate): ditto.
	* goffice/graph/gog-graph.c (gog_graph_view_size_allocate): ditto.
	* goffice/graph/gog-view.c (gog_view_padding_request_real): ditto.
	(gog_view_size_allocate_real): ditto.
	(gog_view_size_child_request): ditto.
	* goffice/graph/gog-object.c (gog_object_position_cmp): ditto.
	(gog_object_populate_editor): fix manual_toggle widget handling.
	(cb_anchor_changed): set position to manual if anchor changes.

2005-08-14  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	Fix clipping of polar plots. Renamed all clip_push, clip_pop functions
	to push_clip, pop_clip for consistency with push_style, pop_style.

	* goffice/graph/gog-renderer-gnome-print.c 
	(print_make_rectangle_path): removed.
	(gog_renderer_gnome_print_push_clip): clipping region is a path now.
	(gog_renderer_gnome_print_draw_path): clip dashed line to graph bbox.
	(gog_renderer_gnome_print_draw_polygon): ditto.
	(gog_graph_print_to_gnome_print): stire graph bbox.
	* goffice/graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_push_clip):
	handle clipping region as path, assuming nested region is included in
	parent one.
	(gog_renderer_pixbuf_pop_clip): free clip svp.
	(gog_renderer_pixbuf_do_clip): new.
	(gog_renderer_pixbuf_draw_path): call gog_renderer_pixbuf_do_clip.
	clip dashed line to graph bbox.
	(gog_renderer_pixbuf_draw_polygon): ditto.
	* goffice/graph/gog-renderer-svg.c (gog_renderer_svg_push_clip): 
	clipping region is a path now.
	* goffice/graph/gog-renderer.c (gog_renderer_push_clip): ditto.
	(gog_renderer_pop_clip): ditto. Free clip_path.
	(gog_renderer_get_rectangle_vpath): new.
	* goffice/graph/gog-view.c (gog_view_render): clipping region is a
	path now.
	* plugins/plot_barcol/gog-line.c (gog_line_view_render): ditto.
	* plugins/plot_radar/gog-radar.c (gog_rt_plot_guru_helper): force
	auto_dash to FALSE.
	(gog_rt_view_render): add correct polar clipping.
	(gog_rt_series_init_style): don't disable marker theming.
	
2005-08-14  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-series.c: (gog_series_class_init),
	(gog_series_base_init): moved roles registering from class_init to
	base_init.

2005-08-13  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-chart.c: (calc_circle_parameters): fix a dangerous
	comparison and avoid resulting infinite loops.

2005-08-13  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-view.c (gog_view_info_at_point): walk the list in
	reverse order.

2005-08-12  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	Add pattern support for SVG renderer [#310320].

	* goffice/graph/gog-renderer-svg.c (fill_properties): add support for
	patterns.
	* goffice/utils/Makefile.am: install svg-patterns.xml in
	goffice_datadir/patterns.
	* goffice/utils/go-pattern.c: fix thin-rev-diag str in go_patterns.
	(go_pattern_get_svg_path): new.
	* goffice//utils/svg-patterns.xml: new.
	
2005-08-12  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-grid-line.c: (gog_grid_line_view_render):
	fix a memory leak
	* goffice/graph/gog-plot.c: (gog_plot_finalize): and one more.

2005-08-12  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-object.c: (gog_object_clear_parent),
	(gog_object_set_parent): do not set class before checking object validity.

2005-08-11  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-format-match.c (format_create_regexp): Fix
	buffer overrun problem exibited while loading file from #313150.

2005-08-11  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/app/go-plugin-loader-module.c: updated to new
	GSF_CLASS_FULL signature.
	* goffice/app/io-context.c: ditto.
	* goffice/graph/gog-axis-line.c: ditto.
	* goffice/graph/gog-axis.c: ditto.
	* goffice/graph/gog-error-bar.c: ditto.
	* goffice/graph/gog-label.c: ditto.
	* goffice/graph/gog-reg-curve.c: ditto.
	* goffice/graph/gog-series.c: ditto.
	* goffice/graph/gog-style.c: ditto.
	* plugins/plot_barcol/gog-1.5d.c: updated to new
	GSF_DYNAMIC_CLASS_FULL signature.
	* plugins/plot_xy/gog-xy.c: ditto and use base_finalize instead
	of class_finalize.

2005-08-10  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-axis-line.c (axis_circle_render): fix label
	overlap of 0째 and 360째 ticks.

	GogPlot::guru_helper implementation for automatic addition of objects
	when creating graphs in guru.

	* goffice/graph/gog-axis.c (role_grid_line_can_add): removed.
	(role_grid_line_major_can_add): use new gog_axis_get_grid_line
	function.
	(role_grid_line_minor_post_add): ditto.
	(gog_axis_get_grid_line): new.
	* goffice/graph/gog-chart.c (role_plot_pre_remove): remove
	GogChart::grid if new axis set is not compatible.
	(role_grid_can_add): add GOG_AXIS_SET_RADAR in list of axis sets
	compatible with GogGrid.
	(gog_chart_axis_set_assign): don't handle GogGrid object here.
	* goffice/graph/gog-guru.c (graph_typeselect_minor): remove current
	chart, not only plot. Call GogPlot::guru_helper for additionnal
	objects.
	* goffice/graph/gog-plot.c (gog_plot_set_property): add new guru-hints
	property, which is a semicolon separated list of hints for
	GogPlot::guru_helper.
	(gog_plot_get_property): ditto.
	(gog_plot_class_init): ditto.
	(gog_plot_guru_helper_add_grid_line): new.
	(gog_plot_guru_helper): new.
	* plugins/plot_barcol/plot_types.xml.in: add "backplane" hint for all
	plots.
	* plugins/plot_box_plot/plot_types.xml.in: ditto.
	* plugins/plot_radar/gog-radar.c (gog_rt_plot_guru_helper): new.
	Handle "circular-no-line" guru hint.
	* plugins/plot_radar/plot-types.xml.in: add "circular-no-line" hint to
	radar plots. add "major-grid" and "backplane" to polar plot.
	* plugins/plot_xy/plot-types.xml.in: add "backplane" to all plots.
	
2005-08-10  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-1.5d.c:
	(gog_series1_5d_register_type): use base_finalize instead of
	class_finalize since we have derived classes.

2005-08-08  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* *: Updated FSF's address.

2005-08-07  Stepan Kasal  <kasal@ucw.cz>

	* goffice/graph/Makefile.am (goffice_gladedir): Rename to ...
	(gladedir): ..., to prevent conflicts--goffice_gladedir is AC_SUBSTed.
	* goffice/gtk/Makefile.am (goffice_gladedir, gladedir): Likewise.

2005-08-06  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/goffice.c: (libgoffice_init): add call to GOG_SERIES_LINES_TYPE.
	* goffice/graph/Makefile.am: add gog-series-lines.[c,h].
	* goffice/graph/gog-object.c: (gog_object_unregister_role): new function.
	* goffice/graph/gog-object.h: ditto.
	* goffice/graph/gog-series-lines.c: moved from plugins/plot_barcol.
	* goffice/graph/gog-series-lines.h: ditto.
	* plugins/plot_barcol/Makefile.am: remove gog-series-lines.[c,h].
	* plugins/plot_barcol/gog-1.5d.c: (gog_series1_5d_class_finalize),
	(gog_series1_5d_get_type), (gog_series1_5d_register_type),
	(go_plugin_init): unregister roles when class is destroyed.
	* plugins/plot_barcol/gog-barcol.c: update path to gog-series-lines.h.
	* plugins/plot_barcol/gog-dropbar.c: ditto.
	* plugins/plot_barcol/gog-line.c: ditto.
	* plugins/plot_barcol/gog-minmax.c: ditto.
	* plugins/plot_barcol/gog-series-lines.c: moved to goffice/graph/.
	* plugins/plot_barcol/gog-series-lines.h: ditto.
	* plugins/plot_xy/gog-xy.c: add horizontal and vertical droplines.
	* plugins/plot_xy/gog-xy.h: ditto.

2005-08-04  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-line.c (go_line_build_bpath): do not access data
	outside of allocated arrays.

2005-08-04  Stepan Kasal  <kasal@ucw.cz>

	* goffice/utils/go-file.c: #include unistd.h, for dup().

2005-08-04  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	Allow user to delete all plots of a chart and re-add new plots with
	different axis set.

	* goffice/graph/gog-axis-line.c (gog_axis_base_get_crossed_axis_type):
	handle GOG_AXIS_SET_UNKNOW.
	(gog_axis_base_view_info_at_point): ditto. Do nothing.
	(gog_axis_base_view_padding_request): ditto.
	(gog_axis_base_view_render): ditto.
	* goffice/graph/gog-chart.c (role_plot_pre_remove): if there's no plot
	left, reset axis_set to GOG_AXIS_SET_UNKNOW.
	(gog_chart_axis_set_assign): don't touch axes if axis_set ==
	GOG_AXIS_SET_UNKNOW.
	* goffice/graph/gog-guru.c (cb_graph_guru_delete_item): select parent
	row after item is deleted, because if we do this before, parent->add
	submenu is sometimes incorrect.

2005-08-04  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-axis-line.c (gog_axis_base_view_info_at_point):
	handle GOG_AXIS_SET_XY_pseudo_3d.
	* goffice/graph/gog-chart.c (gog_axis_set_from_str): new.
	* goffice/graph/gog-guru.c (cb_plot_family_menu_create): show only
	family with compatible axis set.
	* goffice/graph/gog-label.c (gog_label_init_style): only change text
	orientation if auto flag is TRUE.
	* goffice/graph/gog-plot-engine.c (cb_pending_plot_types_load): load
	axis_set from plot-types.xml.
	(gog_plot_family_register): set axis_set.
	* goffice/graph/gog-plot-impl.h: now store axis_set in GogPlotClass. No
	need for GogPlot::axis_set_pref, GogPlot::axis_set_is_valid and
	GogPlot::axis_set_assign.
	* goffice/graph/gog-plot.c (gog_plot_axis_set_pref): use
	GogPlot::axis_set.
	(gog_plot_axis_set_is_valid): ditto.
	(gog_plot_axis_set_assign): ditto.
	* goffice/graph/gog-style.c (gog_style_assign): assign
	GogStyle::text_layout.auto_angle too.
	(gog_style_force_auto): init GogStyle::text_layout.auto_angle.
	(gog_style_set_text_angle): force auto_angle to FALSE.
	* goffice/gtk/goffice-gtk.c (go_gtk_button_new_with_stock): fix
	compilation warning.
	* plugins/plot_*/gog*.c: remove axis_set_pref, axis_set_is_valid,
	axis_set_assign functions. Set GogPlotClass::axis_set value.
	* plugins/plot_*/plot-types.xml.in: Add axis_set property.
	
2005-08-04  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* README, configure.in: Bumped libgsf requirements as
	goffice/utils/go-file.c needs gsf_input_stdio_new_FILE which is only in
	libgsf HEAD.

2005-08-03  Jody Goldberg <jody@gnome.org>

	* goffice/gtk/goffice-gtk.c (go_gtk_button_new_with_stock) : Use
	  gtk_button_set_image to avoid the kludgery that broken settings.
	(go_gtk_dialog_add_button) : merged from gnumeric.

2005-08-03  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-file.c (go_file_open): Handle URIs like "fd://0".

2005-08-03  Stepan Kasal  <kasal@ucw.cz>

	* goffice/graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_text):
	  Fix a typo; add an initialization to silence a warning.

2005-08-03  Stepan Kasal  <kasal@ucw.cz>

	In many Makefile.am's, use the "dist_" prefix instead of adding the
	variable to EXTRA_DIST.
	* goffice/graph/Makefile.am (cairo_sources, cairo_headers): Nuke;
	  instead, append to the variables directly.

2005-08-03  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	Cairo renderer build fixes.

	* goffice/graph/gog-renderer-cairo.c (gog_renderer_cairo_draw_text):
	fix size.
	(gog_renderer_cairo_get_text_OBR): ditto.
	(gog_renderer_cairo_update): graph size is a property of GogGraph now.

2005-07-28  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	Who said text angle is not a style property ?

	* goffice/graph/gog-axis-line.c (gog_axis_base_set_property): remove
	label-angle property.
	(gog_axis_base_get_property): ditto.
	(gog_axis_base_class_init): ditto.
	(gog_axis_base_set_label_angle): removed.
	(cb_label_angle_changed): removed.
	(gog_axis_base_populate_editor): remove UI for label angle.
	* goffice/graph/gog-axis-prefs.glade: ditto.
	* goffice/graph/gog-axis.c (role_label_post_add): removed.
	(role_label_can_add): new.
	(gog_axis_init_style): if axis is GOG_AXIS_PSEUDO_3D, no style.
	* goffice/graph/gog-label.c (gog_label_set_angle): removed.
	(gog_label_set_property): remove angle property.
	(gog_label_get_property): ditto.
	(gog_label_class_init): ditto.
	(label_pref_state_free): removed.
	(cb_angle_changed): removed.
	(gog_label_populate_editor): remove UI for angle.
	(gog_label_init_style): set text angle to 90 if parent is an Y axis.
	* goffice/graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_text): text_angle is a style property.
	* goffice/graph/gog-renderer-pixbuf.c
	(gog_renderer_pixbuf_get_pango_layout): ditto.
	* goffice/graph/gog-renderer-svg.c (gog_renderer_svg_draw_text):
	ditto.
	* goffice/graph/gog-renderer.c (gog_renderer_get_text_OBR): ditto.
	(gog_renderer_push_style): no more
	angle property in renderer.
	(gog_renderer_pop_style): ditto.
	(gog_renderer_set_text_angle): removed.
	* goffice/graph/gog-style-prefs.glade: add a new UI for text layout
	group.
	* goffice/graph/gog-style (cb_angle_changed): new.
	(text_layout_init): new.
	(gog_style_assign): handle angle.
	(gog_style_init): ditto.
	(gog_style_text_layout_load): new.
	(gog_style_text_layout_dom_save): new.
	(gog_style_text_layout_sax_save): new.
	(gog_style_persist_dom_load): handle angle.
	(gog_style_persist_dom_save): ditto.
	(gog_style_persist_sax_save): ditto.
	(gog_style_is_different_size): ditto.
	(gog_style_set_text_angle): new.
	* goffice/graph/gog-styled-object.c (styled_object_populate_editor):
	don't display style editor if there isn't any interresting fields.

2005-07-27  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	Code cleanup. Remove bbox parameter of GogRenderer:draw functions.
	It was a previous attempt to do clipping, which is handled by
	gog_renderer_clip_push and gog_renderer_clip_pop for quite a long
	time now.
	
	Modified Files:

	ChangeLog goffice/graph/gog-axis-line.c 
	goffice/graph/gog-error-bar.c goffice/graph/gog-grid-line.c 
	goffice/graph/gog-grid.c goffice/graph/gog-label.c 
	goffice/graph/gog-legend.c goffice/graph/gog-outlined-object.c 
	goffice/graph/gog-reg-curve.c goffice/graph/gog-reg-eqn.c 
	goffice/graph/gog-renderer-cairo.c 
	goffice/graph/gog-renderer-gnome-print.c 
	goffice/graph/gog-renderer-impl.h 
	goffice/graph/gog-renderer-pixbuf.c 
	goffice/graph/gog-renderer-svg.c goffice/graph/gog-renderer.c 
	goffice/graph/gog-renderer.h plugins/plot_barcol/gog-barcol.c 
	plugins/plot_barcol/gog-dropbar.c 
	plugins/plot_barcol/gog-line.c 
	plugins/plot_barcol/gog-minmax.c 
	plugins/plot_barcol/gog-series-lines.c 
	plugins/plot_boxes/gog-boxplot.c plugins/plot_pie/gog-pie.c 
	plugins/plot_radar/gog-radar.c 
	plugins/plot_surface/gog-surface.c plugins/plot_xy/gog-xy.c 

2005-07-27  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	Text angle is not a font property.
	Set default angle to 90째 for y axes (#301582).
	
	* goffice/graph/gog-axis-line.c (gog_axis_base_class_init): install
	label_angle property.
	(gog_axis_base_set_property): handle label_angle property.
	(gog_axis_base_get_property): ditto.
	(gog_axis_base_set_label_angle): new.
	(cb_label_angle_changed): new.
	(gog_axis_base_populate_editor): init UI for label_angle.
	(gog_axis_base_view_padding_request): set text angle.
	(gog_axis_base_view_render): ditto.
	* goffice/graph/gog-axis-prefs.glade: add UI for label angle.
	* goffice/graph/gog-axis.c (role_label_post_add): new. Sets label
	angle to 90째 for y axis.
	(gog_axis_class_init): add role_label_post_add.
	* goffice/graph/gog-label-prefs.glade: new.
	* goffice/graph/gog-label.c (gog_label_set_angle): new.
	(gog_label_class_init): handle angle property.
	(gog_label_set_property): ditto.
	(gog_label_get_property): ditto.
	(label_pref_state_free): new.
	(cb_angle_changed): new.
	(gog_label_populate_editor): add layout page for angle setting.
	(gog_label_init): new.
	(gog_label_view_size_request): set text angle.
	(gog_label_view_render): ditto.
	* goffice/graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_text): text_angle is a property of
	renderer.
	* goffice/graph/gog-renderer-pixbuf.c
	(gog_renderer_pixbuf_get_pango_layout): ditto.
	* goffice/graph/gog-renderer-svg.c (gog_renderer_svg_draw_text):
	ditto.
	* goffice/graph/gog-renderer.c (gog_renderer_push_style): reset text
	angle.
	(gog_renderer_pop_style): ditto.
	(gog_renderer_set_text_angle): new.
	(gog_renderer_get_text_OBR): text_angle is a property of renderer.
	* goffice/graph/gog-style-prefs.glade: remove UI for angle.
	* goffice/graph/gog-style.c (cb_rotation_angle_changed): removed.
	(font_init): remove angle UI.
	(gog_style_font_load): remove rotation_angle setting.
	(gog_style_font_dom_save): ditto.
	(gog_style_font_sax_save): ditto.							    

2005-07-25  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-object-prefs.glade: remove chart preference
	dialog and move it to gog-chart-prefs.glade.
	* goffice/graph/gog-chart-prefs.glade: new.
	* goffice/graph/gog-chart.c (cb_plot_area_changed): actually use
	signal handlers.
	(gog_chart_populate_editor): ditto.

2005-07-25  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	Implementation of manual position of graph objects.

	* goffice/graph/goffice-graph.h: new modifier flags in
	GogObjectPosition for manual position.
	* goffice/graph/gog-axis.c (gog_axis_class_init): Label can be
	positionned manually.
	(gog_axis_view_padding_request): GOG_POSITION_MANUAL supersedes
	GOG_POSITION_SPECIAL.
	(gog_axis_view_size_allocate): handle GOG_POSITION_MANUAL case.
	* goffice/graph/gog-chart-impl.h: plot_area stores plot area position
	in fraction of chart size. new is_plot_area_manual flag.
	* goffice/graph/gog-chart.c (gog_chart_set_property): new.
	(gog_chart_get_property): handles plot-area and is-plot-area-manual
	properties.
	(chart_pref_state_free): new.
	(cb_plot_area_changed): new.
	(cb_manual_toggle_changed): new.
	(gog_chart_populate_editor): new.
	(gog_chart_class_init): reorder childs. Still need some work for a
	nice display in object tree.  Install plot-area and 
	is-plot_area-manual properties.
	(gog_chart_get_plot_area): new.
	(gog_chart_set_plot_area): new.
	(gog_chart_view_get_plot_area): plot area extents are stored in
	GogChartView::plot_area now.
	(gog_chart_view_size_allocate): handle manual case.
	(gog_chart_view_class_init): don't clip to chart area.
	* graph/goffice/gog-control-foocanvas
	(gog_control_foocanvas_set_property): remove logical_width_pts and
	logical_height_pts properties. These are properties of GogGraph now.
	(gog_control_foocanvas_get_property): ditto.
	(gog_control_foocanvas_class_init): ditto.
	* goffice/graph/gog-graph.c (gog_graph_set_property): handle new width-pts 
	and height-pts properties.
	(gog_graph_get_property): ditto.
	(gog_graph_class_init): ditto. Chart and Title object can be
	positionned manually.
	(gog_graph_get_size): new.
	(gog_graph_set_size): new.
	* goffice/graph/gog-guru.c (cb_typesel_sample_plot_resize): don't
	change graph logical size.
	(cb_sample_pressed): don't change canvas scale.
	(cb_canvas_select_item): center graph on canvas.
	(cb_sample_plot_resize): calculate graph size to make it fit in canvas
	area.
	(graph_guru_init_format_page): don't change canvas scale.
	* goffice/graph/gog-object.c (gog_object_set_property): handle new
	position, position-is-manual and anchor properties.
	(gog_object_get_property): ditto.
	(gog_object_class_init): ditto.
	(cb_position_changed): new.
	(cb_manual_position_changed): new.
	(cb_anchor_changed): new.
	(gog_object_populate_editor): new UI for manual position setting.
	(gog_role_cmp): test priority first, then compare allowable positions.
	(gog_object_set_position_flags): emit a warning in case of wrong
	flags.
	(gog_object_get_manual_position): new.
	(gog_object_set_manual_position): new.
	(gog_object_get_manual_allocation): new.
	* goffice/graph/gog-plot.c (gog_plot_populate_editor): allways call parent
	populate_editor.
	* goffice/graph/gog-renderer-pixbuf.c
	(gog_renderer_pixbuf_get_text_OBR): use pango_layout_get_extents
	instead of pango_layout_get_pixel_extents for more accuracy.
	(gog_renderer_pixbuf_update): logical width and height of graph is a
	property of GogGraph now.
	* goffice/graph/gog-renderer.c (gog_renderer_set_property): remove
	logical_width_pts and logical_height_pts properties.
	(gog_renderer_get_property): ditto.
	(gog_renderer_class_init): ditto.
	* goffice/graph/gog-view.c (gog_view_size_allocate_real): handle
	manual case.
					    
2005-07-22  Chris Lahey  <clahey@our.domain.is.not.set>

	* goffice/drawing/god-drawing-renderer-gdk.c: Remove * .7 hack
	since it's been fixed in parsing code.

2005-07-21  Chris Lahey  <clahey@site>

	* goffice/drawing/god-drawing-renderer-gdk.c,
	goffice/drawing/god-paragraph-attributes.c,
	goffice/drawing/god-paragraph-attributes.h: Add support for
	setting whether the bullet is drawn for a particular paragraph.

2005-07-19  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/grah/gog-axis-line.c (gog_axis_base_get_crossed_axis_type):
	don't complain when axis_set = GOG_AXIS_SET_X.
	(axis_line_get_bbox): scale tick len with gog_renderer_pt2r instead of
	gog_renderer_pt2r_x.
	(axis_line_render): ditto.
	(axis_circle_get_bbox): ditto.
	(axis_circle_render): ditto.
	(x_process): use correct enum for label/tick side, which fixes a
	display bug.

2005-07-15  Dom Lachowicz <cinamod@hotmail.com>

	* goffice/utils/go-file.c (go_get_mime_type): Free 'wuri' if mime lookup failed;
	have function return "application/octet-stream" instead of "octet-string";
	g_strdup() the "application/octet-stream" so that we don't try to free .text data
	
2005-07-15  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-legend.c (cb_render_elements): fix swatch,
	line/marker position.

2005-07-11  Morten Welinder  <terra@gnome.org>

	* configure.in (set_more_warnings): Check for fdopen.

	* goffice/utils/go-file.c (is_fd_uri): New function.
	(go_file_create): Support URIs like "fd://1".

2005-07-01  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/data/go-data-simple.c: (go_data_vector_str_load_values): set
	vec->len (fixes a crash when pasting charts in abiword).
	* goffice/graph/goffice-graph.h: change GOG_MS_DIM_* enum.
	* goffice/graph/gog-data-set.c: (gog_dataset_dup_to_simple): fix export of
	scalar strings.
	* goffice/graph/gog-plot.c: (gog_plot_finalize),
	(gog_plot_set_property), (gog_plot_get_property),
	(gog_plot_class_init), (gog_plot_init): add "plot_group" property.
	* goffice/graph/gog-plot.h:
	* pixmaps/chart_dropbar_1_1.svg:
	* pixmaps/chart_minmax_2_2.svg:
	* plugins/plot_barcol/Makefile.am:
	* plugins/plot_barcol/gog-1.5d.c: (go_plugin_init):
	* plugins/plot_barcol/gog-dropbar.c: (gog_dropbar_plot_class_init):
	update GOG_MS_DIM_*.
	* plugins/plot_barcol/gog-minmax.c: (gog_minmax_axis_get_bounds):
	set center_on_ticks to FALSE,
	(gog_minmax_plot_class_init): update  GOG_MS_DIM_*.

2005-06-26  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-theme.c: (gog_themes_init): add GogSeriesLines.
	* plugins/plot_barcol/Makefile.am: add gog-series-lines.[c,h].
	* plugins/plot_barcol/gog-1.5d.c: (gog_plot1_5d_init),
	(series_lines_can_add), (series_lines_post_add),
	(series_lines_pre_remove), (drop_lines_can_add),
	(drop_lines_post_add), (drop_lines_pre_remove), (lines_can_add),
	(lines_post_add), (lines_pre_remove), (gog_series1_5d_class_init),
	(gog_series1_5d_init), (go_plugin_init): add support for various lines.
	* plugins/plot_barcol/gog-1.5d.h: ditto.
	* plugins/plot_barcol/gog-barcol.c: (gog_barcol_plot_init),
	(gog_barcol_view_render): added series lines.
	* plugins/plot_barcol/gog-dropbar.c: (gog_dropbar_plot_init),
	(barcol_draw_rect), (gog_dropbar_view_render): added lines.
	* plugins/plot_barcol/gog-line.c: (gog_line_plot_init),
	(gog_area_plot_init), (gog_line_view_render): added drop lines.
	* plugins/plot_barcol/gog-minmax.c: (gog_minmax_plot_init),
	(gog_minmax_view_render): added lines.
	* plugins/plot_barcol/gog-series-lines.c:
	(gog_series_lines_init_style), (gog_series_lines_update),
	(gog_series_lines_changed), (gog_series_lines_class_init),
	(gog_series_lines_render): support for lines in various plots.
	* plugins/plot_barcol/gog-series-lines.h: ditto.

2005-06-24  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-legend.c: (cb_size_elements),
	(gog_legend_view_size_request): use legned style to calculate elements
	height.

2005-06-21  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-renderer-cairo.c (grc_invert_pixbuf_RB): new.
	(grc_draw_polygon): implement repeated image texture.
	(grc_get_marker_surface): use grc_invert_pixbuf_RB.
	(gog_renderer_cairo_update): ditto.

2005-06-21  Jon K Hellan  <hellan@acm.org>

	* goffice/graph/gog-control-foocanvas.c
	(gog_control_foocanvas_update):  Fix typo.

2005-06-21  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	New cairo renderer. Option at compile time (--with-cairo).
	
	* configure.in: add optional cairo dependency.
	* goffice/graph/gog-control-foocanvas.c
	(gog_control_foocanvas_set_property): use cairo renderer if enabled.
	(gog_control_foocanvas_draw): ditto.
	(gog_control_foocanvas_update): ditto.
	(gog_control_foocanvas_class_init): ditto.
	* goffice/graph/gog-renderer-cairo.[ch]: new files.
	* goffice/utils/go-pattern.c (go_pattern_get_pattern): new.
	
2005-06-20  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-1.5d.c: (gog_plot1_5d_update),
	(gog_series1_5d_finalize), (gog_series1_5d_class_init): fixed error bar
	leaks.

2005-06-20  Morten Welinder  <terra@gnome.org>

	* goffice/utils/formats.c (find_currency): Special hack to accept
	a quoted euro character.
	(pattern_account): Remove stray "}".

2005-06-20  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-guru.c: (cb_canvas_select_item): fixed one more leak.

2005-06-20  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-guru.c: (cb_canvas_select_item): add missing
	g_object_unref call.
	* goffice/graph/gog-series.c: (regression_curve_can_add): fixed the test.
	* goffice/graph/gog-style.c: (gog_style_set_image_preview): return if
	pix == NULL (#308307).

2005-06-16  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-axis-line.c (axis_line_render): remove kludge for
	ticks not centered on labels.
	* goffice/graph/gog-axis.c (map_discrete_calc_ticks): separate
	handling of ticks from handling of labels.
	(gog_axis_update): allways set GogAxis::center_on_ticks from
	GogBounds.
	* plugins/plot_radar/gog-radar.c (gog_radar_plot_axis_get_bounds):
	set center_on_ticks=TRUE explicitely.

2005-06-13  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	Support for rotated text and text color.

	* goffice/graph/gog-axis-line.c (get_point_to_segment_distance):
	moved to go-geometry.c.
	(update_bbox): ditto.
	(overlap): removed.
	(compute_angles): removed.
	(axis_line_point): use go_geometry_point_to_segment.
	(axis_line_get_bbox): handle rotated text case. Use
	go_geometry_cartesian_to_polar. side is an enum now.
	(axis_line_render): ditto.
	(axis_circle_get_bbox): ditto.
	(axis_circle_render): ditto.
	(xy_process): side is an enum.
	(radar_process): ditto.
	* goffice/graph/gog-label.c (gog_label_view_size_request): use
	gog_renderer_get_text_AABR.
	(gog_label_view_render): ditto.
	* goffice/graph/gog-legend.c (cb_size_elements): ditto.
	* goffice/graph/gog-reg-eqn.c
	(gog_reg_eqn_view_render): ditto.
	* goffice/graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_text): handle rotated text and color.
	(gog_renderer_gnome_print_get_text_OBR): new. 
	* goffice/graph/gog-renderer-pixbuf.c (get_rotated_layout_bounds):
	new.
	(gog_renderer_pixbuf_get_pango_layout): handle rotation angle.
	(gog_renderer_pixbuf_draw_text): ditto. Handle special n * pi / 2
	angles separately for performance.
	(gog_renderer_pixbuf_get_text_OBR): new. 
	* goffice/graph/gog-renderer-svg.c (gog_renderer_svg_get_text_OBR):
	ditto.
	(gog_renderer_svg_draw_text): handle rotation angle and color.
	* goffice/graph/gog-renderer.c (gog_renderer_get_text_OBR): new. 
	(gog_renderer_get_text_AABR): new. Replaces measure_text.
	* goffice/graph/gog-style-prefs.glade: add widgets for text rotation
	angle and text color.
	* goffice/graph/gog-style.c (cb_rotation_angle_changed): new.
	(cb_font_color_changed): new.
	(font_init): load widgets for text rotation and color.
	(gog_style_font_load): load rotation angle.
	(gog_style_font_save): save rotation angle.
	(gog_style_font_sax_save): ditto.
	(gog_style_is_different_size): different angles means different sizes.
	* goffice/utils/go-geometry.[ch]: new files. Collection of geometry
	related functions.
	
2005-06-12  Jody Goldberg <jody@gnome.org>

	* configure.in : post release bump

2005-06-12  Jody Goldberg <jody@gnome.org>

	* Release 0.0.2

2005-06-11  Ivan, Wong Yat Cheung  <email@ivanwong.info>

	* goffice/gtk/Makefile.am: Fix typos.

2005-06-09  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-libxml-extras.c (xml_node_get_enum,
	xml_node_set_enum): New functions.
	(xml_node_get_int, xml_node_get_double): Improve error handling.

2005-06-08  Ivan, Wong Yat Cheung  <email@ivanwong.info>

	* goffice/gtk/htmlhelp-stub.c:
	* goffice/gtk/htmlhelp-stub.h:
	* goffice/gtk/libhtmlhelp-stub.def: Remove
	* goffice/gtk/Makefile.am: Remove libgoffice-html-help-stub.la
	  it no longer belongs here.

	* goffice/Makefile.am:
	* goffice/gtk/goffice-gtk.c:
	* goffice/utils/Makefile.am: Now stubs for Win32 are placed in
	  libgoffice-win32-stub.la

	* goffice/utils/goffice-win32-stub.def:
	* goffice/utils/win32-stub.c:
	* goffice/utils/win32-stub.h: New

	* goffice/utils/go-file.[ch] (go_get_mime_type): Use
	  FindMimeFromData() on Win32. Fall back to "text/plain" if
	  no mime type is matched. [#304074]

2005-06-06  Jody Goldberg <jody@gnome.org>

	* goffice/app/go-plugin.c : Don't inherit from GTypeModule
	  contain one and use it as long as we are active.

2005-06-06  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-math.c (log1p): Define if needed.

2005-06-05  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-data-set.c: (gog_dataset_dup_to_simple): add a helper
	function to convert data to simple data.
	* goffice/graph/gog-data-set.h: ditto.
	* goffice/graph/gog-object.c: (dataset_dup), (gog_object_dup): add an
	optional data converter to gog_object_dup and define a default one.
	* goffice/graph/gog-object.h: ditto.
	* goffice/graph/gog-graph.c: use new gog_object_dup syntax.

2005-06-05  Jody Goldberg <jody@gnome.org>

	* goffice/app/go-plugin.c (go_plugin_get_type_module) : new in
	  preparation of change to GOPlugin.

2005-06-05  Jody Goldberg <jody@gnome.org>

	* goffice/app/go-plugin.c (go_plugin_activate) : add a
	  g_type_module_use
	(go_plugin_deactivate) : and an unuse.  Things are still broken on
	  exit.

2005-06-04  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>
	
	* goffice/graph/gog-object (gog_object_populate_editor): remove
	g_message call.

2005-06-04  Jody Goldberg <jody@gnome.org>

	* plugins/plot_xy/plot-types.xml.in : XY priority 100
	* plugins/plot_barcol/plot-types.xml.in : COL priority 90
	  BAR priority 80

	* goffice/graph/gog-guru.c (cb_plot_families_init) : select if the
	  current item is a higher priority than anything we've seen.
	(graph_guru_type_selector_new) : don't connect to the signal handler
	  until after we select the default type.  Sort the list of families.
	  We need to prune this list.

	* goffice/graph/gog-plot-engine.c (cb_pending_plot_types_load) : load
	  a priority for each family to allow for a reasonable default.

2005-06-04  Jody Goldberg <jody@gnome.org>

	* goffice/gtk/go-format-sel.c (nfs_init) : suppress warning.
	(generate_preview) : put the args in the right order and remove the
	  debug spew.

2005-06-04  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/gog-surface.c: (gog_contour_view_render):
	fixed appearance, libart warnings and a major bug.

2005-06-03  Stepan Kasal  <kasal@ucw.cz>

	* configure.in: Require libgsf 1.12.1; GSF_DYNAMIC_CLASS has changed.

2005-06-02  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/Makefile.am: add gog-object-prefs.glade
	* goffice/graph/gog-graph.c (gog_graph_class_init): position of chart
	and title can be manual.
	* goffice/graph/gog-object-prefs.glade: new.
	* goffice/graph/gog-object.c (gog_editor_get_notebook): first page
	is the default page.
	(gog_object_set_property): handle compass and alignment properties.
	(gog_object_get_property): ditto.
	(object_pref_state_free): new.
	(cb_compass_changed): new.
	(cb_alignment_changed): new.
	(gog_object_populate_editor): new. It handles only compass and alignment
	flags.
	(gog_object_class_init): install compass and alignment properties.
	(gog_object_get_pos): renamed to gog_object_get_position_flags. Add a
	mask parameter in order to get only a subset of position flags.
	(gog_object_set_pos): renamed to gog_object_set_position_flags. Add a
	mask parameter.
	* goffice/graph/gog-style-prefs.glade: move line widgets to the left.
	It improves consistency of widget position when navigating through
	object tree.
	* goffice/graph/gog-styled-object.c (styled_object_populate_editor):
	call parent method.
	
2005-06-01  Jody Goldberg <jody@gnome.org>

	* goffice/utils/go-format.c (go_format_value_gstring) : pull over from
	  gnumeric with a simplified structure to handle only ints and
	  doubles.
	(go_style_format_condition) : ditto.

2005-05-30  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/xl-surface.c: (xl_contour_plot_build_matrix):
	set num-elements of the first series, not the last one.

2005-05-29  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-object.c: (gog_object_dup),
	(gog_object_dup_with_values): rewrote to share identical code.

2005-05-28  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-object.h: added missing declaration
	(gog_object_dup_with_values).

2005-05-28  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-object.c: (gog_object_dup_with_values):
	new function aimed at export charts. 

2005-05-27  Ivan, Wong Yat Cheung  <email@ivanwong.info>

	* goffice/utils/go-file.c (go_shell_arg_to_uri):
	revert changes made by me in yesterday.
	(go_shell_argv_to_glib_encoding): New. For Win32 we need to
	get argv[] in utf-16 and convert them to utf-8 under NT
	and use g_locale_to_utf() under Win9x.

2005-05-27  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-dropbar.c: (gog_dropbar_view_render): fixed
	bars width and position.
	* plugins/plot_barcol/plot-types.xml.in: ditto.

2005-05-27  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/go-format-sel.c: (nfs_init): make the shortcut for currency
	symbol selection work (#305635).

2005-05-27  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/data/go-data-simple.c: (go_data_vector_val_as_str),
	(go_data_vector_val_from_str), (go_data_vector_str_finalize),
	(go_data_vector_str_dup), (go_data_vector_str_as_str),
	(go_data_vector_str_from_str), (go_data_vector_str_load_len),
	(go_data_vector_str_load_values), (go_data_vector_str_get_value),
	(go_data_matrix_val_as_str), (go_data_matrix_val_from_str): fixed various
	concerns related to the abigochart plugin.

2005-05-26  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	[#305010]
	* goffice/graph/gog-error-bar-prefs.glade: remove gnome requirement. 
	* plugins/plot_pie/gog-pie-series-prefs.glade: ditto.
	* plugins/plot_pie/gog-ring-prefs.glade: ditto.
	
2005-05-26  Ivan, Wong Yat Cheung  <email@ivanwong.info>

	* goffice/utils/go-file.c (go_shell_arg_to_uri): Convert
	file name from system codepage to utf8 (glib/win32 now uses
	utf8). [#304874]

2005-05-25  Stepan Kasal  <kasal@ucw.cz>

	* configure.in (PKG_PROG_PKG_CONFIG): Rephrase the explanation.

2005-05-24  Morten Welinder  <terra@gnome.org>

	* goffice/utils/format.c (format_remove_decimal): In the fallback
	code, remove a decimals from all subformats.
	(find_currency): Accept quotes around the currency.  Fixes
	recognition of accounting formats.  [#305314]  [#305313]

2005-05-23  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/goffice-gtk.c (go_gtk_file_sel_dialog,
	go_gtk_select_image): Insist on getting a toplevel.  (It
	determines, for one thing, what screen to use.)
	* goffice/graph/gog-style.c (cb_image_file_select): Provide a
	toplevel.  Fixes #305009.

2005-05-22  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_barcol/gog-1.5d.c: (gog_series1_5d_update): Fix a trivial
	bug.

2005-05-20  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/goffice-gtk.c (go_access): Fix return type to int as
	we return -1 sometimes.

	* configure.in (set_more_warnings): Don't use -Wcrazy.

2005-05-20  Stepan Kasal  <kasal@ucw.cz>

	* plugins/plot_barcol/gog-dropbar.c (gog_dropbar_view_render):
	  Remove unused variables.

2005-05-20  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/goffice-graph.h: change GOG_MS_DIM_TYPES value and
	add new ones.
	* goffice/graph/gog-axis.c: (gog_axis_set_property): remove labels
	and ticks for GOG_AXIS_PSEUDO_3D (enhance export to excel).
	* pixmaps/Makefile.am: add icons for minmax and dropbar plots.
	* plugins/plot_barcol/Makefile.am: add minmx and dropbar support.
	* plugins/plot_barcol/gog-1.5d.c: (gog_plot1_5d_update),
	(gog_series1_5d_update), (gog_series1_5d_populate_editor),
	(go_plugin_init): ditto.
	* plugins/plot_barcol/gog-barcol.c: ditto.
	(gog_barcol_plot_populate_editor): ditto.
	* plugins/plot_barcol/gog-dropbar.c: (gog_dropbar_plot_type_name),
	(gog_dropbar_plot_class_init), (barcol_draw_rect),
	(gog_dropbar_view_render), (gog_dropbar_view_info_at_point),
	(gog_dropbar_view_class_init): ditto.
	* plugins/plot_barcol/gog-dropbar.h: ditto.
	* plugins/plot_barcol/gog-minmax-prefs.glade: ditto.
	* plugins/plot_barcol/gog-minmax.c: (gog_minmax_series_init_style),
	(gog_minmax_series_class_init), (gog_minmax_plot_set_property),
	(gog_minmax_plot_get_property), (gog_minmax_plot_type_name),
	(gog_minmax_axis_get_bounds), (cb_gap_changed),
	(gog_minmax_plot_populate_editor), (gog_minmax_swap_x_and_y),
	(gog_minmax_plot_class_init), (gog_minmax_plot_init),
	(gog_minmax_view_render), (gog_minmax_view_info_at_point),
	(gog_minmax_view_class_init): ditto.
	* plugins/plot_barcol/gog-minmax.h: ditto.
	* plugins/plot_barcol/plot-types.xml.in: ditto.
	* plugins/plot_barcol/plugin.xml.in: ditto.

2005-05-19  Jody Goldberg <jody@gnome.org>

	* goffice/data/go-data-simple.c (go_data_vector_val_as_str) : use
	  format_get_row_sep.

2005-05-19  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-axis.c (map_discrete_calc_ticks): remove kludge by
	using center_on_ticks.
	* goffice/graph/gog-plot.c (gog_plot_get_axis_bounds): defaults
	center_on_ticks to TRUE.
	* plugins/plot_barcol/gog-barcol.c (gog_barcol_axis_get_bounds):
	center_on_ticks = FALSE.
	
2005-05-18  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-axis.c (map_discrete_init): scale doesn't depend
	on center_on_ticks.
	(map_discrete): ditto.
	(map_discrete_to_view): ditto.
	(map_discrete_from_view): ditto.
	(map_discrete_calc_ticks): tick_nbr doesn't depend on center_on_ticks.
	* goffice/graph/gog-axis-line.c (gog_axis_base_populate_editor): don't
	show layout page for GOG_AXIS_PSEUDO_3D. Call inherited
	populate_editor if gui==NULL.
	* plugins/plot_surface/gog-surface.c
	(gog_contour_plot_axis_get_bounds): maxima = num_elements - 1.0
	* plugins/plot_surface/xl-surface.c 
	(xl_contour_plot_axis_get_bounds): ditto.

2005-05-17  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/data/go-data-simple.c: (go_data_vector_val_get_value),
	(go_data_vector_val_get_str): check args to avoid a segfault.

2005-05-16  Stepan Kasal  <kasal@ucw.cz>

	* goffice/graph/gog-reg-curve.c (gog_reg_curve_get_value_at): Make
	  this function static, without any declaration at the top.

	* goffice/utils/go-file.h (go_get_mime_type): Change the return type
	  to `const gchar *'.
	* goffice/utils/go-file.c: ditto.

	* goffice/utils/format.c (beyond_precision, beyond_precisionl):
	  Move the declarations to the top, into an #ifdef DEFINE_COMMON.

	* plugins/plot_surface/xl-surface.c (xl_contour_plot_axis_get_bounds):
	  Make this more readable by moving part of the body ...
	(get_y_vector): ... to this new function.

	* tests/pie-demo.c (main): Adapt to the changed type of arg 1 of
	  go_data_vector_str_new.

2005-05-14  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* configure.in: Supply GOFFICE_PLUGIN_LIBADD on all platforms, not just
	win32, in order to get complete dependency information in the plugins.
	Use -no-undefined in GOFFICE_PLUGIN_LDFLAGS on all platforms to ensure
	complete dependency information at link time.
	Update the BUG-REPORT argument to AC_INIT now that bugzilla.gnome.org
	has a "libgoffice" product.
	Enable a number of additional warnings (when available) for which the
	current code base is already virtually clean.

2005-05-12  Stepan Kasal  <kasal@ucw.cz>

	* goffice/data/go-data-simple.h (go_data_vector_str_new): Change the
	  type of the first parameter from (char**) back to (char const*const*)
	* goffice/data/go-data-simple.c: Do the same and adapt the code.

2005-05-12  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-marker.c (go_marker_selector): Plug leak.
	Avoid const for non-const parameter.

	* goffice/gtk/go-action-combo-pixmaps.c
	(go_action_combo_pixmaps_create_tool_item): Take toolbar settings
	into account.

	* goffice/gtk/go-action-combo-color.c (make_icon): Multihead fix.

	* goffice/gtk/goffice-gtk.c (update_preview_cb): Multihead fix.

	* goffice/gtk/go-action-combo-stack.c
	(go_action_combo_stack_create_tool_item): Take theme into account.

2005-05-12  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/data/go-data-simple.c: (go_data_matrix_val_as_str),
	(go_data_matrix_val_from_str): always use a semicolon as row
	separator.

2005-05-11  Jean Brefort  <jean.brefort@normalesup.org>

	* pixmaps/chart_dropbar_1_1.png: update icon.
	* pixmaps/chart_dropbar_1_1.svg: ditto.
	* pixmaps/chart_dropbar_1_2.png: ditto.
	* pixmaps/chart_dropbar_1_2.svg: ditto.
	* pixmaps/chart_minmax_1_1.png: ditto.
	* pixmaps/chart_minmax_1_1.svg: ditto.
	* pixmaps/chart_minmax_1_2.png: ditto.
	* pixmaps/chart_minmax_1_2.svg: ditto.
	* pixmaps/chart_minmax_2_1.png: new icon.
	* pixmaps/chart_minmax_2_1.svg: ditto.
	* pixmaps/chart_minmax_2_2.png: ditto.
	* pixmaps/chart_minmax_2_2.svg: ditto.

2005-05-11  Jean Brefort  <jean.brefort@normalesup.org>

	* pixmaps/chart_dropbar_1_1.png: New icon.
	* pixmaps/chart_dropbar_1_1.svg: ditto.
	* pixmaps/chart_dropbar_1_2.png: ditto.
	* pixmaps/chart_dropbar_1_2.svg: ditto.
	* pixmaps/chart_minmax_1_1.png: ditto.
	* pixmaps/chart_minmax_1_1.svg: ditto.
	* pixmaps/chart_minmax_1_2.png: ditto.
	* pixmaps/chart_minmax_1_2.svg: ditto.
	* pixmaps/dropbar.xpm: ditto.
	* pixmaps/minmax.xpm: ditto.

2005-05-11  Jean Brefort  <jean.brefort@normalesup.org>

	* plugins/plot_surface/gog-surface.c:
	(gog_contour_plot_class_init): limit series number to 1.

2005-05-10  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-chart.c (gog_chart_map_free): unref map::chart.

2005-05-10  Jean Brefort  <jean.brefort@normalesup.org>

	* configure.in: add linear regressions in scatter plots.
	* goffice/goffice.c: (libgoffice_init): ditto.
	* goffice/graph/Makefile.am: ditto.
	* goffice/graph/goffice-graph.h: ditto.
	* goffice/graph/gog-guru.c: (cb_graph_guru_add_reg_curve),
	(cb_reg_curve_type_menu_create), (reg_curve_type_menu_create),
	(cb_attr_tree_selection_change): ditto.
	* goffice/graph/gog-object-xml.c: (gog_object_new_from_xml): ditto.
	* goffice/graph/gog-plot-engine.c: ditto.
	(gog_reg_curve_engine_service_get_description),
	(gog_reg_curve_engine_service_class_init),
	(gog_reg_curve_new_by_name), (cb_pending_reg_curve_types_load),
	(pending_reg_curves_types_load), (gog_reg_curve_service_read_xml),
	(gog_reg_curve_service_get_description),
	(gog_reg_curve_service_init), (gog_reg_curve_service_class_init),
	(gog_plugin_services_init), (gog_reg_curve_type_free),
	(create_reg_curve_types), (gog_reg_curve_types): ditto.
	* goffice/graph/gog-plot-engine.h: ditto.
	* goffice/graph/gog-reg-curve-prefs.glade: ditto.
	* goffice/graph/gog-reg-curve.c: (gog_reg_curve_init_style),
	(gog_reg_curve_populate_editor), (gog_reg_curve_finalize),
	(gog_reg_curve_type_name), (gog_reg_curve_class_init),
	(gog_reg_curve_init), (gog_reg_curve_dataset_dims),
	(gog_reg_curve_dataset_get_elem),
	(gog_reg_curve_dataset_dim_changed), (gog_reg_curve_dataset_init),
	(gog_reg_curve_new_by_type), (gog_reg_curve_get_value_at),
	(gog_reg_curve_get_equation), (gog_reg_curve_get_R2),
	(gog_reg_curve_get_bounds), (gog_reg_curve_view_render),
	(gog_reg_curve_view_size_allocate),
	(gog_reg_curve_view_class_init): ditto.
	* goffice/graph/gog-reg-curve.h: ditto.
	* goffice/graph/gog-reg-eqn-prefs.glade: ditto.
	* goffice/graph/gog-reg-eqn.c: (cb_text_pos_changed),
	(cb_text_visibility_changed), (gog_reg_eqn_set_property),
	(gog_reg_eqn_get_property), (gog_reg_eqn_init_style),
	(gog_reg_eqn_populate_editor), (gog_reg_eqn_type_name),
	(gog_reg_eqn_class_init), (gog_reg_eqn_init),
	(gog_reg_eqn_view_render), (gog_reg_eqn_view_class_init): ditto.
	* goffice/graph/gog-reg-eqn.h: ditto.
	* goffice/graph/gog-series-impl.h: ditto.
	* goffice/graph/gog-series.c: (regression_curve_can_add),
	(regression_curve_post_add), (regression_curve_pre_remove),
	(gog_series_class_init), (gog_series_init): ditto.
	* goffice/graph/gog-theme.c: (gog_themes_init): ditto.
	* plugins/Makefile.am: ditto.
	* plugins/plot_xy/gog-xy.c: (gog_xy_view_render),
	(gog_xy_view_size_allocate), (gog_xy_view_class_init),
	(gog_xy_series_view_render), (gog_xy_series_view_size_allocate),
	(gog_xy_series_view_class_init), (gog_xy_series_update),
	(gog_xy_series_init), (gog_xy_series_class_init): ditto.
	* plugins/reg_linear/Makefile.am: ditto.
	* plugins/reg_linear/gog-lin-reg.c: (gog_lin_reg_curve_update),
	(gog_lin_reg_curve_get_value_at), (gog_lin_reg_curve_get_equation),
	(gog_lin_reg_curve_get_R2), (gog_lin_reg_curve_finalize),
	(gog_lin_reg_curve_class_init), (gog_lin_reg_curve_init),
	(go_plugin_init), (go_plugin_shutdown): ditto.
	* plugins/reg_linear/gog-lin-reg.h: ditto.
	* plugins/reg_linear/plugin.xml.in: ditto.
	* plugins/reg_linear/reg-types.xml.in: ditto.
	* po/POTFILES.in: ditto.
	* plugins/plot_surface/xl-surface.c:
	(xl_contour_plot_axis_get_bounds): fixed a compilation warning.

2005-05-10  Jody Goldberg <jody@gnome.org>

	* configure.in : post release version bump

2005-05-09  Jody Goldberg <jody@gnome.org>

	* Release 0.0.1

2005-05-09  Jody Goldberg <jody@gnome.org>

	* tests/pie-demo.c (main) : update

2005-05-09  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* plugins/plot_radar/gog-radar.c (gog_rt_view_render): warning fix.

2005-05-09  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-axis-line.c (gog_axis_base_get_crossed_axis_type):
	handle GOG_AXIS_SET_XY_pseudo_3d case.
	(axis_line_get_bbox): fix label offset.
	(axis_line_render): ditto.
	(axis_circle_get_bbox): take ticks into account. Use GogChartMap.
	(axis_circle_render): if axis is polar, use bezier paths by calling
	gog_renderer_draw_arc. Draw ticks. Use GogChartMap.
	(x_process): new.
	(xy_process): use GogChartMap. 
	(calc_polygon_parameters): removed.
	(radar_process): implement padding_request for radial axes. 
	(gog_axis_base_view_info_at_point): handle GOG_AXIS_SET_X.
	(gog_axis_base_view_padding_request): ditto.
	(gog_axis_base_view_render): ditto.
	* goffice/graph/gog-axis.c (map_bounds): new.
	(map_linear_auto_bound): handle auto bounds for non discrete circular
	axis.
	(map_linear_calc_ticks): place major ticks to a multiple of major
	step.
	(map_log_bounds): new.
	(gog_axis_map_get_extents): new.
	(gog_axis_map_get_bounds): new.
	(role_grid_line_major_can_add): can be TRUE for non discrete 
	GOG_AXIS_CIRCULAR.
	(role_grid_line_minor_post_add): ditto.
	(role_axis_line_can_add): can be TRUE for GOG_AXIS_RADIAL.
	(gog_axis_set_property): changing invert flag invalidates layout.
	(gog_axis_populate_editor): don't show map type selector for
	GOG_AXIS_CIRCULAR.
	(gog_axis_is_inverted): new.
	* goffice/graph/gog-chart.c (calc_polygon_parameters): new.
	(calc_circle_parameters): new.
	(null_map_2D): new.
	(x_map_2D_to_view): new.
	(xy_map_2D_to_view): new.
	(polar_map_2D_to_view): new.
	(gog_chart_map_get_polar_parms): new.
	(gog_chart_map_new): needs pointers to axes of the axis set now.
	handle GOG_AXIS_SET_X, GOG_AXIS_SET_RADAR and
	GOG_AXIS_SET_XY_pseudo_3d.
	(gog_chart_map_2D): removed.
	(gog_chart_map_2D_to_view): new.
	(gog_chart_map_get_axis_map): new.
	(gog_chart_map_is_valid): new.
	(gog_chart_axis_set_assign): handle GOG_AXIS_SET_RADAR.
	* goffice/graph/gog-grid-line.c (calc_polygon_parameters): removed.
	(gog_grid_line_view_render): handle polar plots.
	* goffice/graph/gog-grid.c (gog_grid_view_render): handle polar and
	radar plots.
	* goffice/graph/gog-renderer-gnome-print.c
	(draw_bezier_path): new.
	(gog_renderer_gnome_print_draw_bezier_path): use draw_bezier_path.
	(gog_renderer_gnome_print_draw_bezier_polygon): new.
	* goffice/graph/gog-renderer-pixbuf.c
	(gog_renderer_pixbuf_draw_polygon): fix transparency rendering. Idea
	stolen from gnome-print.
	(gog_renderer_pixbuf_draw_bezier_polygon): new.
	* goffice/graph/gog-renderer-svg.c (fill_properties): new.
	(gog_renderer_svg_draw_bezier_polygon): new.
	* goffice/graph/gog-renderer.c 
	(gog_renderer_get_ring_wedge_vpath): new.
	(gog_renderer_draw_ring_wedge): new.
	(gog_renderer_draw_pie_wedge): new.
	(gog_renderer_draw_arc): new.
	* plugins/plot_radar/gog-radar.c: renamed GogRadarPlot to GogRTPlot,
	as base of GogRadarPlot and GogPolarPlot.
	New GogRadarPlot and GogPolarPlot classes.
	Renamed GogRadarView class to GogRTView class.
	(gog_rt_view_render): handle radar and polar plots.
	Renamed GogRadarSeries class to GogRTSeries.
	* plugins/plot_radar/plot-types.xml.in: add polar plots.
	* plugins/plot_radar/plugin.xml.in: ditto.
	
2005-05-09  Morten Welinder  <terra@gnome.org>

	* goffice/graph/gog-style.c (cb_font_changed): C99, const, and
	type fixes.

2005-05-09  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/data/go-data-simple.c: (go_data_matrix_val_as_str),
	(go_data_matrix_val_from_str): made things work.
	* plugins/plot_surface/gog-surface.c: (gog_contour_plot_update),
	(gog_contour_view_render): avoid crashes and weird displays
	when there are no data for the axis.
	* plugins/plot_surface/xl-surface.c (xl_contour_plot_build_matrix):
	fix a vector length problem and replace nan by 0. to be xl compatible.

2005-05-08  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/data/go-data-simple.c: (go_data_vector_str_from_str):
	fix an infinite loop condition.
	* plugins/gog-surface.c: fixed several critical bugs.

2005-05-07  Jean Brefort  <jean.brefort@normalesup.org>
	* goffice/graph/gog-legend.c: (cb_render_elements): use style
	for legend font.
	* goffice/graph/gog-style.c: (cb_font_changed): make things work,
	at least for now
	* goffice/gtk/go-font-sel.c: (style_selected): fixed it,
	(go_font_sel_set_style): added a warning.

2005-05-07  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-action-combo-color.c (go_action_combo_color_new):
	Don't set ->icon here, but make it when needed.  Fixes #302880.
	(make_icon): New function.

2005-05-07  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/data/go-data-simple.c: (go_data_vector_val_finalize),
	(go_data_vector_val_dup), (go_data_vector_val_as_str),
	(go_data_vector_val_from_str), (go_data_vector_val_class_init),
	(go_data_vector_val_new), (cb_strings_destroy_notify),
	(go_data_vector_str_finalize), (go_data_vector_str_dup),
	(go_data_vector_str_as_str), (go_data_vector_str_from_str),
	(go_data_vector_str_class_init), (go_data_vector_str_init),
	(go_data_vector_str_new),
	(go_data_vector_str_set_translation_domain),
	(go_data_matrix_val_finalize), (go_data_matrix_val_dup),
	(go_data_matrix_val_eq), (go_data_matrix_val_load_size),
	(go_data_matrix_val_load_values), (go_data_matrix_val_get_value),
	(go_data_matrix_val_get_str), (go_data_matrix_val_as_str),
	(go_data_matrix_val_from_str), (go_data_matrix_val_class_init),
	(go_data_matrix_val_new): add GODataMatrixVal class and add
	serialization to GODataVectorVal and GODataVectorStr.
	* goffice/data/go-data-simple.h: add GODataMatrixVal class and
	enhanced vectors.
	* goffice/data/go-data.c: (go_data_matrix_get_value),
	(go_data_matrix_get_str): check if row and column are valid.
	* goffice/gtk/go-color-palette.c: (create_color_sel): set opacity (see
	#302387).
	* goffice/gtk/go-format-sel.c: use go_setlocale instead of gnm_setlocale.
	* goffice/utils/format.c: (go_setlocale),
	(go_set_untranslated_bools): renamed two gnm functions.
	* goffice/utils/format.h: ditto.
	* plugins/plot_surface/xl-surface.c: updated args to go_data_vector_str_new
	(xl_contour_plot_axis_get_bounds): updated args to go_data_vector_str_new.

2005-05-07  Jody Goldberg <jody@gnome.org>

	* goffice/graph/gog-object-xml.c (gog_dataset_sax_save) : use
	  g_snprintf it is more portable.
	(gog_dataset_dom_save) : ditto.
	* goffice/utils/go-libxml-extras.c (xml_node_set_double) : ditto.

2005-05-06  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-chart.c (plot_render): new.
	(gog_chart_view_render): render plot marked with render_before_axes
	before axes, but after grid and background.
	* goffice/graph/gog-plot.c (gog_plot_init): default render_before_axes
	to FALSE.
	* plugings/plot_barcol/gog-line.c (gog_area_plot_init):
	render_before_axes = TRUE.
	* plugins/plot_radar/gog-radar.c (gog_radar_area_plot_init): ditto.
	* plugins/plot_surface/gog-surface.c (gog_contour_plot_init): ditto.

2005-05-05  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-glib-extras.c (go_object_properties_free,
	go_object_properties_collect, go_object_properties_apply): New
	functions.

2005-05-04  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-combo-box.c (go_combo_box_style_set): New
	function.
	(go_combo_box_class_init): Hook up go_combo_box_style_set and
	define add-tearoffs widget style property.

2005-05-04  Jody Goldberg <jody@gnome.org>

	* goffice/app/go-plugin-service.c (plugin_service_new) : minor leak.

2005-05-01  Jon K Hellan  <hellan@acm.org>

	* goffice/gtk/goffice-gtk.[ch] (go_mime_to_image_format): New. Get
	image format for mime type.
	(go_image_format_to_mime): New. Get mime types for image format.

2005-04-29  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-plot.c: added missing header.

2005-04-29  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-glib-extras.c (go_object_toggle): New function.

2005-04-28  Stepan Kasal  <kasal@ucw.cz>

	* configure.in (WITH_WIN32): Fix the case command for $host_os,
	add the "pw32*" pattern.
	(AC_CANONICAL_HOST): Call explicitly, we use $host_os.
	(WINDRES): Add an AC_ARG_VAR declaration.

2005-04-28  Ivan, Wong Yat Cheung  <email@ivanwong.info>

	* configure.in: Remove OS_WIN32 and combine PLATFORM_WIN32
	and WITH_WIN32.

	* goffice/Makefile.am: Use WITH_WIN32

2005-04-28  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-plot.c: (cb_axis_changed): initialize value.

2005-04-21  Stepan Kasal  <kasal@ucw.cz>

	* configure.in (GOFFICE_LIB_VERSON): Rename to ...
	(GOFFICE_LIB_VERSION): ... and compute statically, by m4_eval.
	* goffice/Makefile.am (goffice-paths.h): Also depends on Makefile.
	* plugins/plot_barcol/Makefile.am, plugins/plot_pie/Makefile.am:
	* plugins/plot_xy/Makefile.am: Don't list glade files in xml_DATA.

2005-04-20  Ivan, Wong Yat Cheung  <email@ivanwong.info>

	* goffice/gtk/go-action-combo-text.c: Add a new property
	"case-sensitive".

2005-04-19  Stepan Kasal  <kasal@ucw.cz>

	* goffice/utils/Makefile.am (SUFFIXES): Remove, Automake deduces it
	  (at least Automake >= 1.7).

2005-04-18  Stepan Kasal  <kasal@ucw.cz>

	* plugins/plot_surface/xl-surface.c (xl_contour_plot_build_matrix):
	Don't initialize `ptr' twice; do initialize `series'.

2005-04-18  Stepan Kasal  <kasal@ucw.cz>

	* goffice/utils/go-gradient.h (GOGradientDirection): Properly terminate
	  with GO_GRADIENT_MAX.
	* goffice/utils/go-gradient.c (grad_dir_names): No need to include the
	  enum number in the structure; code adapted.
	* goffice/utils/go-marker.c: Don't omit libart includes when !WITH_GTK;
	(marker_shape_names): Merge into marker_shapes; adapt code.
	(marker_shapes): Use macros to shorten the definition.
	(marker_update_pixbuf, go_marker_finalize, go_marker_set_shape):
	(go_marker_set_outline_color, go_marker_set_fill_color):
	(go_marker_set_size): Factor out common code ...
	(marker_free_pixbuf): ... to a new static function.
	(SELECTOR_PIXBUF_SIZE, SELECTOR_MARKER_SIZE): Remove unused defines.
	* goffice/utils/go-marker.h (pixbuf): If !WITH_GTK, rename this to ...
	(pixbuf_placeholder): ..., so that noone can actually use it.
	* goffice/utils/go-pattern.c (pattern_names): Merge into go_patterns;
	  adapt code.
	* goffice/utils/go-pattern.h (go_pattern_selector): Omit if !WITH_GTK.

2005-04-18  Stepan Kasal  <kasal@ucw.cz>

	* configure.in: Call PKG_PROG_PKG_CONFIG explicitly.

2005-04-15  Stepan Kasal  <kasal@ucw.cz>

	* configure.in: Fix the appearance of help strings.

2005-04-12  Stepan Kasal  <kasal@ucw.cz>

	* goffice/utils/go-file.c: #include libgnomevfs/gnome-vfs-mime-utils.h;
	  this file comes via gsf-input-gnomevfs.h and gnome-vfs.h in current
	  version, but not in my gnome-vfs 2.4.2.
	* goffice/graph/gog-plot.c (gog_plot_update_3d): Cosmetic fix.

2005-04-10  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/goffice-graph.h: allow use of GOG_AXIS_PSEUDO_3D.
	* goffice/graph/gog-axis-line.c: add pseudo 3d axis support.
	(gog_axis_base_view_padding_request), (gog_axis_base_view_render):
	* goffice/graph/gog-axis.c: (gog_axis_calc_ticks): ditto.
	* goffice/graph/gog-chart.c: (gog_chart_map_new),
	(gog_chart_map_2D), (role_grid_can_add), (pseudo_3d_axis_can_add),
	(pseudo_3d_axis_post_add), (gog_chart_axis_set_assign): ditto.
	* goffice/graph/gog-plot-impl.h: ditto.
	* goffice/graph/gog-plot.c: (gog_plot_class_init),
	(gog_plot_foreach_elem), (gog_plot_get_axis), (gog_plot_update_3d): ditto.
	* goffice/graph/gog-plot.h: ditto.
	* plugins/plot_surface/Makefile.am: ass xl-surface.*.
	* plugins/plot_surface/gog-contour-prefs.c: removed deprecated code and
	added "transposed" property managing.
	* plugins/plot_surface/gog-contour-prefs.glade: ditto.
	* plugins/plot_surface/gog-surface.c: rewrote to use pseudo 3d axis.
	* plugins/plot_surface/gog-surface.h: ditto.
	* plugins/plot_surface/plugin.xml.in: added xl compatibility contours plots
	* plugins/plot_surface/xl-surface.c: ditto.
	* plugins/plot_surface/xl-surface.h: ditto.

2005-04-08  Ivan, Wong Yat Cheung  <email@ivanwong.info>

	* goffice/gtk/Makefile.am: use -export-symbols to link with
	libhtmlhelp-stub.def

2005-04-07  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-renderer-svg.c: avoid use of
	g_string_append_printf.

2005-04-07  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/goffice-gtk.c (go_gtk_url_is_writeable): Use
	go_access.  No need to define G_IS_DIR_SEPARATOR anymore.
	(go_access): Copied from gsf while we're waiting for glib.

2005-04-07  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-renderer-svg.c: Avoid locale changes by using
	g_ascii_dtostr.  Fixes 172726.

2005-04-07  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-guru.c: (cb_attr_tree_selection_change): don't
	scroll to selection if nothing is selected.

2005-04-06  Morten Welinder  <terra@gnome.org>

	* plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_set_property): Add
	missing "break;"

	* goffice/utils/datetime.c (datetime_isoweeknum): Replace by
	g_date_get_iso8601_week_of_year.
	* configure.in: Require glib 2.6.4.

2005-04-04  Morten Welinder  <terra@gnome.org>

	* goffice/utils/format.c (go_format_number): Do at least a small
	attempt at getting fractional seconds right.

2005-04-02  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/goffice.c: (libgoffice_init), (libgoffice_shutdown): call
	number_format_init/shutdown.

2005-04-01  Jody Goldberg <jody@gnome.org>

	* goffice/utils/regutf8.c : include string.h to suppress warning about
	  implicit decl of strlen

2005-04-01  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-glib-extras.c (go_guess_encoding): Try exotic
	encodings guess by libxml.

	* goffice/drawing/god-property-table.h: Use canonical property
	names.

	* goffice/gtk/goffice-gtk.c (go_gtk_select_image): Moderately
	cheesy way of saving where we were last time.

2005-04-01  Stepan Kasal  <kasal@ucw.cz>

	s/INCLUDES/AM_CPPFLAGS/  "automake -Wall" has told me this.

	* goffice/libgoffice-1.pc.in: Move ...
	* libgoffice-1.pc.in: ... here.
	* Makefile.am, goffice/Makefile.am, configure.in: Adapt to the move.
	* goffice/utils/Makefile.am (non-intermediate): New dummy rule; see
		http://bugzilla.gnome.org/show_bug.cgi?id=172211 and
		http://bugzilla.gnome.org/show_bug.cgi?id=172212
	(.list.c, .list.h): Remove $(GLIB_GENMARSHAL); it didn't work
	  anyway, the prerequisities of an implicit rule are ignored.
	* configure.in (GLIB_GENMARSHAL): Full path is not needed.
	(GOFFICE_CFLAGS): No need to amend this.

2005-03-31  Morten Welinder  <terra@gnome.org>

	* goffice/app/go-plugin-service.c (go_plugin_file_saver_save): If
	we failed to load the plugin, set an error on the output.

2005-03-30  Ivan, Wong Yat Cheung <email@ivanwong.info>

	* configure.in:
	* plugins/plot_*/Makefile.am: modify GOFFICE_PLUGIN_LDFLAGS and
	  add add GOFFICE_PLUGIN_LIBADD. They help when
	  host_os == win32.

	* goffice/Makefile.am: -export-all-symbols is not the
	  final solution. Will remove it when we have GO_API or
	  any other solution.

	* goffice/goffice-priv.h:
	* goffice/goffice.c:
	* goffice/app/go-plugin.c: use go_sys_lib_dir ()

	* goffice/gtk/Makefile.am: libgoffice-html-help-stub.la

2005-03-30  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-object.c (gog_editor_free): free editor.

2005-03-30  Morten Welinder  <terra@gnome.org>

	* goffice/utils/regutf8.c: Import Gnumeric's non-gui search stuff.
	Make it a gobject.
	(go_search_replace_set_search_text,
	go_search_replace_set_replace_text): Be paranoid.

2005-03-29  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* pixmaps/chart_polar_1_1.[png,svg]: new.
	* pixmaps/polar.[png,svg]: new.

2005-03-28  Morten Welinder  <terra@gnome.org>

	* .../*.c: Use canonical property names.

	* goffice/utils/go-libxml-extras.c
	(e_xml_get_child_by_name_by_lang): Use g_get_language_names.

	* goffice/utils/Makefile.am (libgoffice_utils_la_HEADERS): Remove
	go-locale.[ch].

2005-03-27  Morten Welinder  <terra@gnome.org>

	* goffice/gtk/go-combo-box.c (go_combo_box_init): Use canonical
	property names.
	(go_combo_popup_tear_off): Ditto.

	* goffice/gtk/go-action-combo-text.c
	(go_action_combo_create_tool_item): Ditto.

	* goffice/gtk/go-action-combo-stack.c
	(go_action_combo_stack_create_tool_item): Ditto.

	* goffice/gtk/go-action-combo-color.c (go_action_combo_color_new):
	Ditto.

2005-03-27  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/app/error-info.h: add missing G_BEGIN_DECLS and G_END_DECLS.
	* goffice/app/file-priv.h: ditto.
	* goffice/app/file.h: ditto.
	* goffice/app/go-cmd-context-impl.h: ditto.
	* goffice/app/go-cmd-context.h: ditto.
	* goffice/app/go-error-stack.h: ditto.
	* goffice/app/go-object.h: ditto.
	* goffice/app/go-plugin-loader-module.h: ditto.
	* goffice/app/go-plugin-loader.h: ditto.
	* goffice/app/go-plugin-service.h: ditto.
	* goffice/app/go-plugin.h: ditto.
	* goffice/app/go-service.h: ditto.
	* goffice/app/io-context-priv.h: ditto.
	* goffice/app/io-context.h: ditto.
	* goffice/app/module-plugin-defs.h: ditto.
	* goffice/data/go-data-simple.h: ditto.
	* goffice/graph/gog-error-bar.h: ditto.
	* goffice/graph/gog-renderer.h: ditto.
	* goffice/ms-compat/go-ms-parser.h: ditto.
	* goffice/ms-compat/god-drawing-ms.h: ditto.
	* goffice/utils/datetime.h: ditto.
	* goffice/utils/go-math.h: ditto.

2005-03-25  Stepan Kasal  <kasal@ucw.cz>

	* configure.in (GOFFICE_WITHOUT_GTK, GOFFICE_WITH_GNOME): Rename
	  these defines back to WITH_GTK and WITH_GNOME.
	(GOFFICE_WITH_GTK, GOFFICE_WITH_GNOME): Rename the Automake
	  conditionals back to WITH_GTK and WITH_GNOME, too.

2005-03-24  Stepan Kasal  <kasal@ucw.cz>

	* goffice/app/module-plugin-defs.h (GOFFICE_MODULE_PLUGIN_INFO_DECL):
	  Removed, it's not used.

2005-03-24  Stepan Kasal  <kasal@ucw.cz>

	* goffice/Makefile.am (goffice-paths.h): Rewrite the rule,
	  goffice-paths.sh* is no longer used.
	(EXTRA_DIST, noinst_HEADERS): No longer needed.
	* goffice/goffice-paths.sh.in: Removed.
	* configure.in: Don't generate goffice-paths.sh, rearrange the
	  goffice_* AC_SUBSTs.
	* goffice/goffice.c (LIBGOFFICE_VERSION): Renamed to GOFFICE_VERSION.
	(libgoffice_lib_dir): Comment out in the WIN32 block, since the
	  declaration is already commented out.

2005-03-23  Stepan Kasal  <kasal@ucw.cz>

	* configure.in: Generate goffice-features.h as a header file, subset
	  of goffice-config.h.
	* goffice/goffice-config.h.in: Adjust the template.

2005-03-22  Stepan Kasal  <kasal@ucw.cz>

	* autogen.sh: REQUIRED_AUTOCONF_VERSION=2.54  We already required
	  that indirectly, by asking for Automake >= 1.7.2.
	* configure.in: AC_PREREQ(2.54)
	  - don't default to --without-gtk even if the reqs are not met;
	  - don't generate stamp.h; the issue is solved by Automake 1.7.2;
	    see info '(autoconf)Automatic Remaking' for details.
	* stamp.h.in: Nuke.
	* .cvsignore: Remove stamp*.
	* goffice/.cvsignore: Remove depcomp.
	* po/POTFILES.in: Remove goffice/cut-n-paste/pcre/printint.c.

2005-03-23  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* plugins/plot_radar/gog-radar.c (gog_radar_view_render): handle
	inverted circular axis.

2005-03-22  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-axis-line.c (radar_process): fix padding request
	for circular axis.

2005-03-22  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-axis-line.c (gog_axis_base_get_property): handle
	GOG_AXIS_AUTO.
	(gog_axis_base_set_position_auto): removed.
	(gog_axis_base_set_position): handle GOG_AXIS_AUTO.
	(xy_process): ditto.
	* goffice/graph/gog-axis-line.h: add GOG_AXIS_AUTO to GogAxisPosition.

2005-03-22  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	Add support for axis selection.

	* goffice/graph/gog-axis-line.c (get_point_to_segment_distance): new.
	(axis_line_point): new.
	(axis_circle_point): new.
	(axis_cirlce_render): render as polygon if num_radii > 0.0
	cos (x - pi/2) = sin (x) 
	sin (x - pi/2) = -cos (x)
	(xy_process): handle point routine now.
	(radar_process) : ditto.
	(gog_axis_base_view_info_at_point): new.
	(gog_axis_base_view_padding_request): pass action parameter to process
	functions.
	(gog_axis_base_view_render): ditto.
	* goffice/graph/gog-grid-line.c (gog_grid_line_info_at_point): new.
	Just return FALSE for now.

2005-03-22  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-graph.c (gog_graph_force_update): replace if
	statement by a while loop, since an object update may trigger a
	update request for an other object.
	* goffice/graph/gog-renderer-gnome-print.c
	(gog_graph_print_to_gnome_print): force model update before rendering.
	* goffice/graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_update):
	ditto.
	* goffice/graph/gog-renderer-svg.c (gog_graph_export_to_svg): ditto.
	* plugins/plot_barcol/gog-line.c (gog_line_view_render): revert
	previous broken fix (2005-03-17).
	* tests/pie-demo.c (main): gog_chart_get_cardinality is not needed
	anymore.

2005-03-21  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* configure.in: change test/Makefile to tests/Makefile

2005-03-21  Christopher James Lahey  <clahey@ximian.com

	* goffice/drawing/Makefile.am, goffice/ms-compat/Makefile.am:
	Export header files.

2005-03-21  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-axis-line.c (gog_axis_base_set_position_auto):
	convenience function that places an axis line in the first free
	position.
	(cb_position_toggled): search all the axes with the same type, not
	just parent one.
	(axis_line_get_bbox): correct placement of axis labels.
	(axis_line_render): ditto.
	(axis_circle_get_bbox): ditto.
	(axis_circle_render): ditto.
	* goffice/graph/gog-axis.c (role_axis_line_post_add): use
	gog_axis_base_set_position_auto.
	(gog_axis_view_padding_request): restore padding hack.
	(gog_axis_view_size_allocate): ditto.
	* goffice/graph/gog-chart.c (axis_post_add): place axis in the first
	free position.

2005-03-21  Stepan Kasal  <kasal@ucw.cz>

	* MAINTAINERS: New file, two beings selected as victims -- one human
	  and one demi-god.
	* Makefile.am (EXTRA_DIST): Add README NEWS BUGS MAINTAINERS AUTHORS.
	* README: In the requirements, state that we require pango 1.8.1, and
	  fix the Debian name of the pango package; delete intltool, it's
	  distributed with the package.
	* configure.in: Delete the requirement for libgnomeprintui.

2005-03-20  Jody Goldberg <jody@gnome.org>

	* goffice/gtk/go-format-sel.c (fmt_dialog_enable_widgets) : make sure
	  the current selection is visible.

	* goffice/goffice.c (libgoffice_init) : look in the right place.

2005-03-19  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/go-graph-widget.c: (go_graph_widget_size_allocate),
	(go_graph_widget_set_property), (go_graph_widget_get_property),
	(go_graph_widget_class_init), (go_graph_widget_init): add abd use
	aspect-ratio property.
	* test/pie-demo.c: (main): add a title and a lengend.

2005-03-18  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-axis.c (map_discrete): inverted is in
	GogAxisMap::axis->inverted.
	(map_discrete_to_view): ditto.
	(map_discrete_from_view): ditto.
	(map_linear_from_view) :ditto.
	(map_linear_to_view): ditto.
	(map_log_to_view): ditto.
	(map_log_from_view): ditto.
	(gog_axis_map_from_view): ditto.
	(gog_axis_map_to_view): ditto.
	(map_baseline): new.
	(map_log_finite): new.
	(map_log_baseline): new.
	(gog_axis_map_finite): new. Returns TRUE if value means something in
	this map.
	(gog_axis_map_get_baseline): new. Returns the baseline for the given
	map, in view coordinates, clipped to offset and offset+length, where
	offset and length are the parameters of gog_axis_map_new.
 	* goffice/graph/gog-error-bar.c (gog_error_bar_render): do not try to
	render error bar if a part of it is not at a valid coordinate.
	* plugins/plot_barcol/gog-barcol.c (gog_barcol_view_render): replace
	go_finite tests by gog_axis_map_finite.
	* plugins/plot_radar/gog-radar.c (gog_radar_view_render): ditto.
	* plugins/plot_xy/gog-xy.c: ditto.
	* plugins/plot_barcol/gog-line.c (gog_line_view_render): ditto. Use
	gog_axis_map_get_baseline for y_zero.

2005-03-17  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* plugins/plot_barcol/gog-line.c (gog_line_view_render): Don't free
	memory with invalid pointers.

2005-03-16  Stepan Kasal  <kasal@ucw.cz>

	* autogen.sh: Require intltool >= 0.27.2 and explain why;
	  fix IFS handling; cosmetic changes.
	* configure.in: Cosmetics.
	* goffice/libgoffice-1.pc.in: Change the "Name:" to libGOffice,
	  and put a command with a hint for anon cvs.

2005-03-16  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-axis.c (map_discrete_auto_bound): do not set auto
	cross point.
	
2005-03-16  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/utils/go-line.c (go_line_build_vpath),
	(go_line_build_bpath): fix new point test.

2005-03-16  Jean Brefort  <jean.brefort@normalesup.org>

	* test/pie-demo.c: fix compilation warnings and add some comments.

2005-03-15  Morten Welinder  <terra@gnome.org>

	* goffice/cut-n-paste/pcre/pcre.c (pcre_exec): Backport another
	UMR fix.

2005-03-15  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/graph/gog-axis-line.c (axis_line_get_bbox): remove extra
	gog_axis_map_new.
	(gog_axis_base_view_padding_request): handle GOG_AXIS_SET_X like
	GOG_AXIS_SET_XY.
	(gog_axis_base_view_render): ditto.
	* goffice/graph/gog-chart.c (gog_chart_map_new): ditto.
	(gog_chart_map_2D): ditto.
	* goffice/graph/gog-axis.c (role_axis_line_can_add): adding an axis
	line is only relevant for GOG_AXIS_SET_XY for now.
	(gog_axis_class_init): add role_axis_line_can_add.
	* goffice/graph/gog-plot.c (gog_plot_populate_editor): axis selection
	is only relevant for GOG_AXIS_SET_XY.
	(gog_plot_set_axis_by_id): don't try to find an axis if id = 0,
	GogObject::id starts at 1.
	* plugins/plot_boxes/gog-xy.c (gog_bubble_plot_populate_editor):
	call parent::populate_editor.
	* plugins/plot_boxes/gog-boxplot.c (gog_box_plot_populate_editor):
	ditto.
	(gog_box_plot_view_render): free x_map.
	
2005-03-15  Stepan Kasal  <kasal@ucw.cz>

	* goffice/graph/Makefile.am: Distribute gog-axis-line-impl.h.

2005-03-15  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis.c: (map_discrete_calc_ticks): limit ticks number
	to GOG_AXIS_MAX_TICK_NBR (fix a crash when importing xl log axis).

2005-03-15  Stepan Kasal  <kasal@ucw.cz>

	Also undo the changes connected with the changes in configure.in, ...

	* plugins/plot_barcol/Makefile.am, plugins/plot_boxes/Makefile.am,
	plugins/plot_pie/Makefile.am, plugins/plot_radar/Makefile.am,
	plugins/plot_surface/Makefile.am, plugins/plot_xy/Makefile.am: ...here.

2005-03-14  Morten Welinder  <terra@gnome.org>

	* configure.in: Undo last change.  Test links with gcc, not $LD.

	* goffice/utils/format.c: Compile plain double version first as
	gdb sets breakpoints only for first copy.
	(go_format_number): Disable strange number scaling for ".".
	[#167274]

2005-03-14  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis.c: (gog_axis_get_entry): fixed test for
	GogAxisElemType arg (GOG_AXIS_ELEM_MAX_ENTRY instead of GOG_AXIS_ELEM_MAX).

2005-03-13  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/goffice.c (libgoffice_init): add GogAxisLine object.
	* goffice/graph/Makefile.am: add gog-axis-line.[ch]
	* goffice/graph/goffice-graph.h: add GogAxisLine object. Add new
	object position GOG_POSITION_PADDING.
	* goffice/graph/gog-axis-prefs.glade: Rework of axis property pages,
	now called Scale and Layout.
	* goffice/graph/gog-axis-line.[ch], gog-axis-line-impl.h: new. 
	Contains an implementation of what is needed to actually draw an
	axis on screen, which was previously provided by GogAxis, in 
	GogAxisBase and GogAxisBaseView.
	* goffice/graph/gog-axis.c: GogAxis is now derived from GogAxisBase.
	Tick settings and position are now property of GogAxisBase.
	(create_invalid_axis_ticks): allways generate tick labels.
	(map_discrete_calc_ticks): ditto. 
	(map_linear_calc_ticks): ditto.
	(map_log_calc_ticks): ditto.
	(role_label_post_add): removed.
	(role_axis_line_post_add): new. Set axis line position to an unused
	position.
	(gog_axis_set_property): removed tick and position settings.
	(gog_axis_get_property): ditto.
	(cb_pos_changed): removed.
	(gog_axis_editor): renamed to populate_editor. Use new GogEditor API.
	Removed everything related to tick and position settings.
	(gog_axis_class_init): Change position type of Label childs to
	GOG_POSITION_SPECIAL. Add AxisLine as possible child. Removed tick and
	position properties.
	(gog_axis_init): removed tick and position settings.
	(gog_axis_dataset_get_elem): cross location is a member of
	GogAxisBase.
	(gog_axis_get_pos): removed.
	(gog_axis_is_center_on_ticks): new.
	(gog_axis_view_padding_request): padding is now calculated in
	GogAxisBaseView.
	(gog_axis_view_size_request): removed.
	(gog_axis_view_size_allocate): new. handle axis titles.
	(draw_axis_from_a_to_b): removed.
	(gog_axis_view_render_children): removed.
	(gog_axis_view_render): rendering is now in GogAxisBaseView.
	* goffice/graph/gog-chart.c (gog_chart_map_new),
	(gog_chart_map_2D), (gog_chart_map_free): new.
	(gog_chart_class_init): Axis position type is GOG_POSITION_PADDING
	now.
	(gog_chart_axis_set): renamed to gog_chart_get_axis_set.
	(gog_chart_get_axis): renamed to gog_chart_get_axes.
	(gog_chart_view_get_plot_area): no need to store plot_area. It's in
	GogView::residual.
	(child_request): removed.
	(gog_chart_view_size_allocate): Do not handle axis padding request
	here.
	* goffice/graph/gog-grid-line.c (gog_grid_line_view_render): better
	placement of radar plots.
	* goffice/graph/gog-guru.c (cb_attr_tree_selection_change):
	no need to handle editor type since gog_object_get_editor allways
	returns a notebook now.
	* goffice/graph/gog-label.c (gog_label_populate_editor): Use new
	GogEditor API.	
	* goffice/graph/gog-legend.c (gog_legend_populate_editor): ditto.
	* goffice/graph/gog-series.c (gog_series_element_populate_editor):
	ditto.
	(gog_series_populate_editor): ditto.
	* goffice/graph/gog-style.c (font_init): ditto.
	(gog_style_populate_editor): ditto.
	(style_editor): ditto.
	(gog_style_editor): renamed to gog_style_get_editor.
	(gog_styled_object_editor): removed.
	(gog_style_handle_notebook): removed.
	* goffice/graph/gog-object.c (gog_editor_new), (gog_editor_add_page),
	(gog_editor_set_store_page), (gog_editor_get_notebook),
	(gog_editor_free): new.
	GogObject::id is an int now. This id is unique for a given object type
	and on the same level in the object tree.
	(gog_object_set_property): persist id now.
	(gog_object_get_property): ditto.
	(gog_object_class_init): ditto.
	(gog_object_is_same_type): new.
	(gog_object_generate_name): store auto_name and don't return anything.
	(gog_object_get_id): new.
	(gog_object_generate_id): new.
	(gog_object_set_id): new.
	(gog_object_get_name): return GogObject::auto_name.
	(gog_object_position_cmp): GOG_POSITION_PADDING and
	GOG_POSITION_SPECIAL are equivalent.
	(gog_object_get_editor): use new GogEditor API.
	(gog_object_set_parent): id is an int now.
	* goffice/graph/gog-plot.c (cb_axis_changed): new.
	(gog_plot_populate_editor): new.
	(gog_plot_set_property): store axis reference now.
	(gog_plot_get_property): ditto.
	(gog_plot_class_init): ditto.
	(gog_plot_set_axis_by_id): new.
	(gog_plot_get_axis_id): new.
	* goffice/graph/gog-styled-object.c (styled_object_populate_editor):
	use new GogEditor API.
	* goffice/graph/gog-theme.c (gog_themes_init): handle GogAxisLine
	objects.
	* goffice/graph/gog-view.c: GogView::padding_request : new.
	(gog_view_padding_request_real): new.
	(gog_view_padding_request): new.
	* plugins/plot_barcol/gog-1_5d.c (gog_series1_5d_populate_editor):
	use GogEditor API.
	* plugins/plot_barcol/gog-barcol.c (gog_barcol_plot_populate_editor):
	ditto.
	* plugins/plot_boxes/gog-boxplot.c (gog_box_plot_populate_editor):
	ditto.
	(gog_box_plot_view_render): draw sharp rectangles.
	* plugins/plot_pie/gog-pie-prefs.glade: layout fixes.
	* plugins/plot_pie/gog-pie-series.glade: ditto.
	* plugins/plot_pie/gog-pie.c (gog_pie_series_element_populate_editor):
	use GogEditor API.
	(gog_pie_plot_populate_editor): ditto.
	(gog_ring_plot_populate_editor): ditto.
	* plugins/plot_radar/gog-radar.c (gog_radar_plot_axis_get_bounds):
	maxima is num_elements - 1.
	(gog_radar_view_render): better radar plot placement.
	* plugins/plot_surface/gog-surface.c
	(gog_contour_plot_populate_editor): use GogEditor API.
	* plugins/plot_xy/gog-xy.c (gog_bubble_plot_populate_editor): ditto.
	(gog_xy_series_populate_editor): ditto.
	
		
2005-03-13  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* configure.in: Link -Wl,-O1 if the linker supports it; see
	http://people.redhat.com/drepper/dsohowto.pdf for background.
	* configure.in: Link -Wl,-z,defs if the linker supports it
	* plugins/plot_barcol/Makefile.am, plugins/plot_boxes/Makefile.am,
	plugins/plot_pie/Makefile.am, plugins/plot_radar/Makefile.am,
	plugins/plot_surface/Makefile.am, plugins/plot_xy/Makefile.am: except
	for the plugins.

2005-03-13  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/gtk/Makefile.am: add go-graph-widget.*.
	* goffice/gtk/go-font-sel.c: (canvas_size_changed): display sample
	text centered in the canvas.
	* goffice/gtk/go-graph-widget.c: new GOGraphWidget class.
	* goffice/gtk/go-graph-widget.h: ditto.
	* test/Makefile.am: add pie-demo sample program.
	* test/pie-demo.c: simple sample program.

2005-03-12  Morten Welinder  <terra@gnome.org>

	* goffice/utils/format.c (go_render_number): Add epsilon early and
	permanently.  Fix significant digit check.

2005-03-11  Morten Welinder  <terra@gnome.org>

	* goffice/utils/format.c (go_render_number): Fix two
	trailing-zeros bugs.

	* goffice/utils/Makefile.am (.list.c): Add include of
	goffice/goffice-config.h when building this.

	* goffice/utils/go-libxml-extras.c (xml_node_set_gocolor): Don't
	go via GdkColor which we may not have.

	* goffice/utils/regutf8.c (go_regexp_quote): Renamed from
	gnumeric_regexp_quote.

2005-03-11  Stepan Kasal  <kasal@ucw.cz>

	* configure.in: Propagate ACLOCAL_FLAGS, so that it's available
	  in the Makefile for the aclocal.m4 rule.
	(goffice_reqs): Require pango 1.8.1; it is not good if we
	  _slightly_ differ from gnumeric.

2005-03-09  Morten Welinder  <terra@gnome.org>

	* goffice/utils/datetime.h (WEEKNUM_METHOD_SUNDAY): Define using
	enum.

	* goffice/utils/datetime.c (datetime_weeknum,
	datetime_g_days_between, datetime_g_months_between,
	datetime_g_years_between): Use g_return_val_if_fail, not g_assert.

	* goffice/utils/format.c: Fix long double compilation.

2005-03-08  Jody Goldberg <jody@gnome.org>

	The last of the code dependencies on gnumeric.  Now I just need to
	move the icons.
	* goffice/gtk/go-action-combo-color.c (go_action_combo_color_new) :
	  use gtk_icon_theme_load_icon in place of gnm_app_get_pixbuf.
	* goffice/gtk/goffice-gtk.c (update_preview_cb) : ditto.

2005-03-08  Stepan Kasal  <kasal@ucw.cz>

	* configure.in (AC_OUTPUT, AC_CONFIG_FILES): Use AC_CONFIG_FILES and
	  call AC_OUTPUT with no parameters; this was already available in
	  autoconf 2.52.

2005-03-07  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* goffice/Makefile.am: Fixed inter-library dependencies; fix towards
	  -Wl,-z,defs buildability.
	* goffice/graph/gog-grid-line.h, goffice/gtk/go-action-combo-stack.c,
	  goffice/ms-compat/god-drawing-ms.c: Switch to traditional C comments,
	  to be buildable by gcc -ansi.

2005-03-07  Morten Welinder  <terra@gnome.org>

	* configure.in: Pare down long double support checks to what is
	needed.
	* goffice/goffice-config.h: Don't install this, ...
	* goffice/goffice-features.h: ... install this one instead.

2005-03-07  Stepan Kasal  <kasal@ucw.cz>

	* configure.in: Don't default to --without-gtk if gtk libs are not
	  found; remove checks for gconf, Corba and GNU make, as they are
	  not used in goffice; improve quoting and make use of AC_SUBST/2.
	* goffice/app/Makefile.am (UNUSED): List the unused files lingering
	  in the CVS, ...
	(EXTRA_DIST): ... and distribute them.
	* goffice/gtk/Makefile.am (UNUSED, EXTRA_DIST): Likewise.
	* goffice/cut-n-paste/pcre/Makefile.am: Refresh.

2005-03-07  Morten Welinder  <terra@gnome.org>

	* configure.in: Use largefile apis.

	* goffice/utils/go-libxml-extras.c (go_xml_parse_file):
	New replacement for xmlParseFile.  All users changed.

	* goffice/utils/go-math.c (go_math_init): Verify properties of
	go_nanl, go_pinfl, and go_ninfl.

	* goffice/utils/format.c (number_format_init): Fix initialization
	of beyond_precision and beyond_precisionl.

2005-03-06  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/graph/gog-axis.c: (map_discrete_to_view),
	(map_discrete_from_view), (map_linear_to_view),
	(map_linear_from_view), (map_log_to_view), (map_log_from_view),
	(gog_axis_map_from_view), (gog_axis_map_to_view),
	(draw_axis_from_a_to_b), (gog_axis_view_render): changed map_to_canvas to
	map_to_view and added gog_axis_map_from_canvas and support.
	* goffice/graph/gog-axis.h: ditto.
	* goffice/graph/gog-error-bar.c: (gog_error_bar_render): ditto.
	* goffice/graph/gog-grid-line.c: (gog_grid_line_view_render): ditto.
	* plugins/plot_barcol/gog-barcol.c: (barcol_draw_rect): ditto.
	* plugins/plot_barcol/gog-line.c: (gog_line_view_render): ditto.
	* plugins/plot_boxes/gog-boxplot.c: (gog_box_plot_view_render): ditto.
	* plugins/plot_radar/gog-radar.c: (gog_radar_view_render): ditto.
	* plugins/plot_surface/gog-surface.c: (gog_contour_view_render): ditto.
	* plugins/plot_xy/gog-xy.c: (gog_xy_view_render): ditto.

2005-03-06  Jon K Hellan  <hellan@acm.org>

	* goffice/utils/go-file.c (go_get_mime_type): New.

2005-03-06  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice/app/go-plugin.c (go_plugins_init): append goffice plugin
	directory to plugin_dirs list.
	(go_plugins_get_plugin_dir): new.

2005-03-04  Jody Goldberg <jody@gnome.org>

	* goffice/app/module-plugin-defs.h : remove the ugly go_get_current_plugin
	  and the PLUGIN & PLUGIN_CLASS macras.

2005-03-04  Morten Welinder  <terra@gnome.org>

	* goffice/utils/go-math.c (go_finite): Make this a function and
	add a fallback definition.

	* goffice/graph/gog-renderer-pixbuf.c
	(gog_renderer_pixbuf_finalize): No need to call
	go_pango_fc_font_map_cache_clear.
	(gog_renderer_pixbuf_get_pango_context): Use Gimp's leak
	work-around instead.

	* goffice/utils/go-font.c (go_fonts_list_families,
	go_fonts_list_sizes): New function.  Rework all references to
	go_fonts_family_names, go_fonts_font_size_names,
	go_fonts_font_size_pts to use these.  (This gets rid of one more
	direct -- and wrong -- reference to the ft2 pango backend.)
	(go_pango_fc_font_map_cache_clear): Remove.

	* goffice/utils/go-math.c (go_stern_brocot): Use double, not
	float.

	* goffice/utils/go-glib-extras.c (go_mem_chunk_new): Drop
	references to gnm_float.

2005-03-04  Stepan Kasal  <kasal@ucw.cz>

	* goffice/cut-n-paste/foocanvas/foo-canvas.c: Refresh.

2005-03-02  Ivan, Wong Yat Cheung  <email@ivanwong.info>

	* goffice/gtk/goffice-gtk.c: Use gsf_input_textline_utf8_gets()
	to read .hhmap file which stores topic_string-context_id pairs.
	Become more verbose when topic is not found.
	go_gtk_notice_(nonmodal_)dialog/go_gtk_query_yes_no now
	accept va_arg.

2005-03-02  Stepan Kasal  <kasal@ucw.cz>

	* configure.in: Add check for Xrender.
	* goffice-plugins.mk (INCLUDES): Fix.
	* goffice/cut-n-paste/foocanvas/*: Refresh.

2005-02-28  Jean Brefort  <jean.brefort@normalesup.org>

	* goffice/utils/go-glib-extras.c: replaced gnumeric-config.h by
	goffice-config.h
	* goffice/gtk/go-action-combo-pixmaps.h: updated gui-utils to gtk
	for includes paths.
	* goffice/gtk/go-font-sel.c: ditto.
	* goffice/gtk/go-format-sel.c: ditto.
	* goffice/utils/go-glib-extras.c: ditto.
	* goffice/utils/go-gradient.c: ditto.
	* goffice/utils/go-line.c: ditto.
	* goffice/utils/go-marker.c: ditto.
	* goffice/utils/go-pattern.c: ditto.
	* plugins/plot_barcol/gog-barcol-prefs.c: ditto.
	* plugins/plot_boxes/gog-boxplot.c: ditto.
	* plugins/plot_pie/gog-pie-prefs.c: ditto.
	* plugins/plot_surface/gog-contour-prefs.c: ditto.
	* plugins/plot_xy/gog-bubble-prefs.c: ditto.

2005-02-28  Christopher James Lahey  <clahey@clahey.net>

	* configure.in, goffice-plugins.mk: Changed gnumeric to goffice
	here.

2005-02-27  Christopher James Lahey  <clahey@clahey.net>

	* Makefile.am (pkgconfigdir), configure.in (AC_OUTPUT): Create and
	install libgoffice-1.pc.

2005-02-27  Christopher James Lahey  <clahey@clahey.net>

	* libgoffice-1.pc.in: New file.

2005-02-27  Jody Goldberg <jody@gnome.org>

	* configure.in : Quick and dirty subset of gnumeric

2005-02-26  Jody Goldberg <jody@gnome.org>

	* graph/Makefile.am : move the plugins into the root dir
	  so that the plugins can link against libgoffice

2005-02-22  Morten Welinder  <terra@gnome.org>

	* gui-utils/go-gui-utils.c (filter_images): If we have no
	mime-type, fall back to checking the extension against what
	gdk-pixbuf supports.  Adapted from bug #164589.

2005-02-17  Stepan Kasal  <kasal@ucw.cz>

	* Makefile.am (INCLUDES): Remove -I$(top_srcdir)/src/cut-n-paste-code/goffice.
	Fix the remaining includes.
	* goffice.c (go_sys_icon_dir): Fix typo.

2005-02-17  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* gui-utils/go-gui-utils.c: include errno.h
	(go_help_display): link is part of paths.
			   
2005-02-16  Jean Brefort  <jean.brefort@normalesup.org>

	* graph/gog-renderer-pixbuf.c: (gog_renderer_pixbuf_draw_path): rewrite to
	use large paths at once and have better dashes support
	* graph/plugins/plot_xy/gog-xy.c: (gog_xy_view_render): render path at once
	and use ART_PATH_STROKE_CAP_ROUND for better rendering of large lines.
	* utils/go-line.c: (go_line_build_vpath): new function, builds a vpath from
	a set of points.
	* utils/go-line.h: ditto.

2005-02-16  Jody Goldberg <jody@gnome.org>

	* utils/go-file.c (go_url_check_extension) : pull down from gnumeric

	* gui-utils/go-gui-utils.c (go_gtk_button_new_with_stock) : renamed
	  from go_gtk_button_new_with_stock_image.
	(go_libglade_new) : use go_sys_data_dir.
	(go_gtk_widget_disable_focus) : renamed from go_widget_disable_focus.
	(go_pango_measure_string) : renamed from go_measure_string.
	(go_gtk_window_set_transient) : renamed from go_window_set_transient.
	(go_gtk_nonmodal_dialog) : renamed from gnumeric_non_modal_dialog.
	(go_gtk_file_sel_dialog) : renamed from gnumeric_dialog_file_selection.
	(go_gtk_select_image) : renamed from gui_image_file_select.
	(gui_get_image_save_info) : pulled in from gnumeric.
	(go_atk_setup_label) : renamed from gnm_setup_label_atk.
	(go_help_display) : pulled down from gnumeric and made generic.
	(go_gtk_help_button_init) : ditto.
	(go_gtk_url_is_writeable) : ditto.
	(go_gtk_dialog_run) : pulled from gnumeric
	(go_gtk_notice_dialog) : ditto.
	(go_gtk_notice_nonmodal_dialog) : ditto.
	(go_gtk_query_yes_no) : ditto.

	* gui-utils/Makefile.am : Add libhtml_stub

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_init) : init the
	  dpis.
	(gog_renderer_pixbuf_get_pango_context) : use the stored calculated
	  dpi rather than gconf
	(gog_renderer_pixbuf_update) : store the dpi

	* goffice.c (libgoffice_init) : init the paths.  We may want to expand
	  this at some point to allow cmd-line or env-var override.
	(go_sys_data_dir) : new.
	(go_sys_icon_dir) : new.

2005-02-15  Stepan Kasal  <kasal@ucw.cz>

	* gui-utils/go-marshalers.list: Remove, merge with ...
	* utils/go-marshalers.list: ... this one, adjust all callers.
	* gui-utils/Makefile.am: Nuke the rules for go-marshalers.
	* utils/Makefile.am: Typo.
	* goffice.mk (INCLUDES): Add $(builddir)/../cut-n-paste-code,
	  for the generated header goffice/utils/go-marshalers.h.

2005-02-11  Morten Welinder  <terra@gnome.org>

	* gui-utils/go-combo-text.c (cb_list_changed): Plug leak.

	* utils/go-font.c (go_fonts_init): Copy family names instead of
	relying on pango leak.  Destroy fontmap only after we get the
	names out.

	* gui-utils/go-format-sel.c (generate_preview): Avoid crash in
	g_warning.

2005-02-09  Stepan Kasal  <kasal@ucw.cz>

	* app/error-info.h: Change the guard to GO_ERROR_INFO_H.

2005-02-08  Jon K Hellan  <hellan@acm.org>

	* utils/format.h: Include numbers.h.
	(render_number): Make declaration match	definition. 

2005-02-08  Morten Welinder  <terra@gnome.org>

	* utils/go-font.c (go_fonts_init): Plug leak.

2005-02-08  Jody Goldberg <jody@gnome.org>

	* Release 1.5.0

2005-02-05  Morten Welinder  <terra@gnome.org>

	* graph/gog-renderer-gnome-print.c (get_font): Return a
	PangoFontDescription, not a GnomeFont.  All callers changed.

2005-02-04  Morten Welinder  <terra@gnome.org>

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_finalize):
	Remove old #ifdef HAVE_foo stuff.
	* graph/gog-renderer-gnome-print.c: Ditto.

2005-02-03  Jean Brefort  <jean.brefort@normalesup.org>

	* graph/gog-axis.c: (map_linear_auto_bound): change < to >, fix #164593.

2005-01-25  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_boxes/gog-boxplot.c (gog_box_plot_pref) : fix
	  signature.

2005-01-24  Jean Brefort  <jean.brefort@normalesup.org>

	* graph/goffice-graph.h: add GOG_AXIS_SET_X.
	* graph/gog-chart.c: (role_grid_can_add),
	(gog_chart_axis_set_assign), (gog_chart_view_size_allocate): add grid
	when we have only an X axis.
	* graph/plugins/Makefile.am: add box-plots plugin
	* graph/plugins/plot_boxes/Makefile.am: new plugin.
	* graph/plugins/plot_boxes/gog-boxplot-prefs.glade:
	* graph/plugins/plot_boxes/gog-boxplot.c: ditto.
	* graph/plugins/plot_boxes/gog-boxplot.h: ditto.
	* graph/plugins/plot_boxes/plot-types.xml.in: ditto.
	* graph/plugins/plot_boxes/plugin.xml.in: ditto.
	* pixmaps/Makefile.am: add box-plots pixmaps.
	* pixmaps/boxplot.xpm: ditto.
	* pixmaps/chart_boxplot_1_1.png: ditto.
	* pixmaps/chart_boxplot_1_1.svg: ditto.

2005-01-22  Jean Brefort  <jean.brefort@normalesup.org>

	* graph/gog-renderer-gnome-print.c:
	(gog_renderer_gnome_print_draw_bezier_path),
	(gog_renderer_gnome_print_class_init): add Bezier paths support.
	* graph/gog-renderer-impl.h: ditto.
	* graph/gog-renderer-pixbuf.c:
	(gog_renderer_pixbuf_draw_bezier_path),
	(gog_renderer_pixbuf_class_init): ditto.
	* graph/gog-renderer-svg.c: (gog_renderer_svg_draw_bezier_path),
	(gog_renderer_svg_class_init): ditto.
	* graph/gog-renderer.c: (gog_renderer_draw_bezier_path): ditto.
	* graph/gog-renderer.h: ditto.
	* graph/plugins/plot_xy/gog-xy.c: (gog_xy_set_property),
	(gog_xy_get_property), (gog_xy_plot_class_init),
	(gog_xy_view_render): add spline interpolation support.
	* graph/plugins/plot_xy/gog-xy.h: ditto.
	* graph/plugins/plot_xy/plot-types.xml.in: ditto.
	* pixmaps/Makefile.am: install chart_scatter_3_3.png.
	* utils/go-line.c: (go_line_build_bpath): new function, builds a Bezier path
	from an array of points.
	* utils/go-line.h: add go_line_build_bpath.

2005-01-17  Jody Goldberg <jody@gnome.org>

	* Release 1.4.2

2005-01-14  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=163939
	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_update) : zero
	  sized views are not relevent, and does not require any redrawing.

2005-01-11  Morten Welinder  <terra@gnome.org>

	* gui-utils/go-combo-text.c (go_combo_text_init): Bind to the
	treeview's cursor_changed signal, not the selection's changed
	signal.  [#163412].

2005-01-06  Morten Welinder  <terra@gnome.org>

	* utils/go-math.c (go_fake_floor, go_fake_ceil): Fix negative
	case.

2005-01-05  Jean Brefort <jean.brefort@normalesup.org>

	* pixmaps/Makefile.am: add chart_contour_1_1.png.
	* pixmaps/chart_contour_1_1.png: new icon by Emmanuel Pacaud.
	* pixmaps/chart_contour_1_1.svg: ditto.
	* pixmaps/chart_contour_1_2.png: ditto.
	* pixmaps/chart_contour_1_2.svg: ditto.
	* pixmaps/chart_scatter_3_3.png: ditto.
	* pixmaps/chart_scatter_3_3.png: ditto.
	* graph/plugins/plot_surface/plot_types.xml.in: use chart_contour_1_1.png.


2005-01-05  Morten Welinder  <terra@gnome.org>

	* graph/gog-series.c (gog_series_get_element): Fix NULL/FALSE
	confusion.

2004-12-17  Jody Goldberg <jody@gnome.org>

	From Ivan Wong :
	http://bugzilla.gnome.org/show_bug.cgi?id=159860
	* utils/go-file.c (go_url_show) : Use ShellExecute on win32

2004-12-17  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/plot-xy/gog-xy.c (gog_xy_series_init_style): don't disable
	theming.

2004-12-17  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-series.c (gog_series_dataset_dim_changed): resize for every
	label change.
	* graph/gog-axis.c (gog_axis_update): no need to force resize for 
	discrete axis, it's handled by gog_series_dataset_dim_changed.
	
2004-12-15  Morten Welinder  <terra@gnome.org>

	* gui-utils/go-action-combo-stack.c (get_key_at_path): Don't crash
	if we don't get an iter.
	(cb_motion_notify_event): Handle empty tree case.

2004-12-09  Jody Goldberg <jody@gnome.org>

	* Release 1.4.1

2004-12-09  Jody Goldberg <jody@gnome.org>

	* utils/go-file.c (go_url_show) : patch the problems morten pointed
	  out and finish the '%1' subsitution.

2004-12-08  Jody Goldberg <jody@gnome.org>

	* utils/go-file.c (go_url_show) : new with a win32 and non-gnome wrapper

2004-12-01  Jody Goldberg <jody@gnome.org>

	* goffice.mk (INCLUDES) : remove GNUMERIC_ICON_DIR

2004-11-28  Jody Goldberg <jody@gnome.org>

	* Release 1.4.0

2004-11-19  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-style.c (gog_style_gradient_load): call
	  gog_style_set_fill_brightness in order to correctly initialize start
	  and end colors.

2004-11-18  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c (create_invalid_axis_ticks): add a flag to note
	create "##" labels.
	* graph/gog-guru.c (cb_attr_tree_selection_change): scroll to selected
	row.

2004-11-14  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-renderer-pixbuf.c (line_size): width <= 0. is hairline.
	* graph/gog-renderer.c (gog_render_line_size): ditto.
	* graph/gog-style.c (cb_outline_size_changed): round to 2 significant
	digits since sometimes adj->value returns 1E-17 instead of zero.
	(cb_line_size_changed): ditto.
	(gog_style_apply_theme): handle dash_type property.
	(gog_style_gradient_sax_save): fix brightness test to be consistent
	with dom_save.
	(gog_style_gradient_load): start-color and end-coilor were inverted.
	(gog_style_is_outline_visible): line is visible for all width values.
	(gog_style_is_line_visible): ditto.
	(gog_style_force_auto): handle auto_dash.
 	* graph/plugins/plot_xyt/gog-xy.c (gog_xy_series_init_style): handle
	dash_type property.

2004-11-14  Andreas J. Guelzow <aguelzow@taliesin.ca>

	http://bugzilla.gnome.org/show_bug.cgi?id=152514
	* graph/gog-guru.c (graph_guru_init_ok_button): new
	(graph_guru_init): call graph_guru_init_ok_button
	(gog_guru): initialize state->editing

2004-11-07  Jody Goldberg <jody@gnome.org>

	* Release 1.3.93

2004-10-31  Jody Goldberg <jody@gnome.org>

	* Release 1.3.92

2004-11-01  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=157048
	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render): fix
	leak.

2004-10-30  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=152765
	* graph/gog-guru.c (graph_guru_init_format_page): delete_button is
	really a button now, so connect "clicked" signal instead of
	"activate".
	* graph/gog-guru.glade: replace "Delete" menuitem by a button as a
	workaround of gtk+ bug #155336.

2004-10-29  Morten Welinder  <terra@gnome.org>

	* cut-n-paste/pcre/pcre.c (ord2utf8): Fix ABR.  (Fixed in PCRE
	5.0, but I don't want to upgrade right now.)

2004-10-27  Morten Welinder  <terra@gnome.org>

	* utils/go-line.c (go_line_clip_vpath): Make sure "reject" is
	initialized.
	(GOLineDashDesc): Do not rely on C99 features.

2004-10-27  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-style.c (gog_style_gradient_load): fix brightness case.

2004-10-26  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render): fix
	marker for missing data.

2004-10-26  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=152585
	* grah/gog-axis.c (gog_axis_update): allways emit changed signal for
	discrete axis, since labels may have changed.
	* plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_update): call
	gog_axis_bound_changed if GogSeries1_5D->index_changed == TRUE.
	(gog_series1_5d_dim_changed): new. Used to set index_changed to TRUE
	when vector dim_i == 0 changed.
				      
2004-10-25  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c (draw_axis_from_a_to_b): use
	gog_style_is_line_visible instead of checking line width.
	(gog_axis_view_render): ditto.
	* graph/gog-label.c (gog_label_view_render): draw sharp rectangle
	around label.
	* graph/gog-legend.c (cb_render_elements): draw sharp sample line and
	sharp rectangle around elements.
	(gog_legend_class_init): set clip to TRUE in order to avoid sample
	lines to extend beyond legend area.
	* graph/gog-outlined-object.c (gog_outlined_view_size_request): use
	gog_style_is_line_visible instead of checking for positive line width.
	(gog_outlined_view_size_allocate): ditto.
	(gog_outlined_view_render): draw sharp rectangle.
	* graph/gog-renderer-gnome-print.c (set_dash): new.
	(gog_renderer_gnome_print_draw_path): honor dash setting. Clip dashed path
	in order to avoid huge memory allocation and crash for very long
	lines.
	(gog_renderer_gnome_print_draw_polygon): ditto.
	* graph/gog-renderer-impl.h: add GogRenderer::line_dash and
	GogRenderer::outline_dash members.
	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_clip_push): fix
	clip area rounding.
	(line_size): new. Same as gog_renderer_line_size, but don't round
	width < 1.0 .
	(gog_renderer_pixbuf_line_size): use line_size.
	(gog_renderer_pixbuf_sharp_path): fix rounding.
	(gog_renderer_pixbuf_draw_path): honor dash setting.
	(gog_renderer_pixbuf_draw_polygon): ditto.
	* graph/gog-renderer-svg.c (gog_renderer_svg_clip_push): use C locale
	for double to string conversion.
	(stroke_dasharray): new.
	(gog_renderer_svg_draw_path): honor dash setting.
	(gog_renderer_svg_draw_polygon): ditto.
	* graph/gog-renderer.c: define a hair line width and set it to 0.24pt.
	(gog_renderer_finalize): free line_dash and outline_dash.
	(update_dash): new. 
	(gog_renderer_push_style): call update_dash.
	(gog_renderer_pop_style): ditto.
	(gog_renderer_clip_push): keep a pointer to the current clip.
	(gog_renderer_clip_pop): ditto.
	(draw_rectangle): new.
	(gog_renderer_draw_sharp_rectangle): new.
	(gog_renderer_line_size): return GOG_RENDERER_HAIR_LINE_WIDTH instead
	of 1.0 for style->line.width == 0.0 .
	* graph/gog-style-prefs.glade: add dash type combos.
	* graph/gog-style.c (cb_outline_dash_type_changed): new.
	(cb_line_dash_type_changed): new.
	(outline_init): add dash selector.
	(line_init): ditto.
	(gog_style_line_load): load dash settings.
	(gog_style_line_dom_save): save dash settings.
	(gog_style_line_sax_save): ditto.
	(gog_style_is_different_size): check dash_type.
	(gog_style_is_outline_visible): new.
	(gog_style_is_line_visible): check dash_type.
	* graph/gog-theme.c (gog_themes_init): use dash_type.
	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render): don't
	draw sharp path.
	* utils/go-line.[ch]: new.	

2004-10-13  Jean Brefort <jean.brefort@normalesup.org>

	* graph/gog-axis.c: add center_on_ticks boolean to force centering labels
	on ticks for discree mapped axis.
	* graph/gog-plot.h: ditto.
	* graph/gog-plot.c: ditto.

2004-10-19  Morten Welinder  <terra@gnome.org>

	* utils/go-file.c (go_dirname_from_uri): New function.

2004-10-13  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c (gog_axis_dim_changed): call gog_axis_update in
	order to refresh labels and ticks.

2004-10-13  Morten Welinder  <terra@gnome.org>

	* graph/gog-axis.c (gog_axis_get_entry): Remove band-aid no longer
	needed.  (Although files created in the past few days will have
	the vector type in the file.)

2004-10-13  Jean Brefort <jean.brefort@normalesup.org>

	* graph/gog-axis.c: (make_dim_editor): replace TRUE by GO_DATA_SCALAR in the
	call to gog_data_allocator_editor.
	* graph/gog-label.c: (gog_label_editor): ditto.
	* graph/gog-series.c: (gog_series_editor): ditto.

2004-10-13  Jean Brefort <jean.brefort@normalesup.org>

	* graph/gog-plot-impl.h: added a foreach_elem member in GogPlotClass
	* graph/gog-plot.c: (gog_plot_foreach_elem): calls Klass->foreach_elem
	when not NULL to override default legends management.
	* graph/gog-renderer-gnome-print.c: (draw_path): add ART_MOVETO_OPEN case,
	(gog_renderer_gnome_print_measure_text): fix a bad sign.
	* graph/gog-renderer-svg.c: (draw_path): add ART_MOVETO_OPEN case.

2004-10-12  Morten Welinder  <terra@gnome.org>

	* graph/gog-axis.h (GogAxisTickTypes): Fix namespace.

	* graph/gog-axis.c (GogAxisElemType): Name this type.
	(gog_axis_get_entry): Use GogAxisElemType, not unsigned int, for
	the index argument.

2004-10-12  Morten Welinder  <terra@gnome.org>

	* graph/gog-axis.c (map_linear_auto_bound): Fix gnm_float/double
	confusion.
	(gog_axis_get_entry): Temporary fix for user-defined axis limits.

2004-10-11  Morten Welinder  <terra@gnome.org>

	* graph/gog-series.c (gog_series_finalize): Plug leak.

2004-10-11  Jody Goldberg <jody@gnome.org>

	* gui-utils/Makefile.am : drop the dock code we're not going to be
	  using it before 1.4

2004-10-02  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=154664
	* graph/gog-guru.glade: set width and height request for sample area
	and object list.

2004-10-09  Jean Brefort <jean.brefort@normalesup.org>

	* graph/go-data.c: (go_data_matrix_emit_changed),
	(go_data_matrix_class_init), (go_data_matrix_get_size),
	(go_data_matrix_get_values), (go_data_matrix_get_value),
	(go_data_matrix_get_str), (go_data_matrix_get_minmax): new GOMatix class.
	* graph/go-data.h: ditto.
	* graph/go-data-impl.h: ditto.
	* graph/goffice-graph.h: ditto. Added GODataType enumerated type.
	* graph/gog-data-allocator.c: (gog_data_allocator_editor): Replaced
	"gboolean prefers_scalar" by "GODataType data_type". 
	* graph/gog-data-allocator.h: ditto.
	* graph/gog-error-bar.c: (cb_type_changed), (gog_error_bar_prefs): 
	* graph/gog-series.c: (gog_series_editor): ditto.
	* graph/plugins/plot_surface/Makefile.am: new contour plots.
	* graph/plugins/plot_surface/gog-contour-prefs.c: ditto.
	* graph/plugins/plot_surface/gog-contour-prefs.glade: ditto.
	* graph/plugins/plot_surface/gog-surface.c: ditto.
	* graph/plugins/plot_surface/gog-surface.h: ditto.
	* graph/plugins/plot_surface/plot-types.xml.in: ditto.
	* graph/plugins/plot_surface/plugin.xml.in: ditto.

2004-10-08  Jody Goldberg <jody@gnome.org>

	* graph/gog-object.c (gog_object_dup) : copy the position.

2004-10-06  Jody Goldberg <jody@gnome.org>

	* graph/gog-control-foocanvas.c (gog_control_foocanvas_update) : Fix
	  redraw.  There were two bugs.
	  1) foocanvas_group_update was wiping tbe bounds (things always look
	     like they move)
	  2) We were not requesting a redraw for the old position before
	     moving.

2004-10-05  Jody Goldberg <jody@gnome.org>

	* Release 1.3.91

2004-10-03  Jody Goldberg <jody@gnome.org>

	* graph/gog-control-foocanvas.c :  Make the class definition public to
	  make it easier to graft on an additional interface in the app.  We
	  may not need this later if SheetObject moves down into goffice

2004-10-02  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=152672
	* graph/gog-theme.c (gog_themes_init): set pattern background to
	white, even when automatic pattern style is NONE.
	* graph/gog-label.c (gog_label_editor): fix layout.
	(gog_label_view_render): add padding
	when outline > 0. or pattern != NONE.
	* graph/gog-outlined-object.c (gog_outlined_view_size_request): ditto.
	(gog_outlined_view_size_allocate): ditto.
	* graph/gog-style.c (gog_style_is_different_size): changing pattern
	type can change object size.

2004-09-29  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-guru-type-selector.glade: new.
	* graph/Makefile.am: add gog-guru-type-selector.glade.
	* graph/gog-axis-prefs.glade: fix layout.
	* graph/gog-axis.c (make_dim_editor): ditto.
	(gog_axis_editor): ditto.
	* graph/gog-guru.c (cb_attr_tree_selection_change): allways use a
	notebook, but hide tabs when there's only one page.
	(graph_guru_type_selector_new): load layout from glade file.
	* graph/gog-guru-glade: remove scrollbar around property notebook.
	Make object menu unshrinkable. Fix layout.
	* graph/gog-series.c (gog_series_element_editor): fix layout.
	* graph/gog-style.c (font_int): ditto.
	* graph/plugins/plot_barcol/gog-barcol-prefs.glade: ditto.
	* graph/plugins/plot_pie/gog-pie-series.glade: ditto.
	* graph/plugins/plot_pie/gog-ring-prefs.glade: ditto.
	* graph/plugins/plot_xye/gog-xy-prefs.glade: ditto.
		
2004-09-29  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=153402
	* graph/plugins/gog-radar-prefs.c: removed.
	* graph/plugins/gog-radar-prefs.glade: removed.
	* graph/plugins/gog-radar.c: removed reference to plot editor.
	* graph/plugins/Makefile.am: removed reference to
	gog-radar-prefs.[c,glade].

2004-09-29  Morten Welinder  <terra@gnome.org>

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_finalize):
	Conditionalise the use of pango_context_get_font_map.

2004-09-28  Morten Welinder  <terra@gnome.org>

	* utils/go-font.c (go_pango_fc_font_map_cache_clear): New
	function, wrapping pango_fc_font_map_cache_clear (which isn't
	public).

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_finalize): Call
	go_pango_fc_font_map_cache_clear.

	* utils/go-color.c (go_color_to_pango): Add is_fore argument and
	export.

2004-09-28  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_view_info_at_point):
	disable automatic point creation for ring plot, since it
	doesn't work. For pie plot, don't create new point when it already
	exists, but select it.

2004-09-28  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=153401
	* graph/plugins/plot_pie/gog-pie.c (gog_pie_view_render): fix special
	inner arc handling test (has_hole :) ).

2004-09-27  Morten Welinder  <terra@gnome.org>

	* utils/go-math.c (go_fake_ceil): New function.

	* utils/go-file.c (go_url_encode): Make this half-way decent.
	(go_url_decode): Make this O(n) too.

	* libpresent/ppt-parsing-helper.h: Add header guard.

2004-09-27  Jon K Hellan  <hellan@acm.org>

	* graph/gog-renderer-gnome-print.c
	(gog_graph_print_to_gnome_print): Conditionalize call to
	gnome_print_pango_create_layout.

2004-09-26  Jody Goldberg <jody@gnome.org>

	From : Yukihiro Nakai  <nakai@gnome.gr.jp>
	http://bugzilla.gnome.org/show_bug.cgi?id=148550
	* utils/go-file.c (go_url_decode) : new
	(go_url_encode) : new.  I'm not sure these belong in go vs gsf
	  but lets keep them here for now until they get fleshed out.

2004-09-25  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-error-bar-prefs.glade: 12 px between label and control.
	* graph/gog-style-prefs.glade: 12 px padding. Use GtkAlignment for
	group layout.
	* graph/gog-style.c: use new layout.
	
2004-09-25  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-error-bar-prefs.glade: layout rework.
	* graph/gog-error-bar.c (cb_type_changed): use new layout. Hide styles
	when category is none.
	(gog_error_bar_prefs): ditto.

2004-09-23  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c (gog_axis_view_render): draw_minor and draw_major
	only if line_width > 0.
	* grapg/gog-theme.c (gog_themes_init): initialize GogGrid outline.

2004-09-23  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c (gog_axis_view_render): Calculate major_out even if
	line_width <= 0, because it's needed for label positionning.

2004-09-23  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c: make GogGridLine as child of GogAxis.
	(role_grid_line_can_add): new.
	(role_grid_line_major_can_add): new.
	(role_grid_line_minor_can_add): new.
	(role_grid_line_major_post_add): new.
	(role_grid_line_minor_post_add): new.
	(gog_axis_view_class_init): add grid line roles.
	(gog_axis_view_render_children): new. Don't render grid lines here.
	(gog_axis_view_render): call gog_axis_view_render_children. Free
	axis_list.
	* graph/gog-chart.c
	(gog_chart_view_class_init): set call_parent_render to FALSE.
	(grid_line_render): new. Render minor grid, then major.
	(gog_chart_view_render): new. Kludge for grid lines rendering before
	axis.
	* graph/gog-grid-line.c: add new is_minor property and remove type
	property.
	(gog_grid_line_is_minor): new.
	(gog_grid_line_view_render): implement radar grid.
	* graph/gog-grid.c: Remove grid line roles.
	(role_grid_line_can_add): removed.
	(role_grid_x_major_can_add): removed.
	(role_grid_x_minor_can_add): removed.
	(role_grid_y_major_can_add): removed.
	(role_grid_y_minor_can_add): removed.
	(role_grid_x_major_post_add): removed.
	(role_grid_x_minor_post_add): removed.
	(role_grid_y_major_post_add): removed.
	(role_grid_y_minor_post_add): removed.
	(gog_grid_view_render): sharpen polygon.
	(gog_grid_init_style): add OUTLINE property.
	* graph/gog-outlined-object.c: add a call_parent_render class
	property. Deafult to TRUE.
	* graph/gog-theme.c (gog_themes_init): add MajorGrid and MinorGrid
	themes. Remove X-MajorGrid, Y-MajorGrid, X-MinorGrid, Y-MinorGrid
	themes.
				     
2004-09-23  Morten Welinder  <terra@gnome.org>

	* graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_text): Get the right kind of size.
	(gog_renderer_gnome_print_measure_text): Use layout method here
	too.

2004-09-22  Morten Welinder  <terra@gnome.org>

	* graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_text): Print using pango layouts.
	Adapted from code by Yaacov Zamir <kzamir@walla.co.il>.

2004-09-21  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=153289
	* graph/gog-axis.c (gog_axis_editor): hide minor tick properties when
	editing discrete axis properties.
	* grah/gog-axis-prefs.glade: name minor tick frame.

2004-09-20  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* pixmaps: make color order consistent and rerender png from svg with
	inkscape instead of rsvg.

2004-09-20  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* goffice.c: new GogGridLine type.
	* graph/gog-axis.c (map_discrete_calc_ticks): allways calc major and
	minor ticks.
	(map_linear_calc_ticks): ditto.
	(map_log_calc_ticks): ditto.
	(gog_axis_get_ticks): return tick list and tick number now.
	(gog_axis_view_render): since all ticks are in cache, only draw them
	if they are visibles.
	* graph/gog-grid-line.[ch]: new.
	* graph/gog-grid.c (gog_grid_init_style): use only fill property.
	(role_grid_line_can_add): new.
	(role_grid_x_major_can_add): new.
	(role_grid_x_minor_can_add): new.
	(role_grid_y_major_can_add): new.
	(role_grid_y_minor_can_add): new.
	(role_grid_x_major_post_add): new.
	(role_grid_x_minor_post_add): new.
	(role_grid_y_major_post_add): new.
	(role_grid_y_minor_post_add): new.
	(gog_grid_class_init): register new grid line roles.
	* graph/gog-theme.c: register theme for new grid line objects.
	
2004-09-20  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=153146
	* graph/plugins/plot_radar/gog-radar.c (gog_radar_view_render): Check
	if series is valid before trying to render it.

2004-09-19  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=152615
	* pixmaps: new consistent charting icon set (based on a Jimmac work).

2004-09-16  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-error-bar.c (gog_error_bar_get_min_max): get values from
	outside of loop.
	(gog_error_bar_get_bounds): add assertions. Use
	go_data_vector_get_value.

2004-09-15  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=152499
	* graph/gog-error-bar.c (gog_error_bar_get_minmax): check whether
	associated GogSeries is valid.

2004-09-15  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-error-bar.c (gog_error_bar_get_minmax): add assertions.

2004-09-14  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c (gog_axis_map_is_valid): add assertion.

2004-09-09  Jody Goldberg <jody@gnome.org>

	* graph/gog-series.c (gog_series_element_set_index) : new to handle
	  theming properly.
	(gog_series_element_set_property) : use it here.
	(gog_series_element_init_style) : and here.
	(role_series_element_allocate) : and here.

2004-09-10  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-renderer-pixbuf.c (gog_renderer_draw_text): remove
	remaining unref.
	
2004-09-10  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=152201
	* graph/gog-axis.c (map_discrete_auto_bound): Set automatic maximum
	number of major and lables to 100.
	(gog_axis_view_render): don't draw axis + ticks in one path.
	* graph/gog-renderer-pixbuf.c: cache pango layout.
	(gog_renderer_pixbuf_get_pango_layout): new.
	(gog_renderer_pixbuf_get_pango_context): new.
	(gog_renderer_pixbuf_push_style): new. unref pango_layout.
	(gog_renderer_pixbuf_push_style): ditto.
				
2004-09-08  Jody Goldberg <jody@gnome.org>

	* Release 1.3.90

2004-09-07  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=151530
	tick label truncated by chart outline
	http://bugzilla.gnome.org/show_bug.cgi?id=151527
	pb when exporting to svg a chart without outline
	http://bugzilla.gnome.org/show_bug.cgi?id=127203
	X axis labels centre on chart, not on axis
	
	* graph/goffice-graph.h: new GogViewPadding type.
	* graph/gog-axis.c (map_log_to_canvas): DBL_MIN is not -DBL_MAX.
	(gog_axis_view_padding_request): new.
	(gog_axis_view_size_request): just call gog_view_size_child_request.
	(gog_axis_view_size_allocate): remove.
	(gog_axis_view_render): stop libart path to third element in case of
	  line_width <= 0. Fix label dropping. Use Chart->plot_area for axis
	  drawing.
	* graph/gog-chart.c (gog_chart_view_get_plot_area): new.
	(child_request): new.
	(gog_chart_view_size_allocate): axis now request space around
	  residual. Store residual in Chart->plot_area.
	* graph/gog-label.c (gog_label_view_render): draw rectangle here,
	  since in gog_outlined_object, rectangle around label is clipped to
	  view->allocation.
	* graph/gog-renderer-pixbuf.c (draw_text): don't clip text, to be
	  consistent with svg and gnome-print renderer.
	
2004-09-06  Jody Goldberg <jody@gnome.org>

	* gui-utils/go-color-palette.c (go_color_palette_setup) : warning
	  suppression

2004-09-05  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=151628
	* graph/gog-guru.c (cb_typesel_sample_plot_resize) : hard code the
	  zoom when recalculating the size.  The sample graph is only zoomed
	  when visible.

2004-09-05  Jody Goldberg <jody@gnome.org>

	* graph/gog-guru.c (graph_guru_type_selector_new) : Add a light bulb
	  to the 'show sample' button to make it stand out a bit more

	* graph/gog-guru.c (graph_guru_type_selector_new) : Make the sample
	  canvas the main resizeable element in the type selector.

2004-09-01  Jody Goldberg <jody@gnome.org>

	* utils/go-gradient.c : conditionalize selector on WITH_GTK
	* utils/go-pattern.c : ditto
	* utils/go-marker.c : conditionalize selector and the use of GdkPixbuf

	* utils/go-color.c : Remove unnecessary include of color-combo
	  and conditionalize the gdk support routines in case we do not have
	  gtk.

2004-09-03  Morten Welinder  <terra@gnome.org>

	* graph/plugins/plot_barcol/gog-1.5d.c
	(gog_series1_5d_populate_editor): Terminate g_object_get call by
	NULL, not 0.

2004-09-02  Morten Welinder  <terra@gnome.org>

	* graph/plugins/plot_radar/gog-radar-prefs.glade: Someone
	accidentally cut the guts of this.  Add vary-style button that the
	code appears to want.

2004-08-31  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=151529
	* graph/plugins/plot_xy/gog-xy.c (gog_xy_view_render): set series to to
	right value for marker drawing.
	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render): use
	right index when walking through path for marker drawing.
								  
2004-08-30  Morten Welinder  <terra@gnome.org>

	* graph/gog-plot-engine.c (gog_plot_new_by_name): Ick.  We need to
	keep a GObject ref in addition to the GnmPlugin ref.

2004-08-29  Jody Goldberg <jody@gnome.org>

	* Release 1.3.2

2004-08-26  Morten Welinder  <terra@gnome.org>

	* goffice.c (libgoffice_shutdown): Showdown plugin services.

	* graph/gog-plot-engine.c (gog_plot_new_by_name): Handle inactive
	plugins.  Mark plugins as used.
	(gog_plugin_services_shutdown): New function.

2004-08-25  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_view_render) : don't leak an axis map for
	  discrete axes

2004-08-24  Morten Welinder  <terra@gnome.org>

	* utils/go-file.c (go_file_split_uris): New function for
	text/uri-list parsing.

2004-08-23  Morten Welinder  <terra@gnome.org>

	* graph/gog-plot-engine.c (create_plot_families): New function.
	(gog_plot_family_by_name, gog_plot_families): Ensure we have
	families.

2004-08-20  Morten Welinder  <terra@gnome.org>

	* graph/gog-error-bar.c (gog_error_bar_prefs): Arrange for gui to
	be unref'd.

2004-08-18  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c (map_linear_calc_ticks): fix tick number
	calculation.
	(overlap): use already defined MAX / MIN.

2004-08-17  Morten Welinder  <terra@gnome.org>

	* goffice.c (libgoffice_init): Call gsf_init.

2004-08-17  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render):
	don't clip markers to plot area.

2004-08-17  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c (create_invalid_axis_ticks): new.
	(map_[log,discrete,linear]_init): when axis is not valid, init data
	for special invalid axis rendering.
	(map_[log,discrete,linear]_calc_ticks): when axis is not valid, return
	a special set of ticks/labels.
	(gog_axis_map_is_valid): new.
	(gog_axis_map_new): set the map->is_valid flag. Default to FALSE if
	there's no init function.
	* graph/plugins/plot_barcol/gog-barcol.c (gog_barcol_view_render): use
	gog_axis_map_is_valid.
	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render): idem.
	* graph/plugins/plot_radar/gog-radar.c (gog_radar_view_render): idem.
	Add support for mapping.
	* graph/plugins/plot_xy/gog-xy.c (gog_xy_view_render): don't clip
	markers to plot area, but to chart area.
							
2004-08-17  Jon K Hellan  <hellan@acm.org>

	* graph/gog-stisyle.c (cb_image_file_select): is_save parameter to
	gui_image_file_select no longer needed.

2004-08-13  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c (gog_axis_editor): don't show preferences for
	circular axis.
	(overlap): new.
	(draw_axis_from_a_to_b): use gog_axis_map and draw labels.
	(gog_axis_view_render): at least width of the '0' char between two
	labels for GOG_AXIS_X.
	* graph/gog-view.h: remove call_parent_render and add a clip flag.
	* graph/gog-chart.c (gog_chart_view_render): removed.
	(gog_chart_view_class_init): set clip to TRUE.
	* graph/gog-outlined-object.c: allways call parent render.
	* graph/gog-renderer-gnome-print.c: change start/stop_clipping to
	clip_push/pop.
	* graph/gog-renderer-svg.c: change start/stop_clipping to
	clip_push/pop.
	(gog_renderer_draw_text): add xml child in current node instead of
	first doc child.
	* graph/gog-renderer-pixbuf: change start/stop_clipping to
	clip_push/pop.
	(gog_renderer_pixbuf_clip_push): add multilevel clipping capability.
	(gog_renderer_pixbuf_print_clip_pop): idem.
	* graph/gog-renderer.c: change start/stop_clipping to clip_push/pop
	and add a clip stack to handle mutilevel clipping.
	* graph/gog-view.c (gog_view_class_init): set default clip flag to
	FALSE.
	(gog_view_render): if klass->clip is TRUE, call to clip_push/pop
	functions.
	* graph/plugins/plot_barcol/gog-barcol.c: set klass->clip to TRUE.
	* graph/plugins/plot_barcol/gog-line.c: idem.
	* graph/plugins/plot_xy/gog-xy.c: idem.
	* graph/plugins/plot_radar/gog-radar.c: idem.

2004-08-09  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c (map_[log,linear,discrete]_init) : add arguments
	for direct mapping to canvas coordinates.
	(gog_axis_map_new) : idem. 
	(map_[log,linear,discrete]_to_canvas : new.
	(gog_axis_map_to_canvas) : new.
	(map_discrete) : handle barcol / area,line correctly.
	(map_log_auto_bounds): be smarter in case of min <= 0.
	(gog_axis_render) : draw axis/ticks in one call. Drop labels when they
	overlap.
	* graph/gog-error-bar.c (gog_error_bar_get_bounds) : return relative
	values of errors instead of absolute values.
	(gog_error_bar_get_min_max) : adapt to new gog_error_bar_get_bounds.
	(gog_error_bar_render) : use gog_axis_map functions.
	* graph/gog-grid.c (gog_grid_render) : remove kludge.
	* grapg/gog-renderer-gnome-print.c (gog_graph_print_to_gnome_print) :
	add a workaround for a bug in libgnomeprint.
	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_start_clipping) :
	rendering fix.
	(gog_renderer_pixbuf_line_size) : new.
	(gog_renderer_pixbuf_sharp_path) : new. Tweak a path for sharp
	rendering with libart.
	(gog_renderer_pixbuf_draw_marker) : zoom support for markers. Fix
	marker position.
	* graph/gog-renderer.c (gog_renderer_draw_sharp_path) : new.
	(gog_renderer_draw_sharp_polygon) : new.
	(gog_renderer_line_size) : remove kludge.
	* graph/plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_axis_get_bounds)
	: maxima = num_elements - 1.
	* graph/plugins/plot_barcol/gog-barcol.c
	(gog_barcol_update_stacked_and_percentage) : adapt
	to new gog_error_bar_get_bounds.
	(gog_barcol_axis_get_bounds) : new.
	(barcol_draw_rest) : remove kludge.
	(gog_barcol_view_render) : use gog_axis_map functions.
	* graph/plugins/plot_barcol/gog-line.c
	(gog_line_update_stacked_and_percentage) : adapt
	to new gog_error_bar_get_bounds.
	(gog_line_view_render) : use gog_axis_map functions.
	* graph/plugins/plot_xy/gog-xy.c (gog_xy_plot_render) : use
	gog_axis_map_to_canvas and new gog_error_bar_get_bounds.
	* utils/go-marker.c (go_marker_get_pixbuf) : add a scale argument.
	
2004-07-29  Morten Welinder  <terra@gnome.org>

	* gui-utils/go-action-combo-pixmaps.c
	(go_action_combo_pixmaps_create_menu_item): Let's initialize item
	before we use it.

2004-07-28  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis-prefs.glade: HIGification.
	* graph/gog-axis.c (get_adjusted_tick_array): new.
	(map_[discrete,linear,log]_init): new. Init for map functions.
	(map_[discrete,linear,log]): new. Map data to visible plot area.
	(map_[discrete,linear,log]_auto_bound): new. Calculate auto bounds and
	tick spacing.
	(map_[discrete,linear,log]_calc_ticks): new. Calculate position of
	major ticks,minor ticks and labels.
	(gog_axis_map_new),
	(gog_axis_map),
	(gog_axis_map_free): new. For use in plot view rendering functions.
	(gog_axis_set_ticks): new. Put tick and label positions in axis->ticks.
	(gog_axis_auto_bound),
	(gog_axis_calc_ticks): new.
	(gog_axis_set_property): check if update or calc_ticks is needed.
	(gog_axis_update): makes use of gog_axis_set_ticks and
	gog_axis_auto_bound.
	(gog_axis_editor): hide map combobox if axis is discrete.
	(gog_axis_view_render): use axis->ticks for rendering.
	* graph/plugins/plot_xy/gog-xy.c (gog_xy_view_render): use new map
	functions.					       
	
2004-07-22  Christopher James Lahey  <clahey@ximian.com>

	* libpresent/Makefile.am (libgoffice_libpresent_la_SOURCES): Added
	ppt-parsing-helper.c and ppt-parsing-helper.h.

	* libpresent/god-drawing-ms-client-handler-ppt.c: Handle
	TextBytesAtom and StyleTextPropAtom.

	* libpresent/god-drawing-ms-client-handler-ppt.h: Added parameter
	fonts.

	* libpresent/load-ppt.c: Moved StyleTextPropAtom parsing to
	ppt-parsing-helper.c.

	* libpresent/ppt-parsing-helper.c,
	libpresent/ppt-parsing-helper.h: Moved StyleTextPropAtom parsing
	here.  Improved StyleTextPropAtom parsing.

	* test/dump-ppt-records.c: Improved StyleTextPropAtom parsing.

2004-07-20  Christopher James Lahey  <clahey@ximian.com>

	* libpresent/load-ppt.c (handle_atom), test/dump-ppt-records.c
	(handle_atom): Improved StyleTextPropAtom parsing.

2004-07-20  Christopher James Lahey  <clahey@ximian.com>

	* libpresent/load-ppt.c (handle_atom): Missing NULL.

2004-07-20  Christopher James Lahey  <clahey@ximian.com>

	* drawing/god-drawing-renderer-gdk.c (draw_text),
	drawing/god-paragraph-attributes.c,
	drawing/god-paragraph-attributes.h, libpresent/load-ppt.c: Support
	default paragraph attributes and support bullets and alignment.

	* libpresent/present-view.c: Added space and backspace bindings
	(these don't work since the widget doesn't get focus.)

	* test/dump-ppt-records.c (handle_atom): Handle TxMasterStyleAtom
	better.

	* test/test-view-ppt.c: Added q and escape bindings.

2004-07-19  Jody Goldberg <jody@gnome.org>

	* Release 1.3.1

2004-07-19  Jody Goldberg <jody@gnome.org>

	* gui-utils/go-action-combo-pixmaps.c : switch from inline pixbufs to
	  stock ids.

	* gui-utils/go-action-combo-color.c
	(go_action_combo_color_set_color):  implement

2004-07-13  Christopher James Lahey  <clahey@ximian.com>

	* libpresent/load-ppt.c (handle_atom): Parse fonts.

	* test/dump-ppt-records.c (handle_atom): Print a bunch of info
	about default attributes.

2004-07-12  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_view_info_at_point) :
	  expand this to offer name and override creation.

	* graph/gog-view.c (gog_view_info_at_point) :  expand this interface a
	  bit. I'm still not happy with it.

	* graph/gog-series.c :  keep a sorted list of overrides in place

	* graph/gog-plot.c (gog_plot_foreach_elem) :  handle point overrides

	* graph/gog-object.c (gog_object_emit_changed) :  handle updates for
	  objects not yet connected to parents.

2004-07-11  Christopher James Lahey  <clahey@ximian.com>

	* drawing/Makefile.am (libgoffice_drawing_la_SOURCES): Added
	god-default-attributes.c and god-default-attributes.h.

	* drawing/god-default-attributes.c,
	drawing/god-default-attributes.h: Default pango and paragraph
	attributes per indent level.

	* drawing/god-drawing-renderer-gdk.c: Handle default attributes.
	Rework character attributes.

	* drawing/god-text-model.c, drawing/god-text-model.h: Added indent
	and default attributes concepts.

	* libpresent/load-ppt.c (handle_atom): Parse TxMasterStyleAtom.

	* libpresent/present-presentation.c,
	libpresent/present-presentation.h: Added a default default
	attributes object per text type.

	* libpresent/present-text.c: Added a property to store a pointer
	to the main presentation object.

	* test/dump-ppt-records.c: Parse TxMasterStyleAtom.

2004-07-08  Jody Goldberg <jody@gnome.org>

	* graph/gog-guru.c (cb_canvas_select_item) : handle the zoom

	* graph/gog-theme.c (gog_themes_init) : Add a global alias for
	  GogSeriesElement -> GogSeries
	(gog_theme_find_element) : Look up theme local and global aliases for
	  classes.
	(gog_theme_add_alias) : new.

2004-07-08  Jody Goldberg <jody@gnome.org>

	* goffice.c (libgoffice_init) : Add SeriesElement to be pedantic

2004-07-06  Jody Goldberg <jody@gnome.org>

	* graph/gog-graph.c (gog_graph_init) : apply theme style for graphs
	  to do a full init.

2004-07-04  Jody Goldberg <jody@gnome.org>

	* graph/gog-styled-object.c (gog_styled_object_parent_changed) :
	    initialize the style completely using the theme when we have a
	    theme.

2004-07-04  Christopher James Lahey  <clahey@ximian.com>

	* drawing/god-drawing-renderer-gdk.c (draw_text): Handle
	char_attributes.

	* drawing/god-text-model.c, drawing/god-text-model.h
	(real_god_text_model_set_paragraph_attributes): Fixed up this
	function a bit.
	(real_god_text_model_set_pango_attributes): Implemented this
	function.  Changed it to take GList instead of PangoAttrList.

	* libpresent/load-ppt.c (handle_atom): Implemented parsing
	character attributes.

2004-07-02  Jody Goldberg <jody@gnome.org>

	* graph/gog-theme.c (map_area_series_solid_default) : simplify now
	  that we're just filling in the color no need to twiddle types

	* graph/gog-style.c : rework GogStyle::fill share pattern:fore/back
	and gradient:start/end.
	merge all the different auto flags.  
	initialize the gradient brightness to -1 to avoid starting with black
	Change fill from union to struct to simplify changing fill types
	Allow themed gradient fills

2004-06-30  Christopher James Lahey  <clahey@ximian.com>

	* drawing/god-text-model.c
	(real_god_text_model_set_paragraph_attributes): Oh yeah, the
	character count should increase as you iterate through the
	paragraph.

	* libpresent/load-ppt.c (handle_atom): Pass in the position in the
	text instead of the position in the file.  That might be a good
	idea.

2004-06-29  Christopher James Lahey  <clahey@ximian.com>

	* drawing/Makefile.am (libgoffice_drawing_la_SOURCES): Added
	god-paragraph-attributes.c and god-paragraph-attributes.h.

	* drawing/god-drawing-renderer-gdk.c (draw_text): Draw each
	paragraph separately with some paragraph formatting.

	* drawing/god-paragraph-attributes.c,
	drawing/god-paragraph-attributes.h: New file to handle attributes
	of a paragraph.

	* drawing/god-text-model.c, drawing/god-text-model.h: Store as a
	list of paragraphs.  Store some formatting information.

	* libpresent/load-ppt.c: Load some of the paragraph formatting
	from ppt.

	* test/dump-ppt-records: Attempted to parse BaseTextPropAtom.

	* test/test-view-ppt.c (main): Fullscreen the window.

2004-06-23  Jean Brefort  <jean.brefort@ac-dijon.fr>

	* Makefile.am: Added cut-n-paste subdir.
	* cut-n-paste/Makefile.am: New file.
	* cut-n-paste/pcre/Makefile.am: pcre tree moved from gnumeric.
	* cut-n-paste/pcre/get.c: (pcre_get_stringnumber),
	(pcre_copy_substring), (pcre_copy_named_substring),
	(pcre_get_substring_list), (pcre_free_substring_list),
	(pcre_get_substring), (pcre_get_named_substring),
	(pcre_free_substring): ditto, changed gnumeric_* to go_*
	* cut-n-paste/pcre/internal.h: ditto.
	* cut-n-paste/pcre/maketables.c: (pcre_maketables): ditto.
	* cut-n-paste/pcre/pcre.c: (make_pcre_default_tables), (ord2utf8),
	(pcre_version), (pcre_info), (pcre_fullinfo), (pcre_config),
	(pchars), (check_escape), (is_counted_repeat),
	(read_repeat_counts), (first_significant_code), (find_fixedlength),
	(find_bracket), (find_recurse), (could_be_empty_branch),
	(could_be_empty), (check_posix_syntax), (check_posix_name),
	(adjust_recurse), (compile_branch), (compile_regex), (is_anchored),
	(is_startline), (find_firstassertedchar), (valid_utf8),
	(pcre_compile), (match_ref), (match_xclass), (match), (pcre_exec):
	* cut-n-paste/pcre/pcre.h: ditto.
	* cut-n-paste/pcre/pcreposix.c: (pcre_posix_error_code),
	(go_regerror), (go_regfree), (go_regcomp), (go_regexec):
	* cut-n-paste/pcre/pcreposix.h: ditto.
	* cut-n-paste/pcre/printint.c: (print_char), (print_internals): ditto.
	* cut-n-paste/pcre/study.c: (set_bit), (set_start_bits),
	(pcre_study): ditto.
	* goffice.c: (libgoffice_init): Added call to go_math_init.
	* graph/go-data-simple.c: (go_data_scalar_str_get_value),
	(go_data_vector_str_get_value),
	(go_data_vector_str_set_translation_domain): use new go_nan and functions in utils/go-math.*
	* graph/go-data.c: (go_data_vector_get_value): ditto.
	* graph/gog-axis.c: (gog_axis_get_entry), (gog_axis_update),
	(cb_enable_dim), (cb_axis_bound_changed), (gog_axis_get_bounds),
	(gog_axis_num_markers), (gog_axis_view_render): ditto.
	* graph/gog-error-bar.c: (gog_error_bar_get_bounds): ditto.
	* graph/gog-plot.c: (gog_plot_get_axis_bounds): ditto.
	* graph/plugins/plot_barcol/gog-1.5d.c:
	(gog_plot1_5d_axis_get_bounds): ditto.
	* graph/plugins/plot_barcol/gog-barcol.c:
	(gog_barcol_update_stacked_and_percentage),
	(gog_barcol_view_render): ditto.
	* graph/plugins/plot_barcol/gog-line.c:
	(gog_line_update_stacked_and_percentage), (gog_line_view_render): ditto.
	* graph/plugins/plot_pie/gog-pie.c: (gog_pie_view_render),
	(gog_pie_series_update): ditto.
	* graph/plugins/plot_radar/gog-radar.c:
	(gog_radar_plot_axis_get_bounds), (gog_radar_view_render):
	* graph/plugins/plot_xy/gog-xy.c: (gog_2d_plot_update),
	(gog_2d_plot_axis_get_bounds), (gog_xy_view_render): ditto.
	* utils/go-marker.c: ditto.
	* utils/Makefile.am: Added go_math.[c,h]
	* utils/go-math.c: (go_math_init), (go_add_epsilon),
	(go_sub_epsilon), (go_fake_floor), (go_fake_trunc): imported from gnumeric.
	* utils/go-math.h: ditto.

2004-06-20  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_view_render) : Ensure that the line
	  extends out far enough for the first and last tick.

	* graph/gog-theme.c (map_area_series_solid_default) : honour the new
	  disable_theming flag.
	* graph/gog-style.c (gog_style_is_completely_auto) : new.

2004-06-16  Morten Welinder  <terra@gnome.org>

	* utils/go-file.c (go_filename_to_uri): Handle "//" and "/./"
	parts in filenames.

	* graph/gog-style.c (cb_image_file_select): Handle change in
	gui_image_file_select's signature.  (Barely.)

	* utils/go-file.c (go_file_create): New function.

2004-06-15  Morten Welinder  <terra@gnome.org>

	* utils/go-file.c (go_basename_from_uri): Better WITH_GNOME
	implementation that handles fragments and methods.

2004-06-13  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-1.5d.c : tack on a placeholder 'in_3d'
	  attribute to simplify roundtripping for xls.

2004-06-11  Morten Welinder  <terra@gnome.org>

	* utils/go-file.c: New file.

2004-06-11  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis-prefs.glade : add a combobox for map selection.
	* graph/gog-axis.c : add a map description structure. remove log_scale
	boolean property of GogAxis, and add a new named map property.
	(map_init_linear),
	(map_linear),
	(map_init_log),
	(map_log),
	(gog_axis_map_set_by_num),
	(gog_axis_map_populate_combo),
	(gog_axis_map_set),
	(gog_axis_map_init),
	(gog_axis_map),
	(gog_axis_map_destroy) : new.
	(gog_axis_editor) : handle map combobox.
	* graph/plugins/plot_xy/gog-xy.c (gog_xy_view_render) : use map
	functions.
	
2004-06-05  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_get_entry) : add some protection now that
	  this is public.
	  (gog_axis_is_discrete) : ditto.

	* graph/gog-style.c : add sax exporters
	* graph/gog-error-bar.c : ditto

	* graph/gog-object-xml.h : s/GogPersistDOM/GogPersist
	* graph/gog-object-xml.c : add sax exporters
	  (go_xml_out_add_color) : new.

	* utils/go-font.c : Added some conditional leak debug tools

2004-06-01  Morten Welinder  <terra@gnome.org>

	* gui-utils/go-combo-text.c (go_combo_text_set_text): Plug leak.

2004-05-31  Jody Goldberg <jody@gnome.org>

	* graph/gog-view.c (gog_view_find_child_view) : new

2004-05-31  Jody Goldberg <jody@gnome.org>

	* graph/gog-series.c (gog_series_get_plot) : new.

	* graph/gog-axis.c (gog_axis_get_entry) : rename from axis_get_entry
	  and make public.

2004-05-24  Jody Goldberg <jody@gnome.org>

	* graph/go-data-simple.c (go_data_vector_str_get_str) : enable the
	  translation mechanism

2004-05-26  Jean Brefort  <jean.brefort@ac-dijon.fr>

	* gui-utils/Makefile.am: added go-combo-text.h
	* gui-utils/go-action-combo-text.c: (cb_entry_changed),
	(go_action_combo_create_tool_item),
	(go_action_combo_text_set_entry):
	* gui-utils/go-combo-text.h: was gnumeric-combo-text.h
	* gui-utils/go-combo-text.c: was gnumeric-combo-text.c,
	replaced GtkList by GtkTreeView
	* gui-utils/go-marshalers.list: added BOOLEAN:POINTER

2004-05-23  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-chart.c (gog_chart_view_class_init) : set call_parent_render
	to FALSE.
	* graph/gog-outlined-object.c (gog_outlined_view_render) : call parent
	render method only if call_parent_render is TRUE;
	(gog_outlined_view_class_init) : set call_parent_render to TRUE;
	* graph/gog-outlined-object.h : add a call_parent_render boolean.

2004-05-20  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=142212
	* graph/plugins/plot-barcol/gog-line.c (gog_line_view_render) : don't
	use '0' if Y value is missing.
	
2004-05-13  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer-svg.c (gog_renderer_svg_measure_text) : use
	  logical rather than ink extents.
	(gog_renderer_pixbuf_draw_text) : ditto.
	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_text) : ditto.
	(gog_renderer_pixbuf_draw_text) : ditto.

	* graph/gog-axis.c (gog_axis_view_size_request) : tick labels for
	  discrete axes are below the line not the major tick marks.
	(gog_axis_view_render) : ditto

	* graph/gog-renderer-svg.c (make_layout) : cache the context.
	(gog_renderer_pixbuf_finalize) : unref cached contexts.
	(gog_renderer_pixbuf_class_init) : connect the new finalize.

	* graph/gog-style.c (gog_style_is_different_size) : line width change
	  for axis changes size.

	* graph/gog-axis.c (gog_axis_view_render) : don't allocate size for
	  ticks if the lines are invisible.

	* graph/gog-plot.c (gog_plot_get_axis_bounds) : add some safety.
          This will be called for things like a pie when adding one while
	  something with an still exists.

	* graph/gog-guru.c (cb_attr_tree_selection_change) : be more forgiving
	  about when a user can go back to select a plot.  If there is only
	  one chart, or one plot things are unambiguous.

	* drawing/god-property-table.h : sync with the extensions in the xls
	  importer to handle gradients and richtext.

	* drawing/god-property-table.c (god_property_table_get_markup) : new.
	(god_property_table_set_markup) : ditto.

2004-05-11  Jean Brefort  <jean.brefort@ac-dijon.fr>

	* graph/gog-renderer-pixbuf.c: (make_layout),
	(gog_renderer_pixbuf_update): replaced deprecated pango_ft2_get_context.
	* graph/gog-renderer-svg.c: (make_layout): ditto.
	* graph/gog-style-prefs.glade: replaced GtkOptionMenu by GtkComboBox.
	* graph/gog-style.c: (cb_gradient_style_changed),
	(fill_gradient_init), (cb_image_style_changed), (fill_image_init),
	(cb_fill_type_changed), (fill_init): ditto.

2004-05-10  Jody Goldberg <jody@gnome.org>

	* graph/gog-plot.c (gog_plot_foreach_elem) : pass the index of the
	  iteration, not the absolute for has-legend situations

	* graph/gog-series.c (gog_series_set_property) : update cardinality if
	  has-legend changes.
	(gog_series_editor) : Add a quick 'show in legend' toggle

2004-05-07  Jody Goldberg <jody@gnome.org>

	* graph/gog-theme.c (gog_themes_init) : sync the default theme with
	  XL's notion of things so that we do not theme away auto settings on
	  import.  Specificly Give chart's the background and make graph
	  empty.

	*  */Makefile.am : use goffice.mk for include paths

2004-05-03  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=136363
	* graph/gog-style.c (gog_style_apply_theme) : Do not theme the fonts
	  it over rides the user selection because there is no 'auto' flag.

2004-05-06  Morten Welinder  <terra@gnome.org>

	* utils/go-gradient.c (go_gradient_dir_from_str,
	go_gradient_dir_as_str): Use G_N_ELEMENTS.
	(grad_dir_names[]): Constify.
	(go_gradient_selector): Eliminate elements table.

2004-04-29  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=141405
	* drawing/god-drawing-renderer-gdk.c
	(god_drawing_renderer_gdk_render_shape) : explicitly set alignment for
	  now.  Set layout bounds so that we wrap.

2004-04-19  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=127411
	* graph/gog-chart.c (gog_chart_view_render) : render the style.

2004-04-17  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_xy/gog-xy.c (gog_bubble_plot_class_init) : Do not
	  replicate ms dim types.  That breaks xls import.
	(gog_xy_plot_class_init) : ditto.
	* graph/plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_class_init) : ditto

2004-04-15  Morten Welinder  <terra@gnome.org>

	* graph/gog-error-bar.c (gog_error_bar_prefs): Look for pixmaps in
	the right directory.

2004-04-08  Jean Brefort  <jean.brefort@ac-dijon.fr>

	* graph/plugins/plot_barcol/gog-1.5d.c: (gog_plot1_5d_update),
	(gog_plot1_5d_axis_get_bounds), (gog_plot1_5d_class_init),
	(gog_series1_5d_set_property), (gog_series1_5d_get_property),
	(gog_series1_5d_populate_editor), (gog_series1_5d_class_init),
	(gog_series1_5d_init): Add error bars support.
	* graph/plugins/plot_barcol/gog-1.5d.h: ditto.
	* graph/plugins/plot_barcol/gog-barcol.c: ditto.
	(gog_barcol_update_stacked_and_percentage),
	(gog_barcol_view_render): ditto.
	* graph/plugins/plot_barcol/gog-line.c: ditto.
	(gog_line_update_stacked_and_percentage), (gog_line_view_render): ditto.
	* graph/plugins/plot_xy/gog-xy.c: (gog_2d_plot_update): use gog_error_bar_is_visible instead
	of detailed tests.

2004-04-05  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=139205
	* gui-utils/go-action-combo-stack.c
	(go_action_combo_stack_create_menu_item) : There's no reason to set a
	  default label not only was it ugly, but it disabled the nice utility
	  code in GtkAction::connect_proxy that would set 'use_underline' for us

2004-03-30  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=138532
	* graph/plugins/plot_radar/gog-radar.c (gog_radar_plot_update) : don't
	  use an invalid series for anything.

2004-03-28  Jody Goldberg <jody@gnome.org>

	* Release 1.3.0

2004-03-26  Christopher James Lahey  <clahey@ximian.com>

	* drawing/Makefile.am (libgoffice_drawing_la_SOURCES): Added
	god-drawing-renderer-gdk.c, god-drawing-renderer-gdk.h,
	god-drawing-view.c, and god-drawing-view.h.

	* drawing/god-drawing-renderer-gdk.c,
	drawing/god-drawing-renderer-gdk.h: New class.  Renders a drawing
	to a gdk drawable.

	* drawing/god-drawing-view.c, god-drawing-view.h: New class.
	Widget to display a drawing.

	* drawing/god-drawing.c, drawing/god-drawing.h: Added a background
	shape.

	* drawing/god-image.c: Call gdk_pixbuf_loader_close.

	* drawing/god-property-table.c, drawing/god-property-table.h:
	Added length type and fixed up flag type.  Added a bunch of types.

	* drawing/god-shape.c: Allow a NULL anchor.

	* libpresent/Makefile.am (libgoffice_libpresent_la_SOURCES): Added
	present-view.c and present-view.h.

	* libpresent/load-ppt.c: Handle the DocumentAtom.

	* libpresent/present-presentation.c,
	libpresent/present-presentation.h: Added extents and notes_extents
	fields.

	* libpresent/present-view.c, libpresent/present-view.h: New class.
	Widget to display a presentation.

	* ms-compat/god-image-ms.c: Added a bunch of EscherOPT fields.
	Handle the patriarch and background shapes more cleanly.

	* test/.cvsignore: Added test-view-ppt.

	* test/Makefile.am (test_view_ppt_SOURCES): Added test-view-ppt.c.

	* test/test-ppt.c: Handle the separate patriarch and background
	shapes.

	* test/test-view-ppt.c: New Class.  Tests present-view.c.

	* utils/go-units.h: Added new unit EMU.  (360000 EMUs per
	centimeter, 914400 EMUs per inch, 12700 EMUs per point.)

2004-03-22  Christopher James Lahey  <clahey@ximian.com>

	* drawing/Makefile.am (libgoffice_drawing_la_SOURCES): Added
	god-image.c, god-image.h, god-image-store.c, and
	god-image-store.h.

	* drawing/god-drawing-group.c, drawing/god-drawing-group.h: Added
	an image store to the drawing group.  Implemented
	god_drawing_group_new.

	* drawing/god-drawing.c, drawing/god-drawing.h: Gave each drawing
	a link to its drawing group.

	* drawing/god-image-store.c, drawing/god-image-store.h: New class.
	An array of images.

	* drawing/god-image.c, drawing/god-image.h: An image or a
	placeholder for an image.  Includes the original data as well as a
	loaded pixbuf.

	* libpresent/load-ppt.c: Actually store the drawings in the slides
	and the drawing groups in the presentations.  Load the pictures
	into the drawing group.

	* libpresent/present-presentation.c,
	libpresent/present-presentation.h: Added a drawing group here.

	* libpresent/present-slide.c, libpresent/present-slide.h: Added a
	drawing here.

	* ms-compat/Makefile.am (libgoffice_ms_compat_la_SOURCES): Added
	god-image-ms.c and god-image-ms.h.

	* ms-compat/god-drawing-ms.c, ms-compat/god-drawing-ms.h: Actually
	do drawing group loads and load up the image store as we go.
	Added a function to handle parsing of images not in the main
	Escher stream.

	* ms-compat/god-image-ms.c, ms-compat/god-image-ms.h: New class.
	Just a god_image with a hash that's used at load time.

	* test/test-ppt.c: Moved dumping the Drawings here since they're
	included in the slides now so it makes more sense to dump them
	here than in load-ppt.c.

2004-03-22  Morten Welinder  <terra@gnome.org>

	* libpresent/load-ppt.c (handle_atom): The usual fix.

2004-03-21  Christopher James Lahey  <clahey@ximian.com>

	* ms-compat/god-drawing-ms.c (handle_atom),
	test/dump-ppt-records.c (handle_atom): Moved some of the debugging
	stuff from god-drawing-ms to dump-ppt-records.

2004-03-20  Christopher James Lahey  <clahey@ximian.com>

	* drawing/god-anchor.c (god_anchor_finalize),
	ms-compat/god-drawing-ms-client-handler.c
	(god_drawing_ms_client_handler_finalize): Chain the finalize
	function.

	* libpresent/Makefile.am (libgoffice_libpresent_la_SOURCES): Added
	present-presentation.c, present-presentation.h, present-slide.c,
	present-slide.h, present-text.c, present-text.h.

	* libpresent/god-drawing-ms-client-handler-ppt.c,
	libpresent/god-drawing-ms-client-handler-ppt.h: Add a PresentSlide
	so that we can parse OutlineTextRefAtom and link it up to the
	outline.

	* libpresent/load-ppt.c, libpresent/load-ppt.h: Changed it to use
	PresentPresentation.  Pass a PresentSlide into the client_handler
	if the PPDrawing is a child of a Slide.

	* libpresent/present-presentation.c,
	libpresent/present-presentation.h, libpresent/present-slide.c,
	libpresent/present-slide.h, libpresent/present-text.c,
	libpresent/present-text.h: New classes.  A presentation, a slide,
	and a piece of text on a slide.

	* test/test-ppt.c: Changed this to use PresentPresentation.

2004-03-19  Christopher James Lahey  <clahey@ximian.com>

	* libpresent/god-drawing-ms-client-handler-ppt.c
	(god_drawing_ms_client_handler_ppt_handle_client_text): Handles
	simple cases with text inside of a shape in Escher.

	* libpresent/load-ppt.c (dump_shape): Print text if there is any.

	* ms-compat/go-ms-parser.c (go_ms_parser_read): Only read the data
	if there's a handler.

	* ms-compat/god-drawing-ms-client-handler.c,
	ms-compat/god-drawing-ms-client-handler.h: Make it so subclasses
	can specify whether they want the super class to read the data
	from the input stream.

	* ms-compat/god-drawing-ms.c (handle_atom): Handle
	EscherClientTextbox by calling the client handler.

2004-03-18  Christopher James Lahey  <clahey@ximian.com>

	* ms-compat/go-ms-parser.c, ms-compat/go-ms-parser.h
	(go_ms_parser_read): Included the record type as a field in the
	record structure.

	* test/.cvsignore, test/Makefile.am: Added dump-ppt-records.

	* test/dump-ppt-records.c: New test app to list all the records in
	a ppt file.

2004-03-18  Christopher James Lahey  <clahey@ximian.com>

	* drawing/god-shape.c, drawing/god-shape.h: Each shape has an
	anchor.  Added functions to get the children of a shape.

	* graph/gog-legend.c (gog_legend_init),
	graph/gog-outlined-object.c (gog_outlined_object_init),
	graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_update),
	graph/gog-renderer-svg.c (make_layout), graph/gog-renderer.c
	(gog_renderer_init): Cast to double before calling
	GO_.._TO_.. unit conversion functions.

	* libpresent/Makefile.am (libgoffice_libpresent_la_SOURCES): Added
	god-drawing-ms-client-handler-ppt.c and
	god-drawing-ms-client-handler-ppt.h.

	* libpresent/god-drawing-ms-client-handler-ppt.c,
	libpresent/god-drawing-ms-client-handler-ppt.h: New class.
	Handles client functions for PPT.

	* libpresent/load-ppt.c: Added #include <gnumeric-config.h>.
	Created a GodDrawingMsClientHandlerPpt for use in parsing.  Added
	code to dump the Escher drawing for testing purposes.

	* ms-compat/Makefile.am (libgoffice_ms_compat_la_SOURCES): Added
	god-drawing-ms-client-handler.c and
	god-drawing-ms-client-handler.h.

	* ms-compat/god-drawing-ms-client-handler.c,
	ms-compat/god-drawing-ms-client-handler.h: New class.  Allows
	Escher parser to let the host application handle Client records.

	* ms-compat/god-drawing-ms.c, ms-compat/god-drawing-ms.h: Use
	GodDrawingMsClientHandler to parse EscherClientAnchor records.

	* test/.cvsignore: Ignore test-ppt.

	* test/test-ppt.c: Fixed include here.  Added #include
	<gnumeric-config.h>

	* utils/go-unit.h: Changed these to use the math in whatever type
	the input is.  If you pass a double, it uses double math.  If you
	pass an integer type, it uses integer math.

2004-03-18  Morten Welinder  <terra@gnome.org>

	* libpresent/*.h: Add header guards.

2004-03-16  Christopher James Lahey  <clahey@ximian.com>

	* Makefile.am (SUBDIRS): Added libpresent and test.

	* drawing/Makefile.am (libgoffice_drawing_la_SOURCES): Added
	god-anchor.c and god-anchor.h.

	* drawing/Makefile.am, drawing/god-drawing-group.c,
	drawing/god-drawing.c, drawing/god-drawing.h,
	drawing/god-property-table.c, drawing/god-shape.c,
	drawing/god-shape.h, drawing/god-text-model.c,
	ms-compat/Makefile.am, ms-compat/go-ms-parser.c,
	ms-compat/god-drawing-ms.c, ms-compat/god-drawing-ms.h:
	Standardized #include lines.

	* utils/go-units.h: Added an underlying unit and added a type for
	storing lengths.  Added point and rect types.

2004-03-16  Morten Welinder  <terra@gnome.org>

	* graph/gog-error-bar-prefs.glade: Don't start visible.

2004-03-16  Morten Welinder  <terra@gnome.org>

	* graph/gog-error-bar.c (gog_error_bar_persist_dom_save): Constify
	and avoid errors.

	* graph/gog-graph.c (gog_graph_validate_chart_layout): Initialize
	graph.

	* drawing/god-property-table.c (god_property_table_finalize): Chain up.
	* drawing/god-shape.c (god_shape_dispose): Chain up.
	* drawing/god-text-model.c (god_text_model_finalize): Chain up.
	* drawing/god-drawing-group.c (god_drawing_group_finalize): Chain
	up.

	* gui-utils/go-action-combo-text.c
	(go_tool_combo_text_finalize): Add dummy chain.

	* graph/plugins/plot_xy/gog-xy.c (gog_2d_plot_update): Initialize
	series.
	(gog_xy_series_finalize, gog_2d_finalize): Skip pointless tests.

2004-03-16  Jean Brefort  <jean.brefort@ac-dijon.fr>

	* Makefile.am: restore data subdir
	* data/Makefile.am: add error bars icons
	*data/bar-*.png: new icons for error bars editor.
	* goffice.c: (libgoffice_init): add GOD_ERROR_BAR_TYPE
	* graph/Makefile.am: add gog-error-bar.*
	* graph/goffice-graph.h: add GogErrorBar struct
	* graph/gog-object-xml.c: (gog_object_write_property):
	set success to FLASE when the object does not exist.
	* graph/gog-series-impl.h: add populate_editor in GogSeriesClass
	* graph/gog-series.c: (gog_series_editor): add pages for error bars.
	* graph/gog-error-bar-prefs.glade:
	* graph/gog-error-bar.[c,h]: new files.
	* graph/plugins/plot_xy/gog-xy.c: (gog_2d_plot_update),
	(gog_xy_plot_class_init), (gog_bubble_plot_class_init),
	(gog_xy_view_render), (gog_xy_series_init),
	(gog_xy_series_finalize), (gog_xy_series_set_property),
	(gog_xy_series_get_property), (gog_xy_series_populate_editor),
	(gog_xy_series_class_init): add support for error bars.

2004-03-15  Morten Welinder  <terra@gnome.org>

	* gui-utils/go-combo-box.c (go_combo_box_destroy): Plug leaks.

2004-03-15  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	http://bugzilla.gnome.org/show_bug.cgi?id=135621
	* graph/gog-axis.c (gog_axis_render) : fix rounding issue.
	
2004-03-07  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_radar/gog-radar.c (gog_radar_plot_type_name) :
	  remove the starting angle pref.  That is better handled by the axis.

2004-03-13  Jean Brefort  <jean.brefort@ac-dijon.fr>

	* graph/plugins/plot_xy/gog-xy.c: (gog_xy_view_render),
	(gog_xy_series_update), (gog_xy_series_init_style): fixed tests about bubble plots.

2004-03-13  Christopher James Lahey  <clahey@ximian.com>

	* Makefile.am (SUBDIRS): Added drawing and ms-compat.
	(libgoffice_la_LIBADD): Added drawing/libgoffice-drawing.la and
	ms-compat/libgoffice/ms-compat.la.

2004-03-12  Morten Welinder  <terra@gnome.org>

	* graph/gog-series.c (gog_series_element_class_init): Apply the
	usual fix.

2004-03-11  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/plugins/plot_xy/gog-xy.c : draw markers when they are in plot
	area and a margin half marker size wide (partly fix 135621).
	
2004-03-09  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-object.c : make use_parent_as_proxy a class property
	instead of an instance one.
	* graph/gog-style.c : defines a new GogStyledObject derived
	GogSeriesElement object for storing of single element style overrides.
	(gog_series_class_init) : declares a new GogObjectRole for use of
	GogSeriesElement objects. Set use_parent_as_proxy as true.
	(gog_series_get_elements) : returns the GList of GogSeriesElement
	children of GogSeries.
	(gog_series_get_valid_element_index) : returns the next or previous
	index which is not already used by a GogSeriesElement children of
	GogSeries.
	* graph/gog-style.c : remove unused implementation of
	GogStyleExtension and old gog_series_element_style code.
	(gog_style_editor) : remove code related to GogStyleExtension.
	(gog_style_assing) : idem.
	(gog_style_persist_dom_load) : idem.
	(gog_style_persist_dom_save) : idem.
	* graph/gog-syled-object.c (gog_styled_object_set_property) : use of
	gog_styled_object_set_style.
	(gog_styled_object_set_style)  : new.
	* graph/plugins/plot_pie/gog-pie-series-element-prefs.glade : new.
	* graph/plugins/plot_pie/gog-pie-prefs.c (gog_pie_series_element_pref)
	: new.
	* graph/plugins/plot_pie/gog-pie.c : define a new GogSeriesElement
	derived GogPieSeriesElement object for storage of separation and style
	of single elements.
	(gog_pie_view_render) : handle single element style overrides.
	* graph/plugins/plot_pie/gog-ring-prefs.glade : fix climb_rate, digits
	and adjustment properties of the separation spin_button.
	
2004-03-03  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=136088
	* graph/gog-object-xml.c (gog_object_write_property) : Add a
	  GOG_PARAM_FORCE_SAVE to save a parameter even if the value is the
	  same as the default.
	* graph/gog-plot.c (gog_plot_class_init) : Use it here to always store
	  the vary_style_by_element property.

2004-02-27  Jody Goldberg <jody@gnome.org>

	* graph/gog-theme.c (map_area_series_solid_default) : don't set colors
	  for image fills.
	(map_area_series_solid_guppi) : ditto.

2004-02-23  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_radar/gog-radar.c : use
	  'default-style-has-markers' rather than 'markers' to be consistent.
	(gog_radar_plot_update) : store the minima and maxima from all the
	  series.
	(gog_radar_plot_axis_get_bounds) : renamed from gog_radar_plot_axis_bounds 
	  for consistency.  Set the bounds for a radial axis more generally.
	  We want the outbound to be hard (unscaled) and the inner rounded.

2004-02-22  Jody Goldberg <jody@gnome.org>

	* graph/gog-chart.c (gog_chart_view_size_allocate) : only position th
	  axis, not all the children.

	* graph/plugins/plot_radar/gog-radar.c
	(gog_radar_view_render_series) : Just alloca the max numbr of points
	  aka model::num_elements, and don't free alloca-ed memory.

2004-02-22  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/plugins/plot_radar/gog-radar.c 
	(gog_plot_radar_render_series) : use g_new instead of g_alloca for
	allocation of path.
	
2004-02-21  Jody Goldberg <jody@gnome.org>

	* utils/go-locale.c : Some cut-n-paste for the without_gnome case

	* gui-utils/go-action-combo-text.c : some initial implementation

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_plot_foreach_elem) :
	  handle mismatched numbers of elements and labels.
	(gog_pie_view_render) : take the outline into account when sizing.

	* graph/gog-style.h : add weak notion of centered image.  This needs
	  to be stronger to specify alignement.

	* graph/gog-style.c (gog_style_set_fill_image_filename) : new.
	(cb_image_file_select) : Use it.

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_polygon) :
	supported centered images.

	* graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_polygon) : support centered images.

	* graph/gog-object.c (gog_object_get_children) : add a filter parm.
	(gog_object_get_child_by_role) : new utility routine.

	* graph/gog-legend.c (gog_legend_update) : set up the editor properly
	  for fonts.

	* graph/gog-graph.c (gog_graph_view_size_allocate) : typo.  Only
	  effected manually created plots

	* graph/gog-control-foocanvas.c (gog_control_foocanvas_draw) : make
	  more resistent to out of memory situations.

	* graph/go-data-simple.c : Add some quick and dirty constant vectors
	  for double [], and char const *[].  These could certainly be more
	  robust.

	From Michael Devine <mdevine@cs.stanford.edu> :
	* graph/goffice-graph.h : Add a first pass at 'radar' plots
	* graph/gog-axis.c : ditto.
	* goffice/graph/gog-chart.c : ditto

2004-02-13  Morten Welinder  <terra@gnome.org>

	* graph/gog-style.c (gog_style_extension_editor): Fix declaration
	and check order.

2004-02-13  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-style.[ch] : new GogStyleExtension object.
	(gog_style_assign) : handle extension.
	(gog_style_editor) : shows extension editor if it exists.
	(gog_style_get_extension) : new.
	(gog_style_set_extension) : new.
	* graph/gog-series : add a new style_extension_type field in
	GogSeriesDesc, and use it in gog_series_init_style.
	
2004-02-09  Morten Welinder  <terra@gnome.org>

	* graph/plugins/plot_xy/gog-bubble-prefs.glade: Do not start
	visible.

2004-02-09  Jean Brefort  <jean.brefort@ac-dijon.fr>

	* graph/plugins/plot_xy/gog-xy.c: (gog_xy_view_render): replaced
	test series.num_dim == 3 by GOG_IS_BUBBLE_PLOT
	* graph/plugins/plot_xy/gog-xy.h: fixed GOG_IS_BUBBLE_PLOT

2004-02-04  Jody Goldberg <jody@gnome.org>

	* gui-utils/go-color-palette.c (cb_menu_custom_activate) : don't show
	  until after the signal in case a handler is marking the dialog as a
	  transient.
	(cb_combo_custom_clicked) : ditto.

2004-02-02  Jean Brefort  <jean.brefort@ac-dijon.fr>

	* graph/plugins/plot_xy/gog-xy.c: fixed several warnings

2004-02-02  Jody Goldberg <jody@gnome.org>

	* gui-utils/go-combo-color.c (cb_preview_clicked) : return the real
	  is_custom state.

	* gui-utils/go-color-palette.c (handle_color_sel) : simplify and just
	  return the color caller can emit the signal, and store the new
	  colour.
	(cb_combo_custom_response) : store results.
	(cb_menu_default_activate) : ditto.
	(cb_menu_color_activate) : ditto.
	(cb_menu_custom_response) : ditto.
	(set_color) : store when something is a custom of default.
	(go_color_palette_get_current_color) : return a flag indicating if
	  this is custom.

2004-02-01  Jody Goldberg <jody@gnome.org>

	* gui-utils/go-color-palette.c (handle_color_sel) : destroy before we
	  emit in case the custom dialog handler played with the wrapper
	  actions (eg desensitized them)

	* gui-utils/go-combo-color.c (cb_proxy_custom_dialog) : pop the combo
	  down when the custom dialog goes up.

2004-01-29  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c (cb_gradient_type_changed) : store the last
	  selected type.
	(populate_gradient_combo) : default to that when changing fill type to
	  gradient.

	* graph/gog-style-prefs.glade : fix mnemonics to not clash.

	* gui-utils/go-action-combo-stack.c
	(go_action_combo_stack_create_tool_item) : patch leak

	* utils/go-marker.c (go_marker_selector) :
	  go_combo_pixmaps_add_element absorbs a ref to the pixbuf, don't lose
	  control of it.  Handle shape=none nicely too.

2004-01-29  Morten Welinder  <terra@gnome.org>

	* graph/plugins/plot_xy/gog-xy.c (gog_xy_view_render): Attempt
	fix.

2004-01-28  Andreas J. Guelzow <aguelzow@taliesin.ca>

	* graph/plugins/plot_xy/gog-xy.c: fix 2 syntax errors to make it
	  compile

2004-01-28  Jean Brefort  <jean.brefort@ac-dijon.fr>

	* graph/plugins/plot_xy/Makefile.am:
	* graph/plugins/plot_xy/gog-bubble-prefs.glade:
	* graph/plugins/plot_xy/gog-bubble-prefs.c:
	* graph/plugins/plot_xy/gog-xy.c:
	* graph/plugins/plot_xy/gog-xy.h:
		added support for bubble plots options

2004-01-24  Jon K Hellan  <hellan@acm.org>

	* gui-utils/go-dock.c (go_dock_class_init): Initialize parent_class.

	* gui-utils/go-dock-item.c (go_dock_item_class_init): Ditto.

	* gui-utils/go-dock-band.c (go_dock_band_class_init): Ditto.

2004-01-24  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_xy/gog-xy.c : suppress warning

	* gui-utils/go-action-combo-text.c (go_action_combo_text_set_entry) :
	  implement.

	* gui-utils/go-action-combo-stack.c
	(go_action_combo_stack_create_tool_item) : set the relief here too.
	  We're close to having a GOActionCombo base for this.

2004-01-23  Jody Goldberg <jody@gnome.org>

	* gui-utils/go-action-combo-stack.c : tweak to make it sorta work.
	  I do not like the kludgy approach required by our not supporting
	  arguments to GtkAction::activate

2004-01-22  Jody Goldberg <jody@gnome.org>

	* gui-utils/go-action-combo-pixmaps.c : rewrite.

2004-01-17  Jody Goldberg <jody@gnome.org>

	* gui-utils/go-action-combo-color.c (cb_color_changed) : Use the
	  supplied color directly.
	(go_action_combo_color_create_menu_item) : connect up the activate signal.

2004-01-22 Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>
	* graph/gog-style.c (gog_style_editor) : edit a GogStyle, not
	GogStyledObject.
	(gog_styled_object_editor) : new.
	* graph/gog-axis.c : use gog_styled_object_editor instead of
	gog_style_editor.
	* graph/gog-label.c : ditto.
	* graph/gog-series.c : ditto.
	* graph/gog-styled-object.c : ditto. rename gog_styled_object_editor
	to styled_object_editor.

2004-01-17 Jean Brefort <jean.brefort@ac-dijon.fr>
	* graph/plugins/plot_xy/* : add initial support for bubble plots

2004-01-16  Jody Goldberg <jody@gnome.org>

	* gui-utils/go-action-combo-stack.c (go_action_combo_stack_push) :
	  operate on the combo, not the toolitem wrapper.
	(go_action_combo_stack_pop) : ditto.
	(go_action_combo_stack_truncate) : ditto.

2004-01-16  Jon K Hellan  <hellan@acm.org>

	* gui-utils/go-action-combo-stack.c (go_action_combo_stack_push) 
	(go_action_combo_stack_pop): Fix typos.

2004-01-14  Jody Goldberg <jody@gnome.org>

	* gui-utils/go-action-combo-color.c
	(go_action_combo_color_create_menu_item) : some initial work on
	  producing a menu.  Its not bad, but the combo needs alot of cleanup
	  before it can migrate.

2003-12-23  Jody Goldberg <jody@gnome.org>

	* Release 1.2.3

2003-12-22  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_editor) : set the current format.

2003-12-19  Jody Goldberg <jody@gnome.org>

	* utils/go-format.c (go_format_eq) : new.
	(go_format_as_XL) : new
	(go_format_new_from_XL) : new

	* graph/gog-axis.c (gog_axis_editor) : add a format selection page for
	  non-discrete axis.

2003-12-18  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=129445
	* graph/gog-style.c (gog_style_assign) : transfer the
	  needs_obj_defaults field.
	(gog_style_init) : init needs_obj_defaults field to TRUE.
	(gog_style_persist_dom_load) : persisted styles do not need object
	  defaults.
	* graph/plugins/plot_barcol/gog-line.c (gog_line_series_init_style) :
	  respect the needs_obj_defaults.
	* graph/plugins/plot_xy/gog-xy.c (gog_xy_series_init_style) : ditto.

	* graph/gog-axis.c (gog_axis_get_marker) : Use go_format to handle the
	  markers.

	* utils/go-format.c : A quick cheesy wrapper to GnmFormat in
	  preparation for sucking it down here.

2003-12-14  Jody Goldberg <jody@gnome.org>

	* utils/go-pattern.c (go_pattern_selector) : fix leak.
	* utils/go-gradient.c (go_gradient_selector) : fix leak.
	* utils/go-marker.c (go_marker_selector) : fix leak.

2003-12-14  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=128874
	* graph/gog-axis.c (gog_axis_finalize) : unref labels.
	(gog_axis_update) : ref them here.

2003-11-26  Jody Goldberg <jody@gnome.org>

	* Release 1.2.2

2003-11-18  Jody Goldberg <jody@gnome.org>

	* graph/gog-styled-object.c (gog_styled_object_set_property) : dup the
	  style to avoid themes stomping on shared styles.  refcounting is not
	  an ideal semantic for GogStyle.

2003-11-17  Morten Welinder  <terra@gnome.org>

	* graph/gog-object-xml.c (gog_object_write_property): Plug leak.

2003-11-15  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_view_render) : support minor ticks and
	  tune placement to work around anti-aliasing blur.

	* graph/gog-grid.c (gog_grid_view_render) : tune the cheat to work
	  around anti-aliasing blur.

2003-11-14  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=126775
	* graph/gog-axis.c (gog_axis_update) : be smarter when min == max.

2003-11-13  Jody Goldberg <jody@gnome.org>

	* graph/gog-guru.c (cb_obj_children_reordered) : implement.
	(cb_reordered_find) : new.

	* graph/gog-object.c (gog_object_can_reorder) : implement.

2003-11-13  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-barcol.c (gog_barcol_view_render) :
	  avoid the potential for trouble for a series with only zeros.

2003-11-12  Jody Goldberg <jody@gnome.org>

	* graph/gog-guru.c (graph_guru_init_format_page) : store the
	  precedence widgets.
	(cb_attr_tree_selection_change) : adjust sensitivity of the precedence
	  elements.

2003-11-11  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c (marker_init) : fix leak.

	* graph/gog-guru.c (cb_attr_tree_selection_change) : work around a
	  probable bug in GtkViewport by adding an extra GtkFrame inside the
	  viewport and using that.

2003-11-11  Morten Welinder  <terra@gnome.org>

	* graph/plugins/plot_xy/gog-xy.c (gog_xy_view_render): Use finite
	consistently.

2003-11-11  Jody Goldberg <jody@gnome.org>

	* utils/go-pattern.c (go_pattern_selector) : add auto support.

	* utils/go-marker.c : move the default handling where it belongs.

	* utils/go-color.c (go_color_to_gdk) : new.

	* graph/plugins/plot_barcol/plot-types.xml.in : include non-marker
	  variants.
	* graph/plugins/plot_xy/plot-types.xml.in : include non-marker, and
	 barcol non-line variants.

	* graph/gog-theme.c : respect the auto flags here.

	* graph/gog-styled-object.c (gog_styled_object_apply_theme) : new.
	(gog_styled_object_set_property) : Use it here.
	(gog_styled_object_parent_changed) : and here.
	(gog_styled_object_editor) : provide a default impl.
	(gog_styled_object_get_auto_style) : new.

	* graph/gog-style.c :
	    - Add support for auto* flags for the marker here, not GoMarker.
	    - Support restoring auto for shapes and colours

	* graph/gog-series.c (gog_series_init_style) : new.  Gives us finer
	  control of what is themable.

	* graph/gog-guru.c : Simplify our lives and only have 1 prop sheet at
	  any given time.  No need to worry about updating when something
	  changes externally (styles or dimensions)

	* graph/gog-chart.c : Use the default editor and init_style
	* graph/gog-graph.c : ditto

	* graph/gog-axis.c : convert from ::interesting_fields -> ::init_style
	* graph/gog-grid.c : ditto.
	* graph/gog-label.c : ditto.
	* graph/gog-legend.c : ditto.

2003-11-05  Jody Goldberg <jody@gnome.org>

	* utils/go-marker.h : I don't want GtkWidget in these headers

2003-11-04  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=125986
	* graph/gog-style.c (gog_style_merge) : A cheesy solution to the
	  current lack of clarity on the theming.  We only have a
	  colour.is_auto flag, so only assign the colour.  This means that
	  lines and outlines can only theme the colour, not the width or the
	  pattern.  Which seems reasonably until we have a plan for defining
	  'autoness' for those attributes.

2003-11-03  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=126056
	* graph/plugins/plot_xy/gog-xy.c (gog_xy_view_render) : differentiate
	  between missing and bad strings.  X axis strings are indicies, Y
	  axis strings are 0.

2003-11-02  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c (gog_style_editor) : Add a weakref so that we can
	  disconnect the signal if the object is destroyed.

	* graph/gog-axis.c (make_dim_editor) : Use closures to avoid having a
	  callback after a widget has been destroyed.

2003-11-02  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>
  
  	http://bugzilla.gnome.org/show_bug.cgi?id=125419
	* graph/gog-renderer.[ch] (gog_renderer_start_clipping),
	(gog_renderer_stop_clipping) : new. Implement clipping of drawing.
  	Only one level of clipping is allowed. 
	* graph/gog-renderer[svg, pixbuf, gnome-print] 
	(gog_renderer_.._start_clipping),
	(gog_renderer_.._stop_clipping) : new.
	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_path),
	(gog_renderer_pixbuf_draw_polygon),
	(gog_renderer_pixbuf_draw_text) : handle offset for drawing when
	clipping.
	* graph/gog-rendere-gnome-print.c (make_rectangle_path) : new;
	* graph/gog-chart.c (gog_chart_render) : new. Use the same clipping
 	region for all plots.
  	
2003-11-01 Jean Brefort <jean.brefort@ac-dijon.fr>

	* graph/gog-renderer-svg.c: added scale parameter to gog_graph_export_to_svg.
	* graph/gog-renderer-svg.c: implement gog_renderer_svg_measure_text and
	gog_renderer_svg_draw_text.

2003-11-01  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-barcol.c
	(gog_barcol_plot_class_init) : set the default to match the real
	  default so that things persist properly.

2003-10-30  Jody Goldberg <jody@gnome.org>

	* graph/gog-plot.c (gog_plot_get_cardinality) : Set the index even if
	  the series is invald.  This makes like easier when adding a series.

	* graph/gog-style.c (gog_object_set_style) : block style change
	  signals.
	(gog_style_pref_state_free) : disconnect the style change handler.
	(gog_style_editor) : monitor style changed signals.
	(cb_style_changed) : new.

	* graph/gog-series.c (gog_series_set_index) : signal when the style
	  changes.

	* graph/gog-object.c (gog_object_get_editor) : force an update before
	  creating an editor to avoid flicker later.
	* graph/gog-graph.c (gog_graph_force_update) : new.

2003-10-29  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (cb_axis_bound_changed) : update all the auto
	  bounds when anything changes.

2003-10-28  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_xy/gog-xy.c (gog_xy_view_render) : be lazy and
	  do the clipping in the renderer rather than here.  It will make
	  life easier when we add splines.

2003-10-27  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=125619
	* graph/gog-axis.c (gog_axis_editor) : init the high/low button

	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render) : clip
	  markers and lines.

	* graph/gog-renderer-pixbuf.c (clip_path) : new.
	(gog_renderer_pixbuf_draw_path) : support the new clipping argument.
	(gog_renderer_pixbuf_draw_polygon) : ditto.

2003-10-23  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=125045
	* graph/gog-axis.c (gog_axis_view_render) : clip correctly and space
	  the ticks based on the actual tick values, not just their index.
	(gog_axis_num_markers) : return a step fraction too.

2003-10-21  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer.c (gog_renderer_init) : init zoom to 1.
	* graph/gog-renderer-gnome-print.c (gog_graph_print_to_gnome_print) :
	  ditto.

2003-10-14  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/gog-axis.c (axis_get_entry) : Add a user_defined parameter in
	order to know if the returned value is defined by user or computed.
	(gog_axis_update) : Use user defined bound for the tick spacing
	calculation.
	(gog_axis_num_markers) : round to nearest value instead of the
	automatic double to int cast that removes the fractionnal part.
	
2003-10-18  Jody Goldberg <jody@gnome.org>

	* graph/gog-chart-impl.h : Inherit from GogOutlinedObject and use the
	  padding there.
	* graph/gog-graph-impl.h : ditto.
	* graph/gog-label.c : ditto.
	* graph/gog-legend.c : ditto.

	* graph/gog-chart.c (gog_chart_get_property) : padding is in outlined
	  object now.
	(gog_chart_set_property) : delete.
	(gog_chart_class_init) : delete set_prop method and padding_pts prop
	(gog_chart_init) : delete padding_pts.
	(gog_chart_view_size_allocate) : use outlined view.
	(gog_chart_view_render) : ditto.
	(gog_chart_view_class_init) : just use render in outlined view.

	* graph/gog-graph.c (gog_graph_set_property) : remove PADDING
	(gog_graph_get_property) : ditto.
	(gog_graph_class_init) : ditto.
	(gog_graph_init) : we don't inherit directly from StyledObject anymore
	(gog_graph_view_size_allocate) : use OutlinedView.
	(gog_graph_view_render) : ditto.
	(gog_graph_view_class_init) : ditto.

	* graph/Makefile.am : Add gog-outlined-object.[ch]

2003-10-13  Jody Goldberg <jody@gnome.org>

	http://bugzilla.gnome.org/show_bug.cgi?id=122546
	* graph/plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_update) : Update
	  the index axis if our labels change.  This problem does not apply to
	  XY plots because their x bounds will change when a dim is set or
	  cleared.

2003-10-08  Jody Goldberg <jody@gnome.org>

	* Release 1.2.1

2003-10-06 Jean Brefort <jean.brefort@ac-dijon.fr>
 
 	* graph/gog-renderer-svg.c (gog_renderer_svg_draw_polygon) : use go_pattern_is_solid.
 	(gog_renderer_svg_draw_marker) : implemented.

2003-10-08  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (role_label_post_add) : put y axis labels to the
	  left or right not at the top.
	(gog_axis_class_init) : enable y axis labels

2003-10-07  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_dataset_dims) : enable setting the cross
	  point.

2003-10-07  Morten Welinder  <terra@gnome.org>

	* graph/gog-axis.c (gog_axis_update): Fake floor, not fake trunc.

2003-10-06  Morten Welinder  <terra@gnome.org>

	* graph/gog-plot.c (gog_plot_get_axis_bounds): Return NULL, not
	FALSE.
	* graph/plugins/plot_xy/gog-xy.c (gog_xy_view_point): Ditto.

2003-10-05  Jon K Hellan  <hellan@acm.org>

	* utils/go-pattern.c (go_pattern_selector): gtk_combo_box renamed
	to gnm_combo_box.

	* utils/go-marker.c (go_marker_selector): Ditto.

	* utils/go-gradient.c (go_gradient_selector): Ditto.

	* graph/gog-style.c (create_color_combo): Ditto.

2003-10-05  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* graph/gog-guru.c: #include gtkliststore.h to fix build.

2003-09-30  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render) : we
	  already winnowed out the invalid series, no need to flag them.
	* graph/plugins/plot_barcol/gog-barcol.c (gog_barcol_view_render) :
	  ditto.

2003-09-28  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c (gog_style_is_marker_visible) : Use the
	  interesting field too.
	(gog_style_assign) : Assign the interesting flags too.

	* graph/gog-legend.c (cb_size_elements) : see if anything has a marker
	(gog_legend_view_size_request) : if any of the elements has a marker
	  rather than a swatch we need 3x swatch width.
	(cb_render_elements) : If entry has a marker draw the line and marker
	(gog_legend_view_render) : Prep for drawing markers if any exist.

2003-09-29  Morten Welinder  <terra@gnome.org>

	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render):
	Survive getting a NULL vals, even though that might be a symptom
	of something else.

	* graph/gog-object.c (gog_object_dup): Plug leak.

	* graph/gog-object-xml.c (gog_object_new_from_xml): Plug leaks.

2003-09-23  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.h : delete unused enum GogAxisTickLevel.
	  Publicize the data elements.
	(gog_axis_update) : Manually handle the epsilon shifts so that we can
	  ignore sign.
 
2003-09-22  Jody Goldberg <jody@gnome.org>

	* graph/gog-view.c (cb_remove_child) : doh!

2003-09-21  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer-pixbuf.c (make_layout) : scale the font size
	  manually to work around.
	    http://bugzilla.gnome.org/show_bug.cgi?id=121543

2003-09-15 Jean Brefort <jean.brefort@ac-dijon.fr>

	* graph/gog-renderer-svg.c : added gradient support.

	* utils/go-gradient.c (go_gradient_setup): changed vector for oblique gradients.

2003-09-20  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_axis_bounds) :
	  only valid series can contribute to an index dimension.
	* graph/plugins/plot_xy/gog-xy.c (gog_xy_plot_axis_bounds) : ditto.

	* graph/gog-renderer-gnome-print.c (get_font) : respect zoom.

	* graph/gog-style.c (font_init) : set the font _before_ connecting the
	  signal. doh!

2003-09-16  Jody Goldberg <jody@gnome.org>

	* graph/gog-theme.c (gog_themes_init) : change the default theme for
	Adrian.

2003-09-16  Morten Welinder  <terra@gnome.org>

	* graph/gog-renderer-pixbuf.c (make_layout): Change to way font
	description is set so that it will work both before and after the
	fix to http://bugzilla.gnome.org/show_bug.cgi?id=121543.

2003-09-15  Jody Goldberg <jody@gnome.org>

	* graph/gog-label.c (gog_label_view_size_request) : empty labels are
	  of size 0,0 not 1,1

	* graph/gog-view.c (gog_view_size_allocate_real) : don't pad if the
	  child is 0 sized.
	(gog_view_size_child_request) : ditto.

	* graph/gog-axis.c (gog_axis_num_markers) : we can't use the max_val
	  as a fallback if there is no data defining it.

2003-09-15  Morten Welinder  <terra@gnome.org>

	* utils/go-marker.c (go_marker_selector): Terminate the array as
	it is shorter than we tell the pixbuf combo.

2003-09-15  Jody Goldberg <jody@gnome.org>

	* Release 1.2.0

2003-09-15  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer.c (gog_renderer_measure_text) : pango does not
	  like measuring ""
	(gog_renderer_draw_text) : ditto.

2003-09-15  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_view_render) : clipping the label text in
	  the iterating dimension is a bad idea, we want to clip whole labels,
	  not the individual lines.

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_view_render) : only draw
	  the first series for a pie.  Things can sneak in.

	* utils/go-font.c (go_font_init) : make default font smaller

	* graph/gog-object.c (gog_object_get_pos) : new.
	(gog_object_set_pos) : new.

2003-09-14  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_editor) : We ignore the bounds for a
	  discrete axis.
	(gog_axis_update) : store information pertaining to axes with discrete
	  enumerations.
	(gog_axis_editor) : discrete enumerations do not allow for manual boun
	  changes.
	(gog_axis_num_markers) : handle discrete enumerations.
	(gog_axis_get_marker) : ditto.
	(gog_axis_view_size_request) : ditto.
	(gog_axis_view_render) : rework to support in and out ticks.
	  Support discrete enumerations.
	(gog_axis_is_discrete) : new.
	(gog_axis_get_ticks) : new.

	* graph/gog-renderer.c (gog_renderer_draw_text) : revamp the interface
	  yet again to make parameters clearer.
	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_text) : adjsut
	  to the new interface and imrpve clipping support.
	* graph/gog-renderer-gnome-print.c (gog_renderer_gnome_print_draw_text) :
	  adjust to the new interface, add support for anchors.

2003-09-14  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* gog-style-prefs.glade: `colour' should be `color'

2003-09-14  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-renderer-gnome-print.c: replace calls of
	  gnome_font_find_closest_from_weight_slant with
	  gnm_font_find_closest_from_weight_slant

2003-09-14  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (axis_get_entry) : new utility.
	(gog_axis_get_bounds) : use it here.
	(gog_axis_num_markers) : here.
	(gog_axis_get_marker) : and here.
	(role_label_can_add) : new.
	(gog_axis_class_init) : use it here to disable labels on the Y axis
	  until we can get a smarter layout engine.

2003-09-14  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_update) : yet another layer of heuristic
	  to handle -1 .. 1 better.
	(gog_axis_get_marker) : force to 0.

	* graph/plugins/plot_barcol/gog-barcol.c (gog_barcol_view_render) :
	  Get the bounds from the value axis. (fixes bar plots)

2003-09-13  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (cb_enable_dim) : get smarter and handle
	  transitions to from auto state.

2003-09-13  Jon K Hellan  <hellan@acm.org>

	* graph/gog-style.c (cb_fg_color_changed, cb_bg_color_changed,
	cb_fill_gradient_start_color, cb_fill_gradient_end_color): Update
	is_auto and pattern_fore_auto, pattern_back_auto,
	gradient_start_auto, gradient_end_auto flags.
	(gog_style_merge): Only merge color attributes for fill.
	(gog_style_init): Initialize attern_fore_auto, pattern_back_auto,
	gradient_start_auto, gradient_end_auto flags

	* graph/gog-style.h: Add non-persistent auto flags for each color
	element in fill.

2003-09-13  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (role_label_post_add) : be smarter about
	  positioning.

	* graph/gog-view.c (gog_view_size_child_request) : hard code some
	  inter-child padding.  We can be more elegant in the future.
	(gog_view_size_allocate_real) : ditto.

	* graph/gog-axis.c (gog_axis_view_size_request) : request space for
	  children too.

2003-09-13  Jon K Hellan  <hellan@acm.org>

	* graph/gog-legend.c (cb_render_elements): Allow for floating
	point inaccuracies when deciding if there is room for an element.

2003-09-13  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_xy/gog-xy.c (gog_xy_view_render) : support index
	  axis for X.
	(gog_xy_series_update) : ditto.

	* graph/gog-axis.c (gog_axis_editor) : we want font too.
	  Align the Auto header nicely.
	(make_dim_editor) : some initial work to give the Auto button's some
	  feedback.

	* graph/gog-style.c (cb_line_color_changed) : set auto_color.
	(cb_outline_color_changed) : ditto.

2003-09-13  Jody Goldberg <jody@gnome.org>

	* graph/gog-chart.c (gog_chart_axis_set_assign) : clear_parent clears
	  ::grid, store the pointer for a moment so that we can free it.

	* utils/go-color.c (color_combo_get_gocolor) : cheap hack to support
	  alpha channel despite interface limitations.  It only works for
	  custom colours, but thats the most important case.
	(color_combo_set_gocolor) : init the custom picker too to ensure that
	  alpha gets set correctly.

	* utils/go-gradient.c (go_gradient_selector) : no need to free images,
	  have the combo absorb them.
	* utils/go-pattern.c (go_pattern_selector) : ditto.
	  fix cut-n-paste-o the first
	  'Thin Diagonal Crosshatch' was actually
	  'Thin Diagonal Stripe'

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_text) : leak.

2003-09-12  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis.c (gog_axis_set_property) : fix typos.
	(gog_axis_view_render) : actually support some of the tick options.
	(gog_axis_editor) : hook up some of the controls.

	* graph/gog-chart.c (gog_chart_axis_set_assign) : add or remove a grid
	  depending on the axis set.

2003-09-11  Jody Goldberg <jody@gnome.org>

	* graph/gog-object-xml.c (gog_object_write_property) : don't bother
	  saving parameters with default values.

	* graph/plugins/plot_barcol/gog-line.c (gog_line_view_render) :
	  respect axis bounds.

	* graph/gog-axis.c (gog_axis_view_render) : invert alignment of text
	  and support tick marks.
	(gog_axis_view_size_request) : Make axis labels optional, and allocate
	  size for major and minor ticks.
	(gog_axis_class_init) : Lots of new options.
	(gog_axis_get_property) : ditto, not all of them are supported yet.
	(gog_axis_set_property) : ditto, not all of them are supported yet.
	(gog_axis_update) : Add pull to 0, and step doubling heuristics.

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_text) : Clip
	  text trying to draw out of the physical bounds.

	* graph/plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_axis_bounds) :
	  fix cut-n-paste-o.

2003-09-10  Jody Goldberg <jody@gnome.org>

	* Release 1.1.90

2003-09-09  Jody Goldberg <jody@gnome.org>

	* graph/gog-styled-object.c (gog_styled_object_parent_changed) : set
	  the interesting fields when all the parents are in place.

	* graph/gog-renderer.h : Add an anchor parm to draw_text and clean up
	  the semantics of size.

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_text) : handle
	  the various anchor types.

	* graph/gog-axis.c : Some initial work at generating bounds, and
	  drawing axis values.

	* graph/gog-view.c (gog_view_render) : filter objects with invalid
	  size.  eg a user makes the plot too small to be useful.

2003-09-09  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_update) :
	  percentage charts logicly limit -1 .. 1

	* graph/plugins/plot_xy/gog-xy.c (gog_xy_plot_update) : no logical min
	  or max.

2003-09-08  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/plot-types.xml.in : fix icons to match
	  reality.  All lines currently have markers by default.

	* graph/plugins/plot_barcol/gog-line.c
	(gog_line_update_stacked_and_percentage) : Generate the correct bounds.

	* graph/plugins/plot_barcol/gog-barcol.c
	(gog_barcol_update_stacked_and_percentage) : Why special case 0..1
	(gog_barcol_view_render) : handle bound clipping.

2003-09-08  Jon K Hellan  <hellan@acm.org>

	* graph/gog-renderer-svg.c (gog_renderer_svg_draw_marker): New
	dummy implementation.
	(gog_renderer_svg_class_init): Use it.

2003-09-08  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c (cb_fill_gradient_end_color) : throw the update
	  into a timer to decrease flicker.
	  Works around a bug in older libarts.
	(gog_style_set_fill_brightness) : new.
	(cb_gradient_brightness_value_changed) : actually hide the brightness.
	(cb_gradient_style_changed) : ditto.
	(fill_gradient_init) : ditto.

	* graph/gog-renderer-svg.c (gog_graph_export_to_svg) : convert
	  interface to use libgsf.

2003-09-07 Jean Brefort <jean.brefort@ac-dijon.fr>

	* utils/go-gradient.c (go_gradient_setup): added a small value to gradient->c for
	  vertical gradients to avoid a line whith the bad color at the top of the area.
	* graph/gog-style.c: handle brightness in gradients.
	* graph/gog-renderer-svg.[c,h]: new files to handle svg export (not
	fully implemented).
	* graph/Makefile.am: added gog-renderer-svg.[c,h].

2003-09-07  Jody Goldberg <jody@gnome.org>

	* utils/go-marker.c (go_marker_selector) : Add marker names.

2003-09-07  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* utils/go-marker.c : removed unused property and signal stuff.
	(go_marker_selector) : new.
	* graph/gog-style.c (populate_marker_combo) : new.
	(marker_init) : use the marker combo.
	* graph/gog-style-prefs.glade : removed marker option menu.
	* graph/gog-renderer-gnome-print.c 
	(gog_renderer_gnome_print_draw_marker): returns when one of the path
	is NULL (fix a crash).
	
2003-09-07  Jody Goldberg <jody@gnome.org>

	* graph/gog-styled-object.c (gog_styled_object_set_property) : set the
	  interesting field for a style.
	(gog_styled_object_init) : ditto.
	(gog_styled_object_interesting_fields) : default to outline & fill.

	* graph/gog-style.c (gog_style_persist_dom_save) : only save
	  interesting fields.

	* graph/gog-series.c (gog_series_interesting_fields) : new.
	(gog_series_class_init) : hook it up.
	* graph/gog-legend.c (gog_legend_interesting_fields) : new.
	(gog_legend_class_init) : hook it up.
	* graph/gog-label.c (gog_label_interesting_fields) : new.
	(gog_label_class_init) : hook it up.
	* graph/gog-axis.c (gog_axis_interesting_fields) : new.
	(gog_axis_class_init) : hook it up.

2003-09-07  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c (gog_style_line_load) : support auto_color flags.
	(gog_style_line_save) : ditto.
	(gog_style_fill_load) : handle is_auto.
	(gog_style_fill_save) : ditto.

	* graph/gog-legend.c (gog_legend_view_render) : tune the padding.
	(cb_render_elements) : ditto.

2003-09-06  Jon K Hellan  <hellan@acm.org>

	* graph/gog-theme.c (gog_theme_init_style): Merge styles instead
	of assigning style from theme.
	(map_area_series_solid_default): Only change elements which hold
	auto values.

	* utils/go-marker.[ch] (go_marker_shape_from_str,
	go_marker_shape_as_str): Move from gog-style.c and rename.
	(go_marker_is_auto): New. Tests if marker is different from
	default. Should really test if user has chosen the marker
	explicitly.

	* graph/gog-style.c (gog_style_merge): Implement.
	(str_as_marker_shape, marker_shape_as_str):Move to utils/go-marker
	and rename.
	(gog_style_marker_load, gog_style_marker_save): Use renamed
	version of above functions.
	(gog_style_persist_dom_load): Mark style elements read from file
	as non-auto (for now).

2003-09-06  Jon K Hellan  <hellan@acm.org>

	* utils/go-pattern.[ch] (go_pattern_as_str, go_pattern_as_str): Move
	from gog-style.c and rename.

	* utils/go-gradient.[ch] (go_gradient_dir_from_str) 
	(go_gradient_dir_as_str): Ditto.

	* graph/gog-style.c (str_as_pattern, pattern_as_str,
	str_as_grad_dir, grad_dir_as_str): Move to utils/go-pattern /
	go-gradient and rename.
	(gog_style_gradient_load, gog_style_gradient_save,
	gog_style_fill_load, gog_style_fill_save): Use renamed version of
	above functions.

2003-09-05  Jon K Hellan  <hellan@acm.org>

	* utils/go-color.[ch] (go_color_from_str, go_color_as_str):
	New. Convert color to/from string.

	* graph/gog-style.c (str_as_fill_style, fill_style_as_str):
	New. Convert fill style to/from string.
	(str_as_pattern, pattern_as_str): New. Convert pattern to/from
	string.
	(str_as_grad_dir, grad_dir_as_str): New. Convert gradient
	direction to/from string.
	(str_as_marker_shape, marker_shape_as_str): New. Convert marker
	shape to/from string.
	(gog_style_line_load, gog_style_line_save): New. Load/save a
	line/outline style.
	(gog_style_gradient_load, gog_style_gradient_save): New. Load/save
	a gradient.
	(gog_style_fill_load, gog_style_fill_save): New. Load/save a fill.
	(gog_style_marker_load, gog_style_marker_save): New. Load/save a
	marker.
	(gog_style_font_load, gog_style_font_save): New. Load/save a font.
	(gog_style_persist_dom_load, gog_style_persist_dom_save):
	Implement.

	* graph/gog-object-xml.c (gog_object_set_arg_full) : Don't expect
	GObject type name as entity content.
	(gog_object_write_property): Don't save GObject type name as
	entity content.

2003-09-04  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_update) : don't
	  force 0.  That will be handled at the axis level.

	* graph/gog-style.c : move the marker editor back into the main style
	  editor rather than being distinct.

2003-09-03  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* utils/go-marker.[ch] : new.
	* graph/gog-pixbuf-renderer.c : add draw_marker method.
	* graph/gog-gnome-print-renderer.c : idem.
	* graph/gog-renderer.c : idem.
	* graph/gog-style-prefs.glade : update marker editor
	* graph/gog-style.c (cb_marker_changed) : new.
	(marker_init) : use editor in gog-marker.c.
	(gog_style_pref_state_free) : free marker pointer.
	(gog_style_assign) : handle marker pointer.
	(gog_style_finalize) : idem.
	(gog_style_init) : init marker pointer.
	* graph/gog-theme.c (map_area_series_solid_default)
	(map_area_series_solid_guppi) : initialize marker properties.
	* graph/plugins/plot_barcol/gog-line.c
	(gog_line_view_render) : draw markers.

2003-09-03  Jody Goldberg <jody@gnome.org>

	* graph/gog-legend.c (cb_render_elements) : clip before things
	  overflow.

2003-09-03  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.h : add GogStyle::font::color
	* graph/gog-style.c (gog_style_init) : init font::color

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_text) :
	  composite manually cause libart was dog slow when using the approach
	  in librsvg.

2003-09-03  Jody Goldberg <jody@gnome.org>

	* graph/gog-label.c (gog_label_view_size_request) : take outline
	  into account.

	* graph/gog-legend.c (gog_legend_view_render) : don't over draw space
	  allocated to children, and actually measure the text.
	(gog_legend_editor) : add.

	* graph/gog-view.c (gog_view_size_child_request) : new utility to
	  build up a size requestfor the children around the request for the
	  parent.

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_plot_foreach_elem) :
	  handle case with no series.

2003-09-03  Morten Welinder  <terra@gnome.org>

	* graph/gog-object-xml.c (gog_object_set_arg_full): Plug leak.

2003-09-01  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer-pixbuf.c (make_layout) : kludge a patch for font
	  scaling.

2003-09-01  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_xy/gog-xy.c : An initial skeleton, because I
	  accidentally deleted the last one.  Useless.

	* graph/gog-style.c (gog_object_get_style) : fix leak.
	(fill_init) : do not assign the style as part of the initialization.
 
	* graph/gog-renderer-pixbuf.c (make_layout) : another failing attempt
	  to get font sizes to change.

	* graph/gog-renderer-gnome-print.c : An initial pass at font support.
	  Untested, and unlikely to work out of the box.

2003-08-29  Morten Welinder  <terra@gnome.org>

	* graph/gog-axis.c (gog_axis_class_init): Plug leak.

	* utils/go-pattern.c (go_pattern_selector): Free the pixel data.

	* graph/gog-guru.c (graph_typeselect_minor): Handle ->plot
	changing underneath us.

	* utils/go-font.c (go_font_init): Since the key is a pango font
	description, not a go-font, use proper hash and equal functions.

2003-08-29  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_view_render) : go
	  clockwise to avoid having ArtRender think the figure is inside out.

2003-08-28  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer-impl.h : Add font_removed.

2003-08-28  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_plot_class_init) : pie
	  series need outlines and fills.

	* graph/gog-theme.c (gog_theme_element_free) : new.
	(gog_theme_element_hash) : ditto.
	(gog_theme_element_eq) : ditto.
	(gog_themes_shutdown) : new to avoid leaking.
	(gog_theme_finalize) : handle lookup by role.
	(gog_theme_init) : ditto.
	(gog_theme_add_element) : ditto.
	(gog_theme_init_style) : rework to clarify precedence.
	    1) <parent_type>::<role>
	    2) ::<role>
	    3) object_type

	* graph/gog-style.c (gog_style_assign) : Use GOFont.
	(gog_style_finalize) : ditto.
	(gog_style_init) : ditto.
	(gog_style_set_font) : new,

	* goffice.c (libgoffice_init) : init fonts.
	(libgoffice_shutdown) : shutdown fonts and themes.

	* utils/go-font.c : new utility class to ref count fonts.

2003-08-28  Morten Welinder  <terra@gnome.org>

	* utils/go-gradient.c (go_gradient_selector): Clean a bit.

	* graph/gog-style.c (gog_style_pref_state_free): Don't unref NULL
	images.
	(gog_style_set_image_preview): Handle setting the same picture,
	just in case.

2003-08-27  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style.c (gog_style_set_image_preview): add 
	  argument to gnm_pixbuf_intelligent_scale call
	(cb_image_file_select) use preview_file_selection_set_filename
	  rather than gtk_file_selection_set_filename
	(fill_image_init): set minimum preview size

2003-08-27  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style.c (gog_style_set_image_preview): new
	(cb_image_file_select): use gtk_image_set_from_pixbuf
	(fill_image_init): initialize state->fill.image.image
	(cb_fill_type_changed): store original size image
	(gog_style_pref_state_free): free state->fill.image.image
	* graph/gog-style-prefs.glade: add size label to image-fill 
	  preview

2003-08-26  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style.c (cb_image_file_select): use 
	  preview_file_selection_new and not
	  gnumeric_dialog_image_file_selection
	
2003-08-26  Morten Welinder  <terra@gnome.org>

	* utils/go-pattern.c (go_pattern_selector): Get the args to
	gdk_pixbuf_new right.  Plug leak.

	* utils/go-gradient.c (go_gradient_setup): New function.
	(go_gradient_selector): Use go_gradient_setup.  Make return type
	sane.

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_polygon):
	Use go_gradient_setup.

	* graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_polygon): Use go_gradient_setup.

2003-08-25  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style.c (cb_image_file_select): use
	  gnumeric_dialog_image_file_selection
	
2003-08-25  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_polygon) : remove double
	  gonme_print_grestore

2003-08-24  Jody Goldberg <jody@gnome.org>

	* graph/gog-guru.c (cb_graph_guru_clicked) :clear the tmp value that
	  was refing the graph.

2003-08-24  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-guru.c (gog_guru): store and ref gclosure
	(graph_guru_state_destroy): unref closure
	(cb_graph_guru_clicked): invoke gclosure
	* graph/gog-guru.h (gog_guru): use gclosure

2003-08-23  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-1.5d.c (gog_plot1_5d_update) : doh!

2003-08-22  Jody Goldberg <jody@gnome.org>

	* graph/gog-object.c (gog_role_cmp) : use the new priority field to
	  be smarter.
	(gog_object_dup) : Use the new go_data_dup.
	(gog_object_set_parent) : use gog_role_cmp instead of just using the
	  position.

2003-08-21  Jody Goldberg <jody@gnome.org>

	* graph/gog-guru.c (gog_guru) : use gog_graph_dup now that styles
	  work.

	* graph/gog-object.c (gog_object_dup) : doh! dst = src works better
	  than src = src.

2003-08-21  Jody Goldberg <jody@gnome.org>

	* Release 1.1.20

2003-08-21  Jody Goldberg <jody@gnome.org>

	* graph/gog-object-xml.c (gog_object_new_from_xml) : don't mark newly
	  reconstituted objects as explititly typed unless they really were.
	(gog_dataset_save) : patch leak.

	* graph/gog-object.c (gog_object_dup) : new.

2003-08-21  Jody Goldberg <jody@gnome.org>

	* graph/gog-axis-prefs.glade : Remove the ticks menu.  I'll handle it
	  via roles later.

	* graph/gog-axis.c (gog_axis_editor) : we're only interested in the
	  line characteristics.

	* utils/go-units.h : fix arg names

	* graph/gog-chart.c (gog_chart_class_init) : add padding_pts.
	* graph/gog-graph.c (gog_graph_class_init) : typo.

2003-08-19  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer.c (gog_renderer_draw_rectangle) : handle outlines
	  properly.

2003-08-14  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style-prefs.glade: shuffle fill-image widgets again

2003-08-14  Morten Welinder  <terra@gnome.org>

	* graph/gog-style.c (cb_fill_type_changed): Don't unref the old
	image if it is NULL.

2003-08-14  Jody Goldberg <jody@gnome.org>

	* graph/gog-chart.c (role_plot_post_add) : don't set the axis twice
	  for the first plot.  Add a post condition to keep us honest.

2003-08-12  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c (fill_image_init) : store the filename
	(cb_image_file_select) : ditto.
	(cb_fill_type_changed) : use it here to support restoring the image
	  filaname even though all we have is the image.

2003-08-13  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style-prefs.glade: shuffle fill-image widgets
	* graph/gog-guru.glade: increase default size and increase
	  default style portion

2003-08-13  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style-prefs.glade: align fill-image widgets

2003-08-12  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style-prefs.glade: improve spacing, add scoll window

2003-08-12  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-style-prefs.glade: add some missed label names

2003-08-10  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c : re-enable image handling and cache the pixbuf.

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_polygon) : The
	  style stores the pixbuf now, no need to reload the damn thing from
	  disk every time we use it.

	* graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_polygon) : Use a convenience routine
	(print_image) : new convenience routine.

2003-08-11  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/plugins/plot_pie/gog-pie-prefs.c (cb_center_size_changed):
	  scale between display and storage
	(gog_ring_plot_pref): ditto
	* graph/plugins/plot_pie/gog-ring-prefs.glade: center_size spin
	  button should range from 0 to 95 in steps of 5

2003-08-09  Andreas J. Guelzow  <aguelzow@taliesin.ca>

	* graph/gog-guru.c: add correct helpfile address

2003-08-01  Morten Welinder  <terra@gnome.org>

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_finalize): Plug
	leak.

	* graph/gog-style.c (gog_style_class_init): Plug leaks.

2003-08-01  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_path) : use
	  the line characteristics, not outline.
	* graph/gog-renderer-gnome-print.c
	(gog_renderer_gnome_print_draw_path) : ditto.

	* graph/gog-theme.c (gog_themes_init) : set the line width.
	(map_area_series_solid_default) : line colour seems to start at an
	  offset to area colours.
	(map_area_series_solid_guppi) : set the line colour too.

2003-07-31  Jody Goldberg <jody@gnome.org>

	* graph/gog-series.c (gog_series_set_index) : always init the style,
	  don't be cheap.  When loading index is initialized to 0, so the
	  first series would not get styled because it did not look like
	  anything changed.

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_view_render) : fix
	  interpretation of the center_size parameter.  Thanks tino.

	* graph/gog-plot.c (gog_plot_init) : copy the plot descriptor from the
	  class to the plot here for use cases that use g_object_new.
	* graph/gog-plot-engine.c (gog_plot_new_by_name) : rather than here
	  where it gets missed.

	* graph/gog-legend.c (gog_legend_parent_changed) : catch object name
	  changes in the chart and trigger an update.

	* graph/gog-graph.c (cb_graph_idle) : clear the handler before doing
	  the update so that a handler can queue an update for another object.

2003-07-30  Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>

	* graph/plugins/plot_barcol/gog-line.[ch]: new. Line and Area support.
	* graph/plugins/plot_barcol/gog-1.d.[ch]: new. Defines base class for
	gog-line and gog-barcol.
	* graph/plugins/plot_barcol/plot-types.xml.in: add support for are and
	line plots.
	* graph/plugins/plot_barcol/plugin.xml.in: add are and line engines.

2003-07-19  Jody Goldberg <jody@gnome.org>

	* graph/gog-chart.c (gog_chart_get_axis) : new.

2003-07-19  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/plot-types.xml.in : for stacked and
	  percentage set the overlap to 100.

2003-07-17  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_barcol/gog-barcol.c : Request XY axis set.

	* graph/gog-data-set.c (gog_dataset_set_dim_internal) : always fire an
	  update.

2003-07-09  Jody Goldberg <jody@gnome.org>

	* graph/gog-object-xml.h : fix guards

2003-07-07  Jody Goldberg <jody@gnome.org>

	* graph/gog-legend.c (gog_legend_parent_changed) : chain upwards.
	* graph/gog-series.c (gog_series_parent_changed) : ditto.

2003-07-06  Andreas J. Guelzow <aguelzow@taliesin.ca>

	* graph/plugins/plot_pie/gog-ring-prefs.glade: colour -> color

2003-07-06  Andreas J. Guelzow <aguelzow@taliesin.ca>

	* graph/plugins/plot_pie/gog-pie-prefs.glade: colour -> color

2003-07-03  Jon K Hellan  <hellan@acm.org>

	* graph/gog-style.c (init_solid_page, init_gradient_page) 
	(init_gradient_page, gog_style_editor): Turn off color combo
	tearoff behaviour in dialogs.

2003-07-02  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer.c (gog_renderer_init) : tweak the default size to
	  produce a better proportion.

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_view_render) : some minor
	  cleanup.

	* graph/plugins/plot_pie/gog-pie-prefs.glade : fix units of separation
	  spinner.

2003-06-29  Jody Goldberg <jody@gnome.org>

	For Emmanuel Pacaud <emmanuel.pacaud@univ-poitiers.fr>
	* graph/plugins/plot_pie/gog-pie.c : Handle rings

2003-06-27  Jody Goldberg <jody@gnome.org>

	* graph/gog-plot.c (gog_plot_set_property) : don't allow setting
	  vary_style_by_element if the plot does not permit it in the current
	  state.
	(gog_plot_get_property) : be anal.

	* graph/plugins/plot_barcol/gog-barcol.c
	(gog_barcol_supports_vary_style_by_element) : new.

2003-06-27  Jody Goldberg <jody@gnome.org>

	* graph/gog-plot-impl.h : Add GogPlotClass::supports_vary_by_element

2003-06-26  Morten Welinder  <terra@gnome.org>

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_polygon):
	Fix gradients.

2003-06-25  Jody Goldberg <jody@gnome.org>

	* graph/gog-plot-engine.c (gog_plot_type_service_finalize) : still
	  incomplete, but the lists definitely need to be freed.

2003-06-25  Jody Goldberg <jody@gnome.org>

	* graph/gog-data-allocator.c (gog_dataset_get_type) : fix
	  cut-n-paste-o.

2003-06-25 Jean Brefort <jean.brefort@ac-dijon.fr>

	* graph/gog-renderer-gnome-print.c: use alpha channel when
	  printing gradients

2003-06-20    Jean Brefort <jean.brefort@ac-dijon.fr>

	* graph/gog-renderer-gnome-print.c (gog_renderer_gnome_print_draw_polygon):
	  unref the pixmaps

2003-06-22  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_plot_set_property) : vary
	  style by element handled in plot now.
	(gog_pie_plot_get_property) : ditto.
	(gog_pie_plot_cardinality) : deleted.
	(gog_pie_plot_foreach_elem) : doh!  USe the label we just calculated.
	(gog_pie_view_render) : implement general extracted slices.

	* graph/gog-theme.c (gog_theme_get_name) : new util.

	* graph/gog-style.c : Implement the hooks for serialization but have
	  not actually written them yet.

	* graph/gog-series.c (gog_series_editor) : add a notebook wrapper to
	  allow changing style and data.
	(gog_series_init) : set GogObject::use_parent_as_proxy flag.
	(gog_series_dataset_dims) new.

	* graph/gog-plot.c (gog_plot_set_property) : handle the
	  'vary_style_by_element' at this level.
	(gog_plot_get_cardinality) : ditto.

	* graph/gog-object.c (gog_object_emit_changed) : Add
	  'use_parent_as_proxy' utility to make life easier for things like
	  series that will not have individual views.  This will fire a
	  changed signal from their plots.

	* graph/gog-legend.c (gog_legend_parent_changed) : new.  ensure we get
	  updated when chart cardinality changes.
	(gog_legend_update) : new.

	* graph/gog-label.c (gog_label_editor) : fix.
	(gog_label_class_init) : fix.
	(gog_label_dims) : added to handle the extension to dataset interface.

	* graph/gog-guru.glade : remove frame wrapping the prop notebook.

	* graph/gog-guru.c (prop_notebook_set_current_page) : new util.
	  to cleanup the handling of prop pages.  Only show the border if the
	  prop page is not a notebook.  This keeps the layout visually
	  similar in both cases.
	(cb_select_prop_page) : use it here.
	(cb_attr_tree_selection_change) : and here.
	(graph_guru_type_selector_new) : remove the useless notebook wrapping
	  the type selector.  It gives us more space and forces an initial
	  selection.

	* graph/gog-graph.c (gog_graph_set_property) : add a 'theme-name'
	  property to facilitate serialization.

	* graph/gog-data-allocator.c (gog_dataset_dims) : extension to the
	  dataset interface to facilitate serialization.

	* graph/gog-chart.c (gog_chart_get_property) : new.  Needed a way to
	  signal that the cardinality had changed, and a read only property
	  with a notify handler seemed cleaner than a stand alone signal.
	  Looking back at that decision, it seems ugly.  Might revisit this
	  later.

	* graph/gog-axis.c : hook up the dataset interface to prepare for
	 serializing all the flags.

	* graph/go-data-impl.h (GOData) : extend interface to require a
	  'from_str' operation to allow serialization to xml.
	* graph/go-data.c (go_data_from_str) : wrapper.

	* graph/Makefile.am : Add gog-object-xml.[ch]

2003-06-14    Jean Brefort <jean.brefort@ac-dijon.fr>

	* graph/gog-style.c (gog_style_editor): move a bad placed g_signal_connect
	* graph/gog-style.c (gog_style_copy): duplicate filename if useful
	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_polygon):
	  added missing white spaces (purely cosmetic)
	* graph/gog-renderer-pixbuf.c (go_color_to_artpix): removed static
	* graph/gog-renderer-gnome-print.c (gog_renderer_gnome_print_draw_polygon):
	  added image and gradient support

2003-06-13  Jon K Hellan  <hellan@acm.org>

	* graph/gog-style.c (gog_style_editor) : Use the new 
	color_combo_set_instant_apply flag.

2003-06-12  Jody Goldberg <jody@gnome.org>

	* graph/goffice-graph.h : remove POSITION_FILL
	  It does no good to have random thought experiments floating around.

2003-06-12  Jody Goldberg <jody@gnome.org>

	* graph/gog-guru.c (graph_guru_type_selector_new) : add an accelerator
	  for the plot family selector.

2003-06-10  Jody Goldberg <jody@gnome.org>

	* graph/gog-view.c (gog_view_size_allocate) : Use the new debug macro.
	(cb_model_changed) : ditto.
	* graph/gog-object.c (gog_object_update) : and here.

	* graph/goffice-graph.h : Add trivial d() debugging macro so that
	  normal folk don't get deluged with debug spew.
	* graph/lib.c : store goffice_graph_debug_level here.

	* graph/gog-renderer-gnome-print.c * (gog_renderer_gnome_print_draw_text) :
	  implement trivial version.  Need to decide how to handle fonts.

2003-06-10  Jody Goldberg <jody@gnome.org>

	* graph/plugins/plot_pie/gog-pie.c (gog_pie_series_update) :
	  handle series before they are valid.
	* graph/plugins/plot_barcol/gog-barcol.c (gog_barcol_series_update) : ditto.

	* graph/gog-object.c (gog_object_set_parent) : call the role's
	  post_add routine then objects parent_changed before signaling its
	  addition.
	(gog_object_add_by_role) : set_parent calls the role functions, not us.

2003-06-07    Jean Brefort <jean.brefort@ac-dijon.fr>

	* graph/gog-style.c (gog_style_editor) :
	* graph/gog-style.h (struct _GogStyle) :
	* graph/gog-style-prefs.glade :
	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_draw_polygon) : Start work on image

2003-06-07  Jody Goldberg <jody@gnome.org>

	* Release 1.1.19

2003-06-07  Jody Goldberg <jody@gnome.org>

	* Release 1.1.18

2003-06-07  Jody Goldberg <jody@gnome.org>

	* graph/gog-view.c (gog_view_queue_resize) : invalidate the allocation
	  too if there is no parent.

2003-06-06  Jody Goldberg <jody@gnome.org>

	* graph/gog-chart.c (gog_chart_set_position) : simplify.
	* graph/gog-graph.c (gog_graph_validate_chart_layout) : new.

	* graph/gog-guru.c (cb_sample_pressed) : set the zoom here.
	(cb_sample_released) : and unset it here so that the icons don't get
	  shrunk.

2003-06-04  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* graph/gog-style.h: Fixed include of command-context.h to make it work
	for builds outside the source dir.

2003-06-04  Jody Goldberg <jody@gnome.org>

	* graph/gog-object.c (gog_object_generate_name) : return NULL, not FALSE

2003-06-03  J.H.M. Dassen (Ray) <jdassen@debian.org>

	* graph/gog-guru.h: Fixed include of command-context.h to make it work
	for builds outside the source dir.

2003-06-02  Jody Goldberg <jody@gnome.org>

	* graph/gog-legend.c (cb_render_elements) : quick and dirty draw the
	  text.  Still lots of work needed to measure things properly and do a
	  more dynamic layout.

	* graph/gog-guru.c (cb_typesel_sample_plot_resize) : use the canvas zoom
	(cb_sample_plot_resize) : ditto.
	(graph_guru_init_format_page) : ditto.
	(graph_guru_type_selector_new) : ditto.

	* graph/gog-renderer-pixbuf.c (make_layout) : new.
	(gog_renderer_pixbuf_draw_text) : new. simple handler no rotation yet.
	(gog_renderer_pixbuf_measure_text) : new.
	(gog_art_renderer_new) : new utility.
	(gog_renderer_pixbuf_draw_polygon) : used here.

	* graph/gog-control-foocanvas.c (gog_control_foocanvas_draw) : another
	  speed up by using regions rather tha nthe bounding rect of the expose.
	  Thanks to AlexL for pointing out that this will help us when
	  multiple exposes are compressed into 1 event and we do better to
	  clip against the distinct sub regions, than the bounding box of all
	  of them.
	(gog_control_foocanvas_update) : make life easier and pass the zoom to
	  the renderer.

2003-06-02  Jody Goldberg <jody@gnome.org>

	* graph/gog-style.c : minor warning suppression and format style
	  tidying.

2003-06-01  Jean Brefort <jean.brefort@ac-dijon.fr>
	* graph/gog-style.h : new gradient styles,
		fill type accessible only if GOG_STYLE_FILL is used
	* graph/gog-style.c : Enhanced gradient selector
	* graph/gog-renderer-pixbuf.c : Support for new gradient types
	* graph/gog-themes.c : Top to bottom gradient in Guppi theme

2003-05-31  Jody Goldberg <jody@gnome.org>

	For Jean Brefort <jean.brefort@ac-dijon.fr>
	* graph/gog-style.c (gog_style_editor) : Start work on gradient
	  selector.

2003-05-31  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_update) : fix
	  canvas warnings about tryingto queue an update from an update
	  handler.

2003-05-30  Jody Goldberg <jody@gnome.org>

	* graph/gog-theme.c (gog_themes_init) : make default them fill legend
	  with white.

	* graph/plugins/plot_barcol/gog-barcol.c (barcol_draw_rect) : smooth
	  the anti-aliasing fuzziness in the libart backend for hairline
	  outlines.

	* graph/gog-chart.c (gog_chart_view_size_allocate) : support
	  positions of NE, NW, SE, SW so that we can handle XL's 'corner'
	  legends.

	* graph/gog-control-foocanvas.c (gog_control_foocanvas_draw) : big
	  speed win.  Only draw the piece of the chart that was exposed.

	* graph/gog-plot.c (gog_plot_request_cardinality_update) : we may add
	  a series before assigning to a chart.

	* graph/gog-theme.c (gog_themes_init) : default and guppi themes were
	  inverted for legends.

	* graph/gog-chart.c (gog_chart_class_init) : default to centering
	  legends.

2003-05-30  Jody Goldberg <jody@gnome.org>

	* graph/gog-chart.c (gog_chart_view_render) : re-enable.

	* graph/gog-renderer-pixbuf.c (gog_renderer_pixbuf_update) :
	  When the scale changes size requests are invalidated.

	* graph/gog-renderer.c (gog_renderer_invalidate_size_requests) : new.
	* graph/gog-view.c (gog_view_invalidate_sizes) : new.

	* graph/gog-legend.c (gog_legend_view_render) : typo.  pad is in Y
	  coordinates.

	* graph/gog-plot.c (role_series_post_add) : adding a series changes
	  the cardinality.
	(role_series_pre_remove) : ditto.
	(gog_plot_update) : delete.  Already handled at the chart level.
	(gog_plot_init) : Make sure cardinailty is initially valid so that we
	  queue an an update request as necessary when it really
	  does change.

	* graph/gog-chart.c (gog_chart_view_size_allocate) : support the
	  alignment flags and enforce clipping.
	(role_plot_post_add) : adding a plot changes the cardinality.
	(role_plot_pre_remove) : ditto.
	(gog_chart_init) : Make sure cardinailty is initially valid so that we
	  queue an an update request as necessary when it really
	  does change.

2003-05-29  Jody Goldberg <jody@gnome.org>

	* graph/gog-renderer.c (gog_renderer_outline_size) : keep widths >= 1

	* graph/plugins/plot_barcol/gog-barcol.c (barcol_draw_rect) : clip to
	  integer sizes to decrease amount of bleed through due to antialiasing.

2003-05-27  Jody Goldberg <jody@gnome.org>

	* graph/gog-legend.c : make the swatch sizes properties.

	* graph/gog-guru.c (cb_typesel_sample_plot_resize) : fix sizing.
	(cb_sample_plot_resize) : ditto.

	* graph/gog-renderer.c (gog_renderer_set_property) : doh!
	  set the values if they are _different_ not the same.

2003-05-26  Jody Goldberg <jody@gnome.org>

	* graph/gog-guru.c (graph_guru_set_page) : we can't run the
	  typeselector without a chart selected.
	(cb_graph_guru_add_plot) : the child_added handler already populates
	  things.
	(cb_find_child_added) : It may happen that something else will add an
	  item while we're editing, and the change of focus may not be
	  welcome,  However, it is far more likely that we just added it.

	* graph/gog-object.c (gog_object_is_deletable) : don't let the guru
	  delete the top level graph.

	* graph/gog-guru.glade : Add border to the menu bar to align it with
	  the scrolled window.
	Add a 'Precedence' menu.

2003-05-25  Jody Goldberg <jody@gnome.org>

	The code is in CVS time to start keeping a changelog.
