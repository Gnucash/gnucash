# Test
language: c++
compiler: gcc
env:
    - BUILDENV=arch BUILDTYPE=cmake-ninja
    - BUILDENV=ubuntu-14.04 BUILDTYPE=cmake-make
services:
    - docker
before_install:
    - python3 -m pip install --user flake8
    - flake8 . --count --select=E9,F63,F7,F82 --show-source --statistics
install:
    - docker --version
    - echo BUILDENV="$BUILDENV"
    - docker build -f util/ci/${BUILDENV}-docker -t ${BUILDENV}-gnucashbuild util/ci
script:
    - echo BUILDTYPE="$BUILDTYPE"
    - docker run -v "$(pwd)":/gnucash:rw --env="BUILDTYPE=$BUILDTYPE" --rm ${BUILDENV}-gnucashbuild
