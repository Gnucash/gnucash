2005-11-05  David Hampton  <hampton@employees.org>

	* configure.in:
	* src/register/register-core/Makefile.am:
	* src/core-utils/Makefile.am:
	* src/gnc-module/test/mod-bar/Makefile.am:
	* src/gnc-module/test/mod-baz/Makefile.am:
	* src/gnc-module/test/mod-foo/Makefile.am:
	* src/gnc-module/Makefile.am:
	* src/report/report-gnome/Makefile.am:
	* src/business/business-core/Makefile.am:
	* src/business/business-gnome/Makefile.am:
	* src/business/dialog-tax-table/Makefile.am:
	* src/gnome-utils/Makefile.am:
	* src/engine/Makefile.am:
	* src/gnome/Makefile.am:
	* src/app-utils/Makefile.am: Pass the name of the guile executable
	from configure to the makefiles instead of hard-coding it.
	Requested by Peter O'Gorman to improve Mac OS X support.

	* src/gnome-utils/gnc-embedded-window.c:
	* src/gnome-utils/gnc-embedded-window.h:
	* src/gnome-utils/gnc-main-window.c:
	* src/gnome-utils/gnc-main-window.h:
	* src/gnome-utils/gnc-window.h: Cleanup usage of the
	PLUGIN_PAGE_LABEL define.

	* Various: Convert to newer method of allocating private data
	structures for objects.  This allows glib to consolidate the space
	for all of the various public and private data structures on an
	object and reduce memory fragmentation.  Change all data structure
	declarations of the parent object to be the actual name of the
	object instead of the string "parent".  This makes debugging
	easier when looking at data structures in gdb.

	* src/report/report-gnome/gnc-plugin-page-report.c: Same as
	above. Also regularize the variable names used to refer to the
	public and private data structures in this file.

2005-11-05  Christian Stimming  <stimming@tuhh.de>

	* autogen.sh: Replace old crufty autogen.sh script with radically
	simplified version. Simply call all helper programs in one
	sequence and that's it.

2005-11-04  David Hampton  <hampton@employees.org>

	* src/import-export/qif/test/test-qif.c:
	* src/app-utils/test/test-load-module: Other changes needed to get
	'make check' closer to working.

	* src/gnome-utils/test/Makefile.am: Remove GUI test cases from the
	'TESTS' variable.  These tests will prevent 'make check' from
	running unattended.

	* src/import-export/qif/test/Makefile.am:
	* src/import-export/test/Makefile.am:
	* src/report/utility-reports/test/Makefile.am:
	* src/report/locale-specific/us/test/Makefile.am:
	* src/report/standard-reports/test/Makefile.am:
	* src/report/stylesheets/test/Makefile.am:
	* src/report/report-system/test/Makefile.am:
	* src/business/business-core/test/Makefile.am:
	* src/app-utils/test/Makefile.am: Include core-utils in the scheme
	load path to allow some of the test cases run again.

	* src/import-export/qif/qif-objects.c: Generate a new copy of the
	amount string when copying a QIF split.  Prevents a double free
	error when both the original and the copy split are destroyed.

2005-11-03  David Hampton  <hampton@employees.org>

	* src/business/business-gnome/gnc-plugin-page-invoice.c:
	* src/gnome-utils/gnc-main-window.c:
	* src/gnome-utils/gnc-plugin-page.[ch]:
	* src/gnome/gnc-plugin-page-register.c:
	* src/gnome/gnc-plugin-page-account-tree.c: Push the summarybar
	inside of the created page widget.  This solves several problems
	with window resizing when switching between pages, or when turning
	the summary bar off and on.

	* src/register/register-gnome/gnucash-sheet.c
	(compute_optimal_height): This routine should always return the
	minimal height the widget will accept, not the current height of
	the widget.  Returning the current height causes all sorts of
	problems such as windows that are impossible to resize down.

2005-11-03  Neil Williams <linux@codehelp.co.uk>

	* Various Makefile.am : Remove .cvsignore from
	EXTRA_DIST to allow make dist to complete again.
	* various directories : set svn.ignore for symlinks
	created during the build.

2005-11-03  Neil Williams <linux@codehelp.co.uk>

	* src/gnome-utils/test/Makefile.am : Tweak trunk
	version to allow test files to find QOF externally.

2005-11-02  David Hampton  <hampton@employees.org>

	* src/import-export/qif-import/qif.glade:
	* src/import-export/generic-import.glade:
	* src/import-export/hbci/glade/hbciprefs.glade:
	* src/gnome-utils/preferences.glade:
	* src/gnome-utils/gnc-main-window.c:
	* src/gnome/gnc-plugin-page-register.c:
	* src/gnome/glade/sched-xact.glade: Fix items from round two of
	Volker Englisch's review of the preferences dialog.

	* src/gnome-utils/gnc-plugin.c: Null terminate code properly.

	* README.svn: Update from README.cvs for switchover.

	* src/gnome-utils/gnc-splash.c: Use a dynamically allocated string
	for the version.

2005-11-02  Derek Atkins  <derek@ihtfp.com>

	* configure.in: don't need GNUCASH_CVS anymore
	* src/gnome-utils/Makefile.am:
	  build gnc-version.h and gnc-svninfo.h.  add the
	  latter to EXTRA_DIST.  Only build svninfo if
	  $(srcdir)/.svn exists.  #define GNUCASH_SVN
	  when that directory exists (at buildtime).
	* src/gnome-utils/gnc-splash.h: use new SVN info.

2005-11-01  David Hampton  <hampton@employees.org>

	* All: Collapse the gnome2 branch back into HEAD.

-=-=-=- cvs gnome2 branch ChangeLog is below this line -=-=-=-

2005-11-01  Karl Hegbloom  <hegbloom@pdx.edu>

        * src/backend/postgres/upgrade.c:
        * src/backend/postgres/price.c: Use glib
        * src/backend/postgres/base-autogen.c:
        * src/backend/postgres/kvp-sql.c: Use glib macros for type
	conversions to suppress compiler warnings on amd64.

        * src/backend/postgres/putil.h: Cast fun to long long int to
	suppress compiler warning on amd64.

2005-10-31  David Hampton  <hampton@employees.org>

	* macros/autogen.sh: Remove obsolete warning about gettext.

	* various: Final sync from HEAD to the gnucash-gnome2-dev branch.

2005-10-30  Joshua Sled  <jsled@asynchronous.org>

	* GNOME2_STATUS: Updates
	* src/gnome-utils/gnc-dense-cal.c (gnc_dense_cal_button_press):
	Better transient-window positioning.
	* src/gnome/schemas/apps_gnucash_dialog_scheduled_transctions.schemas:
	* src/gnome/dialog-scheduledxaction.[ch]: 
	* src/gnome/dialog-sx-from-trans.c: 
	Rename "notify-days" to "remind-days", as it should have been in
	the first place.  Fix conditional-option logic in preferences.
	* src/gnome/glade/sched-xact.glade (SX Preferences):
	Re-layout to visually and semantically mirror SX editor; rename
	"notify-days" to "remind-days"
	* src/gnome/glade/sched-xact.glade (Scheduled Transaction Editor):
	Reformat {create,remind}-days-in-advance checkbox + spinbutton
	pairs to respect UI semantic of gtk2.0 checkboxes (since the whole
	label is selectable, we can't embed a control in the label lest it
	can never be used).

2005-10-30  David Hampton  <hampton@employees.org>

	* src/backend/file/gnc-pricedb-xml-v2.c:
	* src/engine/Period.c:
	* src/engine/gnc-pricedb-p.h:
	* src/engine/gnc-pricedb.[ch]: Slightly modified version of
	Herbert Toma's fix to reduce load time with a large database of
	stock prices.

2005-10-30  Joshua Sled  <jsled@asynchronous.org>

	Patches from Scott Oonk <scott.oonk@gmail.com>:
	* src/register/register-gnome/combocell-gnome.c:
	* src/register/register-gnome/gnucash-item-list.c:
	Remove sort-state flag, code.
	* src/register/register-gnome/gnucash-item-list.c
	(gnc_item_list_show_selected): scroll to selected position.
	* src/register/register-gnome/combocell-gnome.c
	(gnc_combo_cell_autopop_init): auto-raise popups when initialized.
	* src/register/register-gnome/gnucash-item-list.c:
	Change signal emission so initial-combobox-display, keyboard
	arrows/return and selection work correctly.
	* GNOME2_STATUS: Remove items as per fixes.  Yay! :)

2005-10-28  David Hampton  <hampton@employees.org>

	* src/backend/file/gnc-pricedb-xml-v2.c:
	* src/backend/file/gnc-transaction-xml-v2.c:
	* src/backend/file/io-gncxml-v1.c:
	* src/backend/file/sixtp-dom-parsers.[ch]:
	* src/backend/file/test/test-dom-converters1.c:
	* src/business/business-core/file/gnc-entry-xml-v2.c:
	* src/business/business-core/file/gnc-invoice-xml-v2.c:
	* src/business/business-core/file/gnc-order-xml-v2.c: Print a
	better error when an invalid timestamp is in a data file.

2005-10-27  David Hampton  <hampton@employees.org>

	* src/engine/gnc-budget-book-p.h:
	* src/engine/gnc-budget-book.[ch]:
	* src/engine/gnc-budget-cat-p.h:
	* src/engine/gnc-budget-cat.[ch]:
	* src/engine/gnc-budget-p.h:
	* src/engine/gnc-budget-period-p.h:
	* src/engine/gnc-budget-period-value-p.h:
	* src/engine/gnc-budget-period-value.[ch]:
	* src/engine/gnc-budget-period.[ch]:
	* src/gnome/dialog-budget-category.[ch]:
	* src/gnome/dialog-budget-list.[ch]:
	* src/gnome/dialog-budget-workbench.[ch]:
	* src/gnome/druid-budget-create.[ch]:
	* src/gnome/gnc-budget-gui.h:
	* src/gnome-utils/gnc-budget-list-tree-model.[ch]:
	* src/gnome-utils/gnc-budget-tree-model.[ch]: Remove files from
	old budgeting code that are no longer used.

	* src/app-utils/app-utils.scm:
	* src/app-utils/options.scm:
	* src/backend/file/Makefile.am:
	* src/backend/file/gnc-xml.h:
	* src/backend/file/io-gncxml-v2.[ch]:
	* src/backend/file/sixtp-dom-generators.[ch]:
	* src/backend/file/sixtp-dom-parsers.[ch]:
	* src/backend/file/sixtp-utils.c:
	* src/backend/file/test/Makefile.am:
	* src/engine/Makefile.am:
	* src/engine/cashobjects.c:
	* src/engine/gnc-budget.[ch]:
	* src/engine/gnc-engine.[ch]:
	* src/engine/gw-engine-spec.scm:
	* src/gnome/Makefile.am:
	* src/gnome/gnc-plugin-basic-commands.c:
	* src/gnome/top-level.c:
	* src/gnome/glade/budget.glade:
	* src/gnome/ui/Makefile.am:
	* src/gnome/ui/gnc-plugin-basic-commands-ui.xml:
	* src/gnome-utils/Makefile.am:
	* src/gnome-utils/dialog-options.c:
	* src/gnome-utils/gnc-html.[ch]:
	* src/gnome-utils/gnc-icons.h:
	* src/gnome-utils/test/Makefile.am:
	* src/report/report-system/html-utilities.scm:
	* src/report/report-system/report-system.scm:
	* src/report/standard-reports/Makefile.am:
	* src/report/standard-reports/standard-reports.scm: Files that are
	changed somewhat with the addition of Chris Shoemaker's budgeting
	functionality rewrite.  A changed include file here, a single
	function there, etc. etc.

	* src/backend/file/gnc-budget-xml-v2.c:
	* src/backend/file/gnc-recurrence-xml-v2.c:
	* src/gnome/gnc-plugin-budget.[ch]:
	* src/gnome/gnc-plugin-page-budget.[ch]:
	* src/gnome/gncmod-budget.c:
	* src/gnome/ui/gnc-plugin-budget-ui.xml:
	* src/gnome/ui/gnc-plugin-page-budget-ui.xml:
	* src/gnome-utils/gnc-dialog.[ch]:
	* src/gnome-utils/gnc-recurrence.[ch]:
	* src/gnome-utils/gnc-tree-model-budget.[ch]:
	* src/gnome-utils/test/test-gnc-dialog.c:
	* src/gnome-utils/test/test-gnc-recurrence.c:
	* src/report/standard-reports/budget.scm: New files for Chris
	Shoemaker's rewrite of budgeting functionality.
	
	* src/business/business-gnome/glade/businessprefs.glade:
	* src/gnome/glade/sched-xact.glade:
	* src/gnome-utils/dialog-preferences.c:
	* src/gnome-utils/preferences.glade:
	* src/import-export/generic-import.glade:
	* src/import-export/hbci/glade/hbciprefs.glade: Fix items from
	Volker Englisch's review of the preferences dialog.

	* configure.in: Temporarily revert to the old-school way of
	defining the PACKAGE variable.

	* macros/autogen.sh: Tweak so that autoconf still gets run.

2005-10-26  Christian Stimming  <stimming@tuhh.de>

	* configure.in: Compose the version string again from several
	shell variables. Makes life much easier for anyone, including
	potential automated tarball builds. Slight updates in the build
	system.

2005-10-26  David Hampton  <hampton@employees.org>

	* src/scm/main.scm: Update previous version to 1.8.12.

	* lib/goffice/cut-n-paste/pcre/pcre.c:
	* src/gnome-utils/gnc-date-edit.c: Add extra initialization to fix
	compilation errors on some gcc4 systems.

	* src/bin/update-gnucash-gconf.in:
	* src/gnome-utils/druid-gconf-setup.c:
	* src/gnome-utils/druid-gconf-setup.glade: Fix items from Volker
	Englisch's review of the setup druid.  The initial window now sets
	the "Setup" button as the default button.  Update the druid to fix
	problems with the tab focus.  Add some clarifying text on how to
	restart gconf.  Update the script to restart gconf for the user.

2005-10-25  David Hampton  <hampton@employees.org>

	* src/business/business-gnome/gnc-plugin-business.c:
	* src/gnome/dialog-chart-export.c:
	* src/gnome-utils/gnc-file.[ch]:
	* src/import-export/log-replay/gnc-log-replay.c:
	* src/import-export/mt940/gnc-mt940-import.c:
	* src/import-export/ofx/gnc-ofx-import.c:
	* src/import-export/qif-import/druid-qif-import.c:
	* src/report/report-gnome/gnc-plugin-page-report.c: Update file
	selection boxes to use a GtkFileChooserDialog.  Reinstate file
	filtering in the dialog.  Patch from Arnout 'raboof' Engelen
	<gnomebugzilla at bzzt.net>.  #116205

2005-10-24  David Hampton  <hampton@employees.org>

	* src/engine/Makefile.am:
	* src/engine/Recurrence.[ch]:
	* src/engine/test/Makefile.am:
	* src/engine/test/test-recurrence.c: Chris Shoemaker's patch to
	add a "Recurrence" data type to the engine.  This should
	eventually subsume the FreqSpec data type.

	* src/business/business-gnome/gnc-plugin-page-invoice.c:
	* src/business/business-gnome/ui/gnc-plugin-page-invoice-ui.xml:
	* src/gnome/dialog-scheduledxaction.c:
	* src/gnome/dialog-sxsincelast.c:
	* src/gnome/gnc-plugin-page-account-tree.c:
	* src/gnome/gnc-plugin-page-register.[ch]:
	* src/gnome/ui/gnc-plugin-page-account-tree-ui.xml:
	* src/gnome/ui/gnc-plugin-page-register-ui.xml:
	* src/gnome-utils/gnc-main-window.[ch]:
	* src/gnome-utils/gnc-plugin-page.[ch]:
	* src/gnome-utils/ui/gnc-main-window-ui.xml:
	* src/report/report-gnome/gnc-plugin-page-report-ui.xml:
	* src/report/report-gnome/gnc-plugin-page-report.c: Factor out
	common code for handling menus, popup menus, and the toolbar and
	move the code to the shared base class.  Rework the private data
	structure in gnc-plugin-page.c.

2005-10-23  David Hampton  <hampton@employees.org>

	* Makefile.TAGS:
	* Makefile.am: Chris Shoemaker's enhancements to tags generation.

	* src/gnome-utils/dialog-options.c: Disable the "OK" and "Apply"
	buttons before calling the apply function.  Makes the UI appear
	more responsive and prevents a crash if the user clicks Apply then
	OK quickly. (#319546) Patch from Arnout 'raboof' Engelen
	<gnomebugzilla at bzzt.net>.
	
	* src/register/register-gnome/gnucash-sheet.c: Patch from Scott
	Oonk to re-enable mouse scrolling in the account register.

	* src/gnome-utils/dialog-options.c: Patch from Scott Oonk to fix
	an invalid cast warning when selecting an account in the accounts
	tab of the options dialog.
	
2005-10-21  Neil Williams <linux@codehelp.co.uk>

	* src/engine/Makefile.am :
	* src/engine/gncla-dir.h.in : Use ${libdir} instead
	of $GNC_LIBDIR to work without opt-style-install.

2005-10-20  Neil Williams <linux@codehelp.co.uk>

	* configure.in: Allow GnuCash to use QOF externally,
	where available, otherwise use internal QOF.
	* src/app-utils/gnc-ui-util.c : Didier Vital's patch to
	solve pango warnings with non UTF-8 locales.
	
	Replace private headers with new API functions.
	* src/backend/postgres/PostgresBackend.h : 
	* src/backend/postgres/account.c : 
	* src/backend/postgres/book.c : 
	* src/backend/postgres/events.c : 
	* src/backend/postgres/gncquery.c : 
	* src/backend/postgres/price.c: 
	* src/backend/postgres/putil.h: 
	* src/backend/postgres/table.m4 : 
	* src/backend/postgres/txnmass.c : 
	* src/engine/engine-helpers.c : 
	* src/engine/qofbackend-p.h: 
	* src/engine/qofbook.c: 

	* src/engine/.cvsignore : New file.
	* src/engine/gncla-dir.h.in: 

	Maintaining backwards compatibility.
	* src/engine/gnc-engine-util.c: 
	* src/engine/gnc-engine-util.h: 

	New home for functions that do not belong in QOF.
	* src/engine/gnc-engine.c : 
	* src/engine/gnc-engine.h : 

	Conditional QOF build.
	* src/app-utils/Makefile.am:
	* src/app-utils/test/Makefile.am :
	* src/backend/Makefile.am : 
	* src/backend/file/Makefile.am: 
	* src/backend/file/test/Makefile.am: 
	* src/backend/postgres/Makefile.am : 
	* src/backend/postgres/test/Makefile.am  : 
	* src/business/business-core/Makefile.am : 
	* src/business/business-core/file/Makefile.am : 
	* src/business/business-core/test/Makefile.am : 
	* src/business/business-gnome/Makefile.am : 
	* src/business/business-ledger/Makefile.am : 
	* src/business/business-utils/Makefile.am : 
	* src/business/dialog-tax-table/Makefile.am: 
	* src/calculation/Makefile.am : 
	* src/calculation/expression_parser.c : 
	* src/calculation/test/Makefile.am : 
	* src/engine/Makefile.am : 
	* src/engine/test-core/Makefile.am : 
	* src/engine/test/Makefile.am : 
	* src/engine/test/test-book-merge.c: 
	* src/gnome-search/Makefile.am: 
	* src/gnome-utils/Makefile.am : 
	* src/gnome/Makefile.am : 
	* src/import-export/Makefile.am : 
	* src/import-export/binary-import/Makefile.am : 
	* src/import-export/log-replay/Makefile.am : 
	* src/import-export/qif-import/Makefile.am : 
	* src/import-export/qif/Makefile.am: 
	* src/import-export/qif/test/Makefile.am : 
	* src/import-export/test/Makefile.am : 
	* src/network-utils/Makefile.am : 
	* src/register/ledger-core/Makefile.am: 
	* src/register/register-core/Makefile.am : 
	* src/register/register-gnome/Makefile.am : 
	* src/report/report-gnome/Makefile.am : 
	* src/report/stylesheets/Makefile.am : 

	* src/engine/test/test-book-merge.c: QOF sync.

2005-10-17  Derek Atkins  <derek@ihtfp.com>

	* src/bin/gnc-generate-script: revert Neils utf-8 change.
	  Gnucash should accept and use non-utf8 locales, and
	  instead use g_locale_to_utf8() to convert locale-specific
	  strings to utf8 (e.g. currency symbol).

2005-10-16  David Hampton  <hampton@employees.org>

	* configure.in: Remove debug message.

	* src/report/report-system/html-style-sheet.scm: Need to truncate
	the file on write, now that stylesheets have their own file.

2005-10-16  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/import-backend.c: Improve speed of general
	importer.

2005-10-16  Neil Williams <linux@codehelp.co.uk>

	* src/bin/generate-gnc-script: Reversing Didier Vidal's
	1.8 patch to require and use UTF-8 if not found in the X locale.

2005-10-16  Neil Williams <linux@codehelp.co.uk>

	* README.dependencies: Fix Debian listing - unstable.
	* src/business/business-core/file/gncmod-business-backend-file.c:
	Remove call to non-existent backend-file gnc-module.
	* src/engine/cashobjects.c: New objects.
	* src/engine/cashobjects.h: Unused code removed.
	* src/engine/gnc-engine.c: Initialising the backend GModules
	as part of the engine. Allow for checking if the engine is 
	initialised OK. (retain en_us spelling).
	* src/engine/gnc-engine.h: Check engine initialised.
	* src/engine/gnc-lot-p.h: Make register func return boolean
	* src/engine/gnc-lot.c: Provide a fuller object description -
	still commented out for now.

2005-10-16  Christian Stimming  <stimming@tuhh.de>

	* src/backend/file/io-gncxml-v2.c: Fix accessing a gnc_commodity
	after it has been destroyed - xaccTransSetCurrency requires the
	original currency still to exist.

	* src/import-export/import-backend.c: Woohoo! Tracked down and
	fixed a nasty double-free error when the importer reconciled
	existing transactions.

2005-10-14  David Hampton  <hampton@employees.org>

	* src/register/register-gnome/gnucash-item-edit.c: Didier Vidal's
	patch to restore horizontal scrolling in the editable cells of the
	register if the content is too wide. It also maintains the cell
	alignment when you switch to edit mode.

	* src/report/report-system/html-acct-table.scm: Patch from Chris
	Shoemaker to fix one use of price source where exchange-fn was
	needed.  Added lots of comments, clarify some explanations,
	documented some bugs.

	* configure.in: Check for libgtkhtml 3.8.  Life would be so much
	easier if the gtkhtml developers would fix stop renaming their
	pkg-config script with every release.

	* src/gnome-utils/gnc-tree-model-account-types.[ch]: File rewrite
	from Chris Shoemaker.  Adds an API for accessing a static shared
	program-wide account-type tree model for simple tree usage.  Adds
	convenience functions for mapping between the selection state of a
	treeview using the static account-type tree model and a
	account-type selection bitfield.

	* src/engine/FreqSpec.c: Line wrapping fixes from Chris Shoemaker.
	
	* src/engine/test/test-freq-spec.c: Patch from Chris Shoemaker to
	add a new negative test case.

	* src/app-utils/gnc-component-manager.c:
	* src/business/business-core/gncAddress.c:
	* src/business/business-core/gncBillTerm.c:
	* src/business/business-core/gncCustomer.c:
	* src/business/business-core/gncEmployee.c:
	* src/business/business-core/gncEntry.c:
	* src/business/business-core/gncInvoice.c:
	* src/business/business-core/gncJob.c:
	* src/business/business-core/gncOrder.c:
	* src/business/business-core/gncTaxTable.c:
	* src/business/business-core/gncVendor.c:
	* src/business/business-core/test/test-customer.c:
	* src/business/business-core/test/test-employee.c:
	* src/business/business-core/test/test-job.c:
	* src/business/business-core/test/test-vendor.c:
	* src/engine/Transaction.c:
	* src/engine/gnc-commodity.c:
	* src/engine/gnc-engine.c:
	* src/engine/gnc-pricedb.c:
	* src/engine/kvp_frame.c:
	* src/engine/qofid.c:
	* src/engine/qofquery-deserial.c:
	* src/engine/test/test-commodities.c:
	* src/gnome-utils/QuickFill.c: Patch from Chris Shoemaker to
	convert all the string cache users to use the public access
	functions.  Consolidate all the CACHE_INSERT and CACHE_REMOVE
	macros into one place.

	* src/engine/gnc-engine-util.[ch]: Patch from Chris Shoemaker to
	privatize the gnucash string cache code and force all usage
	through gnc_string_cache_{remove,insert}() functions.  This makes
	debugging various uses (and misuses) of the cache easier.

	* src/engine/qofquery-deserial.c: Patch from Chris Shoemaker to
	annotate a possible bug.

	* src/report/report-system/commodity-utilities.scm: Patch from
	Chris Shoemaker to change the collector handling of invalid
	exchange functions.  Add a warning about dangerous usage of
	gnc:exchange-if-same.

	* src/backend/postgres/PostgresBackend.c:
	* src/backend/postgres/checkpoint.c:
	* src/backend/postgres/events.c:
	* src/business/business-core/file/gnc-bill-term-xml-v2.c:
	* src/business/business-core/file/gnc-tax-table-xml-v2.c:
	* src/engine/Scrub.c:
	* src/engine/gnc-hooks.c:
	* src/import-export/import-backend.c:Patch from Chris Shoemaker to
	add the missing semicolon to the end of some trace invocations to
	make them look like normal C code.

	* src/engine/gnc-trace.h: Patch from Chris Shoemaker to swallow
	the semicolon on the end of the tracing macros.

	* GNOME2_STATUS:
	* HACKING:
	* src/app-utils/config-var.scm:
	* src/app-utils/gnc-component-manager.h:
	* src/backend/file/gnc-schedxaction-xml-v2.c:
	* src/backend/postgres/gncquery.c:
	* src/business/business-utils/business-options.scm:
	* src/doc/multicurrency-discussion.txt:
	* src/engine/Query.h:
	* src/engine/SX-book.c:
	* src/engine/SchedXaction.c:
	* src/engine/TransactionP.h:
	* src/engine/gnc-numeric.h:
	* src/engine/guid.c:
	* src/engine/qofbook.h:
	* src/engine/qofclass.c:
	* src/engine/qofclass.h:
	* src/engine/qofquery.c:
	* src/engine/qofquery.h:
	* src/engine/qofsession.c:
	* src/experimental/cgi-bin/gnc-server.c:
	* src/gnome/dialog-scheduledxaction.c:
	* src/gnome/dialog-sxsincelast.c:
	* src/gnome-utils/dialog-utils.c:
	* src/gnome-utils/gnc-amount-edit.c:
	* src/gnome-utils/gnc-amount-edit.h:
	* src/gnome-utils/gnc-date-format.c:
	* src/gnome-utils/gnc-plugin-manager.h:
	* src/gnome-utils/gnc-plugin.h:
	* src/gnome-utils/gnc-tree-model-account.c:
	* src/gnome-utils/gnc-tree-model.c:
	* src/report/report-gnome/gw-report-gnome-spec.scm:
	* src/report/report-gnome/report-gnome.scm:
	* src/report/report-system/html-document.scm:
	* src/report/report-system/html-table.scm:
	* src/report/report-system/report-utilities.scm:
	* src/report/report-system/report.scm: Patch from Chris Shoemaker
	to make various spelling corrections and a couple of line wrap
	fixes.  Adds comments to mark thread unsafe code.  Adds various
	other documentation.

	* src/doc/design/engine.texinfo: Patch from Chris Shoemaker to
	silence a texinfo warning.

2005-10-13  David Hampton  <hampton@employees.org>

	* src/app-utils/gnc-euro.c:
	* src/app-utils/gnc-ui-util.h:
	* src/gnome-utils/dialog-commodity.h:
	* src/gnome-utils/gnc-currency-edit.c: Patch from Chris Shoemaker
	to remove unneeded header files. Add a few comments.
	
	* src/backend/file/gnc-account-xml-v2.c:
	* src/engine/qofbook.c:
	* src/report/report-gnome/gnc-plugin-page-report.c: Minor code
	simplification from Chris Shoemaker.  Some line wrap fixes and
	comments.

	* src/gnc-module/gnc-module.c: Minor code factoring patch from
	Chris Shoemaker.

	* src/gnome-utils/gnc-main-window.c: Patch from Chris Shoemaker to
	avoid trying to double-add plugins to plugin manager by delaying
	signal connection until the plugins are already managed by the
	plugin manager.

	* src/gnome-utils/gnc-tree-view-account.c: Patch from Chris
	Shoemaker to convert gnc-tree-view-account to a GObject base
	instead of a GtkObject base. Also contains some line wrapping
	fixes.

2005-10-13  Derek Atkins  <derek@ihtfp.com>

	* src/lib/glib26/Makefile.am:
	  fix to properly include sources in the DIST.

	* macros/autogen.sh: Revert the change that ignores libtool.
	  we still need to check for libtool.

2005-10-13  Neil Williams <linux@codehelp.co.uk>

	* macros/autogen.sh: Mac OSX fix.
	* src/business/business-core/gncBusPeriod.c: typos.

	Removing non-portable -module setting - Mac OSX fix.
	* src/app-utils/Makefile.am:
	* src/business/business-core/Makefile.am:
	* src/business/business-gnome/Makefile.am
	* src/business/business-ledger/Makefile.am 
	* src/business/business-utils/Makefile.am
	* src/business/dialog-tax-table/Makefile.am
	* src/calculation/Makefile.am 
	* src/core-utils/Makefile.am 
	* src/engine/Makefile.am 
	* src/engine/test/Makefile.am 
	* src/gnc-module/Makefile.am 
	* src/gnc-module/test/misc-mods/Makefile.am 
	* src/gnc-module/test/mod-bar/Makefile.am 
	* src/gnc-module/test/mod-baz/Makefile.am
	* src/gnc-module/test/mod-foo/Makefile.am
	* src/gnome-search/Makefile.am 
	* src/gnome-utils/Makefile.am 
	* src/gnome/Makefile.am 
	* src/import-export/Makefile.am 
	* src/import-export/binary-import/Makefile.am
	* src/import-export/hbci/Makefile.am 
	* src/import-export/log-replay/Makefile.am 
	* src/import-export/mt940/Makefile.am 
	* src/import-export/ofx/Makefile.am 
	* src/import-export/qif-import/Makefile.am 
	* src/import-export/qif-io-core/Makefile.am 
	* src/import-export/qif/Makefile.am 
	* src/network-utils/Makefile.am 
	* src/register/ledger-core/Makefile.am 
	* src/register/register-core/Makefile.am 
	* src/register/register-gnome/Makefile.am 
	* src/register/register-gnome/test/Makefile.am 
	* src/report/locale-specific/us/Makefile.am 
	* src/report/report-gnome/Makefile.am 
	* src/report/report-gnome/window-report.c 
	* src/report/report-system/Makefile.am 
	* src/report/standard-reports/Makefile.am 
	* src/tax/us/Makefile.am: 

2005-10-13  David Hampton  <hampton@employees.org>

	* src/business/business-core/gncBusPeriod.c: Patch from Chris
	Shoemaker to prevents gettext from finding unintentional strings
	in an undeclared comment block.

2005-10-13  Neil Williams <linux@codehelp.co.uk>

	* GNOME2_STATUS: Remove qof_begin_edit note (fixed)
	Make a note of remaining pricedb issue.
	* configure.in: Fix conditional external GOffice build.
	* lib/Makefile.am: Conditional goffice.
	* po/POTFILES.in: Remove files removed from CVS.
	* src/backend/file/Makefile.am: Convert to a GModule.
	* src/backend/file/gnc-backend-file.c: Remove QSF code.
	* src/backend/file/test/.cvsignore: new file
	* src/backend/file/test/Makefile.am: Cannot link against
	the new loadable GModule, list the sources individually.
	* src/backend/file/test/test-dom-converters1.c: fix test.

	Update test data files to use G2 XML syntax.
	* src/backend/file/test/test-files/xml2/Money95bank_fr.gml2
	* src/backend/file/test/test-files/xml2/Money95invst.gml2
	* src/backend/file/test/test-files/xml2/Money95mutual.gml2
	* src/backend/file/test/test-files/xml2/Money95stocks.gml2
	* src/backend/file/test/test-files/xml2/abc.gml2
	* src/backend/file/test/test-files/xml2/abcall.gml2
	* src/backend/file/test/test-files/xml2/carols-data-file.gml2
	* src/backend/file/test/test-files/xml2/cbb-export.gml2
	* src/backend/file/test/test-files/xml2/conrads-file.gml2
	* src/backend/file/test/test-files/xml2/every.gml2
	* src/backend/file/test/test-files/xml2/goonies-file.gml2
	* src/backend/file/test/test-files/xml2/hierachical-data-file.gml2
	* src/backend/file/test/test-files/xml2/ms-money.gml2
	* src/backend/file/test/test-files/xml2/pricedb1.gml2

	* src/backend/file/test/test-load-backend.c: Test the new GModule.
	* src/backend/file/test/test-load-xml2.c: Load the new GModule and
	correct the book test. (backend/file tests can no longer use Guile)
	* src/backend/file/test/test-string-converters.c: QOF header changes
	* src/backend/file/test/test-xml-account.c: Remove guile and fix test.
	* src/backend/file/test/test-xml-pricedb.c: Fixed test. (problem was
	in test-engine-stuff.c
	* src/backend/file/test/test-xml-transaction.c: Remove guile and fix
	test.
	* src/backend/postgres/Makefile.am: Make into a GModule.
	* src/backend/postgres/PostgresBackend.c: GModule (Other changes
	will follow).
	* src/backend/postgres/PostgresBackend.h: GModule
	* src/backend/postgres/kvp-sql.c: typo
	* src/backend/postgres/test/.cvsignore: new file.
	* src/backend/postgres/test/Makefile.am: GModule changes, as with
	backend/file - no guile and no linking against the GModule.
	* src/backend/postgres/test/test-db.c: GModule and remove private 
	QOF headers.
	* src/backend/postgres/test/test-load-backend.c: GModule test.
	* src/backend/postgres/test/test-period.c: Convert to GModule.
	* src/backend/qsf/Makefile.am: GModule.
	* src/backend/qsf/qsf-backend.c: QOF Sync
	* src/backend/qsf/qsf-xml.c: QOF sync
	* src/bin/test/test-version: fix test
	* src/business/business-core/test/Makefile.am: GModule changes
	* src/engine/Account.c: qof_begin_edit change
	* src/engine/Makefile.am: qofsql.h is not a distributed header - 
	GnuCash does not yet use SQL with QOF.
	* src/engine/Period.h: Doxygen tweak.
	* src/engine/Transaction.c: qof_begin_edit changes.
	* src/engine/gnc-engine.c: Load the two default GModules.
	* src/engine/gnc-pricedb.c: Pair up the ENTER and LEAVE calls.
	* src/engine/gnc-trace.c: QOF sync.
	* src/engine/gnc-trace.h: QOF Sync
	* src/engine/qof-be-utils.h: qof_begin_edit changes.
	* src/engine/qof.h: Locate the GModules.
	* src/engine/qofbackend.c: Full use of GModule support.
	* src/engine/qofsession.c: Remove gnc-module methods for backends.
	* src/engine/test-core/test-engine-stuff.c: Splits outside
	transactions where causing some tests to fail, also errors are now
	reported back.
	* src/engine/test-core/test-engine-stuff.h: Fix declarations.
	* src/engine/test/test-split-vs-account.c: test fix.
	* src/gnome-utils/Makefile.am: GOffice conditional build.
	* src/gnome-utils/gnc-html-graph-gog.c:  GOffice conditional build.
	* src/gnome-utils/gnc-plugin.c: GOffice conditional build.
	* src/gnome/Makefile.am: GModule changes - cannot link against the
	GModule.
	* src/gnome/dialog-chart-export.c: Fix QOF headers.
	* src/import-export/qif-import/test/Makefile.am: fix test.

2005-10-13  David Hampton  <hampton@employees.org>

	* src/app-utils/gnc-ui-util.c:
	* src/backend/file/io-example-account.c:
	* src/backend/file/io-gncxml-v2.c:
	* src/engine/Account.[ch]: Patch from Chris Shoemaker to add a
	sprinkling of 'const' keywords to Account accessor function
	arguments.

	* src/valgrind-gdk.supp:
	* src/valgrind-gnucash.supp:
	* src/valgrind-x11.supp: Patch from Chris Shoemaker to add some
	additional suppressions when invoking gnucash via valgrind.

	* Makefile.TAGS: Patch from Chris Shoemaker to exclude emacs
	temporary files from etags table.

	* src/app-utils/gnc-ui-util.c:
	* src/business/business-core/gncAddress.c:
	* src/business/business-core/gncCustomer.c:
	* src/business/business-core/gncEmployee.c:
	* src/business/business-core/gncEntry.c:
	* src/business/business-core/gncJob.c:
	* src/business/business-core/gncOrder.c:
	* src/business/business-core/gncVendor.c:
	* src/engine/Account.c:
	* src/engine/Transaction.c:
	* src/register/register-gnome/gnucash-grid.c:
	* src/register/register-gnome/gnucash-sheet.c: Patch from Chris
	Shoemaker to remove the G_INLINE_FUNC macro from various function
	definitions.  Fixes undefined symbol errors preventing him from
	linking the program.

2005-10-12  David Hampton  <hampton@employees.org>

	* Makefile.am:
	* configure.in:
	* make-gnucash-potfiles.in:
	* doc/Makefile.am:
	* lib/goffice/Makefile.am:
	* lib/goffice/split/Makefile.am:
	* macros/autogen.sh:
	* po/ChangeLog:
	* src/Makefile.am:
	* src/backend/Makefile.am:
	* src/bin/Makefile.am:
	* src/business/business-core/file/Makefile.am:
	* src/business/business-gnome/Makefile.am:
	* src/business/business-gnome/schemas/Makefile.am:
	* src/doc/Makefile.am:
	* src/engine/Makefile.am:
	* src/gnome/Makefile.am:
	* src/gnome/schemas/Makefile.am:
	* src/gnome-utils/schemas/Makefile.am:
	* src/import-export/Makefile.am:
	* src/import-export/hbci/schemas/Makefile.am:
	* src/import-export/log-replay/Makefile.am:
	* src/import-export/schemas/Makefile.am:
	* src/report/stylesheets/Makefile.am: Chris Shoemaker's changes to
	make 'make dist' work again.

2005-10-12  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome-utils/gnc-html-graph-gog.c: Cleanups and finishing:
	get bar-chart data correctly hooked up; get scatter-plot hooked
	up.  Generally refactor code for clarity.

2005-10-12  David Hampton  <hampton@employees.org>

	* configure.in: Remove the stdc++ link requirement from the OFX
	test.  Add the -Wno-pointer-sign flag when using GCC4.  With this
	flag all of gnucash can be compiled with GCC4. (Without it
	lib/goffice fails.)

2005-10-10  Christian Stimming  <stimming@tuhh.de>

	* src/register/register-gnome/gnucash-grid.c: Patch by Didier
	Vidal: Implement real right justify in the register.

2005-10-09  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/hbci-interaction.c: Further gnome2
	porting of dialogs.

2005-10-08  David Hampton  <hampton@employees.org>

	* src/app-utils/Makefile.am:
	* src/app-utils/app-utils.scm:
	* src/app-utils/global-options.[ch]:
	* src/app-utils/gw-app-utils-spec.scm:
	* src/app-utils/prefs.scm:
	* src/gnome-utils/dialog-options.[ch]:
	* src/scm/main.scm: Remove unused global options code.  Global
	options are now all stored in gconf.

	* numerous: Remove include of global-options.h.

	* src/register/ledger-core/split-register-control.c:
	* src/register/ledger-core/split-register-load.c:
	* src/register/ledger-core/split-register-model.c:
	* src/register/ledger-core/split-register-util.c:
	* src/register/ledger-core/split-register.c: Remove unneeded
	include files.  Call function with their current name, not the
	backward compatibility name.

	* src/app-utils/global-options.[ch]:
	* src/app-utils/gnc-ui-util.[ch]: Migrate a couple of functions
	from one global-options to gnc-ui-utils.
	
	* src/gnome/window-reconcile.c: Track changes to user's toolbar
	style preference using the new gconf method.

	* src/core-utils/gnc-gconf-utils.h:
	* src/gnome-utils/dialog-utils.c:
	* src/gnome-utils/gnc-main-window.c: Share a couple of gconf key
	names between files.
	
	* src/register/register-gnome/table-gnome.c: Use new gconf key to
	decide whether to save the column sizings.
	
	*src/gnome/window-main-summarybar.c: Remove obsolete code for
	catching (scheme) option changes.  This file already has support
	for catching gconf option changes.

	* src/gnome/gnc-split-reg.[ch]: Split register no longer contains
	the menus/toolbar/etc support so no need to track changes to the
	toolbar settings.

	* src/backend/file/io-gncxml-v2.c: Remove unused code fragment.
	
	* src/gnome-utils/gnc-main-window.c: Don't let the window manager
	delete the last window.  Instead queue a shutdown call.

2005-10-08  Joshua Sled  <jsled@asynchronous.org>

	* src/register/ledger-core/dialog-dup-trans.c
	(gnc_dup_trans_dialog): Cleanup the window after dialog returns.
	(gnc_dup_trans_dialog_create): attach to existing signals; re-implement
	spinbutton behavior workaround.

2005-10-08  Joshua Sled  <jsled@asynchronous.org>

	* goffice.c (libgoffice_init): fully initialize so plugins get
	loaded at init-time, and thus displayed at run-time. :p
	Other goffice/html/graphing code cleanups.

2005-10-08  Joshua Sled  <jsled@asynchronous.org>

	* src/report/report-gnome/gnc-plugin-page-report.c
	(gnc_plugin_page_report_destroy_widget): remove the report when
	the page is destroyed so the report will be removed, &c. 
	(gnc_plugin_page_report_setup): gnc:report-set-needs-save?! on
	report setup to indicate that the report needs to be written out
	at book-state-save time.

2005-10-08  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/ofx/gnc-ofx-import.c: Fix errornerous
	double-free at OFX import.

2005-10-07  Joshua Sled  <jsled@asynchronous.org>

	* src/register/register-gnome/gnucash-item-list.c
	(tree_view_selection_changed): Condition handling; avoid a set of
	setfaults in use of the auto-complete.

2005-10-07  Joshua Sled  <jsled@asynchronous.org>

	Patch from Chris Shoemaker <c.shoemaker@cox.net>:
	* src/engine/Account.[ch]: Refactoring of
	account-*-balance(as-of-date) code.
	* src/engine/Account.[ch], src/engine/Group.[ch]:
	Tyop/misspelling correction, formatting cleanup, notes and
	comments.

2005-10-07  David Hampton  <hampton@employees.org>

	* src/report/report-system/html-style-sheet.scm:
	* src/scm/main.scm:
	* src/scm/path.scm: Put the saved stylesheets into their own file
	in the .gnucash directory.

	* src/app-utils/Makefile.am:
	* src/app-utils/gnc-exp-parser.c: Convert the expression parser
	over from saving persistent data as a scheme fragments to saving
	it in a glib key/value file.
	
	* src/core-utils/Makefile.am:
	* src/core-utils/gnc-gkeyfile-utils.[ch]: Add some helper
	functions for reading/writing glib key/value data structures.

	* configure.in:
	* lib/Makefile.am:
	* lib/glib26: Add glib key-value support for systems running
	glib24.

2005-10-07  Joshua Sled  <jsled@asynchronous.org>

	* src/register/register-gnome/gnucash-sheet.c
	(GTK_ALLOWED_SELECTION_WITHIN_INSERT_SIGNAL): Use
	autocompletion-selection workaround for	gtk 2.(<6).*

2005-10-07  Joshua Sled  <jsled@asynchronous.org>

	Patch from Edward J. Huff <ejhuff@huff20may77.us>:
	* src/report/standard-reports/transaction.scm: 
	* src/app-utils/date-utilities.scm: 
	* src/app-utils/app-utils.scm: 
	Add "Quarterly" option to transaction report. Add support
	functions to app-utils.scm and date-utilities.scm to support
	finding the quarter of a given date, and to format it as Q1, Q2,
	Q3, or Q4.  Fix a bug in the as-yet-unused function
	gnc:timepair-get-month-day.  Make use of the existing support
	functions instead of re-inventing them in transaction.scm.
	Move all uses of strftime from transaction.scm to
	date-utilities.scm. 

2005-10-07  David Hampton  <hampton@employees.org>

	* src/gnome-utils/dialog-options.c: Convert the multiple choice
	option from using the deprecated GtkOptionMenu widget to using a
	GtkComboBox widget.  Fix some warnings when using a currency
	option.  Make the account list option expand to fill available
	space.

	* src/app-utils/option-util.c: Correctly convert a scheme string
	to a C string.

	* src/gnome-utils/dialog-options.c:
	* src/gnome-utils/dialog-preferences.c:
	* src/gnome-utils/preferences.glade: Rename preference dialog
	windows.
	
2005-10-06  David Hampton  <hampton@employees.org>

	* src/gnome-utils/gnc-main-window.c: Make the gtk notebook pages
	scrollable, and enable right-click menu selection of pages.

	* configure.in:
	* graph/plugins/plot_radar/gog-radar.c: Conditionally compile the
	fmin() function.

2005-10-06  Joshua Sled  <jsled@asynchronous.org>

	Patch from Didier Vidal <didier-devel@9online.fr>:
	* src/register/register-gnome/gnucash-sheet.c
	(compute_optimal_width): Fix to allow register resize.

2005-10-03  David Hampton  <hampton@employees.org>

	* src/gnome/top-level.c: Remove duplicate function.

	* src/gnome-utils/dialog-utils.[ch]: Pull the local
	gtk_window_present() function and use the one in gtk2.

2005-10-02  David Hampton  <hampton@employees.org>

	* src/import-export/import-backend.c:
	* src/import-export/import-settings.c:
	* src/import-export/schemas/apps_gnucash_import_generic_matcher.schemas:
	Add the 'bayesian matching' preference that was hidden in the
	code.

	* src/import-export/generic-import.glade: Forgot to name the
	widgets properly so that the preferences dialog would time them in
	with their gconf settings.  Add the 'bayesian matching'
	preference.

	* src/app-utils/prefs.scm: Remove unreferenced "Fancy Date Format"
	option.

	* src/app-utils/prefs.scm:
	* src/gnome/Makefile.am:
	* src/gnome/gnc-network.[ch]:
	* src/gnome/top-level.c:
	* src/gnome-utils/gnc-html.[ch]:
	* src/gnome-utils/gw-gnome-utils-spec.scm: Finish pulling all
	references to the old "gnucash network" code.

	* src/engine/Transaction.c: Temporary fix to remove ISO C90
	warning.  Real fix should occur when converted back to
	qof_begin_edit function.

2005-10-02  Joshua Sled  <jsled@asynchronous.org>

	Patches from Didier Vidal <didier-devel@9online.fr>:
	
	* src/register/register-gnome/gnucash-item-edit.c: Fixes to show
	pango cursor in register edit cells.
	* src/engine/Transaction.c (xaccTransBeginEdit): runtime crash
	when committing partially-editing transaction.
	

2005-10-02  Joshua Sled  <jsled@asynchronous.org>

	* GNOME2_STATUS: updates for status

	* src/register/register-gnome/gnucash-item-list.c
	(gnc_item_list_select): re-implement to get register combocells
	working better.

2005-10-02  David Hampton  <hampton@employees.org>

	* src/app-utils/prefs.scm:
	* src/gnome/window-main-summarybar.c:
	* src/gnome/schemas/Makefile.am:
	* src/gnome/schemas/apps_gnucash_window_pages_account_tree.schemas:
	* src/gnome-utils/gnc-main-window.c:
	* src/gnome-utils/preferences.glade:
	* src/gnome-utils/ui/gnc-main-window-ui.xml: Convert the account
	tree summary bar over to using GConf preferences.

	* src/gnome-utils/dialog-preferences.[ch]: Add support for a
	GncDateEdit widget and the new GncPeriodSelect widget.

	* src/app-utils/Makefile.am:
	* src/app-utils/gnc-accounting-period.[ch]:
	* src/gnome-utils/Makefile.am:
	* src/gnome-utils/gnc-period-select.[ch]: Add a selection widget
	and non-gui supporting functions for choosing accounting periods.

	* src/engine/Account.c: Revert change to xaccAccountCommitEdit()
	that causes gnucash to crash at exit.
	
2005-10-01  David Hampton  <hampton@employees.org>

	* src/backend/postgres/*:
	* src/engine/gnc-trace.h:
	* src/gnome-utils/gnc-html-graph-gog.c:
	* src/gnome-utils/gnc-plugin.c:
	* src/import-export/hbci/gnc-plugin-hbci.c: Fix compilation
	breakage.

2005-10-01  Neil Williams <linux@codehelp.co.uk>

	* configure.in: Detect GCC 4.0 or later and add
	-Wdeclaration-after-statement
	* src/backend/file/gnc-backend-file.c: CashUtil sync.
	remove ifdefs, move one declaration (spotted using the
	change in configure.in) and remove reference to XML file.
	* src/backend/qsf/qsf-backend.c: Add QofBackendOption 
	to compress QSF files via libxml2. Also fix QSF XML output
	to always specify UTF-8.
	* src/business/business-core/gncAddress.c: Fix ability to
	cast from QofEntity to gncAddress and vice-versa.
	* src/engine/Account.c: Fix test-lots and test-period,
	trace subsystem changes and qof.h fixes.
	* src/engine/Period.c: Fix test-period, include
	trace subsystem changes and qof.h fixes.
	* src/engine/cap-gains.c: Fix curious translation bug
	from cashutil. Fix trace subsystem changes and qof.h
	* src/engine/cashobjects.c: Cashutil sync.
	* src/engine/gnc-engine.c: Initialise the new trace
	subsystem on startup, shutdown logging cleanly and
	fix qof.h headers.
	* src/engine/gnc-engine.h: The new QofLogModule
	identifiers for core modules. Others can be added
	ad-hoc throughout the source tree and set to be
	logged locally.
	* src/engine/gnc-pricedb.c: Use public API calls
	to remove private headers and use new trace 
	subsystem.
	* src/engine/gnc-trace.h
	* src/engine/gnc-trace.c: New trace subsystem based
	on string identifiers and accessible to all QOF
	applications.
	* src/engine/qofbook.h
	* src/engine/qofbook.c: New trace subsystem, qof.h
	fixes and test-period fixes. Balance ENTER and LEAVE
	in log output.
	* src/engine/qofquery.c: Balance ENTER and LEAVE.
	* src/engine/qofsession.c: Balance ENTER and LEAVE
	and new trace subsystem changes.
	* src/engine/test/Makefile.am
	* src/engine/test-core/test-engine-stuff.c: Fix
	int-out-of-range error.
	* src/engine/test/test-freq-spec.c: Provide feedback
	on test progress.
	* src/engine/test/test-lots.c: Fix segmentation fault.
	* src/engine/test/test-period.c: Fix segmentation 
	fault, fix headers and cashutil sync (remove guile).
	

	Remove guile - cashutil sync.
	* src/engine/test/test-group-vs-book.c
	* src/engine/test/test-guid.c
	* src/engine/test/test-load-engine.c
	* src/engine/test/test-object.c
	* src/engine/test/test-query.c
	* src/engine/test/test-querynew.c
	* src/engine/test/test-resolve-file-path.c
	* src/engine/test/test-split-vs-account.c
	

2005-10-01  Neil Williams <linux@codehelp.co.uk>

	Remove references to internal QOF headers and replace 
	with qof.h
	* src/app-utils/gnc-helpers.c
	* src/backend/file/gnc-freqspec-xml-v2.c
	* src/backend/file/gnc-transaction-xml-v2.c
	* src/backend/file/io-utils.c
	* src/backend/file/test/test-dom-converters1.c
	* src/backend/file/test/test-file-stuff.c
	* src/backend/file/test/test-load-example-account.c
	* src/business/business-core/gncAddressP.h
	* src/business/business-core/gncBillTerm.h
	* src/business/business-core/gncBillTermP.h
	* src/business/business-core/gncCustomer.h
	* src/business/business-core/gncCustomerP.h
	* src/business/business-core/gncEmployee.h
	* src/business/business-core/gncEntry.h
	* src/business/business-core/gncEntryP.h
	* src/business/business-core/gncInvoice.h
	* src/business/business-core/gncInvoiceP.h
	* src/business/business-core/gncJob.h
	* src/business/business-core/gncJobP.h
	* src/business/business-core/gncOrder.h
	* src/business/business-core/gncOrderP.h
	* src/business/business-core/gncOwner.c
	* src/business/business-core/gncOwner.h
	* src/business/business-core/gncOwnerP.h
	* src/business/business-core/gncTaxTable.h
	* src/business/business-core/gncTaxTableP.h
	* src/business/business-core/gncVendor.h
	* src/business/business-core/gncVendorP.h
	* src/business/business-core/test/test-address.c
	* src/business/business-core/test/test-business.c
	* src/business/business-core/test/test-employee.c
	* src/business/business-core/test/test-job.c
	* src/business/business-core/test/test-vendor.c
	* src/engine/Account.h
	* src/engine/AccountP.h
	* src/engine/FreqSpec.h
	* src/engine/FreqSpecP.h
	* src/engine/Group.h
	* src/engine/GroupP.h
	* src/engine/Query.h
	* src/engine/SX-book.h
	* src/engine/SX-ttinfo.h
	* src/engine/SchedXaction.h
	* src/engine/SchedXactionP.h
	* src/engine/TransLog.c
	* src/engine/gnc-lot-p.h
	* src/engine/gnc-lot.h
	* src/engine/gnc-pricedb-p.h
	* src/engine/test/test-numeric.c
	* src/engine/test/test-transaction-reversal.c
	* src/engine/test/test-transaction-voiding.c
	* src/gnome-utils/gnc-dense-cal.c
	* src/gnome-utils/search-param.c
	* src/register/register-gnome/gnucash-item-list.c
	* src/register/register-gnome/gnucash-style.c

	Change from short int module to QofLogModule log_module
	and use new log_module identifiers.
	* Various.

	Adjust QOF internal headers to fix qof.h.
	* src/backend/qsf/qsf-xml-map.c
	* src/engine/gnc-engine-util.h
	* src/engine/gnc-engine-util.c
	* src/engine/qof-be-utils.h
	* src/engine/qof.h
	* src/engine/qof_book_merge.c:
	
	QOF default trace modules.
	* src/engine/kvp_frame.h
	* src/engine/qof_book_merge.h
	* src/engine/qofbackend.h
	* src/engine/qofclass.h
	* src/engine/qofid.h
	* src/engine/qofobject.h
	* src/engine/qofquery.h
	* src/engine/qofsession.h
	

2005-10-01  Neil Williams <linux@codehelp.co.uk>

	Doxygen tweaks
	* src/backend/file/gnc-backend-file.h
	* src/business/business-core/gncAddress.h
	* src/engine/Period.h
	* src/engine/qofbackend-p.h

2005-10-01  David Hampton  <hampton@employees.org>

	* src/gnome-utils/QuickFill.c: Improve quickfill behavior when
	presenting accented characters.  Patch from Didier Vidal
	<didier-devel@9online.fr>.

2005-09-29  David Hampton  <hampton@employees.org>

	* various: Fix a bunch of warnings generated by doxygen.

2005-09-26  David Hampton  <hampton@employees.org>

	* src/gnome-utils/gnc-plugin-page.c: Use the right data structure
	offsets when defining signals.

	* src/app-utils/gnc-helpers.[ch]:
	* src/core-utils/Makefile.am:
	* src/core-utils/gnc-gdate-utils.[ch]:
	* src/engine/gnc-date.[ch]:
	* src/gnome/druid-acct-period.c:
	* src/gnome/druid-loan.c: Collect gdate related functions into a
	common file.  Add a bunch of gdate modification functions.

2005-09-25  David Hampton  <hampton@employees.org>

	* src/app-utils/global-options.c:
	* src/core-utils/gnc-gconf-utils.c:
	* src/gnome-utils/dialog-preferences.c:
	* src/gnome-utils/dialog-utils.c: Add some extra checks for null
	strings.

2005-09-24  David Hampton  <hampton@employees.org>

	* src/report/standard-reports/register.scm: Update commented out
	code to reflect the use of gconf.
	
	* src/app-utils/prefs.scm: Remove unused options.

	* src/app-utils/global-options.c:
	* src/app-utils/prefs.scm:
	* src/gnome/schemas/apps_gnucash_general.schemas:
	* src/gnome-utils/dialog-preferences.c:
	* src/gnome-utils/preferences.glade: Convert the default currency
	preferences over to gconf.

	* src/app-utils/prefs.scm:
	* src/core-utils/gnc-gconf-utils.h:
	* src/gnome/top-level.c:
	* src/gnome/schemas/apps_gnucash_general.schemas:
	* src/gnome-utils/dialog-options.c:
	* src/gnome-utils/dialog-preferences.c:
	* src/gnome-utils/preferences.glade: Convert the date and time
	preferences (except 'fancy date') over to gconf.

2005-09-21  David Hampton  <hampton@employees.org>

	* src/gnome-utils/dialog-options.c: Remove remnants of the old
	"Advanced Preferences" page.
	
	* src/app-utils/prefs.scm:
	* src/gnome/schemas/apps_gnucash_dialog_common.schemas:
	* src/gnome-search/dialog-search.c:
	* src/gnome-utils/preferences.glade: Convert the "search limit"
	preference over to gconf.

	* src/gnome-utils/dialog-transfer.c: Fix warning message when
	opening reconciliation window.
	
	* src/gnome-utils/transfer.glade: Fix crash when clicking the "no
	automatic transfer" button in the automatic interest transfer
	dialog.

	* doc/What_is_Euro_support:
	* src/app-utils/prefs.scm:
	* src/core-utils/gnc-gconf-utils.h:
	* src/gnome/gnc-plugin-page-account-tree.c:
	* src/gnome/gnc-split-reg.c:
	* src/gnome/schemas/apps_gnucash_general.schemas:
	* src/gnome-utils/preferences.glade:
	Convert the "EURO support" preference over to gconf.

	* src/app-utils/prefs.scm:
	* src/gnome/reconcile-list.c:
	* src/gnome/reconcile-list.h:
	* src/gnome/window-reconcile.c:
	* src/gnome/schemas/Makefile.am:
	* src/gnome/schemas/apps_gnucash_dialog_reconcile.schemas:
	* src/gnome-utils/preferences.glade:
	Convert the reconcile window preferences over to gconf.

	* configure.in:
	* src/app-utils/prefs.scm:
	* src/import-export/Makefile.am:
	* src/import-export/generic-import.glade:
	* src/import-export/generic-import.scm:
	* src/import-export/gncmod-generic-import.c:
	* src/import-export/import-settings.c:
	* src/import-export/qif-import/druid-qif-import.c:
	* src/import-export/qif-import/gnc-plugin-qif-import.c:
	* src/import-export/qif-import/qif.glade:
	* src/import-export/schemas/.cvsignore:
	* src/import-export/schemas/Makefile.am:
	* src/import-export/schemas/apps_gnucash_import_generic_matcher.schemas:
	Migrate QIF and 'Generic Matcher' preferences over to gconf.

	* src/import-export/qif-import/qif.glade: Remove non-standard
	background color declarations.
	
	* src/gnome-utils/dialog-preferences.c: Do a better job spacing
	preferences pages that are merged together.

	* src/import-export/qif-import/druid-qif-import.c: Remove
	double-free of memory.  Remove access of GDK window data
	structure.

2005-09-17  David Hampton  <hampton@employees.org>

	* src/gnome/dialog-price-editor.c:
	* src/gnome-utils/gnc-currency-edit.[ch]: Convert from the
	deprecated GtkCombo widget to a GtkComboBox widget.  Add some
	documentation.

2005-09-16  David Hampton  <hampton@employees.org>

	* src/gnome/gnc-plugin-page-account-tree.c:
	* src/gnome/gnc-plugin-page-register.c:
	* src/gnome/ui/gnc-plugin-page-account-tree-ui.xml:
	* src/gnome/ui/gnc-plugin-page-register-ui.xml:
	* src/gnome-utils/gnc-main-window.c:
	* src/gnome-utils/ui/gnc-main-window-ui.xml: Move the "Check &
	Repair" menu definition to a common location.  Restore the
	register window "Check & Repair" menu items.

	* src/app-utils/prefs.scm:
	* src/gnome/schemas/apps_gnucash_dialog_common.schemas: Finish
	conversion of the hidden "first startup" preference.

	* src/gnome-utils/gnc-file.c:
	* src/gnome-utils/gnc-plugin-file-history.c:
	* src/gnome-utils/gw-gnome-utils-spec.scm: Clean up handling of
	the return value from gnc_history_get_last().
	
	* src/core-utils/gnc-gconf-utils.c: Handle this undocumented case
	where gconf_client_set_string() can return FALSE without setting
	the error variable.  Also modify this function to return NULL if
	gconf returns an empty string.  This is more in line with what all
	the rest of GnuCash code expects.  Centralize error handling in
	this file.

2005-09-14  David Hampton  <hampton@employees.org>

	* src/engine/gnc-date.[ch]: Fix function name.  Document
	functions.

	* src/gnome-utils/gnc-date-format.[ch]:
	* src/gnome-utils/gnc-date-format.glade: Use a GtkComboBox in
	place of the deprecated GtkOptionMenu.  Add a choice in the combo
	box for the UTC time format to match the new addition to the
	QofDateFormat enum.  Clean up the code slightly.

2005-09-10  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/dialog-hbcitrans.[hc]: Add support for
	"internal bank transfers" as supported by latest aqbanking. If
	aqbanking >= 1.6.1 is available, it will automatically be compiled
	in, otherwise ifdef'd out.

2005-09-08  David Hampton  <hampton@employees.org>

	* lib/libc/Makefile.am:
	* lib/libc/setenv.[ch]:
	* src/core-utils/Makefile.am:
	* src/core-utils/core-utils.[ch]: Move the gnucash
	gnc_setenv/gnc_unsetenv functions to the library directory and
	rename them to setenv/unsetenv.  These functions are only compiled
	if not provided by the system libc library.

	* configure.in: Enforce check for one of setenv() or putenv()
	during configure, not compilation.

	* src/backend/file/sixtp-utils.c:
	* src/backend/file/test/Makefile.am:
	* src/backend/file/test/test-save-in-lang.c:
	* src/core-utils/gw-core-utils-spec.scm:
	* src/gnc-module/Makefile.am:
	* src/gnc-module/gnc-module.c: Cleanup for the rename of
	setenv/unsetenv.

2005-09-05  Derek Atkins  <derek@ihtfp.com>

	* src/backend/file/sixtp-utils.c:  Revert change.. Make sure
	  we still use gnc_setenv and gnc_unsetenv.
	
2005-09-04  Derek Atkins  <derek@ihtfp.com>

	* src/backend/qsf/qsf-backend.c: more a declaration to the top
	  of a function because ISO C90 forbids mixed declarations.
	* src/backend/file/gnc-backend-file.c: comment out unused function.

2005-09-04  Neil Williams <linux@codehelp.co.uk>

	* src/backend/file/gnc-backend-file.c: Backend Configuration handler,
	handling binary file type and adding gettext support.
	* src/backend/file/gnc-backend-file.h: Provider init.
	* src/backend/file/io-gncbin-r.c: Binary file determination.
	* src/backend/file/io-gncbin.h: Binary file determination and Doxygen.
	* src/backend/file/io-gncxml-v2.h: Doxygen
	* src/backend/file/io-gncxml.h: Doxygen.
	* src/backend/file/sixtp-utils.c: CashUtil sync.
	* src/backend/qsf/Makefile.am: Gettext support.
	* src/backend/qsf/qsf-backend.c: Backend configuration, handling new
	files and gettext support.
	* src/backend/qsf/qsf-dir.h.in: Licence fix.
	* src/backend/qsf/qsf-xml.c: Validation fix.
	* src/backend/qsf/qsf-xml.h: Gettext support.
	* src/business/business-core/file/gnc-customer-xml-v2.c:
	* src/business/business-core/file/gnc-employee-xml-v2.c:
	* src/business/business-core/file/gnc-job-xml-v2.c:
	* src/business/business-core/file/gnc-order-xml-v2.c:
	* src/business/business-core/file/gnc-tax-table-xml-v2.c:
	Overdue removal of bad casts.
	* src/engine/cashobjects.c: Extra objects for libcashobjects.la
	* src/engine/gnc-date.c: Resolving query on previous bug fix.
	* src/engine/gnc-event.h: Adding to Doxygen.
	* src/engine/qof-be-utils.h: Adding to Doxygen.
	* src/engine/qof.h: Doxygen handling.
	* src/engine/qof_book_merge.h: Doxygen handling.
	* src/engine/qofbackend-p.h: Move check type into
	QofBackendProvider.
	* src/engine/qofbackend.c: Backend configuration.
	* src/engine/qofbackend.h: Doxygen.
	* src/engine/qofchoice.h: Licence fix and Doxygen
	* src/engine/qofid.h: Doxygen fix.
	* src/engine/qofquery-deserial.h: Remove from Doxygen.
	* src/engine/qofquery-serialize.h: Remove from Doxygen.
	(query-serialise may be removed from QOF later.)
	* src/engine/qofsession.c: Backend discrimination.
	* src/engine/qofsession.h: check_data_type.

2005-09-02  David Hampton  <hampton@employees.org>

	* src/gnome/schemas/apps_gnucash_general.schemas:
	* src/gnome-utils/gnc-main-window.c:
	* src/gnome-utils/preferences.glade: Frederic Leroy's patch
	(#314512) to add a close box to each notebook tab.  Enhanced to
	make the tab visibility a user preference.

2005-08-29  Derek Atkins  <derek@ihtfp.com>

	* src/engine/gnc-date.c: fix bug #170444 by making sure we
	  pass a full tm to strftime()

2005-08-28  Christian Stimming  <stimming@tuhh.de>

	* macros/autogen.sh: Make build system up to date: Remove
	acinclude.m4 and remove the 3 last remaining legacy macros into
	macros/legacy_macros.m4; have ltmain.sh created by libtoolizes
	instead of having it in CVS; remove old macros/acx_pthread.m4
	which hasn't been used since 2003; remove AM_ACLOCAL_INCLUDE macro
	from configure.in because that's no longer a supported autoconf
	macro.

2005-08-27  Neil Williams <linux@codehelp.co.uk>

	* src/business/business-core/businessmod-core.c: Loading
	business objects in the same order as CashUtil to correctly
	set the choice rules.

2005-08-26  Derek Atkins  <derek@ihtfp.com>

	* src/gnome-utils/Makefile.am:  move the module back into
	  pkglibdir so that gnucash actually runs properly instead
	  of dying at runtime.

2005-08-23  Joshua Sled  <jsled@asynchronous.org>

	* src/report/report-gnome/gnc-plugin-page-report.c
	(gnc_plugin_page_report_constr_init): Since we want to pass the
	reportId in at page-construction time, appropriately define a
	gobject constructor, &c. to get the property.  As a result, the
	report page now understands which report (by id) it's actually
	for.
	* GNOME2_STATUS: update

2005-08-23  Derek Atkins  <derek@ihtfp.com>

	* lib/goffice/split/gnumeric-gconf.c: we don't need this
	  printf (and it causes the build to fail because it's
	  not defined in any included header).

2005-08-22  Josh Sled <jsled@asynchronous.org>
	* lib/goffice/: Conditionallize #warnings used as TODO tracking
	from "goffice" import.  Fix compiler warnings.  lib/goffice/
	should now build with -Werror.  As such, remove -Werror removal
	from .mk files.

2005-08-22  Neil Williams <linux@codehelp.co.uk>

	* configure.in: Provisional building of libgoffice.
	* make-gnucash-potfiles.in: Support for perl in gettext.
	* src/backend/file/gnc-backend-file.c: New backend
	configuration support using translatable XML and KVP.
	* src/backend/file/gnc-book-xml-v2.c: Avoid private headers.

	Patch to fix bug #88078 -  Incorrect namespace definition in XML file.
	* src/backend/file/io-gncxml-v2.c:
	* src/backend/file/io-gncxml-v2.h:
	* src/business/business-core/file/gnc-address-xml-v2.c:
	* src/business/business-core/file/gnc-address-xml-v2.h:
	* src/business/business-core/file/gnc-bill-term-xml-v2.c:
	* src/business/business-core/file/gnc-customer-xml-v2.c:
	* src/business/business-core/file/gnc-employee-xml-v2.c:
	* src/business/business-core/file/gnc-entry-xml-v2.c:
	* src/business/business-core/file/gnc-invoice-xml-v2.c:
	* src/business/business-core/file/gnc-job-xml-v2.c:
	* src/business/business-core/file/gnc-order-xml-v2.c:
	* src/business/business-core/file/gnc-owner-xml-v2.c:
	* src/business/business-core/file/gnc-owner-xml-v2.h:
	* src/business/business-core/file/gnc-tax-table-xml-v2.c:
	* src/business/business-core/file/gnc-vendor-xml-v2.c:
	* src/business/business-core/file/gncmod-business-backend-file.c:

	* src/backend/file/sixtp-utils.c: Avoid building core-utils functions
	in the backend - not portable to CashUtil. FIXME.
	* src/backend/qsf/qsf-backend.c: Beginning to isolate file type
	determination from the GnuCash backend to build separately.
	* src/backend/qsf/qsf-object.xsd.xml: Language tweak.
	* src/business/business-core/gncAddress.c: QOF_TYPE_CHOICE
	* src/business/business-core/gncBillTerm.c: CashUtil sync.
	* src/business/business-core/gncBillTerm.h:
	* src/business/business-core/gncCustomer.c: undo bad casts.
	* src/business/business-core/gncEmployee.c: CashUtil sync.
	* src/business/business-core/gncEmployeeP.h:
	* src/business/business-core/gncEntry.c: CashUtil sync.
	* src/business/business-core/gncEntry.h: CashUtil sync.
	* src/business/business-core/gncInvoice.c: undo bad casts
	* src/business/business-core/gncJob.c: CashUtil sync.
	* src/business/business-core/gncOrder.c: CashUtil sync.
	* src/business/business-core/gncOwner.c: undo bad casts.
	* src/business/business-core/gncTaxTable.c: CashUtil sync.
	* src/business/business-core/gncTaxTable.h: CashUtil sync.
	* src/business/business-core/gncVendor.c: CashUtil sync.

	Removal of guile code from test cases - tests pass but report
	a redundant gnucash-backend interface failure.
	* src/business/business-core/test/test-address.c:
	* src/business/business-core/test/test-customer.c:
	* src/business/business-core/test/test-employee.c:
	* src/business/business-core/test/test-job.c:
	* src/business/business-core/test/test-vendor.c:

	* src/engine/.cvsignore:
	* src/engine/FreqSpec.c: undo bad casts.
	* src/engine/Makefile.am: CashUtil sync.
	* src/engine/Transaction.c: Fix test reports.
	* src/engine/cashobjects.c: Convenience wrapper from CashUtil.
	* src/engine/cashobjects.h:
	* src/engine/gnc-engine-util.c: Convenience functions for QOF.
	* src/engine/gnc-engine-util.h:
	* src/engine/gnc-numeric.c: inline fix.
	* src/engine/kvp-util-p.h: Doxygen tweaks.
	* src/engine/kvp-util.h: Doxygen tweaks.
	* src/engine/kvp_frame.h: Doxygen tweaks.
	* src/engine/qof.h: Convenience wrapper.

	Backend configuration support and new method for dlopen(),
	DO NOT PASS *.so anymore, pass the *.la instead for
	portability reasons.
	* src/engine/qofbackend-p.h:
	* src/engine/qofbackend.c:
	* src/engine/qofbackend.h:
	* src/engine/qofbook.c: CashUtil sync.
	* src/engine/qofla-dir.h.in: New file to locate the .la files.
	* src/engine/qofsession.c: Deprecating current_session handler and
	converting QSF to pass the .la for loading.
	* src/engine/qofsession.h: Marking deprecated code.
	* src/engine/qofsql.c: CashUtil/QOF Sync where libgda can be used
	externally.
	* src/engine/test/test-commodities.c: Removing Guile.
	* src/engine/test/test-freq-spec.c: Removing Guile.
	* src/engine/test/test-numeric.c: Removing Guile.
	* src/engine/test/test-transaction-reversal.c: Removing Guile.
	* src/engine/test/test-transaction-voiding.c: Removing Guile.

2005-08-18  Derek Atkins  <derek@ihtfp.com>

	Frederic Leroy's patch to fix more %lld issues without casts.
	Fixes bug #313741.
	* src/app-utils/gnc-ui-util.c
	* src/backend/file/sixtp-dom-generators.c
	* src/backend/file/test/test-string-converters.c
	* src/backend/postgres/builder.c
	* src/backend/postgres/gncquery.c
	* src/backend/postgres/kvp-sql.c
	* src/backend/postgres/checkpoint.c
	* src/engine/kvp_frame.c
	* src/engine/test/test-numeric.c
	* src/engine/qofsql.c
	* src/engine/TransLog.c
	  all vars are gint64
	  ->replaced %lld by G_GINT64_FORMAT and removed unnecessary
	  long long int' cast

	* src/backend/file/test/test-date-converting.c
	* src/backend/file/test/test-dom-converters1.c
	* src/engine/test/test-date.c
	  %lld for casted tv_sec vars
	  ->No change

	* src/backend/postgres/putil.h
	  #define COMP_INT64(sqlname,fun,ndiffs)
	  Macro using %lld, but not used
	  ->No change, dead code

	* src/engine/gnc-numeric.c
	  use long long int for local variable instead gint64
	  ->replaced longlongint by gint64 and lld by G_GINT64_FORMAT
	  and replaced GNC_SCANF_LLD by G_GINT64_FORMAT
	  /!\ should we remove GNC_SCANF_LLD ??

	* src/engine/qofquerycore.c
	  type incoherency
	  -> replaced GNC_SCANF_LLD by G_GINT64_FORMAT

	* src/import-export/log-replay/gnc-log-replay.c
	  dead code commented
	  -> no change

	* src/engine/qofmath128.c
	  some lld used instead of llu
	  -> replacement of lld/llu along vars type
	  I didn't check but I think there is mixed (un)signed

	* src/engine/qofquery-serialize.c
	  in macro PUT_INT64 : replaced %lld by G_GINT64_FORMAT

	* lib/goffice/drawing/god-drawing-renderer-gdk.c
	  -> defined format for go_unit_t
	  silly change because lines containing %lld are commented

2005-08-17  Neil Williams <linux@codehelp.co.uk>

	*  src/import-export/hbci/hbci-interaction.c:
	Replacing an inadvertent change.

2005-08-17  Neil Williams <linux@codehelp.co.uk>

	* .cvsignore :
	* configure.in : Mac changes.
	* rpm/.cvsignore :
	* src/.cvsignore : All .cvsignore changes in this
	commit are for the Mac.
	* src/app-utils/Makefile.am : Mac build fix.
	* src/app-utils/test/Makefile.am : Mac build fix.
	* src/app-utils/test/test-exp-parser.c :  Mac build fix.
	* src/backend/.cvsignore :
	* src/backend/file/gnc-xml.h : Remove temporary fix.
	* src/backend/file/sixtp.c : Tweak
	* src/backend/file/test/.cvsignore :
	* src/backend/file/test/test-xml-pricedb.c : Improve failure
	reporting.
	* src/backend/file/test/test-xml-transaction.c : Improve
	failure reporting.

2005-08-17  Neil Williams <linux@codehelp.co.uk>

	QOF Sync.
	* src/backend/qsf/.cvsignore :
	* src/backend/qsf/Makefile.am : Tweaked
	* src/backend/qsf/pilot-qsf-GnuCashInvoice.xml : QOF_TYPE_CHOICE
	* src/backend/qsf/qof-backend-qsf.h : Tweak
	* src/backend/qsf/qsf-backend.c : QOF_TYPE_CHOICE
	* src/backend/qsf/qsf-object.xsd.xml : QOF_TYPE_CHOICE
	* src/backend/qsf/qsf-xml-map.c : map conversion, v1
	* src/backend/qsf/qsf-xml.c : Cast changes and bug fix.
	* src/backend/qsf/qsf-xml.h : KVP, COLLECT and CHOICE
	* src/business/.cvsignore :

2005-08-17  Neil Williams <linux@codehelp.co.uk>

	Business-core/file/: cast changes and removal of private headers.
	Also removed GNCBook references. CashUtil Sync.
	* src/business/business-core/.cvsignore :
	* src/business/business-core/file/.cvsignore :
	* src/business/business-core/file/gnc-bill-term-xml-v2.c :
	* src/business/business-core/file/gnc-customer-xml-v2.c :
	* src/business/business-core/file/gnc-employee-xml-v2.c :
	* src/business/business-core/file/gnc-entry-xml-v2.c :
	* src/business/business-core/file/gnc-invoice-xml-v2.c :
	* src/business/business-core/file/gnc-job-xml-v2.c :
	* src/business/business-core/file/gnc-lot-xml-v2.c :
	* src/business/business-core/file/gnc-order-xml-v2.c :
	* src/business/business-core/file/gnc-owner-xml-v2.c :
	* src/business/business-core/file/gnc-tax-table-xml-v2.c :
	* src/business/business-core/file/gnc-vendor-xml-v2.c :

2005-08-17  Neil Williams <linux@codehelp.co.uk>

	CashUtil Sync
	* src/business/business-core/gncAddress.c : Removal of private headers
	* src/business/business-core/gncBillTerm.c : Using a string as the
	QOF billterm type parameter.
	* src/business/business-core/gncBillTerm.h :
	* src/business/business-core/gncCustomer.c : Removal of private headers
	and cast fixes. Fixed printable.
	* src/business/business-core/gncEntry.c : Removal of private headers
	* src/business/business-core/gncInvoice.c : Removal of private headers
	and cast fixes. Change functions ready for a later change to use
	QOF_TYPE_CHOICE - not implemented here yet.
	* src/business/business-core/gncJob.c : Removal of private headers
	and cast fixes. Change functions ready for a later change to use
	QOF_TYPE_CHOICE - not implemented here yet.
	* src/business/business-core/gncOrder.c : Removal of private headers
	and cast fixes.
	* src/business/business-core/gncOwner.c : Removal of private headers
	and cast fixes.
	* src/business/business-core/gncTaxTable.c : Removal of private headers.
	* src/business/business-core/test/test-customer.c : Make sure customer
	object is registered before trying to use a QofObject call.
	* src/business/business-core/test/test-employee.c : Tweak
	* src/business/business-core/test/test-job.c : Tweak
	* src/business/business-core/test/test-vendor.c : Tweak
	* src/business/business-gnome/.cvsignore :
	* src/business/business-utils/.cvsignore :
	* src/doc/.cvsignore :
	* src/doc/design/.cvsignore :
	* src/doc/xml/.cvsignore :

2005-08-17  Neil Williams <linux@codehelp.co.uk>

	CashUtil Sync.
	* src/engine/.cvsignore :
	* src/engine/Account.c : Removal of private headers.
	* src/engine/FreqSpec.c : Removal of private headers
	and cast fixes.
	* src/engine/Group.c : Removal of private headers.
	* src/engine/Makefile.am : Taking qofmath128.c out of
	the include list - replace with qofmath128.h
	* src/engine/SX-book.c : Removal of private headers.
	* src/engine/SchedXaction.c : Removal of private headers.
	* src/engine/Scrub2.c : Cast fixes.
	* src/engine/Transaction.c : Removal of private headers
	and cast fixes. QOF QofSetterFunc changes to ensure the
	transaction is open before editing.
	* src/engine/gnc-commodity.c : Removal of private headers.

2005-08-17  Neil Williams <linux@codehelp.co.uk>

	QOF Sync
	* src/engine/gnc-engine-util.h : Enhanced enumas string macro
	* src/engine/gnc-event-p.h : Move gen_event into the API.
	* src/engine/gnc-event.h : gnc_engine_gen_event
	* src/engine/gnc-lot-p.h : Remove unneeded header.
	* src/engine/gnc-lot.c : Remove unneeded header.
	* src/engine/gnc-numeric.c : qofmath128 change.
	* src/engine/gnc-numeric.h : Doxygen fix.
	* src/engine/gnc-pricedb.c : Remove private headers and outline the
	areas of FileBackend / QofBackend that need modification to work with
	CashUtil.
	* src/engine/qof-be-utils.h : Begin to map the macros to functions
	to allow routines to be used when QOF is external.
	* src/engine/qof.h : qofchoice
	* src/engine/qof_book_merge.c : QOF_TYPE_CHOICE
	* src/engine/qof_book_merge.h : header tweak
	* src/engine/qofbackend-p.h : header tweak
	* src/engine/qofbackend.c : Definition of qof-be-utils functions.
	* src/engine/qofbackend.h : Move qof_book_get_backend
	* src/engine/qofbook.h : Remove qof_book_get_backend
	* src/engine/qofclass.c : Downgrade warning for CashUtil.
	* src/engine/qofclass.h : Tweak.
	* src/engine/qofgobj.c : Cast fix.
	* src/engine/qofid.h : QOF_TYPE_COLLECT & QOF_TYPE_CHOICE
	* src/engine/qofinstance.c : Dirty instance handling
	* src/engine/qofinstance.h : Dirty instance API
	* src/engine/qofobject.h : Doxygen tweak.
	* src/engine/qofquery.c : typo
	* src/engine/qofquery.h : tweak
	* src/engine/qofquerycore-p.h : QOF_TYPE_CHOICE
	* src/engine/qofquerycore.c : QOF_TYPE_CHOICE
	* src/engine/qofquerycore.h : QOF_TYPE_CHOICE
	* src/engine/qofsession-p.h : Tweak.
	* src/engine/qofsession.c : Ensure objects are open for
	editing before trying to commit data.
	* src/engine/qofsession.h : QOF_TYPE_CHOICE
	* src/engine/qofsql.c : Cast fixes.

2005-08-17  Neil Williams <linux@codehelp.co.uk>

	Mac changes.
	* src/engine/test-core/Makefile.am :
	* src/engine/test-core/test-engine-stuff.c : Improved
	failure reporting.
	* src/gnc-module/test/misc-mods/Makefile.am : The linking
	order is important for Mac OSX because of a bug in the gtkhtml
	implementation.
	* src/gnome-utils/Makefile.am :
	* src/gnome/.cvsignore :
	* src/gnome/glade/.cvsignore :
	* src/gnome/schemas/.cvsignore :
	* src/gnome/ui/.cvsignore :
	* src/test-core/Makefile.am :

2005-08-16  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/hbci-interaction.c (inputBoxCB): Aaarg,
	fix extremely stupid bug that occasionally crashes the PIN entry.

2005-08-15  David Hampton  <hampton@employees.org>

	* src/backend/file/test/test-xml-transaction.c:
	* src/business/business-core/file/gnc-bill-term-xml-v2.c:
	* src/business/business-core/file/gnc-tax-table-xml-v2.c:
	* src/engine/Account.c:
	* src/engine/Transaction.c:
	* src/engine/cap-gains.c:
	* src/engine/qof_book_merge.c:
	* src/engine/qofquery.c:
	* src/engine/qofsession.c:
	* src/gnome/dialog-budget-workbench.c:
	* src/gnome-utils/gnc-html.c:
	* src/gnome-utils/gnc-plugin-menu-additions.c: Frederic Leroy's
	update to Dan Widyono's patch to compile cleanly on 64 bit systems.

	* src/register/register-gnome/gnucash-item-edit.c: Scott Oonk's fix
	to make the cursor visible in the register.

2005-08-12  Neil Williams <linux@codehelp.co.uk>

	* src/backend/file/gnc-account-xml-v2.c: Cast fixes
	* src/backend/file/gnc-backend-file.c: Remove unnecessary headers
	and provide a duplicate backend loader suitable for QOF which will
	replace the gnc-backend module to allow CashUtil to work with the
	current XML backend and ease spin-out of QOF. The new loader is
	not executed as yet.
	* src/backend/file/gnc-backend-file.h: Put a copy of price_lookup
	and export into FileBackend ready to replace the versions currently
	retained in QOF on a conditional build.
	* src/backend/file/gnc-book-xml-v2.c: To be reviewed.
	* src/backend/file/gnc-commodity-xml-v2.c:
	* src/backend/file/gnc-pricedb-xml-v2.c:
	* src/backend/file/gnc-schedxaction-xml-v2.c:
	* src/backend/file/gnc-transaction-xml-v2.c: Cast fixes
	* src/backend/file/gnc-xml.h: Stop use of gncbook.h, GNCBook.
	* src/backend/file/io-gncbin-r.c: Unnecessary header, not available in QOF.
	* src/backend/file/io-gncxml-v1.c: Cast fixes
	* src/backend/file/io-gncxml-v2.c: Stop use of gnc- prefix, remove
	unnecessary header and cast fixes.
	* src/backend/file/sixtp-dom-generators.c:
	* src/backend/file/sixtp-dom-parsers.c:
	* src/backend/file/sixtp-to-dom-parser.c: Cast fixes
	* src/backend/file/sixtp-utils.c: Other files in this backend already use <time.h>,
	no need to provide a duplicate here.
	* src/backend/file/sixtp.c:
	* src/backend/file/test/test-dom-converters1.c:
	* src/backend/file/test/test-file-stuff.c:
	* src/backend/file/test/test-xml-account.c:
	* src/backend/file/test/test-xml-commodity.c:
	* src/backend/file/test/test-xml-transaction.c: Cast fixes
	* src/engine/Makefile.am: Add qofchoice files.
	* src/engine/qofchoice.c: QOF_TYPE_CHOICE handlers.
	* src/engine/qofchoice.h:

2005-08-02  David Hampton  <hampton@employees.org>

	* src/app-utils/prefs.scm:
	* src/gnome/dialog-scheduledxaction.[ch]:
	* src/gnome/dialog-sx-from-trans.c:
	* src/gnome/dialog-sxsincelast.[ch]:
	* src/gnome/gw-gnc-spec.scm:
	* src/gnome/top-level.c:
	* src/gnome/glade/sched-xact.glade:
	* src/gnome/schemas/apps_gnucash_dialog_scheduled_transctions.schemas:
	* src/gnome/ui/gnc-plugin-page-sxregister-ui.xml:
	* src/gnome/ui/gnc-sxed-window-ui.xml:
	* src/scm/main.scm: Convert scheduled transactions over to the new
	preferences dialog and gconf storage.  Fix register menu problems
	when in embedded windows.  Use C side hooks to set up the "since
	last run" dialog.

	* src/gnome/gnc-plugin-page-register.c: Properly set the window
	field in the gnc_split_register data structure when installing the
	page into a GncEmbeddedWindow.

	* src/core-utils/gnc-gobject-utils.c: Enhance object tracking to
	catch the deletion of an object that hasn't been removed from the
	tracking list.

	* src/gnome-utils/gnc-embedded-window.c:
	* src/gnome-utils/gnc-main-window.c:
	* src/gnome-utils/gnc-window.[ch]: Add method for retrieving the
	GtkWindow associated with a GncWindow.

	* src/gnome-utils/dialog-preferences.c:
	* src/gnome-utils/preferences.glade: Clean up xml data structures
	when the dialog is destroyed.  Connect signals in all add-in
	preference pages.  Don't show the dialog until completely built
	and moved to the remembered position.

2005-07-30  David Hampton  <hampton@employees.org>

	* Lots 'o files: Remove unnecessary includes.

	* Lots 'o files: Guile 1.6 is now required for gnucash.  Finish
	removal of all functions deprecated in that version.  Don't enable
	warnings as g-wrap 1.3 still uses some deprecated functions.

	* src/app-utils/option-util.c:
	* src/engine/engine-helpers.c:
	* src/engine/glib-helpers.c:
	* src/engine/kvp-scm.c:
	* src/gnome-utils/argv-list-converters.c:
	* src/gnome-utils/dialog-options.c:
	* src/gnome-utils/gnc-menu-extensions.c: The SCM_xxx_CHARS macros
	return pointers to internal scheme data and should be treated as
	const.  Use the compiler to enforce this restriction.

2005-07-28  David Hampton  <hampton@employees.org>

	* src/import-export/hbci/Makefile.am:
	* src/import-export/hbci/gnc-hbci-utils.c:
	* src/import-export/hbci/gncmod-hbci.c:
	* src/import-export/hbci/hbci-interaction.[ch]:
	* src/import-export/hbci/hbci.scm:
	* src/import-export/hbci/glade/Makefile.am:
	* src/import-export/hbci/glade/hbci.glade:
	* src/import-export/hbci/glade/hbcipass.glade:
	* src/import-export/hbci/glade/hbciprefs.glade:
	* src/import-export/hbci/schemas/Makefile.am:
	* src/import-export/hbci/schemas/apps_gnucash_dialog_hbci.schemas:
	Make HBCI setup work again.  Use gconf and the new preferences
	dialog for HBCI preferences.  (Would be nice if these could be
	pushed out to the dialogs where they apply.)

	* src/import-export/import-account-matcher.c: Must specify what
	columns should be visible columns after adding a new column.

	* src/gnome-utils/gnc-tree-view-account.c: Build a kvp based column properly.

	* src/import-export/hbci/glade/hbcipass.glade: Wrap the text in
	labels.

	* src/import-export/hbci/glade/hbci.glade: Run through glade-2.6
	to reset properties to the gtk-2.4 level.  The changes are mostly
	formatting though.  Content changes to follow in separate commits.

	* src/gnome-utils/preferences.glade: When selecting the toolbar
	style use the same labels as the gnome preferences dialog.  Add a
	couple of explicit mnemonic targets.

2005-07-27  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/dialog-hbcitrans.c: Eventually enable all
	HBCI actions again. Only the convenience transfer templates are
	not yet available, but all online actions work.

2005-07-26  David Hampton  <hampton@employees.org>

	* src/app-utils/prefs.scm:
	* src/gnome/druid-hierarchy.[ch]:
	* src/gnome/gw-gnc-spec.scm:
	* src/gnome/top-level.c:
	* src/gnome/schemas/apps_gnucash_dialog_common.schemas:
	* src/gnome-utils/preferences.glade:
	* src/scm/main.scm: Finish converting the "Tip of the Day" dialog
	and the New File Hierarchy druid over to storing data in gconf.

	* doc/Makefile.am: Fix problem with "tip of the day" file and opt
	style installs.

2005-07-25  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/dialog-daterange.c: Enable HBCI statement
	download again. Works fully now.

2005-07-25  Derek Atkins  <derek@ihtfp.com>

	* src/business/business-core/gncInvoice.c:  revert the
	  OWNER to GNC_ID_OWNER because it breaks lots of existing
	  queries.  QSF needs to find a better method, either using
	  a secondary entry into the parameter or coming up with a
	  new meta-type in QOF where you can implement GNC_ID_OWNER
	  in terms of the new metatype.  QOF_TYPE_COLLECT is absolutely
	  the WRONG answer for GNC_ID_OWNER.

	* src/engine/gnc-hooks.c: Call the correct API to delete a hook
	  so we don't throw an error at shutdown.

2005-07-24  David Hampton  <hampton@employees.org>

	* various src/backend and src/business/business-core: Add gchar*
	to xmlChar* casting of string constants to eliminate some gcc4
	warnings.

	* src/gnome-utils/print-session.c: Some gchar* to guchar* casting
	to make gcc4 happy.

	* src/gnome-utils/gw-gnome-utils-spec.scm: Remove references to
	deleted data structures.  Gnucash now compiles against
	g-wrap-1.9.6 as well as g-wrap-1.3.

2005-07-24  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/dialog-pass.c, gnc-hbci-utils.c,
	hbci-interaction.c, glade/hbcipass.glade: Fix transition from
	GNOME_DIALOG to GTK_DIALOG. Eventually enable HBCI online actions
	again. Needs more work but at least contacts the bank correctly.

2005-07-23  David Hampton  <hampton@employees.org>

	* src/gnome-utils/druid-gconf-setup.c: Use $(HOME) instead of '~'
	when creating the .gconf.path file.

	* various files: Reorganize where these files appear in doxygen
	output.

2005-07-22  David Hampton  <hampton@employees.org>

	* numerous business file: Migrate the business preferences over to
	the new preferences dialog.

	* src/gnome-utils/dialog-preferences.[ch]: Rework the widget
	lookup code to handle widgets from multiple glade files.
	Documentation.

	* numerous file: Begin migrating preferences over to the new
	preferences dialog.

	* src/gnome-utils/Makefile.am:
	* src/gnome-utils/dialog-preferences.[ch]:
	* src/gnome-utils/gnc-main-window.c:
	* src/gnome-utils/preferences.glade:
	* src/gnome-utils/ui/gnc-main-window-ui.xml: Add the
	infrastructure for the new preferences dialog.  Begin migrating
	preferences over to the new dialog.

	* src/core-utils/gnc-gconf-utils.[ch]: Add central notification
	dispatcher for the "general" set of gconf keys.  This is needed
	because lots of file need callbacks for just one or two keys from
	this section.  Add routines to get/set float values in gconf.
	Miscellaneous tweaks.

2005-07-20  David Hampton  <hampton@employees.org>

	* src/gnome-utils/gnc-gui-query.c: Skipping a dialog permanently
	takes precedence over skipping it temporarily.  Make sure to set
	only one flag per dialog.  Actually wire up the callbacks.

	* src/gnome/schemas/Makefile.am:
	* src/gnome/schemas/apps_gnucash_warnings.schemas:
	* src/register/ledger-core/split-register-control.c:
	* src/register/ledger-core/split-register-model.c: Use the new
	dialog that remembers whether or not it should suppress further
	instances.

	* src/business/business-gnome/dialog-invoice.h:
	* src/business/business-gnome/gnc-plugin-page-invoice.c:
	* src/business/business-gnome/schemas/apps_gnucash_dialog_business_common.schemas:
	* src/core-utils/gnc-gconf-utils.h:
	* src/gnome/gnc-plugin-page-register.c:
	* src/gnome/schemas/apps_gnucash_general.schemas:
	* src/gnome-utils/gnc-main-window.[ch]:
	* src/gnome-utils/gnc-plugin-page.[ch[:
	* src/register/register-core/table-allgui.h:
	* src/report/report-gnome/gnc-plugin-page-report.c: Allow pages to
	state whether they should be loaded in the current window or in a
	new window.  This will soon be controlled by preferences.

	* src/gnome/gnc-plugin-page-register.c: Propagate window changes
	to the register.  Fix the "transaction report" to use the current
	window's status bar for updates.

	* src/gnome/gnc-plugin-basic-commands.c: Example "important"
	actions.  Subject to review.

	* src/gnome-utils/gnc-plugin.[ch]: Add support for marking actions
	as "important".  This is a setting used by the toolbar when it is
	set to GTK_TOOLBAR_BOTH_HORIZ.

	* src/core-utils/gnc-gconf-utils.c: Handle what was thought to be
	an unexpected case when building gconf keys.

2005-07-19  David Hampton  <hampton@employees.org>

	* src/gnome/gnc-plugin-page-account-tree.c:
	* src/gnome/gw-gnc-spec.scm:
	* src/gnome/top-level.c:
	* src/gnome-utils/Makefile.am:
	* src/gnome-utils/gnc-main-window.c:
	* src/gnome-utils/gnc-mdi-utils.[ch]:
	* src/gnome-utils/gnc-window.c:
	* src/gnome-utils/gw-gnome-utils-spec.scm:
	* src/report/report-gnome/window-report.h:
	* src/report/report-system/report-utilities.scm:
	* src/scm/main-window.scm: Remove the remnants of the gtk1/gnome1
	MDI code.

	* src/report/report-gnome/gnc-plugin-page-report.c: Use the
	progress bar in the current window, not always the first window.

	* src/gnome-utils/gnc-main-window.c: Spruce up the delete window
	dialog to make it more HIG compliant.

	* src/engine/qofbook.h:
	* src/engine/qofbook-p.h: Expose the qof_book_mark_saved()
	function.

2005-07-18  David Hampton  <hampton@employees.org>

	* src/app-file/gnc-file.[ch]:
	* src/app-file/gnc-file-dialog.h:
	* src/app-file/gnome/gnc-file-dialog.c: Combined together as
	gnc-file.[ch] in the gnome-utils directory.

	* src/app-file/gnc-file-history.[ch]:
	* src/gnome/gnc-plugin-file-history.[ch]: Combined together as
	gnc-plugin-file-history.[ch] in the gnome-utils directory.

	* src/app-file/gw-app-file-spec.scm: Folded into
	gw-gnome-utils-spec.scm in the gnome-utils directory.

	* src/app-file/schemas/apps_gnucash_history.schemas: Moved to the
	gnome-utils directory.

	* various: Update file include statements, remove files no longer
	needed, etc.

2005-07-17  David Hampton  <hampton@employees.org>

	* src/gnome/gnc-plugin-page-register.c:
	* src/gnome/ui/gnc-plugin-page-register-ui.xml:
	* src/gnome-utils/gnc-main-window.c:
	* src/gnome-utils/ui/gnc-main-window-ui.xml: Add a "Transaction"
	top level menu that collects all the menu items from Edit and
	Actions that modify transactions.  This menu parallels the HIG
	definition of an "Edit" menu as much as possible.

	* src/gnome/ui/gnc-plugin-basic-commands-ui.xml: Move a couple
	menu items within the Actions menu.

	* src/gnome/schemas/apps_gnucash_dialog_common.schemas:
	* src/gnome-utils/Makefile.am:
	* src/gnome-utils/dialog-reset-warnings.[ch]:
	* src/gnome-utils/dialog-reset-warnings.glade:
	* src/gnome-utils/gnc-main-window.c:
	* src/gnome-utils/ui/gnc-main-window-ui.xml: Add a new dialog to
	reset the state of warning messages.

	* src/gnome-utils/druid-gconf-setup.c: Reset all temporary warning
	suppressions at startup.

	* src/gnc-ui.h:
	* src/gnome-utils/gnc-gui-query.c:
	* src/gnome-utils/gnc-gui-query.glade: New info/question/warning
	dialogs that remember whether or not the user wants to see them
	again.

	* src/gnome/gnc-plugin-page-account-tree.c: Add a refresh callback
	to update the page when preferences change.

	* src/engine/gnc-trace.[ch]: New log module for the
	preferences/warnings code.

	* src/gnome-utils/gnc-tree-view.c:
	* src/core-utils/gnc-gconf-utils.[ch]: Add some schema related
	functions.  Remove extraneous argument from
	gnc_gconf_client_all_entries().  Doxygen updates.

	* src/gnome-utils/gnc-main-window.c:
	* src/gnome-utils/gnc-window.[ch]: When deleting a window make
	sure to update the progress bar code.  Fixes a crash when you
	delete the last window and then try to save.  From Phil Longstaff
	<plongstaff@newearth.org>.

	* src/report/standard-reports/equity-statement.scm:
	* src/report/standard-reports/income-statement.scm: Fix for
	mispellings in scheme code from Phil Longstaff
	<plongstaff@newearth.org>.

2005-07-15  David Hampton  <hampton@employees.org>

	* src/gnc-ui.h:
	* src/gnome-utils/Makefile.am:
	* src/gnome-utils/druid-gconf-setup.[ch]:
	* src/gnome-utils/druid-gconf-setup.glade:
	* src/gnome-utils/gnc-dir.h.in: Test whether or not Gnucash can
	find its GConf keys.  If not present the user with a warning
	message.  If the user chooses to setup gconf, launch a druid to
	lead them through the process.

	* src/core-utils/gnc-gconf-utils.[ch]: New function to check
	existence of gconf keys.  New functions to add/remove gconf
	notifications for use by code that doesn't have a GObject
	available.

	* src/bin/Makefile.am:
	* src/bin/update-gnucash-gconf.in: New script to install all of
	Gnucash's gconf schemas into the users ~/.gconf directory.

	* configure.in:
	* src/app-file/schemas/Makefile.am:
	* src/business/business-gnome/schemas/Makefile.am:
	* src/gnome/schemas/Makefile.am: Do all schema installs into
	${prefix}/etc/gconf, not /etc/gconf.  Make sure this directory
	exists before installing.

	* src/gnome-utils/gnc-gnome-utils.[ch]:
	* src/gnome-utils/gnc-main-window.[ch]: Move the gnc_shutdown
	routine to a different file.

2005-07-11  David Hampton  <hampton@employees.org>

	* src/business/business-gnome/gnc-plugin-page-invoice.c:
	* src/gnome/gnc-plugin-page-register.c:
	* src/gnome/gnc-plugin-register.c: Add a hook to catch changes to
	register configuration keys and update any registers.  This gives
	live updating when changes are made.

	* doc/gtkrc-2.0.gnucash:
	* src/app-utils/prefs.scm:
	* src/business/business-gnome/dialog-invoice.c:
	* src/business/business-gnome/dialog-order.c:
	* src/business/business-ledger/gncEntryLedger.h:
	* src/business/business-ledger/gncEntryLedgerModel.c:
	* src/gnome/top-level.c:
	* src/gnome/schemas/Makefile.am:
	* src/gnome/schemas/apps_gnucash_general.schemas:
	* src/register/ledger-core/Makefile.am:
	* src/register/ledger-core/split-register-model.[ch]:
	* src/register/ledger-core/split-register.h:
	* src/register/register-core/table-allgui.[ch]:
	* src/register/register-gnome/gnucash-grid.c:
	* src/register/register-gnome/gnucash-header.c:
	* src/register/register-gnome/gnucash-item-edit.c:
	* src/register/register-gnome/gnucash-sheet.[ch]:
	* src/register/register-gnome/gnucash-style.[ch]: Add code to
	allow the register colors to be set by the system theme (i.e from
	gtkrc files).  Remove the preferences to set the register colors.
	Add a gconf keys to 1) specify whether to use the gtkrc colors or
	the default gnucash colors, 2) display the horizontal/vertical
	lines in the register, and 3) set the alternate coloring mode.

2005-07-07  David Hampton  <hampton@employees.org>

	* src/business/business-gnome/Makefile.am:
	* src/business/business-gnome/dialog-invoice.[ch]:
	* src/business/business-gnome/gnc-plugin-page-invoice.[ch]:
	* src/business/business-gnome/glade/invoice.glade:
	* src/business/business-gnome/ui/Makefile.am:
	* src/business/business-gnome/ui/gnc-plugin-page-invoice-ui.xml:
	Convert the invoice dialog over to a GncPluginPage.  The new file
	is in large part a wrapper around the original dialog code, since
	the same logic was actually used to drive two different dialogs.

	* src/business/business-gnome/business-gnome.scm:
	* src/business/business-gnome/businessmod-gnome.c:
	* src/business/business-gnome/gnc-plugin-business.[ch]:
	* src/business/business-gnome/gw-business-gnome-spec.scm: Move the
	logic to call the bills due dialog at startup.  Track the window
	where the last business command was issued and use this value to
	place any new business pages created.  Update accelerator keys.

	* src/business/business-gnome/ui/gnc-plugin-business-ui.xml:
	Add a couple of placeholders.

	* src/gnome-utils/gnc-main-window.c: Catch the window manager
	delete signal and query the user before allowing the last window
	to be deleted.

	* src/import-export/binary-import/Makefile.am:
	* src/import-export/binary-import/druid-commodity.[ch]:
	* src/import-export/binary-import/gncmod-binary-import.c:
	* src/import-export/binary-import/binary-import.scm (removed):
	* src/import-export/binary-import/gw-binary-import-spec.scm (removed):
	Rewrite this module's book-opened-hook into C.

	* src/enginc/gnc-hooks.[ch]:
	* src/engine/gw-engine-spec.scm: Explicitly state the number of
	arguments a hook callback should have.  Scheme gets very unhappy
	if you don't supply the right number of arguments.

	* src/app-file/gw-app-file-spec.scm: Eliminate double free of
	memory.

2005-07-06  David Hampton  <hampton@employees.org>

	* src/register/register-gnome/gnucash-sheet.c: The register uses a
	non-visible GtkEntry to handle its data input.  Except this widget
	from being shown by gtk_widget_show_all.

2005-07-05  David Hampton  <hampton@employees.org>

	* src/app-file/gnc-file.c:
	* src/gnome/dialog-new-user.c:
	* src/gnome/top-level.c: Eliminate double call of some hooks.

	* src/gnome/top_level.c:
	* src/gnome-utils/gnc-main-window.c: A new GncMainWindow should
	show itself instead of requiring the caller to call
	gtk_widget_show.

	* src/gnome/gnc-plugin-page-account-tree.c:
	* src/gnome/gnc-plugin-page-register.c:
	* src/gnome-utils/gnc-main-window.[ch]:
	* src/gnome-utils/gnc-plugin-page.[ch]:
	* src/gnome-utils/gnc-window.c:
	* src/report/report-gnome/gnc-plugin-page-report.c: Move some of
	the fields in a GncPluginPage from the public to the private data
	structures.

	* src/gnome-utils/dialog-query-list.c:

	Look for the window manager deletion signal and clean up the
	dialog.

	* src/gnome-utils/dialog-query-list.glade: Give the dialog a
	default size.

2005-07-03  David Hampton  <hampton@employees.org>

	* src/gnome/glade/price.glade: Update to use HIG2.0 guidelines for
	widget spacing.

	* src/gnome/dialog-print-check.c:
	* src/gnome-utils/gnc-html.c:
	* src/gnome-utils/gw-gnome-utils-spec.scm:
	* src/gnome-utils/print-session.[ch]:
	* src/scm/printing/print-check.scm: Convert printing over to g2.

	* src/gnome/gnc-plugin-page-register.c:
	* src/gnome/ui/gnc-plugin-page-register-ui.xml: Move the "Print
	Check" command to overlay the "Print" placeholder.

	* src/report/report-gnome/gnc-plugin-page-report.c: Replace the
	gtk1.2 "draw" signal with the gtk2.0 "expose_event" signal.

2005-07-02  David Hampton  <hampton@employees.org>

	* src/report/report-gnome/gnc-plugin-page-report-ui.xml:
	* src/report/report-gnome/gnc-plugin-page-report.c: Duplicate a
	couple of the toolbar buttons as menu items.

	* src/gnome-utils/print-session.[ch]:
	* configure.in: Remove old checks for libgnomeprint2.0.

	* src/gnome-utils/gnc-main-window.c: Print is a placeholder that
	must be overridden.

	* src/business/business-core/gncEmployee.h: Add #define for
	deprecated function.

2005-07-01  David Hampton  <hampton@employees.org>

	* src/business/business-core/gncEmployee.h: Add #define for
	deprecated function.

	* src/gnome-utils/dialog-query-list.c: Finish g1->g2 widget conversion.

	* src/gnome/gnc-plugin-basic-commands.c: Rename "Find Transactions"
	back to "Find".

	* src/gnome/gnc-plugin-page-register.c:
	* src/gnome/ui/gnc-plugin-page-register-ui.xml:
	* src/gnome/ui/gnc-plugin-page-sxregister-ui.xml: Restore missing
	commands.

	* src/gnome/ui/gnc-plugin-page-account-tree-ui.xml:
	* src/gnome-utils/ui/gnc-main-window-ui.xml: Tweak menu locations.

	* src/gnome/dialog-scheduledxaction.c: Destroy the dialog when the
	user dismisses it. Releases resources instead of losing them.

	* src/gnome/glade/register.glade: Tweak the "Void Transaction"
	dialog.

	* src/gnome-utils/gnc-embedded-window.c: Add object tracking.

	* src/gnome-utils/gnc-main-window.c: Add object tracking.
	Cut/Copy/Paste are only placeholders that must be overridden.
	Remove function stubs and make the actions insensitive.

2005-06-30  David Hampton  <hampton@employees.org>

	* src/gnome-utils/gnc-plugin-page.[ch]: Add a utility function to
	retrieve the page title.

	* src/gnome-utils/gnc-date-edit.[ch]: Reconnect the
	focus_out_event signal.  Add a function so this widget can be
	generated from a glade file.

	* src/gnome/gnc-split-reg.[ch]: Enable translation of the
	SortType enumeration to/from a string.

	* src/gnome/gnc-plugin-file-history.c:
	* src/gnome/ui/gnc-plugin-file-history-ui.xml: Promote file
	history information to the 'File' menu per Gnome HIG 2.0.

	* src/gnome/gnc-plugin-page-register.c:
	* src/gnome/ui/gnc-plugin-page-register-ui.xml:
	* src/gnome/glade/register.glade: Promote the register style
	options to the 'Edit' menu per Gnome HIG 2.0.  Rework the various
	sort, status and date menu items into the HIG "Sort By" and
	"Filter By" menus.

	* src/gnome/gnc-plugin-basic-commands.c:
	* src/gnome/ui/gnc-plugin-basic-commands-ui.xml:
	* src/gnome-utils/gnc-main-window.c:
	* src/gnome-utils/ui/gnc-main-window-ui.xml: Move a few commands
	around to try and better align with HIG 2.0.

	* src/gnome-utils/gnc-main-window.h:
	* src/gnome/gw-gnc-spec.scm:
	* src/scm/main.scm: Remove unneeded functions now that the main
	window title is updated internally.

	* various: Use HIG 2.0 specified access keys wherever
	possible. Try and ensure that all menu items have access keys
	defined.

2005-06-19  Neil Williams <linux@codehelp.co.uk>
	* qofid.c:
	* qofid.h: qof_collection_count

2005-06-19  Neil Williams <linux@codehelp.co.uk>
	* src/engine/qof_book_merge.c: Re-organising to
	use static functions.
	* src/engine/qof_book_merge.h: Setting public API.
	* src/engine/qofclass.h: Typos.

2005-06-19  Neil Williams <linux@codehelp.co.uk>
	* src/business/business-core/gncAddress.c:
	* src/business/business-core/gncAddress.h:
	* src/business/business-core/gncCustomer.c:
	* src/business/business-core/gncCustomer.h:
	* src/business/business-core/gncEmployee.c:
	* src/business/business-core/gncEmployee.h:
	* src/business/business-core/gncInvoice.c:
	* src/business/business-core/gncInvoice.h:
	* src/business/business-core/gncJob.c:
	* src/business/business-core/gncJob.h:
	* src/business/business-core/gncOwner.c:
	* src/business/business-core/gncOwner.h:
	* src/business/business-core/gncVendor.c:
	* src/business/business-core/gncVendor.h
	* src/engine/Account.c
	* src/engine/Account.h: Changing to static functions,
	and using QOF_TYPE_COLLECT in QofObject parameters.
	* src/engine/FreqSpec.c
	* src/engine/FreqSpec.h: Removing compiler hack, using
	static functions.
	* src/engine/Transaction.c
	* src/engine/Transaction.h: Changing to static functions.

2005-06-19  Neil Williams <linux@codehelp.co.uk>
	* src/backend/qsf/qsf-backend.c: API
	* src/backend/qsf/qsf-object.xsd.xml: QOF_TYPE_COLLECT
	* src/backend/qsf/qsf-xml.h: Make into a private header.
	* src/backend/qsf/qof-backend-qsf.h: Public API for the library.

2005-06-19  Neil Williams <linux@codehelp.co.uk>
	* src/doc/backend-api.txt
	* src/doc/backend-errors.txt
	* src/doc/backup.txt
	* src/doc/books.txt
	* src/doc/budget.txt
	* src/doc/business.txt
	* src/doc/constraints.txt
	* src/doc/currencies.txt
	* src/doc/doxygen.cfg.in
	* src/doc/doxygen_main_page.c
	* src/doc/engine.txt
	* src/doc/g2-architecture.txt
	* src/doc/generic-druid-framework.txt
	* src/doc/guid.txt
	* src/doc/loans.txt
	* src/doc/lots.txt
	* src/doc/multicurrency-discussion.txt
	* src/doc/netlogin.txt
	* src/doc/plugin.txt
	* src/doc/prices.txt
	* src/doc/qif.txt
	* src/doc/tax.txt
	* src/doc/user-prefs-howto.txt
	* src/engine/design.txt
	* src/engine/extensions.txt
	* src/engine/kvp_doc.txt
	* src/scm/startup-design.txt: Folding text files
	into Doxygen output.

	* src/doc/gnc-commodity.txt: Removed: empty.

2005-06-12  Derek Atkins  <derek@ihtfp.com>

	* src/engine/gnc-hooks*:
	  First attempt at implementing SCM hooks in C.
	* src/engine/Makefile.am:
	  Handle new (private) header file, gnc-hooks-scm.h

	* src/engine/gnc-hooks.c:
	  Use ENTER/LEAVE macros instead of commented printfs

	* src/engine/gw-engine-spec.scm:
	  use gnc-hooks-scm.h header
	* src/engine/gnc-hooks.[ch]:
	  Fix APIs..  Even though we return 'const' don't say we do.

	* src/app-utils/hooks.scm:
	  remove most of the hooks code; use the C impl.
	* src/app-utils/prefs.scm: don't define the save-options-hook here
	* src/engine/gnc-hooks.[ch]:
	  Fix the actual implementation of the scheme callback
	  Make sure we call back with appropriate number of args
	* src/engine/gw-engine-spec.scm:
	  wrap the gnc-hooks APIs
	  define the old hooks as strings.
	* src/gnome-utils/gnc-menu-extensions.scm:
	  remove definition of add-extension-hook
	* various others:
	  remove call to run-c-hook, just use the run-dangers API

2005-06-11  David Hampton  <hampton@employees.org>

	* src/gnome-utils/gnc-plugin-manager.[ch]: Take ownership of
	plugins passed to the manager.  Free all plugins at gui shutdown.
	Documentation.

2005-06-11  Derek Atkins  <derek@ihtfp.com>

	* src/core-utils/Makefile.am
	  Removed gnc-hooks to src/engine.
	* src/core-utils/gw-core-utils-spec.scm:
	  Removed gnc-hooks
	* src/engine/gnc-hooks.[ch]:
	  gnc-hooks are here, so it can deal with QofEntity handling.
	  Changed the API to take a GFunc and a cbarg.
	* src/engine/gw-engine-spec.scm:
	  added gnc-hooks wrapper

2005-06-10  David Hampton  <hampton@employees.org>

	* configure.in: Break out gtk from gnome to get access to a
	GTK_CFLAGS variable.

	* src/core-utils/gnc-gobject-utils.[ch]: Add functions for
	tracking GObject based items.  To help find memory leaks, if
	gnucash is compiled with --enable-ref-counts-dumps the contents of
	this database will be dumped when gnucash quits.

	* src/gnome-utils/gnc-tree-model.[ch]: New base tree model that
	utilizes the new object tracking functions.

	* src/gnome-utils/gnc-plugin.c:
	* src/gnome-utils/gnc-plugin-page.c:
	* src/gnome-utils/gnc-tree-view.[ch]: Utilize the new object
	tracking functions in these gnucash base class objects.

	* various: Remove old debugging code that is no longer
	needed. Debugging is now in the base class objects.

2005-06-09  David Hampton  <hampton@employees.org>

	* src/gnome-utils/gnc-plugin-manager.[ch]: Assume ownership of all
	registered plugins instead of incrementing their reference count.
	Install a ui-shutdown hook so that the plugin manager can clean up
	and free any installed plugins..

	* src/app-utils/prefs.scm:
	* src/core-utils/gnc-hooks.h:
	* src/gnome-utils/gnc-menu-extensions.scm:
	* src/report/report-gnome/report-gnome.scm:
	* src/scm/main.scm: Finish regularizing C side hook names.

	* src/gnome-utils/gnc-tree-view-account.c: Unref the sort_model so
	that the entire set of models will be properly deleted.

2005-06-08  Derek Atkins  <derek@ihtfp.com>

	* src/core-utils/gnc-hooks.[ch]: rename some functions, set up the
	  architecture to handle SCM and C hook danglers all in the same
	  place.
	* src/app-file/gnc-file.c:
	* src/core-utils/gw-core-utils-spec.scm:
	* src/gnome/dialog-new-user.c:
	* src/gnome/top-level.c:
	  point to new gnc-hook function names

	* src/engine/qofsession-p.h, src/engine/qofsession.c:
	  Make a session sort of look like a QofEntity.  This will
	  be useful when I add scheme bindings to the hooks.

2005-06-07  David Hampton  <hampton@employees.org>

	* src/gnome/gnc-plugin-page-register.c:
	* src/gnome/gnc-split-reg.[ch]: Make the summarybar for the
	register work again.

	* src/core-utils/gnc-hooks.[ch]: Implement C side hook lists.  Will
	allow hooks to be easily installed from either Scheme or C code.

	* various files: Call the C hooks whenever a Scheme hook is called.

2005-06-06  David Hampton  <hampton@employees.org>

	* gnucash/src/backend/qsf/qsf-backend.c: Couple of bug fixes.

	* src/gnome/gnc-plugin-basic-commands.c: Forgot to change the
	callback data provided to these commands now that they're provided
	by a plugin.

	* src/app-file/gnc-file.c: Fix double free.

	* src/gnome/druid-merge.c: Use gtk_widget_show_all so that the
	first page of the druid is shown.

	Restructure the code.

	* src/gnome/gnc-embedded-window.[ch]:
	* src/gnome/gnc-plugin-basic-commands.[ch]:
	* src/gnome/gnc-plugin-manager.[ch]:
	* src/gnome/gnc-plugin-menu-additions.[ch]:
	* src/gnome/gnc-plugin-page.[ch]:
	* src/gnome/gnc-plugin.[ch]:
	* src/gnome/gnc-window.[ch]: These files were moved whole from
	src/gnome to src/gnome-utils:

	* src/gnome/gnc-main-window.[ch]:
	* src/gnome/ui/gnc-main-window-ui.xml: These files were split into
	two parts, and the part with the existing name was moved from
	src/gnome to src/gnome-utils.  The parts left in src/gnome are
	called gnc-plugin-basic-commands.[ch].

	* src/app-file/gnc-file.[ch]:
	* src/app-file/gncmod-app-file.c: Call gnc-main-window directly
	now instead of through a function pointer loaded at runtime.

	* src/gnome/top-level.c:

	* gnucash/src/gnc-ui.h:
	* src/report/stylesheets/Makefile.am: Revert temporary workaround.

	(Now removed) Temporary workaround.

	* gnucash/src/gnc-ui.h:
	* gnucash/src/gnome/gnc-main-window.h:
	* gnucash/src/gnome/gnc-window.h:
	* gnucash/src/gnome/gw-gnc-spec.scm:
	* gnucash/src/gnome-utils/gw-gnome-utils-spec.scm:
	* gnucash/src/report/report-gnome/gw-report-gnome-spec.scm:
	* gnucash/src/report/stylesheets/ Makefile.am: Temporary
	workaround to resolve circular build dependency:

2005-06-05  David Hampton  <hampton@employees.org>

	* src/gnome/gnc-plugin-page-register.c:
	* src/gnome/ui/gnc-plugin-page-register-ui.xml: Restore the
	register report menu items.  They've been missing for a while.

	* src/gnome/Makefile.am:
	* src/gnome/top-level.c:
	* src/gnome/gnc-plugin-menu-additions.[ch]: New files for
	installing the report menu items into the main window(s).

	* src/gnome-utils/gnc-menu-extensions.[ch]:
	* src/gnome-utils/gnc-menu-extensions.scm: Build data structures
	that are easier to use with the new menu installation code. Code
	cleanup.

	* src/business/business-gnome/business-gnome.scm:
	* src/report/report-gnome/Makefile.am:
	* src/report/report-gnome/gnc-plugin-page-report.[ch]:
	* src/report/report-gnome/gw-report-gnome-spec.scm:
	* src/report/report-gnome/report-gnome.scm:
	* src/report/report-system/report.scm:
	* src/scm/main.scm: Reports are now opened in the window where the
	menu was selected. Other updates for recent changes.

	* src/gnome-utils/gw-gnome-utils-spec.scm:
	* src/report/report-gnome/window-report.[ch]: Removal of old code.

	* src/gnome/gnc-main-window.[ch]:
	* src/gnome/ui/gnc-main-window-ui.xml:
	* src/gnome/gnc-plugin-page-account-tree.c: Include the Reports
	menu in the main user interface.  Extracted common code into
	utility functions.  New function for adding hand crafted actions
	to the user interface.  Don't allow the initial page to be closed
	or moved.  Rename a menu entry.  Remove the dispose function.  Add
	doxygen comments.

	* src/gnome/gnc-plugin.[ch]: Add doxygen comments.

	* src/gnome/gw-gnc-spec.scm Remove extraneous includes.

	* src/core-utils/gnc-gconf-utils.c: Treat the dash and underscore
	characters the same when looking up an enum by name.

2005-06-04  David Hampton  <hampton@employees.org>

	* src/gnome/gnc-plugin.[ch]:
	* src/gnome-utils/gnc-gnome-utils.[ch}: Migrate a couple of
	functions to gnc-plugins.c.

	* src/gnome/gnc-plugin-page-account-tree.c:
	* src/gnome/gnc-plugin-page-register.c:
	* src/import-export/hbci/gnc-plugin-hbci.c:
	* src/report/report-gnome/gnc-plugin-page-report.c:
	* src/report/stylesheets/gnc-plugin-stylesheets.c: Update for the
	new function names.

2005-06-03  David Hampton  <hampton@employees.org>

	* src/gnome/gnc-main-window.[ch]: Move one function out of
	window-main.c.  This may be a temporary home.

	* src/gnome/window-main.[ch]:
	* src/gnome/window-register.[ch]: Remove files that are no longer
	needed in the g2 branch.

	* src/gnome/Makefile.am:
	* src/gnome/dialog-scheduledxaction.c:
	* src/gnome/gnc-plugin-page-account-tree.c:
	* src/gnome/gnc-split-reg.c:
	* src/gnome/gw-gnc-spec.scm:
	* src/gnome/top-level.[ch]:
	* src/gnome/window-main-summarybar.c: Remove references to these
	files.

2005-06-02  David Hampton  <hampton@employees.org>

	* src/business/business-gnome/dialog-customer.c: Eliminate a
	memory corruption bug.

	* src/business/business-gnome/dialog-customer.c:
	* src/business/business-gnome/dialog-employee.c:
	* src/business/business-gnome/dialog-invoice.c:
	* src/business/business-gnome/dialog-job.c:
	* src/business/business-gnome/dialog-order.c:
	* src/business/business-gnome/dialog-vendor.c: Fix a small memory
	leak. Also tweak printfs for a 64 bit system.

	* src/gnome-search/gnc-general-search.c: Remove the custom forall
	method.  This allows all the child widgets to be properly
	destroyed.

2005-05-22  David Hampton  <hampton@employees.org>

	* src/gnome-utils/dialog-utils.c (gnc_save_window_size): Protect
	against being called after window destruction has started.

	* src/gnome/glade/lots.glade:
	* src/gnome/lot-viewer.c: Make the dialog more HIG compliate.
	Install the callbacks via glade instead of by hand.  Rework some
	of the callback logic.  The buttons that require a lot be selected
	now cannot be clicked unless a lot is selected.  Rememver window
	and divider information in gconf.

2005-05-21  David Hampton  <hampton@employees.org>

	* src/gnome/glade/lots.glade: Geert Jan Janssens'
	<janssens.geert@advalvas.be> changes to add scrollbars to 'lot
	clist'.  Add a default window size for easier use.  Add start
	position for vpane divider to show both panes on startup.

	* All glade files: Run through the FC3 version of glade (2.6.0).
	Additional properties added and minor reordering of properties.

	* src/gnome/glade/merge.glade: Major indentation changes.

	* src/gnome-utils/Makefile.am:
	* src/gnome-utils/gnc-tree-view-common.[ch]:
	* src/gnome-utils/gnc-tree-view.[ch]: Convert common functions
	into a new base gnc-tree-view object.  Integrate the object with
	gconf for tracking sizes and visibilities of columns within a
	view.  Add a new popup menu for selecting column visibilities.
	Make it easier to add new columns after a view has been created.

	* src/gnome-utils/gnc-tree-view-*: Base these views on the new
	common gnc-tree-view class.

	* src/gnome-utils/gnc-tree-model-*: Remove the dedicated column
	for right aligning numbers.  This is done by a simpler method now.

	* src/gnome/dialog-budget-category.c:
	* src/gnome/dialog-commodities.c:
	* src/gnome/dialog-price-edit-db.c:
	* src/gnome/druid-hierarchy.c:
	* src/gnome/gnc-plugin-page-account-tree.c:
	* src/import-export/import-account-matcher.c: Changes because
	called functions have moved in to the base gnc tree view.

	* src/app-utils/gnc-ui-util.[ch]:
	* src/gnome-utils/dialog-account.c:
	* src/scm/main-window.scm: Prune three or four layers of
	complicated code that is only ever used to extract a single value
	from an account.

2005-05-20  David Hampton  <hampton@employees.org>

	* src/gnome-utils/gnc-tree-model-account.c: Store the book as part
	of the model private data.  In the event handler for the model,
	ensure that events are for accounts that are in the model.

2005-05-19  David Hampton  <hampton@employees.org>

	* src/core-utils/gnc-gconf-utils.[ch]: Add some more utility
	functions.

	* src/gnome/schemas/apps_gnucash_dialog_commodities.schemas:
	* src/gnome-utils/gnc-tree-view-commodity.c: Renamed "exchange
	code" to "cusip code".  The former seems like it is referring to
	NASDAQ, NYSE, etc, not a code that is unique to a specific
	security.  The latter is by definition security specific.

2005-05-15  David Hampton  <hampton@employees.org>

	* src/gnome-utils/gnc-tree-view-account.[ch]:
	* src/gnome-utils/gnc-tree-model-account.c:
	* src/gnome/druid-hierarchy.c: Chris Shoemaker's fixes to add
	custom columns to an Account view.  Various cleanups and fixes for
	memory leaks.

2005-05-10  David Hampton  <hampton@employees.org>

	* src/gnome-search/gncmod-gnome-search.c: Don't try to load code
	that was removed two weeks ago.

2005-05-08  Neil Williams <linux@codehelp.co.uk>
	* src/business/business-core/gncInvoice.c: Implementing
	QOF_TYPE_COLLECT.
	* src/business/business-core/gncInvoice.h: New functions to
	support collections.
	* src/business/business-core/gncOwner.c: Invoice collection
	support.
	* src/business/business-core/gncOwner.h: Doxygen and declarations.

2005-05-08  Neil Williams <linux@codehelp.co.uk>
	* src/backend/file/test/.cvsignore: Tweak
	* src/backend/qsf/qsf-backend.c: Handling collections
	in QSF
	* src/business/business-core/gncAddress.c: QOF enhancements.
	* src/business/business-core/gncAddress.h: QOF enhancements.
	* src/business/business-core/gncCustomer.c: Setting the address
	via QOF.
	* src/business/business-core/gncCustomer.h: Address handling in QOF.
	* src/business/business-core/gncInvoice.c: Using QOF_TYPE_COLLECT for
	owner, billto and entries.
	* src/business/business-core/gncInvoice.h: Declarations for collect
	handlers.
	* src/business/business-core/gncOwner.c: Handling as a collection.
	* src/business/business-core/gncOwner.h: Easing QOF handling.
	* src/business/business-gnome/gnc-plugin-business.c: Recursive
	handling.
	* src/engine/kvp_frame.h: Doxygen fix.
	* src/engine/qof_book_merge.c: QOF_TYPE_COLLECT merges.
	* src/engine/qofclass.h: New QOF type, collection.
	* src/engine/qofid.c: Collection handling.
	* src/engine/qofid.h: Documenting QOF_TYPE_COLLECT.
	* src/engine/qofsession.c: Recursive copies.
	* src/engine/qofsession.h: Recursive copying documentation.

2005-05-03  Neil Williams <linux@codehelp.co.uk>

	* src/app-utils/gnc-ui-util.h: Doxygen update.
	* src/backend/qsf/qsf-backend.c: Omitting kvp tag when
	frame is empty.
	* src/backend/qsf/qsf-object.xsd.xml: Typo.
	* src/business/business-core/gncBillTerm.h:
	* src/business/business-core/gncEmployee.h:
	* src/business/business-core/gncEntry.h:
	* src/business/business-core/gncTaxTable.h:
	* src/core-utils/gnc-gconf-utils.h:
	* src/engine/Account.h:
	* src/engine/Group.h: Doxygen fixes.
	* src/engine/Transaction.c: Replacement Timespec calls
	because QOF needs to pass Timespec, not Timespec*
	* src/engine/Transaction.h: qofTransSetDatePosted
	and qofTransSetDateEntered new functions and Doxygen fixes.
	* src/engine/gnc-commodity.h:
	* src/gnome-utils/dialog-account.h:
	* src/gnome-utils/dialog-commodity.c:
	* src/gnome-utils/dialog-commodity.h:
	* src/gnome-utils/gnc-gnome-utils.h:
	* src/gnome-utils/gnc-tree-model-account-types.h:
	* src/gnome-utils/gnc-tree-model-account.h:
	* src/gnome-utils/gnc-tree-model-commodity.h:
	* src/gnome-utils/gnc-tree-model-price.h:
	* src/gnome-utils/gnc-tree-view-account.h:
	* src/gnome-utils/gnc-tree-view-commodity.h:
	* src/gnome-utils/gnc-tree-view-common.h:
	* src/gnome-utils/gnc-tree-view-price.h:
	* src/gnome/gnc-plugin-file-history.c:
	* src/gnome/gnc-plugin-file-history.h:
	* src/gnome/gnc-plugin-page-account-tree.h:
	* src/gnome/gnc-plugin-page-register.h:
	* src/register/ledger-core/split-register-layout.h:
	* src/report/report-gnome/gnc-plugin-page-report.h:
	Doxygen fixes. Sub-divided the GUI module into manageable
	chunks and fixed @name sections. Put the @{ inside the
	same comment block as @name but NOT on the same line
	as the closing */

2005-04-30  David Hampton  <hampton@employees.org>

	* mkinstalldirs: Drop this generated file from CVS.

	* configure.in: Drop the libgnomeui requirement back to 2.6 so we
	can support SuSe 9.2.

	* src/business/business-ledger/gncEntryLedger.h: Change a couple
	of register cell names so the core register code can save/restore
	column widths.

	* src/gnome/gnc-main-window.c:
	* src/gnome/ui/gnc-main-window-ui.xml: Add the (debug) extensions
	menu back.

	* src/business/business-gnome/business-gnome.scm:
	* src/business/business-gnome/gnc-plugin-business.c:
	* src/business/business-gnome/ui/gnc-plugin-business-ui.xml:
	* src/scm/main.scm: Migrate the business "test" menu to a
	GtkAction based menu.

	* src/gnome-search/Makefile.am:
	* src/gnome-search/gnome-search.scm:
	* src/gnome-search/gw-gnome-search-spec.scm: Remove unused code.

2005-04-30  Derek Atkins  <derek@ihtfp.com>

	* src/gnome-utils/gnc-html-graph-gog.c: chris' patch
	  to enable showing the graph to workaround a bug in
	  gtkhtml-3.3.2 where the widget height is set to -1.

2005-04-28  David Hampton  <hampton@employees.org>

	* lots-o-files: Migrate most hidden preferences over to gconf.
	Remember geometry of more dialogs and restore it when the dialog
	is next used.

	* src/business/business-gnome/dialog-billterms.c:
	* src/business/business-gnome/dialog-invoice.c:
	* src/core-utils/gnc-gconf-utils.h:
	* src/gnome/gnc-split-reg.c:
	* src/gnome/window-main.c:
	* src/gnome/window-reconcile.c:
	* src/gnome/window-register.c:
	* src/gnome-utils/gnc-mdi-utils.c: Collapse knowledge of desktop
	gconf keys into a single file.

	* src/gnome/gnc-totd-dialog.[ch]:
	* src/gnome/tip-of-the-day.[ch]:
	* src/scm/tip-list.scm:
	* src/scm/tip-of-the-day.scm: Remove old "tip of the day" code.

	* make-gnucash-potfiles.in:
	* doc/tip_of_the_day.list.in:
	* src/gnome/dialog-totd.[ch]:
	* src/gnome/glade/totd.glade:
	* src/gnome/schemas/apps_gnucash_dialog_totd.schemas: New "tip of
	the day" code entirely written in C.  The installed tip file can
	still be updated by users, but is now essentially a free-form file
	where tips are separated by two consecutive newline characters.
	The tip file in the sources still contains gettext markup.  Store
	the current tip number and whether or not to show tip in gconf.

	* src/gnome/gnc-main-window.c:
	* src/gnome/gw-gnc-spec.scm:
	* src/gnome-utils/gnc-gnome-utils.[ch]:
	* src/scm/main.scm: Other files affected by the "tip of the
	day" changes.

2005-04-25  Neil Williams <linux@codehelp.co.uk>
	* src/app-utils/option-util.c:
	* src/app-utils/option-util.h: Removing deprecated QOF code
	DateFormat.
	* src/backend/qsf/pilot-qsf-GnuCashInvoice.xml:
	Making allowance for FreqSpec in pilotqof.
	* src/backend/qsf/qsf-backend.c: Support for
	reporting write errors to the user from the backend.
	* src/backend/qsf/qsf-object.xsd.xml: Typos and
	requiring certain attributes in all QSF XML.
	* src/backend/qsf/qsf-xml-map.c: minor.
	* src/backend/qsf/qsf-xml.h: Doxygen.
	* src/business/business-core/gncEntry.c: Increased
	QOF support.
	* src/business/business-core/gncEntry.h: QOF defines.
	* src/engine/FreqSpec.c: Removing hack, using enum as
	string macro, adding some QOF parameters and object
	definition. More to follow.
	* src/engine/FreqSpec.h: enum as string macro and
	adding QOF handling. Doxygen.
	* src/engine/FreqSpecP.h: Moving Doxygen comments to .h
	where they can actually be read. Removing Doxygen markers
	where unnecessary.
	* src/engine/SchedXaction.c: QOF Object declaration,
	QOF parameters.
	* src/engine/SchedXaction.h: Doxygen and QOF handling.
	* src/engine/gnc-date.c: Adding support for UTC time formatting
	and parsing. Doxygen. Increased MAX_DATE_LENGTH to cope
	with UTC strings.
	* src/engine/gnc-date.h: Removing deprecated shorthand defines.
	UTC support. Doxygen.
	* src/engine/gnc-engine-util.h: enum as string macro improvements.
	* src/engine/gnc-engine.c: FreqSpec and SchedXaction QOF object
	registration.
	* src/engine/gnc-trace.c: Tweak.
	* src/engine/gw-engine-spec.scm: Removing deprecated
	QOF_DATE_MATCH_ROUNDED and replacing with QOF_DATE_MATCH_DAY.
	* src/engine/kvp_frame.c: Deprecating mis-matched function names
	where gnc_numeric was mixed with numeric and str with string.
	All now use numeric or string.
	* src/engine/kvp_frame.h: Adding defines to support deprecated
	names for time being. Doxygen.
	* src/engine/qof-be-utils.h: Doxygen tweak.
	* src/engine/qof.h: Removing qof/ directory prefix on included
	header files.
	* src/engine/qof_book_merge.c: Using MAX_DATE_LENGTH, swapping
	unsigned int to signed int for printing.
	* src/engine/qof_book_merge.h: Losing the qof/ prefix.
	* src/engine/qofclass.c: Reference handling.
	* src/engine/qofgobj.c: Losing the qof/ prefix. Moving variable
	declarations to top of block.
	* src/engine/qofgobj.h: Losing qof/ prefix.
	* src/engine/qofid.h: Removing FreqSpec from QOF.
	* src/engine/qofquery-deserial.c: Removing deprecated date handling
	code.
	* src/engine/qofquery-deserial.h: Losing qof/ prefix, doxygen.
	* src/engine/qofquery-serialize.c: Removing deprecated date handling
	code.
	* src/engine/qofquery-serialize.h: Losing qof/ prefix.
	* src/engine/qofquery.c: Removing deprecated date handling code.
	* src/engine/qofquery.h: Doxygen.
	* src/engine/qofquerycore.c: Removing deprecated date handling code.
	* src/engine/qofquerycore.h: Removing deprecated date handling code.
	* src/engine/qofsession-p.h: Doxygen.
	* src/engine/qofsession.c: Tweak.
	* src/engine/qofsql.c: Losing qof/ prefix. Support for INSERT SQL
	statement and UTC date queries.
	* src/engine/qofsql.h: Losing qof/ prefix. Doxygen.
	* src/gnome-utils/QuickFill.h: Doxygen tweak.
	* src/gnome-utils/account-quickfill.h: Doxygen tweak.
	* src/gnome-utils/dialog-options.c:
	* src/gnome-utils/gnc-date-edit.c:
	* src/gnome-utils/gnc-date-format.c:
	* src/gnome-utils/gnc-date-format.h:
	* src/gnome/dialog-scheduledxaction.c:
	* src/gnome/dialog-sxsincelast.c:
	* src/gnome/druid-loan.c:
	* src/gnome/top-level.c:
	* src/import-export/import-main-matcher.c:
	* src/import-export/import-match-picker.c:
	* src/register/ledger-core/split-register-layout.h:
	* src/register/ledger-core/split-register.c:
	* src/register/ledger-core/split-register.h:
	* src/register/register-gnome/datecell-gnome.c: Removing deprecated
	date handling code.

2005-04-24  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/window-main-summarybar.c: Switch from using a gtk_select
	with locally-defined widgets to a GtkListStore backing a standard
	combo box.  Re-define the layout a bit, but it's still ugly.
	* src/gnome-utils/gtkselect.[ch]: Dead.

2005-04-24  David Hampton  <hampton@employees.org>

	* gnucash/src/core-utils/gnc-gconf-utils.[ch]:
	* gnucash/src/gnome-utils/gnc-gconf-utils.[ch]: Moved files from
	the gnome-utils directory to the core-utils directory. Clean up
	the usage of these functions.  Document the functions with
	doxygen.

	* various: Changes for the move/cleanup of gnc-gconf.

	* gnucash/src/gnome/schemas/apps_gnucash_dialog_commodities.schemas:
	* gnucash/src/gnome/schemas/apps_gnucash_dialog_prices.schemas:
	* gnucash/src/gnome-utils/gnc-tree-view-account.c:
	* gnucash/src/gnome-utils/gnc-tree-view-commodity.c:
	* gnucash/src/gnome-utils/gnc-tree-view-price.c: Remove old
	references to the GtkTreeView "rules_hint" property.  This
	property is now controlled via the .gtkrc file (where it should
	be).

	* gnucash/src/gnome/gnc-plugin.[ch]: Add infrastructure for
	plugins to easily request notification of changes to gconf for a
	specific section of gnucash variables.

	* configure.in:
	* gnucash/src/app-file/Makefile.am:
	* gnucash/src/app-file/gnc-file-history.[ch]:
	* gnucash/src/app-file/gnc-file-p.h:
	* gnucash/src/app-file/gw-app-file-spec.scm:
	* gnucash/src/gnome/gnc-plugin-file-history.[ch]:
	* gnucash/src/gnome/ui/gnc-plugin-file-history-ui.xml:
	* gnucash/src/app-file/schemas/Makefile.am:
	* gnucash/src/app-file/schemas/apps_gnucash_history.schemas: Hook
	the file history list into gconf.

	* gnucash/src/gnome/gnc-main-window.c:
	* gnucash/src/gnome/gnc-plugin-page-account-tree.c:
	* gnucash/src/gnome/gnc-plugin-page.[ch]:
	* gnucash/src/gnome/window-main-summarybar.c: Move the summary bar
	to the body of the page, just below the account tree.  Implement
	support for changing the summary bar when the page is changed,
	since the register page has a different summary bar. Hook the main
	window in to use standard desktop gconf key to decide if the
	toolbar is show as text/icons/both.

2005-04-23  Derek Atkins <derek@ihtfp.com>

	* Merge gog-integ branch into g2 branch.

 --- begin gog-integ Changelog ---

2005-04-17  Derek Atkins <derek@ihtfp.com>

	* configure.in: don't set pkglibdir
	* lib/goffice/split.c: implement e_xml_get_child_by_name()
	  GOG branch now builds on FC3.

2005-02-12  Joshua Sled  <jsled@asynchronous.org>

	* src/report/utility-reports/test-graphing.scm: Add to make
	graphing development easier.

	* src/gnome-utils/gnc-html-graph-gog.c (handle_barchart): fix;
	handle stacked-columns.
	(handle_scatter): add.

2005-02-10  Joshua Sled  <jsled@asynchronous.org>

	* lib/goffice/ : Initial import of libgoffice "port".

 -- end gog-integ Changelog --

2005-04-22  Joshua Sled  <jsled@asynchronous.org>

	* src/scm/main.scm (gnc:main): Expose and use functionality to
	update the main-window title after init-file load, plus collateral
	changes.

2005-04-16  Derek Atkins <derek@ihtfp.com>

	* configure.in: Downgrade glib dep to 2.4.0 so it builds on FC3.

2005-04-16  David Hampton  <hampton@employees.org>

	* lots of file: Switch from a requirement of Gtk-2.2 to Gtk-2.4.
	This replaces all EggAction references with GtkAction, and
	EggMenuMerge with GtkUIManager.  It also drops all the files in
	lib/egg since they are no longer needed.  Due to a flub, the log
	message on the changed source files simply reads 'foo4' instead of
	containing the previous description.

2005-04-11  Neil Williams  <linux@codehelp.co.uk>
	* src/app-file/gnc-file.c: Added handlers for
	write errors and made show_session_error()
	non-static.
	* src/app-file/gnc-file.h: Added prototype
	for show_session_error() so that it can be called
	to handle errors reported by any backend operation.
	* src/backend/file/gnc-book-xml-v2.c:
	* src/backend/file/io-gncxml-v2.c: Wrapping fprintf()
	in error handler to catch failed write operations.
	* src/backend/qsf/qsf-backend.c: Handling write errors
	on QSF export.
	* src/business/business-gnome/gnc-plugin-business.c:
	Adding show_session_error support to inform the user of
	any write errors reported by QSF.
	* src/engine/qof_book_merge.c: Re-instating fixes to
	QOF_TYPE_CHAR handling in merge.
	* src/engine/qofbackend.h: Definition of ERR_FILEIO_WRITE_ERROR
	* src/gnome/Makefile.am: Building dialog-chart-export with
	show_session_error from libgncmod-app-file
	* src/gnome/dialog-chart-export.c: Handling write errors
	reported by QSF backend, uses show_session_error()
	* src/gnome/glade/chart-export.glade: Removing nuisance tooltip.

2005-04-03  David Hampton  <hampton@employees.org>

	* src/gnome-utils/transfer.glade: Make all input fields expand on
	the X axis.

	* configure.in: Remove reqirement for Berkeley DB.  The G2 branch
	compiles and runs fine without it.

	* src/gnome-utils/gnc-gnome-utils.c: Have gnucash read a private
	RC file.  This makes it easy to apply styles to entire classes of
	widgets in gnucsah without affecting any other application.

	* src/gnome-utils/gnc-tree-view-account.c:
	* src/gnome-utils/gnc-tree-view-commodity.c:
	* src/gnome-utils/gnc-tree-view-price.c: Name a couple of new
	widgets to make it easier to apply styles to them.

	* doc/gtkrc-2.0.gnucash: Provide a sample RC file for gnucash.
	This file needs work.

2005-03-25  Neil Williams <linux@codehelp.co.uk>
	* src/backend/qsf/qsf-backend.c: Support for
	multiple references in the same entity.
	* src/business/business-gnome/gnc-plugin-business.c:
	Typo in employee export collection.
	* src/engine/Account.c:
	* src/engine/Account.h: qofAccountGetTypeString
	and qofAccountSetType to use string values for
	enum types in QOF.
	* src/engine/Transaction.c:
	* src/engine/Transaction.h: qofSplitSetParentTrans
	and qofSplitSetAccount QOF reference QofSetterFunc.
	* src/engine/qofclass.c: Fixing reference identification.
	* src/engine/qofsession.c: Removing debug calls. Minor fix.
	* src/gnome/dialog-chart-export.c: Adding references to
	generated Transaction and Splits in Chart of Accounts export.

2005-03-21  Neil Williams <linux@codehelp.co.uk>
	* src/backend/qsf/qsf-backend.c:
	* src/backend/qsf/qsf-xml.c:
	* src/backend/qsf/qsf-xml.h: Reference handling improvements.
	* src/business/business-gnome/gnc-plugin-business.c:
	* src/business/business-gnome/ui/gnc-plugin-business-ui.xml:
	  Adding export routines for business objects.
	* src/engine/qofclass.c:
	* src/engine/qofclass.h:
	Reference handling: qof_class_get_referenceList
	* src/engine/qofsession.c:
	* src/engine/qofsession.h: Reference handling improvements
	and improved error handling. Also suspending engine events
	during copy to improve speed.
	* src/gnome/dialog-chart-export.c:
	* src/gnome/glade/chart-export.glade: Removing unnecessary
	file chooser dialog, using a standard box instead.

2005-03-13  Joshua Sled  <jsled@asynchronous.org>

	* GNOME2_STATUS: Updates; removed some incorrectness, updated for
	other changes.  Added many new things. :(

	* src/register/register-gnome/gnucash-item-edit.c
	(gnc_item_edit_set_cursor_pos): Fix reverse dragging/selection,
	broken because of a change in gtk_editable semantics. :(
	(gnc_item_edit_draw_info): Turn off pango line wrapping.

2005-03-07  Neil Williams <linux@codehelp.co.uk>
	* ./src/engine/qofsession.c:Fixing references
	and empty partial books

2005-03-07  Neil Williams  <linux@codehelp.co.uk>
	* ./HACKING: Add a tip for using gdb with opt
	style builds.
	* ./src/app-file/gnc-file.c: New error message
	to direct users to merge QSF, not open directly.
	* ./src/backend/file/gnc-backend-file.c: Debug
	aids.
	* ./src/backend/qsf/qsf-backend.c: Fix object
	count and validation; add to KVP read support.
	* ./src/backend/qsf/qsf-xml.c: Fix object count
	validation bug.
	* ./src/engine/qof_book_merge.c: Fix char merge
	bug.
	* ./src/engine/qofbackend.h: New error message
	support.
	* ./src/engine/qofsession.c: Fix entity copy
	parameter list handling. Fix library name error.
	* ./src/engine/qofsession.h: Doxygen update.
	* ./src/gnome/Makefile.am: New dialog support.
	* ./src/gnome/dialog-chart-export.c: New dialog
	to export the Chart of Accounts to QSF XML.
	* ./src/gnome/dialog-chart-export.h: Header for
	new dialog.
	* ./src/gnome/druid-merge.c: Adding code to
	support the new dialog.
	* ./src/gnome/druid-merge.h: New dialog.
	* ./src/gnome/glade/Makefile.am: New glade file.
	* ./src/gnome/glade/chart-export.glade: New glade
	file for Chart of Account export dialog.
	* ./src/gnome/gnc-main-window.c: Menu commands for
	new dialog.
	* ./src/gnome/gnc-plugin-page-account-tree.c:
	Minor tweak.
	* ./src/gnome/ui/gnc-main-window-ui.xml: Adding
	menu option for new dialog.
	* ./src/gnome/window-main.c: Removing old merge
	druid commands.


2005-02-28  Neil Williams  <linux@codehelp.co.uk>

	* ./src/app-utils/gnc-ui-util.h:
	* ./src/doc/doxygen_main_page.c:
	* ./src/engine/Scrub2.c:
	* ./src/engine/Scrub3.c:
	* ./src/engine/cap-gains.c:
	* ./src/engine/gnc-budget-book-p.h:
	* ./src/engine/gnc-budget-book.c:
	* ./src/engine/gnc-budget-book.h:
	* ./src/engine/gnc-budget-cat-p.h:
	* ./src/engine/gnc-budget-cat.c:
	* ./src/engine/gnc-budget-cat.h:
	* ./src/engine/gnc-budget-p.h:
	* ./src/engine/gnc-budget-period-p.h:
	* ./src/engine/gnc-budget-period-value-p.h:
	* ./src/engine/gnc-budget-period-value.c:
	* ./src/engine/gnc-budget-period-value.h:
	* ./src/engine/gnc-budget-period.c:
	* ./src/engine/gnc-budget-period.h:
	* ./src/engine/gnc-budget.c:
	* ./src/engine/gnc-budget.h:
	* ./src/engine/gnc-engine.h:
	* ./src/engine/gnc-filepath-utils.c:
	* ./src/engine/gnc-filepath-utils.h:
	* ./src/engine/policy-p.h:
	* ./src/engine/policy.c:
	* ./src/gnome-utils/QuickFill.h:
	* ./src/gnome-utils/account-quickfill.h:
	* ./src/gnome-utils/dialog-commodity.c:
	* ./src/gnome-utils/dialog-commodity.h:
	* ./src/gnome-utils/gnc-budget-list-tree-model.c:
	* ./src/gnome-utils/gnc-budget-list-tree-model.h:
	* ./src/gnome-utils/gnc-budget-tree-model.c:
	* ./src/gnome-utils/gnc-budget-tree-model.h:
	* ./src/gnome-utils/gnc-gnome-utils.h:
	* ./src/gnome-utils/gnc-tree-model-account-types.h:
	* ./src/gnome-utils/gnc-tree-model-account.h:
	* ./src/gnome-utils/gnc-tree-model-commodity.h:
	* ./src/gnome-utils/gnc-tree-model-price.h:
	* ./src/gnome-utils/gnc-tree-view-account.h:
	* ./src/gnome-utils/gnc-tree-view-commodity.h:
	* ./src/gnome-utils/gnc-tree-view-common.h:
	* ./src/gnome-utils/gnc-tree-view-price.h:
	* ./src/gnome/dialog-budget-category.c:
	* ./src/gnome/dialog-budget-category.h:
	* ./src/gnome/dialog-budget-list.c:
	* ./src/gnome/dialog-budget-list.h:
	* ./src/gnome/dialog-budget-workbench.c:
	* ./src/gnome/dialog-budget-workbench.h:
	* ./src/gnome/druid-budget-create.c:
	* ./src/gnome/druid-budget-create.h:
	* ./src/gnome/gnc-budget-gui.h:
	* ./src/gnome/gnc-plugin-page-account-tree.h:
	* ./src/gnome/gnc-plugin-page-register.h:
	* ./src/report/report-gnome/gnc-plugin-page-report.h:
	Doxygen tag updates.

2005-02-23  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/gw-gnc-spec.scm: Expose
	gnc:window-set-progressbar-window.

	* src/scm/main.scm (gnc:main): Set progress bar window
	appropriately on startup so file-load feedback is in place.

2005-02-22  Joshua Sled  <jsled@asynchronous.org>

	* GNOME2_STATUS: Reverted from tabular to straight-text formatting
	of GNOME2_STATUS, with apologies to Paul Kroenwetter.

2005-02-22  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/gnc-main-window.c (gnc_main_window_setup_window): Add
	back the summary bar, down in the status-bar area.

2005-02-20  Neil Williams  <linux@codehelp.co.uk>

	* src/app-file/gnc-file.c: Adding messages to handlers for
	new QSF backend errors.
	* src/backend/qsf/pilot-qsf-GnuCashInvoice.xml: Correcting
	the schema namespace URL.
	* src/backend/qsf/qsf-backend.c:
	* src/backend/qsf/qsf-xml-map.c:
	* src/backend/qsf/qsf-xml.c: Re-organising and adding
	references and almost complete KVP support to QSF backend.
	* src/backend/qsf/qsf-map.xsd.xml:
	* src/backend/qsf/qsf-object.xsd.xml: Correcting attribute
	declarations and schema namespace URL. Adding KVP, double
	and char support to object schema.
	* src/backend/qsf/qsf-xml.h: Adding references support,
	documenting use of a partial QofBook. Changing the namespace URL.
	* src/engine/gnc-date.c: Fix the last-day-of-month computation for
	leap years.  Need to use modulo, not divide - needed by other parts
	of this update, already in HEAD.
        * src/engine/qof_book_merge.c: Fix double free of the targetList
        entities that cause xaccGroupGetNumSubAccounts to generate a
        segmentation fault.
        * src/engine/kvp_frame.c:
        * src/engine/kvp_frame.h: Add kvp_value_to_bare_string to
	generate strings without debug information.
	* src/engine/qofbackend-p.h: Support for a partial QofBook.
	The backend needs to handle external references to entities
	outside this book and save a QofBook that contains any mix of
	QOF objects, whether or not any specific object exists in the book.
	* src/engine/qofbackend.h: Adding a further QSF error code for
	when a GUID string has been mangled and fails to convert to a GUID.
	* src/engine/qofsession.c: Adding qof_entity_copy routines to
	copy single, lists or collections of entities between session books.
	Note: Each function creates a partial QofBook! Only certain backends
	{QSF} can handle partial books! Use for data export.
	* src/engine/qofsession.h: Documenting copying entities between
	sessions and using a partial QofBook. Also, allow a session book to
	be printed to stdout.


2005-02-17  Derek Atkins  <derek@ihtfp.com>

	* configure.in: properly notice that we've got a gtkhtml version.

2005-02-16  Derek Atkins  <derek@ihtfp.com>

	* src/app-utils/option-util.c: in lookup_string_option() use
	  SCM_STRING_CHARS() instead of the older gh guile function.
	  - removed comment, because the lookup_string_option() works
	    just fine for text options.

2005-02-15  Derek Atkins  <derek@ihtfp.com>

	Chris Shoemaker's patch: Avoid use of unitialized values in guid.c.
	* Avoid use of uninitialized values in guid.c
	  - prevent md5 seeding from using uninitialized stack contents
	  - give used/null GUID recognizable memory signature
	  - add a simple test case that helped testing for use of
	    uninitialized values

2005-02-13  Derek Atkins  <derek@ihtfp.com>

	Chris Shoemaker's patch: Fix various memory leaks.
	* Fix memory leak of xml parser context in sixtp-stack.c, string in
	  gnc_plugin_file_history, gdkCursor in cursors.c, GtkIconSources in
	  gnc-icons.c, several strings in gnc-menu-extensions.c, TimeSpec and
	  strings in test-engine-stuff.c
	* added some constness to gnc_ext_gen_action_name()

	Chris Shoemaker's patch: Allow use of gcache'd strings in hashtables.
	* allow the use of gcache'd strings in ghashtables without leaking
	  - Introduce functions gnc_string_cache_remove() and
	    gnc_string_cache_insert()
	* add comment warning about dangerous macro SAFE_STRCMP_REAL
	* fix qofbook's leaking of strings in ghashtable by using new
          gnc_string_cache_* functions

	Chris Shoemaker's patch: Tweaks to kvp_frame.h.
	* Tweaks to kvp_frame.h
	  - fix typos
	  - make #define aliases for asymetric getters/setters
	  - tweak comments
	  - comment on and discourage use of kvp_value_get_glist

	Chris Shoemaker's patch: Various comments and typo fixes.
	* Comments and typo fixes

	Chris Shoemaker's patch: Comments and tweaks for gnc-component-manager.
	* gnc-component-manager tweaks
	  - Warn if we approach design limitation of component manager
	  - pass GUID as const in gnc_gui_get_entity_events, change
	    prototype, callers, and docs
	  - Clarify comments about receiving events after entity life-cycle

	Chris Shoemaker's patch: Debugging aids for gnc-plugin-manager
	* gnc-plugin-manager tweaks
	  - tweak comments
	  - add debug traces
	  - add function gnc_plugin_get_name()

2005-02-02  Derek Atkins  <derek@ihtfp.com>

	Neil Williams' patch to clean up the test-book-merge:
	* src/engine/test/test-book-merge.c:
	  The first change is just simplification, the second change is the fix.

2005-01-30  Derek Atkins  <derek@ihtfp.com>

	Neil Williams' QOF sync patch:
	* This patch updates the QOF merge code to current QOF to bring
	  the g2 branch into sync. This update also makes
	  qof_book_merge_param_as_string output strings that are
	  compatible with QSF: using false instead of FALSE in string
	  output and using the QSF_XSD_TIME for the datestrings. KVP
	  handling will be added in the next version.

	* src/engine/Account.c:
	  This patch fixes: (QofAccessFunc)xaccAccountSetNonStdSCU in
	  src/engine/Account.c - that's a Set routine allocated as a
	  QofAccessFunc - the patch changes it to the appropriate Get
	  routine - the QofSetterFunc is OK.

	* src/engine/gnc-commodity.[ch]:
	  - Use gnc_commodity_table_find_namespace() throughout
	  - fix a crash when adding a new namespace to the commodity table.

	* src/engine/Account.c:
	  - updated implementation of qofAccountSetParent().

2005-01-26  Derek Atkins  <derek@ihtfp.com>

	Neil Williams' QSF Backend.

	* configure.in: add checks for libxml2 (requires >= 2.5.10)
	* src/backend/qsf: new backend directory
	* src/app-file/gnc-file.c: add new QSF error strings
	* src/backend/file/gnc-backend-file.[ch]: detect for QSF input files
	* src/engine/qofbackend.[ch]: know how to load the QSF backend

2005-01-22  Derek Atkins  <derek@ihtfp.com>

	Stephen Evanchik's patch to convert GncItemEdit to GObject/GLib
	and fix signal processing:

        * src/register/register-gnome/gnucash-item-edit.h:
          Made the gnc_item_edit_get_type function return GType
        * src/register/register-gnome/gnucash-item-edit.h:
          Made the gnc_item_edit_get_type function use GObject
        * src/register/register-gnome/gnucash-item-list.c:
          Removed an extra button_press_event handler

2005-01-10  Derek Atkins  <derek@ihtfp.com>

	Stephen Evanchik's Move GNCDateFormat to GLib patch:
        * src/gnome-utils/gnc-date-format.h:
          Added #include <glib.h>
          Added private member 'disposed' to GncDenseCal struct
          Added GNC_TYPE_DATE_FORMAT macro
        * src/gnome-utils/gnc-date-format.c:
          Converted the following functions to use GObject:
                gnc_date_format_get_type,
                gnc_date_format_class_init
          Created gnc_date_format_dipose function

2005-01-02  Derek Atkins  <derek@ihtfp.com>

	* src/engine/test/Makefile.am: don't explicitly add -lglib.

	* GNOME2_STATUS: Update from Paul Kronenwetter comparing g2 to HEAD/1.8.

2004-12-23  Derek Atkins  <derek@ihtfp.com>

	Chris Shoemaker's patch to silence gtk errors in dialog-budget-category.c:
	* we don't need to get our own account TreeModel and set it to our
	  new account TreeView, because gnc_tree_view_account_new gives us
	  a TreeView with the global account TreeModel already set.  Plus,
	  it already has the right TreeModelSort interface, which we are
	  counting on.
	* check for NULL before trying to gtk_entry_set_text().

2004-12-20  Derek Atkins  <derek@ihtfp.com>

	Stephen Evanchik's Double free bug in GncDenseCal:
        * src/gnome-utils/gnc-dense-cal.c:
          Remove double calls to gdc_free_all_mark_data
          in object cleanup,

	Stephen Evanchik's patch to Update scheduled transaction dialog:
        * src/gnome/dialog-sx-from-trans.c:
          - Removed per-button callbacks in favor of a
            dialog response callback
	  - Changed per-button callback functions to
	    simple 'action' functions that are called
	    in the response handler.
          - Migrated away from gtk_signal_connect
          - Removed references to GNOME 1.x dialog
          - C Style changes: 'open curly brace on same line'
          - Moved 'public' function gnc_sx_create_from_trans
	    to the bottom of the file

2004-12-19  Derek Atkins  <derek@ihtfp.com>

	Stephen Evanchik's Minor touch-ups to GNCCurrencyEdit:
        * src/gnome-utils/gnc-currency-edit.c:
          In gnc_currency_edit_get_type added 'const' keyword and
          final NULL entry in currency_edit_info declaration

          In gnc_currency_edit_new use g_type_class_ref and
          GNC_TYPE_CURRENCY_EDIT macro; move gtk_type_new to
          g_object_new

	Stephen Evanchik's patch to remove references to gtk_type_new
	in converted widgets:
        * src/gnome-utils/gnc-date-edit.h:
          Added GNC_TYPE_DATE_EDIT macro
        * src/gnome-utils/gnc-general-select.h:
          Added GNC_TYPE_GENERAL_SELECT macro
        * src/gnome-utils/gnc-date-edit.c:
        * src/gnome-utils/gnc-general-select.c:
        * src/gnome-utils/gnc-dense-cal.c:
          gtk_type_new -> g_object_new

2004-12-18  Derek Atkins  <derek@ihtfp.com>

	Stephen Evanchik's GncDenseCal GObject patch:
        * src/gnome-utils/gnc-dense-cal.h:
          Added #include <glib.h>
          Added private member 'disposed' to GncDenseCal struct
          Added GNC_TYPE_DENSE_CAL macro
        * src/gnome-utils/gnc-dense-cal.c:
          Converted the following functions to use GObject:
                gnc_dense_cal_get_type,
                gnc_dense_cal_class_init
          Renamed gnc_dense_cal_destroy to gnc_dense_cal_dispose

2004-12-17  Derek Atkins  <derek@ihtfp.com>

	Stephen Evanchik's GNCDateEdit GObject patch:
        * src/gnome-utils/gnc-date-edit.h:
          Removed #include <gnome.h>
          Added #include <glib.h>
          Added private member 'disposed' to GNCDateEdit struct
        * src/gnome-utils/gnc-date-edit.c:
          Converted the following functions to use GObject:
                gnc_date_edit_get_type,
                gnc_date_edit_class_init
          Renamed gnc_date_edit_destroy to gnc_date_edit_finalize
          Added gnc_date_edit_dispose function that handles
          child widget destruction
          Explicit casts to GTK_WIDGET in create_children

2004-12-16  Joshua Sled  <jsled@asynchronous.org>

	Stephen Evanchik's GncGeneralSelect GObject cleanup patch:
	* src/gnome-utils/gnc-general-select.h:
          Removed #include <glib-object.h>
          Added #include <glib.h>
          Added private member 'disposed' to GNCGeneralSelect
	* src/gnome-utils/gnc-general-select.c:
          Converted the following functions to use GObject:
                gnc_general_select_get_type,
                gnc_general_select_class_init
          Added gnc_general_select_dispose function that handles
          child widget destruction

2004-12-15  Joshua Sled  <jsled@asynchronous.org>

	* src/register/register-gnome/gnucash-item-edit.c
	(create_popup_toggle): realize popup-arrow widget so it gets
	displayed; correct tyop in "field" name.

2004-12-15  Joshua Sled  <jsled@asynchronous.org>

	* src/register/register-gnome/gnucash-item-edit.c
	(gnc_item_edit_set_cursor_pos): Re-add
	text-selection-via-mouse-drag support [still buggy in multiple
	ways; see GNOME2_STATUS for updates].

	* GNOME2_STATUS: Update status.

2004-12-14  Joshua Sled  <jsled@asynchronous.org>

	* src/business/business-gnome/business-gnome.scm
	(business-report-function): Change business-report menu path for
	reporting ui updates.

2004-12-05  Derek Atkins  <derek@ihtfp.com>

	New Account Dialog bug fix from Stephen Evanchik:
	* src/gnome/glade/account.glade:
	  - Made Accounts h-scroll box policy automatic.
	  - Reordered the containing table to two rows, one column

	* configure.in:
	  change the version number to 1.99 to make it different than HEAD.

2004-12-04  Derek Atkins  <derek@ihtfp.com>

	Fix some deprecated functions:
	* src/gnome-utils/gnc-gnome-utils.c:
	  gnome_pixmap_new_from_file -> gtk_image_new_from_file
	* src/business/business-gnome/dialog-date-close.c:
	  gnome_pixmap_new_from_file -> gtk_image_new_from_file
	  gnome_unconditional_pixmap_file -> gnome_program_locate_file
	* src/business/business-gnome/dialog-invoice.c:
	  gnome_unconditional_pixmap_file -> gnome_program_locate_file
	  gnome_pixmap_load_file -> gtk_image_new_from_file

2004-11-30  Derek Atkins  <derek@ihtfp.com>

	* src/gnome-utils/Makefile.am:
	  Add DESTDIR to the install hooks
	* src/gnome/gnc-plugin-page-account-tree.c: Fix spelling of "Account"

2004-10-31  Derek Atkins  <derek@ihtfp.com>

	Heath Martin's x86_64 patch:
	* lib/egg/egg-menu-merge.c:
	  change a gint to a gsize
	* src/gnome/gnc-plugin-page-account-tree.c:
	  use GINT_TO_POINTER() instead of a direct cast.

	* src/engine/gnc-budget-cat.c:
	* src/gnome/dialog-budget-workbench.c:
	  Fixes for ISO C90.  Fixes bug #153472.

2004-08-05  Derek Atkins  <derek@ihtfp.com>

	* src/engine/gnc-budget*:
	* src/gnome/*budget*:
	* src/gnome/glade/budget.glade:
	* src/gnome-utils/gnc-budget*:
	  Darin Willits' initial budget code.  Still not fully functional
	  but the basic UI is there.  See the GNOME2_STATUS for additional
	  information.

2004-07-20  Derek Atkins <derek@ihtfp.com>

	* lib/egg/eggtoolbar.c
	  Priit Laes' patch for C90 compliance (only the g2 portion).

2004-07-06  David Hampton  <hampton@employees.org>

	* various files: Merge in changes to HEAD from 2004-05-02
	  (gnome2-merge-8) through yesterday (gnome2-merge-9).

2004-06-13  Derek Atkins  <derek@ihtfp.com>

	* configure.in: add support for gtkhtml-3.1, remove src/experimental
	* src/Makefile.am: remove experimental subtree
	* src/app-file/gncmod-app-file.c: don't need gnc-mdi-utils.h
	* src/gnome/gnc-window.c: register the gnc-mdi progress handler
	* src/gnome-utils/gnc-mdi-utils.[ch]: add a progress handler
	  that gets set by the gnc-window code (just like in gnc-file)
	  to remove a circular dependency.

2004-05-31  Joshua Sled  <jsled@asynchronous.org>

	* src/report/report-gnome/gnc-plugin-page-report.c
	(gnc_plugin_page_report_set_fwd_button),
	(gnc_plugin_page_report_set_back_button): forw/back action sensitivity
	(gnc_plugin_page_report_*_cb): Provide functional backing
	[forw/back/reload/stop/export/options/print].

2004-05-31  Joshua Sled  <jsled@asynchronous.org>

	* src/report/report-gnome/gnc-plugin-page-report-ui.xml: Add
	report UI decl.

	* src/report/report-gnome/gnc-plugin-page-report.c
	(gnc_plugin_page_report_init),
	(gnc_plugin_page_report_merge_actions),
	(gnc_plugin_page_report_unmerge_actions): Create and [un]merge report
	Actions + toolbar items on page-transitions.

2004-05-31  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/top-level.c (gnc_html_register_url_cb): Modify to
	handle hyperlinks better.

	* src/engine/qofbook.c (qof_book_get_entity_by_guid): Add generic
	GUID lookup [without entity-type being known] to handle historical
	code.

2004-05-30  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome-utils/gnc-mdi-utils.c (gnc_mdi_show_progress): Proxy
	progress-display call through to gnc-window code.
	(gnc_ui_get_toplevel): Re-implement gnc_ui_get_toplevel in a
	less-correct but valid way.
	* src/report/report-gnome/gnc-plugin-page-report.c
	(gnc_plugin_page_report_create_widget): Set the top-level window
	so progress-render calls work during report render-time.

2004-05-24  Derek Atkins  <derek@ihtfp.com>

	* src/gnome/dialog-new-user.c:
	* src/gnome/gnc-embedded-window.c:
	* src/gnome/gnc-main-window.c:
	* src/gnome/gnc-plugin-page-account-tree.c:
	* src/gnome-utils/dialog-transfer.c:
	* src/gnome-utils/gnc-query-list.c:
	  Vitaly Lipatov's C-construct patch --
	  During compiling CVS version of gnucash (tag gnucash-gnome2-dev)
	  I have found some mistakes makes error with GCC compiler.

	* lib/egg/Makefile.am: don't define *_DISABLE_DEPRECATED when
	  building libegg.  It causes a build failure on FC2 with
	  Gnome-2.6/Gtk-2.4 because some Gtk-2.2 functions have been
	  deprecated.  Oops!

2004-05-15  Joshua Sled  <jsled@asynchronous.org>

	* src/report/report-gnome/gnc-plugin-page-report.c
	(gnc_plugin_page_report_class_init): Add 'report_id'
	object-property for page-c'tor.
	(gnc_plugin_page_report_setup): Setup the page's report at creation time so
	we can get the correct tab labels.

	* src/gnome-utils/gnc-mdi-utils.c (gnc_mdi_show_progress): Weaken
	assertion while code isn't fully changed over, yet.
	(gnc_ui_get_toplevel): Comment out b0rken MDI-related code.

2004-05-05  Joshua Sled  <jsled@asynchronous.org>

	* src/report/report-gnome/window-report.h: Comment interface with
	recon about usage in the source tree.

	* src/report/report-gnome/gnc-plugin-page-report.c: Copy
	window-report.c implementation over to here, rename, and get
	somewhat working again. At this point, report-menu invocations
	result in a tab being created, and displaying the error message.

2004-05-05  David Hampton  <hampton@employees.org>

	Fixes from Christian Neumair <chris@gnome-de.org>.

	* src/gnome/dialog-new-user.c:
	* src/gnome/window-reconcile.c:
	* src/gnome/glade/account.glade:
	* src/gnome/glade/newuser.glade:
	* src/gnome-utils/dialog-transfer.[ch]:
	* src/gnome-utils/transfer.glade: HIGify several dialogs.

2004-05-05  Derek Atkins  <derek@ihtfp.com>

	* lib/egg/egg-menu-merge.c:
	  we don't have a "ui" so dont notify ourself when merging.
	* src/gnome-utils/gnc-menu-extensions.scm:
	  Use empty strings instead of #f for menu items so we don't
	  cause problems later where we expect to get an actual string.
	* src/report/report-gnome/report-gnome.scm:
	  Make sure we actually have a menu-path list!

2004-05-03  David Hampton  <hampton@employees.org>

	Fixes from Christian Neumair <chris@gnome-de.org>.

	* src/gnome-search/search-date.c: Fix a crash.

	* src/gnome-utils/gnc-tree-model-account.c: Fix memory leaks.

	* src/register/register-gnome/gnucash-sheet.c: Fix popup menu.

2004-05-02  David Hampton  <hampton@employees.org>

	* various files: Merge in changes to HEAD from 2004-03-03
	  (gnome2-merge-7) through today (gnome2-merge-8).

	* src/business/business-core/Makefile.am:
	* src/business/business-gnome/Makefile.am:
	* src/import-export/binary-import/Makefile.am: Work around
	  problems with libltdl3.

	* src/import-export/hbci/druid-hbci-initial.c: Eliminate a couple
	  of compiler warning messages.

2004-05-02  Joshua Sled  <jsled@asynchronous.org>

	* src/report/report-gnome/gnc-plugin-page-report.[ch]: Plugin-Page
	  for a report instance; yet to be finished.

	* src/report/report-gnome/report-gnome.scm
	  (gnc:add-report-template-menu-items): Update menu path
	  constructors to have the correct gnome2-ui-merging menu path
	  value.

	* src/gnome-utils/gnc-menu-extensions.[ch]: Partially-completed
	  changes for using the menu/UI merging code for setting up
	  extensions menu.

	* src/gnome-utils/gnc-html.[ch]: Revert gtkhtml2 changes; restoring
	  gtkhtml1 version of the gnc-html.c code allows compatability
	  with gtkhtml3.

	* src/gnome/ui/gnc-main-window-ui.xml: Add testing MiscAction,
	  MiscTestAction.

	* src/gnome/gnc-main-window.c (gnc_main_window_cmd_test): Add test
	  menu item for GtkHtml3-window display.
	* src/gnome/gnc-main-window.c (gnc_main_window_setup_window): Add
	  testing code to merge/display menu item, call the
	  extensions_menu setup routine.

	* configure.in (DB_LIBS): move from gtkhtml2 to gtkhtml3.

	* lib/egg/egg-menu-merge.c (egg_menu_merge_add_ui):
	  Merge egg_menu_merge_add_ui from gtk-2.4.0 GtkUIManager.

2004-04-10  Derek Atkins  <derek@ihtfp.com>

	* src/app-utils/gnc-druid-provider-desc.h: add a comment about
	  the callback functions.
	* src/import-export/Makefile.am: remove duplicate files, add
	  import format gnome provider.
	* src/import-export/gnc-import-format-gnome.c: add a new format
	  provider to let the user choose a date or numeric format.
	* src/import-export/import-provider-format.glade:  glade file
	  for the format provider

	* src/import-export/Makefile.am: add missing header file to noinst list
	* src/import-export/gnc-import-desc-format.[ch]: callbacks should
	  take a GNCImportFormatCB*.
	* src/import-export/gnc-import-format-gnome.c: fix a couple bugs.
	  - make sure we only include available choices.
	  - send the right callback.
	* src/import-export/gncmod-generic-import.c: register the format provider
	* src/import-export/qif-import/Makefile.am: include and link against
	  generic import library (for test druid)
	* src/import-export/qif-import/gnc-druid-test.c: add "format" provider
	  to druid test

2004-03-05  Tomas Cernaj  <tcernaj@gmx.de>

	* src/register/register-gnome/gnucash-grid.c:
	  Fix bug in the grid's update method: Called
	  gnome_canvas_item_request_update() while updating.

2004-03-04  Tomas Cernaj  <tcernaj@gmx.de>

	* src/register/register-gnome/gnucash-cursor.c:
	* src/register/register-gnome/gnucash-cursor.h:
	* src/register/register-gnome/gnucash-grid.c:
	* src/register/register-gnome/gnucash-grid.h:
	* src/register/register-gnome/gnucash-header.h:
	* src/register/register-gnome/gnucash-sheet.c:
	* src/register/register-gnome/gnucash-sheet.h:
	  Convert to new GType-/GObject-System.

2004-02-09  Derek Atkins  <derek@ihtfp.com>

	* src/import-export/Makefile.am: added new 'format' provider desc
	* src/import-export/gnc-import-format-cb.[ch]:
	  Callback object for the import format provider
	* src/import-export/gnc-import-desc-format.[ch]:
	  Descriptor for the Import Format Provider, used to choose
	  Date and Number formats.

2004-02-08  Derek Atkins  <derek@ihtfp.com>

	* src/app-utils/gnc-druid-provider-desc-file.c:
	* src/app-utils/gnc-druid-provider-desc-multifile.c:
	  don't need to cast to the superclass -- just use it directly
	* src/gnome-utils/Makefile.am:
	  add multifile sources and glade file
	* src/gnome-utils/gnc-druid-provider-file-gnome.c:
	  Call the next_cb with the proper argument (no clue why the compiler
	  didn't catch this before)
	* src/gnome-utils/gnc-druid-provider-multifile-gnome.[ch]:
	* src/gnome-utils/druid-provider-multifile.glade:
	  Added code and glade file to implement the multifile provider
	* src/gnome-utils/gncmod-gnome-utils.c:
	  Register the file and multifile providers
	* src/import-export/qif-import/gnc-druid-test.c:
	  Add the file and multifile providers to the druid test

	* src/app-utils/gnc-druid-provider-desc-edge.c:
	  don't need to cast to the cuperclass -- just use it directly.

	* src/app-utils/gnc-druid-provider-desc/file.[ch]:
	  add a history_id as a separate member for where to store
	  file choice history
	* src/gnome-utils/gnc-druid-provider-file-gnome.c:
	  use new history_id member
	* src/import-export/qif-import/gnc-druid-test.c:
	  set file history_id

	* src/gnome-utils/gnc-druid-gnome.c: remove debugging printfs

	* src/app-utils/gnc-druid.[ch]:
	  Make sure the jump code CAN allow a recursive jump originating
	  and ending in the same provider.  Put a counter around the
	  jump function to make sure we don't walk the tree while we're
	  jumping.  This will let the last jump win correctly.
	* src/gnome-utils/gnc-druid-provider-multifile-gnome.c
	  handle prev-page properly by not allowing you to jump
	  back while you have any files in the list.

2004-02-07  Derek Atkins  <derek@ihtfp.com>

	* src/app-utils/gnc-druid-provider-desc-file.[ch]:
	  Add 'glob' option (should we glob the filename?)
	  Add a forward pointer to the multifile if we allow multiple file selection
	* src/app-utils/gnc-druid-provider.c:
	  Change the class functions so that children don't need to override
	  all the page-movement functions if they don't need to do so.
	* src/app-utils/gnc-druid.c:  handle jump_to_provider properly
	* src/gnome-utils/Makefile.am: added file-chooser provider
	* src/gnome-utils/gnc-druid-provider-edge-gnome.[ch]:
	  use basic-gobject framework to reduce the code size
	  remove non-necessary overrides
	  remove non-ncessary definitions
	* src/gnome-utils/gnc-druid-provider-file-gnome.[ch]:
	  Add a new provider that allows the user to select a file.

2004-01-29  Derek Atkins  <derek@ihtfp.com>

	* src/app-utils/gnc-druid-provider-*.[ch]:
	  - move the remove_file() method from the MultiFile to the File Provider
	  - add a returned gpointer this_file to the file provider callback.

2004-01-23  Derek Atkins  <derek@ihtfp.com>

	* src/app-utils/Makefile.am:
	  Add new multifile provider descriptor
	* src/app-utils/gnc-druid-provider-desc-multifile.[ch]:
	  New multi-file provider descriptor

2004-01-22  Derek Atkins  <derek@ihtfp.com>

	* src/app-utils/Makefile.am:
	  Add basic gobject header.
	* src/app-utils/gnc-basic-gobject.h: provide some macros to
	  simplify some general gobject creation, for example simple
	  objects with just a get_type() and new() methods.
	* src/app-utils/gnc-druid-cb.h:
	  need to include gnc-druid-provider.h directly
	* src/app-utils/gnc-druid-cb.c:
	  implement in terms of the new gnc-gobject macros
	* src/app-utils/gnc-druid-provider.c:
	* src/app-utils/gnc-druid-provider-desc.c:
	* src/app-utils/gnc-druid-provider-desc-edge.c:
	  implement in terms of the new gnc-gobject macros
	* src/app-utils/gnc-druid-provider-desc.h:
	  re-add the various callback routines in terms of a new typedef
	* src/app-utils/gnc-druid-provider.h:
	  need to include gnc-druid-provider-desc.h directly
	* src/import-export/Makefile.am:
	  Add new files to implement the format-chooser provider framework.
	* src/import-export/import-prov-desc-format.[ch]:
	* src/import-export/import-prov-format-cb.[ch]:

	* src/app-utils/Makefile.am:
	  add new-file druid provider (and callback)
	* src/app-utils/gnc-druid-provider-desc-file.[ch]:
	  provider descriptor for enter-file provider
	* src/app-utils/gnc-druid-provider-file-cb.[ch]:
	  provider callback for enter-file provider

2004-01-20  Derek Atkins  <derek@ihtfp.com>

	* src/app-utils/gnc-druid-provider-desc.h: add a pointer to the
	  provider created from this descriptor.
	* src/app-utils/gnc-druid-provider.c: set the provider pointer
	  in the descriptor object.
	* src/app-utils/gnc-druid.[ch]:
	  - add pointer to the current provider list node.
	  - add API to specifically jump to a particular provider
	  - restructure code to reduce duplication
	* src/import-export/import-parse.h: add GNCIF_NONE

2004-01-16  Derek Atkins  <derek@ihtfp.com>

	* src/gnome-utils/gnc-druid-gnome.[ch]: move the next/prev signals to
	  the pages.  Add a cancel callback to the pages (the druid's main
	  cancel callback is never called).  Now we get our signals
	  correct.  Save a reference to the window so we can destroy it..
	  Use gtk_widget_destroy() instead of g_object_unref().
	* src/import-export/qif-import/gnc-druid-test.[ch]: add some code
	  to test the new druid framework.  Build's a test druid.
	* src/import-export/qif-import/Makefile.am: build new test code
	* src/import-export/qif-import/gnc-plugin-qif-import*: hook in
	  the new druid test code; add a new menu item to test the druid.

2004-01-14  Derek Atkins  <derek@ihtfp.com>

	* src/app-utils/gnc-druid-provider-desc-edge.[ch]: add api to
	  build the provider-desc in one function.
	* src/app-utils/gnc-druid-provider.[ch]: remove get_pages API;
	  the sub-class should just insert the list of pages and let
	  us deal with it.  Also added a last_page() method.
	* src/app-utils/gnc-druid.c: make sure to delete the providers
	  when we shut down.
	* src/gnome-utils/gnc-druid-gnome*.h: move the definition of the
	  gnome UI to a header that actually get's installed as opposed to
	  an internal header.
	* src/gnome-utils/gnc-druid-provider-edge-gnome.[ch]: Implement
	  a gnome-druid edge-page (first/last page in the druid).  Probably
	  still need to hook into the next/prev buttons.

	* gnc-druid.[ch]: add gnc_druid_{next,prev}_page() APIs to choose the
	  default next/previous page in the druid.  This will automatically
	  walk through the providers to find the next real page.
	* gnc-druid-gnome.c: hook in handlers for "next" and "back" signals
	  for default page moves.  This should allow us to constantly keep
	  track of the current provider.

2004-01-13  Derek Atkins  <derek@ihtfp.com>

	* configure.in: pull in gobject with glib
	* src/app-utils/Makefile.am: add the gnc-druid files
	* src/app-utils/gnc-druid*: an abstract druid creation framework.

	* src/app-utils/Makefile.am: add the edge provider description.
	* src/app-utils/gnc-druid-provider-desc-edge.*: provider descriptor
	  for edge pages (the first and last page of the druid).
	* src/app-utils/gnc-druid*:
	  - add class macros
	  - add a title to the basic provider desc and clean it up.

	* src/gnome-utils/Makefile.am: add preliminary gnome gnc-druid impl.
	* src/gnome-utils/gnc-druid-gnome.[ch]:  gnome implementation of gnc-druid
	* src/app-utils/gnc-druid*:
	  - move the provider-building into the generic class and add an
	    "append_provider" method to the druid class.  Use that when
	    building the druid.
	  - add a ui_type to the druid class and use that when building providers.

	* src/app-utils/gnc-druid-provider.[ch]: add get_pages() class method.
	  (I decided I don't need a special gnc-druid-provider-gnome just to
	   add a get_pages method, as everything would need it anyways).
	* src/gnome-utils/gnc-druid-gnome.c: use the get_pages() method
	  to actually build the druid.

	* src/gnome-utils/gncmod-gnome-utils.c: register the gnome-druid and
	  edge provider.

2004-01-06  Derek Atkins  <derek@ihtfp.com>

	* src/engine/qofinstance.c: revert fix from 01-01, because it's wrong.
	  Fix the actual problem, all the ...ReturnGUID() #define's which
	  don't check that it's passed a NULL value.
	* src/engine/Transaction.h:
	* src/engine/Account.h:
	  Fix ...ReturnGUID() to check whether it was passed a NULL object
	  and, if so, return the null GUID instead of crashing.
	* src/business/business-core/gncCustomer.h:
	* src/business/business-core/gncEmployee.h:
	* src/business/business-core/gncInvoice.h:
	* src/business/business-core/gncJob.h:
	* src/business/business-core/gncTaxTable.h:
	* src/business/business-core/gncVendor.h:
	  Fix ...RetGUID() to check whether it was passed a NULL object
	  and, if so, return the null GUID instead of crashing.

2004-01-01  Derek Atkins  <derek@ihtfp.com>

	* src/engine/qofinstance.c: return a "valid" GUID even if passed a NULL
	  object, because lots of code assumes you can get a guid all the time.
	  So, just return guid_null() instead of NULL.  Fixes a SEGV.

2003-12-13  David Hampton  <hampton@employees.org>

	* src/gnome-utils/gnc-tree-view-commodity.c:
	* src/gnome-utils/gnc-tree-view-price.c: Update sorting functions.

2003-11-30  David Hampton  <hampton@employees.org>

	* lib/egg/eggtreemodelfilter.c: Fixes from upstream.

	* src/engine/qofsession.[ch]:
	* src/gnome/gnc-main-window.c:
	* src/app-file/gnc-file.c: Add support for callback hooks when a
	session is closed.

	* src/app-utils/gnc-ui-util.[ch]: Expose a previously internal
	function for getting account balances.

	* configure.in:
	* src/gnome-utils/Makefile.am:
	* src/gnome-utils/gnc-gconf-utils.[ch]:
	* src/gnome-utils/gnc-gnome-utils.c:  Add some utility functions.

	* src/gnome-utils/gnc-tree-model-account.[ch]:
	* src/gnome-utils/gnc-tree-view-account.c:
	* src/gnome-utils/gnc-tree-view-common.[ch]:
	* src/scm/main-window.scm: Extract basic view manipulation
	functions into a separate file.  Clean up code and regularize
	naming scheme.  Add a new column.

	* src/engine/gnc-pricedb.[ch]: Add a couple of functions.

	* configure.in:
	* src/gnome/dialog-commodities.c:
	* src/gnome/dialog-price-edit-db.c:
	* src/gnome/glade/commodities.glade:
	* src/gnome/glade/price.glade:
	* src/gnome/schemas/*:
	* src/gnome-utils/Makefile.am:
	* src/gnome-utils/gnc-tree-model-commodity.[ch]:
	* src/gnome-utils/gnc-tree-model-price.[ch]: Convert the
	commodities and prices dialog over to the gtk2 based MVC system.

	* src/report/Makefile.am:
	* src/report/report-gnome/dialog-style-sheet.c:
	* src/report/report-gnome/gw-report-gnome-spec.scm:
	* src/report/report-gnome/report.glade: Rework the stylesheets
	dialog to make it easier to implement in gtk2.

	* src/report/stylesheets/Makefile.am:
	* src/report/stylesheets/gnc-plugin-stylesheets-ui.xml:
	* src/report/stylesheets/gnc-plugin-stylesheets.[ch]:
	* src/report/stylesheets/gncmod-stylesheets.c:
	* src/scm/main.scm: Install stylesheet menus using the new plugin
	system.

2003-11-28  David Hampton  <hampton@employees.org>

	* src/engine/gnc-commodity.c: Clarify variable names in data
	strutures.  Promote the commodity namespace to a externally
	visible opaque object.  Make commodities and namespaces Qof
	Instances.  Add more events related to commodities and namespaces.
	Require the book when creating a new commodity.

	* <bunch-o-files>: Update to provide the book when creating a new
	commodity.

2003-11-08  David Hampton  <hampton@employees.org>

	* src/app-file/gnc-file.c: Give immediate feedback when the user
	clicks on the quit button.

	* src/engine/gnc-event.c: Protect the generate_event function from
	a handler unregistering itself during a callback.

	* src/gnome-utils/dialog-account.c: Don't access the account tree
	model directly.  Use the view functions no new functionality can
	easily be added to the view.

	* src/gnome-utils/dialog-options.c: Clean up after the main
	preferences dialog is closed.

	* src/gnome-utils/gnc-date-edit.c:
	* src/gnome-utils/gnc-date-format.c:
	* src/gnome-utils/gnc-dense-cal.c:
	* src/gnome-utils/gnc-general-select.c:
	* src/gnome-utils/gtkselect.c: Convert some destroy functions to
	finalize functions.  Destroy can be called multiple times in gtk2.

2003-11-01  David Hampton  <hampton@employees.org>

	* src/gnome/druid-hierarchy.c:
	* src/gnome-utils/dialog-account.c:
	* src/gnome-utils/gnc-tree-view-account.[ch]: Collapse knowledge
	of the account tree model layering into one place.

2003-10-26  David Hampton  <hampton@employees.org>

	* src/gnome/druid-stock-split.c:
	* src/gnome-utils/dialog-transfer.c:
	* src/gnome-utils/gnc-tree-view-account.[ch]: Simplify the way
	filters are applied to an account tree view.

	* src/gnome/gnc-plugin-page-register.c: Start the "double line"
	menu item in the correct state.

	* src/gnome/dialog-tax-info.c:
	* src/gnome/glade/tax.glade: Get "Tax Options" working in the g2
	port.

	* src/gnome/gnc-main-window.c:
	* src/gnome/glade/acctperiod.glade:
	* src/gnome/ui/gnc-main-window-ui.xml: Add the "Close Books" menu
	item.

	* src/engine/qofid.[ch]: Fix another crash caused by qof changes.

2003-10-25  David Hampton  <hampton@employees.org>

	* src/gnome-utils/dialog-account.[ch]:
	* src/gnome/gnc-plugin-page-account-tree.c: Fix problems with the
	modal form of the edit account dialog.  Make AccountWindow an
	internal data structure. No-one uses it anyway.

	* src/gnome-utils/gnc-icons.c: Register our icons as stock icons.

	* src/gnc-ui.h:
	* src/gnome/dialog-commodities.c:
	* src/gnome-utils/commodity.glade:
	* src/gnome-utils/dialog-account.c:
	* src/gnome-utils/dialog-commodity.c: The GNC_RESPONSE_xxx names
	should match the GNC_STOCK_xxx names.

	* src/gnome-utils/gnc-tree-view-account.[ch]: Function to add a
	new column to an account tree to display kvp data.

	* src/import-export/generic-import.glade:
	* src/import-export/qif-import/qif.glade: Put back the GtkCLists
	that the glade upgrade tool removed.  Update for gtk2 dialogs.

	* src/import-export/import-account-matcher.c: Use the account tree widget. Update for
	gtk2 dialogs.

	* src/import-export/import-format-dialog.c:
	* src/import-export/import-main-matcher.c:
	* src/import-export/import-match-picker.c:
	* src/import-export/qif-import/dialog-account-picker.c: Update for
	gtk2 dialogs.

	* src/import-export/mt940:
	* src/import-export/ofx: Install menus using the new plugin
	system.  Cleanup some gnome2 errors.

	* src/gnome/druid-stock-split.c: Fix a couple crashes.  Remove
	debugging.

	* src/gnome-utils/gnc-tree-view-account.c: Flush the tree when a
	visibility filter is applied.  Prevents unwanted nodes from
	appearing.

2003-10-24  David Hampton  <hampton@employees.org>

	* lots of files: Sync up at the gnome2-merge-4 tag.

2003-10-23  David Hampton  <hampton@employees.org>

	* src/engine/Group.c: Send an event when two accounts are merged.

	* src/gnome-utils/gnc-tree-model-account.c: Add debugging.

	* src/gnome-utils/gnc-tree-view-account.c: Handle an attempt to
	select the NULL account.

2003-10-20  David Hampton  <hampton@employees.org>

	* src/app-file/gnome/gnc-file-dialog.c: Rewrite using the new
	gtk_dialog_run function.

	* src/gnome/gnc-main-window.c: Fix the code for creating a new
	window and moving the current notebook tab to it.

	* src/gnome-utils/dialog-options.c: Bug fixes related to use of
	GtkTextView widget.

	* src/gnome/gnc-main-window.c:
	* src/gnome/ui/gnc-main-window-ui.xml:
	* src/scm/main-window.scm:
	* src/scm/main.scm: Migrate the "File->Properties" menu item to g2.

2003-10-19  David Hampton  <hampton@employees.org>

	* src/engine/gnc-trace.[ch]: Add a new module for HBCI.

	* src/gnome/gnc-main-window.[ch]:
	* src/gnome/gnc-plugin-page-register.[ch]:
	* src/gnome/gnc-plugin-page-account-tree.[ch]:
	* src/gnome-utils/gnc-gnome-utils.[ch]: Add signals for a new page
	being added to a window, and for a change of the current page.
	Add a signal when an account is selected.  Extract common
	functions.  Expose a function.

	* src/gnome/gnc-plugin-page.[ch]: Add a new function for accessing
	the name of a plugin page.

	* src/import-export/hbci: Install menus using the new plugin
	system.  Cleanup some gnome2 errors.

	* configure.in:
	* src/gnome/gnc-plugin-account-tree.c:
	* src/gnome/gnc-plugin-file-history.c:
	* src/gnome/gnc-plugin-page-account-tree.c:
	* src/gnome/gnc-plugin-page-register.c:
	* src/gnome/gnc-plugin-register.c:
	* src/gnome-utils/gnc-tree-model-account.c:
	* src/gnome-utils/gnc-tree-view-account.c:
	* src/import-export/hbci/gnc-plugin-hbci.c:
	* src/import-export/qif-import/druid-qif-import.c: Configure time
	option to dump reference counts when gnucash exits.

	* src/import-export/log-replay: Install menu item using the new
	plugin system.

2003-10-18  David Hampton  <hampton@employees.org>

	* src/app-utils/gnc-ui-util.h:
	* src/gnome-utils/gnc-tree-model-account.[ch]:
	* src/gnome-utils/gnc-tree-view-account.[ch]: Add support for the
	"placeholder" column.

	* src/gnome-utils/gnc-tree-model-example-account.c: Iters are
	persistent. Mark them as such.

	* src/gnome-utils/gnc-tree-model-selection.c: Bug fixes.

	* src/gnome/druid-hierarchy.c: Overhaul.

	* src/gnome/glade/account.glade: Minor tweaks for druid overhaul.


2003-10-17  David Hampton  <hampton@employees.org>

	* src/register/register-gnome/gnucash-sheet.c: Can now enter text
	in the register.  Fix auto-completion.  Fix selection of a
	transaction a/o cell when using the mouse.  Use gtk2 functions
	instead of deprecated gtk1 functions.

	* src/register/register-gnome/gnucash-grid.c: Any cell being
	edited should use normal text.  Italic text is only for help
	items.

2003-10-12  David Hampton  <hampton@employees.org>

	* src/gnome/dialog-scheduledxaction.c:
	* src/gnome/dialog-sxsincelast.c:
	* src/gnome/gnc-embedded-window.[ch]: Always provide a parent
	window. Split the accelerators out into a separate argument.

	* src/gnome/Makefile.am:
	* src/gnome/gnc-window.[ch]: Add an interface for accessing the
	status bar and progress bar, regardless of whether the window is a
	main window or an embedded window.

	* src/gnome/gnc-embedded-window.c:
	* src/gnome/gnc-main-window.c: Implement the new window interface.

	* src/gnome/gnc-plugin-page-register.c: Use the new window
	interface to update the status bar when moving through the
	register.

	* src/gnome/gnc-main-window.c:
	* src/gnome/gnc-plugin-page-register.c:
	* src/gnome/gnc-plugin-page.[ch]: Update status bar code to handle
	multiple windows, and to track page switches within a window.

	* src/app-file/gncmod-app-file.c:
	* src/gnome/gnc-main-window.c:
	* src/gnome/gnc-plugin-file-history.c:
	* src/gnome/gnc-window.[ch]:
	* src/gnome-utils/gnc-mdi-utils.c: Get the progress bar working.

2003-10-11  David Hampton  <hampton@employees.org>

	* src/business/business-gnome/gnc-plugin-business.[ch]:
	* src/gnome/gnc-plugin-account-tree.[ch]:
	* src/gnome/gnc-plugin-manager.c:
	* src/gnome/gnc-plugin-register.[ch]:
	* src/gnome/gnc-plugin.[ch]:
	* src/import-export/qif-import/gnc-plugin-qif-import.[ch]: Derive
	the GncPlugin widget from a GObject instead of a GInterface.
	Collapse common functions into the base GncPlugin class.

	* src/gnome/Makefile.am:
	* src/gnome/gnc-plugin-file-history.[ch]:
	* src/gnome/ui/Makefile.am:
	* src/gnome/ui/gnc-plugin-file-history-ui.xml: Implement file
	history for new window plugin system.

	* src/app-file/gnc-file-history.h:
	* src/app-file/gnome/Makefile.am:
	* src/app-file/gnome/gnc-file-history.c:
	* src/gnome/top-level.c:
	* src/gnome/window-main.c:
	* src/gnome/gnc-main-window.[ch]:
	* src/gnome/ui/gnc-main-window-ui.xml: Changes for new file history
	plugin.

2003-10-10  David Hampton  <hampton@employees.org>

	* src/gnome/gnc-plugin-page.[ch]: Support a list of books
	referenced by each page.

	* src/gnome/gnc-main-window.c: Track installed pages on a
	per-window basis.  Require all installed pages to specify what
	books they reference.  Add an event handler to close pages when
	books are deleted.

	* src/gnome/gnc-plugin-page-account-tree.c:
	* src/gnome/gnc-plugin-page-register.c: Specify books in use by
	the page.

2003-10-09  David Hampton  <hampton@employees.org>

	* src/engine/FreqSpec.c:
	* src/engine/test/test-freq-spec.c:
	* src/gnome-utils/gnc-dense-cal.c: Use new glib names for several
	functions.

2003-10-07  David Hampton  <hampton@employees.org>

	* src/business/business-gnome/Makefile.am:
	* src/business/business-gnome/gnc-plugin-business.c:
	* src/gnome/Makefile.am:
	* src/gnome/gnc-embedded-window.c:
	* src/gnome/gnc-main-window.[ch]:
	* src/gnome/gnc-plugin-*.c:
	* src/gnome/window-acct-tree.c:
	* src/gnome-utils/gnc-gnome-utils.[ch]:
	* src/gnome-utils/gnc-icons.c:
	* src/import-export/qif-import/Makefile.am:
	* src/import-export/qif-import/gnc-plugin-qif-import.c:
	* src/report/report-gnome/Makefile.am: Collapse code for ui
	filename lookup/loading/error checking.

2003-10-06  David Hampton  <hampton@employees.org>

	* src/register/register-gnome/gnucash-style.c: Fix color bleed
	past end of the register.

	* src/gnome/gnc-split-reg.c: Fix register sizing problems.  Minor
	cleanup of widget packing.

	* src/gnome/dialog-scheduledxaction.c:
	* src/gnome/gnc-embedded-window.c:
	* src/gnome/gnc-plugin-page-register.c:
	* src/gnome/glade/sched-xact.glade: Minor cleanup of widget
	packing.

	* src/scm/path.scm: Update config file names for new version
	number.

2003-09-30  David Hampton  <hampton@employees.org>

	* src/engine/Query.[ch]:
	* src/engine/qofquery.[ch]:
	* src/engine/qofquerycore.[ch]: Add code to extract the date terms
	from a query.

	* src/gnome/Makefile.am:
	* src/gnome/gnc-embedded-window.[ch]: New support for an embedded
	'window'.  This 'window' can only show a single plugin page.
	Perfect for the embedded registers in the scheduled transaction
	dialogs.

	* src/gnome/gnc-plugin-page-register.[ch]:
	* src/gnome/glade/register.glade:
	* src/gnome/ui/gnc-main-window-ui.xml:
	* src/gnome/ui/gnc-plugin-page-register-ui.xml: Flesh out the new
	register gui code.

	* src/gnome/dialog-print-check.[ch]:
	* src/gnome/dialog-scheduledxaction.c:
	* src/gnome/dialog-sxsincelast.c:
	* src/gnome/top-level.c:
	* src/gnome/window-reconcile.c:
	* src/gnome/glade/sched-xact.glade:
	* src/gnome/ui/Makefile.am:
	* src/gnome/ui/gnc-plugin-page-sxregister-ui.xml:
	* src/gnome/ui/gnc-sxed-to-create-window-ui.xml:
	* src/gnome/ui/gnc-sxed-window-ui.xml: Use the new register gui
	code.

	* src/gnome/gnc-plugin-page.h:
	* src/gnome/gnc-main-window.[ch]: Track all installed pages.
	Don't try to installed a page that is already present.  Just
	select the existing page and raise the appropriate window to the
	top.

	* src/gnome/gnc-plugin-page-account-tree.c: Intelligently
	determine the parent window value.

	* src/gnome/ui/gnc-plugin-page-account-tree-ui.xml: Move a menu
	entry.

	* src/gnome-utils/gnc-query-list.c: Fix missing functionality.

	* src/register/register-gnome/gnucash-item-edit.c: Fix a crash.

	* src/gnome/gnc-split-reg.[ch]:
	* src/gnome/window-register.[ch]: Remove some no-longer-used code.

	* src/gnome/gnc-plugin-account-tree.[ch]:
	* src/gnome/gw-gnc-spec.scm:
	* src/scm/main-window.scm: Automatically open the account tree
	page at startup.

2003-09-28  David Hampton  <hampton@employees.org>

	* src/gnome/gnc-main-window.c:
	* src/gnome/gnc-plugin-page-account-tree.[ch]:
	* src/gnome/gnc-plugin-page-register.[ch]:
	* src/gnome/gnc-plugin-page.[ch]: Derive the GncPluginPage widget
	from a GObject instead of a GInterface.

	* src/gnome/gnc-plugin-page-account-tree.c:
	* src/gnome-utils/gnc-tree-view-account.[ch]: Double clicking an
	account in the account tree now opens it.  Handle the new gtk2
	'popup-menu' signal.

	* src/register/register-gnome/gnucash-sheet.c: Use the new glib2
	methods to create objects.

2003-09-27  David Hampton  <hampton@employees.org>

	* lib/egg/egg-action-group.[ch]:
	* lib/egg/egg-radio-action.[ch]:
	* src/business/business-gnome/gnc-plugin-business.c:
	* src/gnome/gnc-main-window.[ch]:
	* src/gnome/gnc-plugin-account-tree.c:
	* src/gnome/gnc-plugin-page-account-tree.c:
	* src/gnome/gnc-plugin-page-register.c:
	* src/gnome/gnc-plugin-register.c:
	* src/gnome/window-acct-tree.c:
	* src/import-export/qif-import/gnc-plugin-qif-import.c: Track
	changes to 'actions' in gtk 2.4.

2003-09-21  David Hampton  <hampton@employees.org>

	* lib/egg/egg-menu-merge.c: Back port "smart separators" from the
	gtk 2.4 code.

	* src/gnome-utils/gnc-tree-model-account.[ch]: Check that a new
	account belongs to the account tree being displayed by this
	widget.  It may belong in the scheduled transaction account tree.

	* src/gnome/gnc-main-window.c:
	* src/gnome/gnc-plugin-page-account-tree.c:
	* src/gnome/gnc-plugin-page.[ch]: Add a new variable to the plugin
	pages to hold a pointer to the enclosing window.

2003-09-20  David Hampton  <hampton@employees.org>

	* src/gnome/dialog-scheduledxaction.c: Eliminate run time
	errors. Still need to convert over to new ui to share code with
	the register again.

	* src/gnome/druid-loan.c:
	* src/gnome/glade/sched-xact.glade: Fix up druid for changes in
	GnomeDruid between gnome1 and gnome2.

	* src/gnome-utils/gnc-dense-cal.c: Use deprecated routine to
	prevent this code from crashing.  Still need to be converted to
	use pango routines.

	* src/gnome-utils/gnc-account-sel.c: Don't unregister the event
	handler twice.

	* src/gnome-utils/dialog-utils.c:
	* src/gnome-utils/gnc-html.c: Work around gcc 3.3.1 brokenness.

2003-09-19  David Hampton  <hampton@employees.org>

	* configure.in:
	* src/gnome-utils/gnc-dir.h.in: Tweak a few directory locations.

	* src/gnc-ui.h:
	* src/business/business-gnome/dialog-*.c:
	* src/gnome/dialog-new-user.c:
	* src/gnome/dialog-print-check.c:
	* src/gnome/dialog-scheduledxaction.c:
	* src/gnome/gnc-main-window.c:
	* src/gnome/gw-gnc-spec.scm:
	* src/gnome/top-level.c:
	* src/gnome/window-main.c:
	* src/gnome/window-reconcile.c:
	* src/gnome/window-register.c:
	* src/gnome/glade/Makefile.am:
	* src/gnome-search/dialog-search.c:
	* src/gnome-utils/dialog-account.c:
	* src/gnome-utils/dialog-commodity.c:
	* src/gnome-utils/print-session.c:
	* src/import-export/qif-import/druid-qif-import.c:
	* src/report/report-gnome/window-report.c: Use the gnome2 help
	browser.

	* src/gnome-utils/Makefile.am:
	* src/gnome-utils/gnc-gnome-utils.c: Update to use the gnome2
	initialization routine.

	* src/gnome-utils/dialog-utils.[ch]:
	* src/gnome-utils/druid-utils.c:
	* src/gnome-utils/gnc-gnome-utils.[ch]:
	* src/gnome-utils/gnc-splash.c: Migrate functions.  Use the gnome2
	file locate functionality.

	* src/gnome-utils/gnc-icons.c: Collapse common code into a function.  Use
	the gnome2 file locate functionality.

	* src/app-utils/gnc-component-manager.c:
	* src/engine/gnc-event.c: Start ids with the number one.  Allows
	zero to be used to indicate that a id is not set.

	* src/gnome-utils/gnc-tree-view-account.c: Fix reference counting
	on the filter model.

	* src/gnome/gnc-plugin-page-account-tree.c: Destroy account tree
	page when the corresponding session is closed.

2003-09-18  David Hampton  <hampton@employees.org>

	* lots of files: Sync up at the gnome2-merge-3 tag.

2003-09-16  David Hampton  <hampton@employees.org>

	* lib/egg/egg-menu-merge.[ch]: Back port the GTK2.4 UI description
	language.

	* src/business/business-gnome/ui/gnc-plugin-business-ui.xml:
	* src/gnome/ui/gnc-main-window-ui.xml:
	* src/gnome/ui/gnc-plugin-account-tree-ui.xml:
	* src/gnome/ui/gnc-plugin-page-account-tree-ui.xml:
	* src/gnome/ui/gnc-plugin-page-register-ui.xml:
	* src/gnome/ui/gnc-plugin-register-ui.xml:
	* src/import-export/qif-import/gnc-plugin-qif-import-ui.xml:
	Switch to the new UI description language.

	* src/gnome/gnc-main-window.c:
	* src/gnome/gnc-plugin-page-account-tree.c:
	* src/gnome/gnc-plugin-page-register.c: Check the error return
	value after calling the menu-merge routines.

2003-09-13  David Hampton  <hampton@employees.org>

	* src/gnome/gnc-main-window.c: Collapse common functions into one.

	* src/gnome/gnc-main-window.c:
	* src/gnome/gnc-plugin-page-account-tree.c:
	* src/gnome/gnc-plugin-page-register.[ch]:
	* src/gnome/gnc-plugin-page.[ch]: Add new vector for getting the
	window title.  The tab_name vector no loner returns a const
	string.

	* src/gnome/gnc-main-window.c: Always bring a new page to the top
	of the stack.  Remove unused code.

	* src/gnome/gnc-plugin-page-account-tree.c:
	* src/gnome/gnc-plugin-page-register.[ch]:
	* src/gnome/gnc-plugin-register.c: Can now open arbitrary account
	registers.

	* src/gnome/gnc-main-window.c: Track all open windows.  If a
	caller tries to open a new page but doesn't specify where, use the
	first window available (which should be the initial window).

	* src/gnome-search/search.glade: Expand the dialog properly.

	* src/gnome/dialog-find-transactions.c:
	* src/gnome/gnc-plugin-page-register.[ch]: Open a new page for
	search results.

2003-09-09  David Hampton  <hampton@employees.org>

	* src/gnome-search/dialog-search.c:
	* src/gnome-search/gnc-general-search.c:
	* src/business/business-gnome/dialog-xxx.c:
	* src/business/business-gnome/glade/xxx.glade:
	* src/business/dialog-tax-table/dialog-tax-table.c:
	* src/business/dialog-tax-table/tax-tables.glade: Some
	gnome_dialog to gtk_dialog updates. Move signal information into
	glade.

2003-09-07  David Hampton  <hampton@employees.org>

	* src/gnome/gnc-plugin.c: Make the plugin widget destructor
	function optional.

	* src/business/business-gnome/business-gnome.scm:
	* src/business/business-gnome/businessmod-gnome.c:
	* src/business/business-gnome/gnc-plugin-business.[ch]:
	* src/business/business-gnome/ui/gnc-plugin-business-ui.xml:
	Migrate the main business menu from g1 style to g2 style.

2003-09-06  David Hampton  <hampton@employees.org>

	* lib/egg/eggtreemodelfilter.c: Couple of bug fixes related to
	using a virtual root.

	* configure.in:
	* src/engine/guid.c: Convert from pthreads to glib2 threads.

	* src/gnome-utils/misc-gnome-utils.c: Remove conditional g1/g2
	compilation.

	* src/engine/Group.c:
	* src/engine/gnc-event.[ch]: Add ADD/REMOVE events for updating
	the account tree model.

	* src/gnome-search/search-*.c:
	* src/gnome-search/gnc-general-search.c: Convert from gtk_object
	style object initialization to g_object style initialization.

	* src/gnome-search/dialog-search.c: Convert from a GnomeDialog to
	a GtkDialog.

	* src/gnome/gnc-plugin-page-account-tree.c: Add back menu
	sensitivity bases on whether an account is selected.

	* src/gnome-utils/gnc-tree-model-account.[ch]:
	* src/gnome-utils/gnc-tree-view-account.[ch]: Rework/clean the
	code.  Add features needed by the code that embeds a
	gnc-tree-view-account into a window.  I.E. Filters, pseudo
	top-level account, etc.  Add documentation.

	* src/business/business-gnome/dialog-payment.c:
	* src/business/dialog-tax-table/dialog-tax-table.c:
	* src/gnome-search/search-account.c:
	* src/gnome/dialog-tax-info.c:
	* src/gnome-utils/dialog-account.c:
	* src/gnome-utils/dialog-options.c:
	* src/gnome-utils/dialog-transfer.c:
	* src/gnome-utils/transfer.glade:
	Convert to the new gtktreeview based account tree code.

	* src/gnome-utils/dialog-transfer.c: Get this working for both the
	case where it is run as a modal dialog (e.g. reconcile) and the
	case where it is thrown up on the screen and forgotten
	(e.g. transfer).

	* src/gnome/gnc-main-window.c:
	* src/gnome/gnc-plugin-page-account-tree.c:
	* src/gnome/gnc-plugin-page-register.c:
	* src/gnome/gnc-plugin-page.[ch]: Add another function to the
	plugin interface for deleting the ui widget.  Allows the page to
	destroy/release anything it needs to.

	* src/gnome/gnc-plugin-page-register.c:
	* src/gnome/gnc-split-reg.c: Correctly clean up when closing a
	register.

2003-09-01  David Hampton  <hampton@employees.org>

	* configure.in:
	* src/gnome-utils/print-session.[ch]: Tony Watts'
	<tjawatts@totalise.co.uk> fix for compiling with either
	libgnomeprint 2.0 or 2.2.

2003-08-23  David Hampton  <hampton@employees.org>

	* src/scm/main.scm: Set next version number to 2.0.

	* src/app-util/gnc-ui-util.[ch]: Make a couple of functions public.

	* src/business/business-gnome/business-options-gnome.c:
	* src/gnome/window-acct-tree.c:
	* src/gnome-utils/dialog-options.c:
	* src/gnome-utils/dialog-options.h:
	* src/gnome-utils/gnome-utils.scm:
	* src/gnome-utils/gw-gnome-utils-spec.scm:
	* src/report/report-gnome/dialog-column-view.c:
	* src/report/report-gnome/dialog-style-sheet.c:
	* src/report/report-gnome/window-report.c: Collapse common option
	dialog handling. Tweak args to option dialog creation. Use
	g_signal_connect to set up signal handlers.

	* src/gnome-utils/preferences.glade: New file to create structure of
	an options dialog.

	* src/report/report-gnome/report.glade: Make the stylesheets
	dialog look like a standard gnome2 dialog.

	* src/gnome/druid-stock-split.c:
	* src/gnome/glade/account.glade:
	* src/gnome/glade/stocks.glade:
	* src/gnome-utils/dialog-account.c: Use the new account tree view
	widget.

	* src/gnome-utils/druid-utils.[ch]: Correct the druid colors and
	watermarks for gnome2.

	* src/gnome/gnc-plugin-page-account-tree.c: Make the options
	dialog work. Add more features back.

	* src/gnome-utils/Makefile.am: New gnc-tree-view-account.[ch] files.

	* src/gnome-utils/gnc-tree-model-account.[ch]: Flesh out the model
	to include all the necessary columns.  Make it look like the
	original account tree.

	* src/gnome-utils/gnc-tree-view-account.[ch]: Common view code for
	all users of the gnc-tree-model-account.c file.

2003-08-18  David Hampton  <hampton@employees.org>

	* macros/compiler-flags.m4: Add back detailed compile time checks.
	* various: Fix compile time warnings.

2003-08-15  David Hampton  <hampton@employees.org>

	* src/app-utils/global-options.c: Prevent a crash if there's no
	callback attached to a register.  This case should only occur
	during the g2 transition.

	* src/gnome/gnc-plugin-page-register.c: Add short labels for the
	toolbar actions. Do more register initialization.

	* src/gnome/window-register.c: Need the casts to G_OBJECT. Put
	them back.

	* src/register/register-gnome/gnucash-date-picker.c:
	* src/register/register-gnome/gnucash-grid.c:
	* src/register/register-gnome/gnucash-header.c:
	* src/register/register-gnome/gnucash-item-edit.c:
	* src/register/register-gnome/gnucash-item-list.c:
	* src/register/register-gnome/gnucash-style.c: Fix some run time
	warnings. Tweak the pango layout code so all the register bits are
	visible.

2003-08-10  David Hampton  <hampton@employees.org>

	* lib/egg/egg-action.c: Fix problem connecting toolbar actions and
	switching a proxy between actions.

	* lib/egg/egg-menu-merge.c: Make popup menus work.  Remove some
	debug messages.

	* src/gnc-ui.h:
	* src/gnome/druid-stock-split.[ch]:
	* src/gnome/gnc-plugin-page-account-tree.c:
	* src/gnome/window-acct-tree.c:
	* src/gnome/window-register.c: Pass a parent window pointer to the
	stock druid creation routines.

	* src/gnome/gnc-splash.[ch]:
	* src/gnome-utils/gnc-splash.[ch]: Move this code to the
	gnome-utils directory.

	* src/gnome/gnc-plugin-page-account-tree.c: Fix various problems.

	* src/engine/gnc-commodity.c:
	* src/gnome/dialog-commodities.c:
	* src/gnome/glade/commodities.glade:
	* src/gnome-utils/gnc-tree-model-commodity.c:
	* src/gnome-utils/gnc-tree-model-commodity.h: Enhance the
	commodity selection dialog.  Now does the right thing when
	commodities are added or deleted.

	* src/app-file/gnc-file.c: Tear down the splash screen before
	presenting an error.  Use new gnome2 button order.

	* All dialog-*.c and *.glade files: First pass at converting to
	Gnome 2 HIG for button order.  Convert gnome1 dialogs to gtk2
	dialogs. Set the function to activate the default button the
	gnome2 way (was editable_enters).  Remove some code not needed in
	gnome2 widget setup.

2003-08-08  David Hampton  <hampton@employees.org>

	* lots of files: Sync up at the gnome2-merge-2 tag.

	* acconfig.h:
	* macros/autogen.sh:
	* macros/gnome-guile-checks.m4: Make autoheader stop complaining.

	* all glade files: Run through glade-2 to update syntax and
	formatting.  The conversion tool and glade-2 itself don't produce
	the same output.


2003-07-16  David Hampton  <hampton@employees.org>

	* most every file: Sync up at the gnome2-merge-1 tag.

2003-06-17  Derek Atkins  <derek@ihtfp.com>

	* src/gnome/gw-gnc-spec.scm: return the Totd symbol to its
	  original name

2003-06-14  gettextize  <bug-gnu-gettext@gnu.org>

	* Makefile.am (EXTRA_DIST): Add config.rpath.

2003-06-13  Jan Arne Petersen  <jpetersen@uni-bonn.de>

	Cleanup build system.
	* Makefile.am:
	* acconfig.h:
	* autogen.sh:
	* configure.in:
	* lib/egg/Makefile.am:
	* src/app-file/Makefile.am:
	* src/app-file/gnome/Makefile.am:
	* src/app-utils/Makefile.am:
	* src/backend/file/Makefile.am:
	* src/business/business-core/file/Makefile.am:
	* src/business/business-gnome/Makefile.am:
	* src/business/business-ledger/Makefile.am:
	* src/business/business-utils/Makefile.am:
	* src/business/dialog-tax-table/Makefile.am:
	* src/engine/Makefile.am:
	* src/gnome-search/Makefile.am:
	* src/gnome-utils/Makefile.am:
	* src/gnome/Makefile.am:
	* src/import-export/Makefile.am:
	* src/import-export/binary-import/Makefile.am:
	* src/import-export/hbci/Makefile.am:
	* src/import-export/ofx/Makefile.am:
	* src/import-export/qif-import/Makefile.am:
	* src/network-utils/Makefile.am:
	* src/optional/swig/Makefile.am:
	* src/register/ledger-core/Makefile.am:
	* src/register/register-core/Makefile.am:
	* src/register/register-gnome/Makefile.am:
	* src/report/report-gnome/Makefile.am:
	* src/gnome/ui/Makefile.am:

	Port register to GNOME 2. Replace GdkFont stuff by PangoLayout.
	Replace gtk_type by g_type, gtk_args by gtk_set/get_property, gtk_signal
	by g_signal.
	* src/register/register-gnome/combocell-gnome.c: (select_item_cb),
	(change_item_cb), (activate_item_cb), (key_press_item_cb),
	(combo_disconnect_signals), (combo_connect_signals),
	(block_list_signals), (unblock_list_signals),
	(gnc_combo_cell_gui_destroy), (gnc_combo_cell_destroy),
	(gnc_append_string_to_list), (gnc_combo_cell_modify_verify),
	(gnc_combo_cell_gui_realize), (gnc_combo_cell_gui_move),
	(popup_set_focus), (popup_get_width), (gnc_combo_cell_enter),
	(gnc_combo_cell_leave):
	* src/register/register-gnome/datecell-gnome.c: (date_picked_cb),
	(key_press_item_cb), (gnc_date_cell_realize), (gnc_date_cell_move),
	(gnc_date_cell_enter), (gnc_date_cell_leave):
	* src/register/register-gnome/gnucash-cursor.c:
	(gnucash_item_cursor_draw):
	* src/register/register-gnome/gnucash-grid.c: (draw_cell),
	(gnucash_grid_init):
	* src/register/register-gnome/gnucash-grid.h:
	* src/register/register-gnome/gnucash-header.c:
	(gnc_header_update), (gnc_header_draw),
	(gnc_header_request_redraw), (gnc_header_realize),
	(gnc_header_unrealize), (gnc_header_finalize),
	(gnc_header_reconfigure), (gnc_header_set_header_rows),
	(gnc_header_point), (pointer_on_resize_line), (find_resize_col),
	(gnc_header_resize_column), (gnc_header_auto_resize_column),
	(gnc_header_event), (gnc_header_get_property),
	(gnc_header_set_property), (gnc_header_init),
	(gnc_header_class_init), (gnc_header_get_type),
	(gnc_header_realized), (gnc_header_new):
	* src/register/register-gnome/gnucash-header.h:
	* src/register/register-gnome/gnucash-item-edit.c:
	(gnc_item_edit_get_pixel_coords), (gnc_item_edit_draw_info),
	(gnc_item_edit_free_draw_info_members), (gnc_item_edit_draw),
	(gnc_item_edit_point), (gnc_item_edit_event),
	(gnc_item_edit_get_toggle_offset), (gnc_item_edit_update),
	(gnc_item_edit_realize), (gnc_item_edit_unrealize),
	(gnc_item_edit_focus_in), (gnc_item_edit_focus_out),
	(gnc_item_edit_reset_offset), (gnc_item_edit_init), (queue_sync),
	(gnc_item_edit_redraw), (entry_changed), (gnc_item_edit_dispose),
	(gnc_item_edit_finalize), (gnc_item_edit_set_cursor_pos),
	(entry_event), (gnc_item_edit_set_editor),
	(gnc_item_edit_configure), (gnc_item_edit_claim_selection),
	(gnc_item_edit_cut_copy_clipboard), (gnc_item_edit_cut_clipboard),
	(gnc_item_edit_copy_clipboard), (gnc_item_edit_paste_clipboard),
	(gnc_item_edit_paste_primary), (gnc_item_edit_show_popup_toggle),
	(gnc_item_edit_hide_popup_toggle), (key_press_popup_cb),
	(gnc_item_edit_popup_toggled), (block_toggle_signals),
	(unblock_toggle_signals), (connect_popup_toggle_signals),
	(disconnect_popup_toggle_signals), (gnc_item_edit_get_property),
	(gnc_item_edit_set_property), (gnc_item_edit_class_init),
	(gnc_item_edit_get_type), (gnc_item_edit_new),
	(gnc_item_edit_new_list), (gnc_item_edit_new_date_picker),
	(gnc_item_edit_show_popup), (gnc_item_edit_hide_popup),
	(gnc_item_edit_set_popup), (gnc_item_edit_set_has_selection),
	(gnc_item_edit_selection_clear), (gnc_item_edit_selection_get),
	(gnc_item_edit_selection_received):
	* src/register/register-gnome/gnucash-item-edit.h:
	* src/register/register-gnome/gnucash-item-list.c:
	(gnc_item_list_clear), (gnc_item_list_append),
	(gnc_item_list_select), (gnc_item_list_show_selected),
	(gnc_item_list_sort), (gnc_item_list_autosize),
	(gnc_item_list_init), (gnc_item_list_button_event),
	(gnc_item_list_key_event), (gnc_item_list_class_init),
	(gnc_item_list_get_type), (tree_view_selection_changed),
	(gnc_item_list_new):
	* src/register/register-gnome/gnucash-item-list.h:
	* src/register/register-gnome/gnucash-scrolled-window.c:
	(gnc_scrolled_window_get_type), (gnc_scrolled_window_new),
	(gnc_scrolled_window_class_init), (gnc_scrolled_window_init):
	* src/register/register-gnome/gnucash-scrolled-window.h:
	* src/register/register-gnome/gnucash-sheet.c:
	(gnucash_sheet_hide_editing_cursor),
	(gnucash_sheet_modify_current_cell), (gnucash_sheet_size_allocate),
	(gnucash_sheet_focus_in_event), (gnucash_sheet_focus_out_event),
	(gnucash_sheet_start_editing_at_cursor), (gnucash_motion_event),
	(gnucash_button_release_event), (gnucash_button_press_event),
	(gnucash_register_cut_clipboard),
	(gnucash_register_copy_clipboard),
	(gnucash_register_paste_clipboard),
	(gnucash_sheet_clipboard_event), (gnucash_sheet_direct_event),
	(gnucash_sheet_key_press_event), (gnucash_sheet_col_max_width),
	(gnucash_sheet_set_scroll_region), (gnucash_sheet_table_load),
	(gnucash_sheet_selection_clear), (gnucash_sheet_selection_get),
	(gnucash_sheet_selection_received), (gnucash_sheet_new),
	(gnucash_register_new):
	* src/register/register-gnome/gnucash-sheet.h:
	* src/register/register-gnome/gnucash-style.c:
	(set_dimensions_pass_one), (set_dimensions_pass_two),
	(gnucash_style_init):
	* src/register/register-gnome/gnucash-style.h:
	* src/register/ledger-core/dialog-dup-trans.c:
	(gnc_dup_trans_dialog_create), (gnc_dup_trans_dialog):
	* src/gnome/glade/register.glade:
	* src/gnome/ui/gnc-main-window-ui.xml:
	* src/gnome/window-register.c: (gnc_register_date_window),
	(regWindowLedger), (gnc_register_setup_menu_widgets),
	(gnc_register_insert_cloned_toolbar_elt):


	Rename GNCTreeModel to GncTreeModel like all the other classes.
	* src/gnome-utils/gnc-tree-model-account.c:
	(gnc_tree_model_account_get_type),
	(gnc_tree_model_account_class_init), (gnc_tree_model_account_init),
	(gnc_tree_model_account_finalize),
	(gnc_tree_model_account_dispose), (gnc_tree_model_account_new),
	(gnc_tree_model_account_set_root),
	(gnc_tree_model_account_get_account),
	(gnc_tree_model_account_set_toplevel),
	(gnc_tree_model_account_get_toplevel),
	(gnc_tree_model_account_get_iter_from_account),
	(gnc_tree_model_account_get_iter),
	(gnc_tree_model_account_get_path),
	(gnc_tree_model_account_get_value),
	(gnc_tree_model_account_iter_next),
	(gnc_tree_model_account_iter_children),
	(gnc_tree_model_account_iter_has_child),
	(gnc_tree_model_account_iter_n_children),
	(gnc_tree_model_account_iter_nth_child),
	(gnc_tree_model_account_iter_parent),
	(gnc_tree_model_account_refresh):
	* src/gnome-utils/gnc-tree-model-account.h:
	* src/gnome-utils/gnc-tree-model-example-account.c:
	(gnc_tree_model_example_account_get_type),
	(gnc_tree_model_example_account_class_init),
	(gnc_tree_model_example_account_init),
	(gnc_tree_model_example_account_finalize),
	(gnc_tree_model_example_account_new),
	(gnc_tree_model_example_account_set_accounts),
	(gnc_tree_model_example_account_get_account),
	(gnc_tree_model_example_account_get_flags),
	(gnc_tree_model_example_account_get_column_type),
	(gnc_tree_model_example_account_get_iter),
	(gnc_tree_model_example_account_get_path),
	(gnc_tree_model_example_account_get_value),
	(gnc_tree_model_example_account_iter_next),
	(gnc_tree_model_example_account_iter_children),
	(gnc_tree_model_example_account_iter_nth_child):
	* src/gnome-utils/gnc-tree-model-example-account.h:
	* src/gnome-utils/dialog-account.c: (gnc_account_window_create),
	(gnc_ui_new_account_window_internal), (gnc_ui_edit_account_window):
	* src/gnome-utils/dialog-transfer.c:
	(gnc_xfer_dialog_show_inc_exp_visible_cb),
	(gnc_xfer_dialog_fill_tree_view), (gnc_xfer_dialog_create),
	(gnc_transfer_dialog_get_selected_account),
	(gnc_transfer_dialog_set_selected_account):
	* src/gnome/druid-hierarchy.c: (update_account_balance),
	(account_types_tree_view_prepare),
	(on_choose_account_types_prepare),
	(account_types_selection_changed), (select_all_clicked),
	(clear_all_clicked), (get_selected_account_list),
	(balance_cell_data_func), (on_final_account_prepare):
	* src/gnome/window-acct-tree.c: (gnc_acct_tree_window_new):

	Port dialogs to GNOME 2. Replace GtkCList by GtkTreeView.
	Replace gtk_type by g_type, gtk_args by gtk_set/get_property, gtk_signal
	by g_signal.
	* src/gnome/dialog-commodities.c:
	(gnc_commodities_dialog_get_selected),
	(gnc_commodities_dialog_response), (edit_clicked),
	(remove_clicked), (add_clicked),
	(gnc_commodities_dialog_selection_changed),
	(show_currencies_toggled), (gnc_commodities_dialog_filter_func),
	(gnc_commodities_dialog_create), (refresh_handler):
	* src/gnome/glade/commodities.glade:
	* src/gnome-utils/gnc-tree-model-commodity.[ch]
	* src/gnome/dialog-fincalc.c: (connect_fincalc_menu_item),
	(close_handler), (gnc_ui_fincalc_dialog_create):
	* src/gnome/dialog-tax-info.c: (gnc_tax_info_set_changed),
	(gnc_tax_info_dialog_get_current_accounts),
	(gnc_tax_info_dialog_account_filter_func), (gui_to_accounts),
	(select_subaccounts_clicked), (gnc_tax_info_dialog_response),
	(tax_info_show_income_accounts), (gnc_tax_info_update_accounts),
	(gnc_tax_info_income_cb), (gnc_tax_info_dialog_create),
	(close_handler), (refresh_handler), (gnc_tax_info_dialog):
	* src/gnome/glade/tax.glade:

	Add window type to the ui plugin system and update plugins.
	Add icon to the about dialog
	* src/gnome/gnc-main-window.c: (gnc_main_window_open_page),
	(gnc_main_window_close_page), (gnc_main_window_class_init),
	(gnc_main_window_add_plugin), (gnc_main_window_switch_page),
	(gnc_main_window_change_current_page),
	(gnc_main_window_plugin_added), (gnc_main_window_plugin_removed),
	(gnc_main_window_cmd_file_open_new_window),
	(gnc_main_window_cmd_help_about):
	* src/gnome/gnc-plugin-account-tree.c:
	(gnc_plugin_account_tree_add_to_window),
	(gnc_plugin_account_tree_remove_from_window):
	* src/gnome/gnc-plugin-page-account-tree.c:
	(gnc_plugin_page_account_tree_create_widget),
	(gnc_plugin_page_account_tree_unmerge_actions),
	(gnc_plugin_page_account_tree_get_icon):
	* src/gnome/gnc-plugin-page.c: (gnc_plugin_page_get_icon),
	(gnc_plugin_page_get_plugin_name), (gnc_plugin_page_get_uri),
	(gnc_plugin_page_inserted), (gnc_plugin_page_removed),
	(gnc_plugin_page_selected), (gnc_plugin_page_unselected):
	* src/gnome/gnc-plugin-page.h:
	* src/gnome/gnc-plugin.c: (gnc_plugin_add_to_window),
	(gnc_plugin_remove_from_window):
	* src/gnome/gnc-plugin.h:
	* src/import-export/qif-import/gnc-plugin-qif-import.c:
	(gnc_plugin_qif_import_add_to_window),
	(gnc_plugin_qif_import_remove_from_window):

	Fix window type of splash screen. Add support for startup-notification.
	* src/gnome/gnc-splash.c: (gnc_show_splash_screen):
	* src/gnome/gnucash.desktop.in:
	* src/gnome/top-level.c: (gnc_gui_init),
	(gnc_configure_file_be_compression):

2003-06-11  Jan Arne Petersen  <jpetersen@uni-bonn.de>

	Add Jimmac's icons (http://jimmac.musichall.cz/i.php3?ikony=69).
	* src/pixmaps/Makefile.am:
	* src/pixmaps/account-16.png
	* src/pixmaps/account.png
	* src/pixmaps/appicon.png
	* src/pixmaps/delete-account-16.png
	* src/pixmaps/delete-account.png
	* src/pixmaps/edit-account-16.png
	* src/pixmaps/edit-account.png
	* src/pixmaps/open-account-16.png
	* src/pixmaps/open-account.png

2003-05-30  Jan Arne Petersen  <jpetersen@uni-bonn.de>

        Move egg to lib.
	* configure.in:
	* lib/Makefile.am:
        * lib/egg
	* src/gnome-utils/Makefile.am:
	* src/import-export/qif-import/Makefile.am:

	* src/gnome-utils/gnc-dense-cal.c: Fix some Gtk 2 incompatibilty problems.
        (gnc_dense_cal_class_init), (gnc_dense_cal_init):

	Create a new tip of the day dialog.
	* src/gnome/Makefile.am:
	* src/gnome/gnc-totd-dialog.[ch]:
	* src/gnome/glade/Makefile.am:
	* src/gnome/glade/totd.glade:
	* src/gnome/gw-gnc-spec.scm:
	* src/gnome/window-main.c: (gnc_main_window_totd_cb):
	* src/scm/tip-of-the-day.scm:

	Replace GnomeDialog by GtkDialog.
	* src/gnome/dialog-price-edit-db.c: (prices_response),
	(remove_old_clicked), (gnc_prices_dialog_create), (close_handler):

	Fix a bug (multiple tabs) in the main window.
	* src/gnome/gnc-main-window.c: (gnc_main_window_close_page),
	(gnc_main_window_setup_window), (gnc_main_window_switch_page),
	(gnc_main_window_cmd_help_totd):

2003-05-27  Jan Arne Petersen  <jpetersen@uni-bonn.de>

	* configure.in: Requires gtk+-2.0 >= 2.2 and libgnomeui-2.0 >= 2.2

	Replace gtk_signal_connect by g_signal_connect and GnomeDialog by
	GtkDialog
	* src/gnome/dialog-price-editor.c: (pedit_dialog_response),
	(connect_type_menu_item), (gnc_price_pedit_dialog_create),
	(close_handler):
	* src/gnome/glade/price.glade:

2003-05-26  Jan Arne Petersen  <jpetersen@uni-bonn.de>

	Use different actions for different windows so that it is very easy
	to use more than one main window. This fixes some 'Hacks' in the previous
	plugin implementation and provides more features for the plugins.
	The plugins are fixed and 'open in a new window' is implemented.
	* src/gnome/gnc-main-window.c: (gnc_main_window_open_page),
	(gnc_main_window_merge_actions), (gnc_main_window_unmerge_actions),
	(gnc_main_window_get_action_group), (gnc_main_window_init),
	(gnc_main_window_finalize), (gnc_main_window_add_plugin),
	(gnc_main_window_plugin_added), (gnc_main_window_plugin_removed),
	(gnc_main_window_cmd_file_open_new_window):
	* src/gnome/gnc-main-window.h:
	* src/gnome/gnc-plugin-manager.c: (gnc_plugin_manager_add_plugin),
	(gnc_plugin_manager_remove_plugin),
	(gnc_plugin_manager_get_plugin), (gnc_plugin_manager_init),
	(gnc_plugin_manager_finalize):
	* src/gnome/gnc-plugin-manager.h:
	* src/gnome/gnc-plugin.c: (gnc_plugin_add_to_window),
	(gnc_plugin_remove_from_window):
	* src/gnome/gnc-plugin.h:
	* src/gnome/gnc-plugin-account-tree.c:
	(gnc_plugin_account_tree_new), (gnc_plugin_account_tree_init),
	(gnc_plugin_account_tree_plugin_init),
	(gnc_plugin_account_tree_add_to_window),
	(gnc_plugin_account_tree_remove_from_window),
	(gnc_plugin_account_tree_create_page),
	(gnc_plugin_account_tree_cmd_new_account_tree):
	* src/gnome/gnc-plugin-account-tree.h:
	* src/gnome/top-level.c: (gnc_gui_init):
	* src/import-export/qif-import/gnc-plugin-qif-import.c:
	(gnc_plugin_qif_import_get_type), (gnc_plugin_qif_import_new),
	(gnc_plugin_qif_import_plugin_init),
	(gnc_plugin_qif_import_add_to_window),
	(gnc_plugin_qif_import_remove_from_window),
	(gnc_plugin_qif_import_cmd_new_qif_import):
	* src/import-export/qif-import/gnc-plugin-qif-import.h:

2003-05-26  Jan Arne Petersen  <jpetersen@uni-bonn.de>

	Move the plugin handling from the main window into the
	new plugin manager.
	* src/gnome/Makefile.am:
	* src/gnome/gnc-plugin-manager.[ch]:
	* src/gnome/gnc-main-window.c: (gnc_main_window_add_plugin),
	(gnc_main_window_setup_window),
	(gnc_main_window_change_current_page),
	(gnc_main_window_plugin_added), (gnc_main_window_plugin_removed):
	* src/gnome/gnc-main-window.h:
	* src/gnome/top-level.c: (gnc_gui_init):

	Add scrub commands to the account tree page and implement
	most of the commands.
	* src/gnome/gnc-plugin-page-account-tree.c:
	(gnc_plugin_page_account_tree_cmd_open_account),
	(gnc_plugin_page_account_tree_cmd_open_subaccounts),
	(delete_account_helper),
	(gnc_plugin_page_account_tree_cmd_delete_account),
	(gnc_plugin_page_account_tree_cmd_view_options),
	(gnc_plugin_page_account_tree_cmd_reconcile),
	(gnc_plugin_page_account_tree_cmd_transfer),
	(gnc_plugin_page_account_tree_cmd_stock_split),
	(gnc_plugin_page_account_tree_cmd_scrub),
	(gnc_plugin_page_account_tree_cmd_scrub_sub),
	(gnc_plugin_page_account_tree_cmd_scrub_all):
	* src/gnome/ui/gnc-plugin-page-account-tree-ui.xml:

	Use the new ui plugin system for the QIF import druid.
	* src/import-export/qif-import/Makefile.am:
	* src/import-export/qif-import/druid-qif-import.c:
	(gnc_ui_qif_import_create_plugin):
	* src/import-export/qif-import/druid-qif-import.h:
	* src/import-export/qif-import/gncmod-qif-import.c:
	(libgncmod_qif_import_LTX_gnc_module_init):
	* src/import-export/qif-import/gnc-plugin-qif-import.[ch]:
	* src/import-export/qif-import/gnc-plugin-qif-import-ui.xml:

2003-05-25  Jan Arne Petersen  <jpetersen@uni-bonn.de>

	Add some libegg files to the repository.
	* configure.in:
	* src/gnome-utils/egg:

	Start to create a replacement for gnome-mdi.
	* src/gnome/gnc-main-window.c:
	* src/gnome/gnc-main-window.h:
	* src/gnome/gnc-plugin-page.c:
	* src/gnome/gnc-plugin-page.h:
	* src/gnome/gnc-plugin.c:
	* src/gnome/gnc-plugin.h:
	* src/gnome/ui
	* src/gnome/Makefile.am:
	* src/gnome/mainwindow-account-tree.c: (select_account_callback):
	* src/gnome/top-level.c: (gnc_gui_init):
	* src/gnome/window-acct-tree.c:
	(gnc_acct_tree_window_set_sensitives),
	(gnc_acct_tree_window_add_sensitive),
	(gnc_acct_tree_window_find_popup_item),
	(gnc_acct_tree_view_labeler), (gnc_acct_tree_view_destroy),
	(gnc_acct_tree_view_refresh), (gnc_acct_tree_view_new),
	(gnc_acct_tree_window_create_child),
	(gnc_main_window_open_accounts),
	(gnc_acct_tree_window_toolbar_open_cb),
	(gnc_acct_tree_window_toolbar_edit_cb),
	(gnc_acct_tree_window_toolbar_add_account_cb),
	(delete_account_helper), (gnc_acct_tree_window_delete_common),
	(gnc_acct_tree_window_toolbar_delete_account_cb),
	(gnc_acct_tree_find_account_from_gncmdi),
	(gnc_acct_tree_window_menu_open_subs_cb),
	(gnc_acct_tree_window_menu_edit_cb),
	(gnc_acct_tree_window_menu_reconcile_cb),
	(gnc_acct_tree_window_menu_transfer_cb),
	(gnc_acct_tree_window_menu_stock_split_cb),
	(gnc_acct_tree_window_menu_add_account_cb),
	(gnc_acct_tree_window_menu_delete_account_cb),
	(gnc_acct_tree_window_menu_scrub_cb),
	(gnc_acct_tree_window_menu_scrub_sub_cb),
	(gnc_acct_tree_window_menu_scrub_all_cb),
	(gnc_acct_tree_window_menu_open_cb),
	(gnc_acct_tree_window_activate_cb),
	(gnc_acct_tree_window_configure), (gnc_euro_change),
	(gnc_acct_tree_window_create_toolbar),
	(gnc_acct_tree_window_create_menu),
	(gnc_acct_tree_window_select_cb),
	(gnc_acct_tree_window_get_current_account),
	(gnc_acct_tree_window_options_new), (gnc_acct_tree_window_destroy),
	(gnc_acct_tree_button_press_cb), (gnc_acct_tree_window_new),
	(gnc_acct_tree_window_get_widget),
	(gnc_acct_tree_window_get_options), (gnc_acct_tree_window_get_id),
	(gnc_options_dialog_apply_cb), (gnc_options_dialog_help_cb),
	(gnc_options_dialog_close_cb),
	(gnc_acct_tree_window_toolbar_options_cb),
	(gnc_acct_tree_tweak_menu),
	(gnc_acct_tree_window_cmd_open_account),
	(gnc_acct_tree_window_cmd_open_subaccounts),
	(gnc_acct_tree_window_cmd_edit_account),
	(gnc_acct_tree_window_cmd_reconcile),
	(gnc_acct_tree_window_cmd_transfer),
	(gnc_acct_tree_window_cmd_stock_split),
	(gnc_acct_tree_window_cmd_new_account),
	(gnc_acct_tree_window_cmd_delete_account),
	(gnc_acct_tree_window_cmd_view_options):
	* src/gnome/window-main.c:
	* src/gnome/window-main.h:
	* src/scm/main-window.scm:

	Start to convert the acct-tree into a new gnucash plugin.
	* src/gnome/gnc-plugin-account-tree.c:
	* src/gnome/gnc-plugin-account-tree.h:
	* src/gnome/gnc-plugin-page-account-tree.c:
	* src/gnome/gnc-plugin-page-account-tree.h:

	Add a GtkTreeModel for TreeModelAccountTypes.
	* src/gnome-utils/gnc-tree-model-account-types.c
	* src/gnome-utils/gnc-tree-model-account-types.h

	* src/gnome-utils/Makefile.am: Add new files to the Makefile.

	* src/gnome-utils/dialog-account.c: Some small account dialog fixes.
	(gnc_account_window_create),
	(gnc_ui_new_account_window_internal), (gnc_ui_edit_account_window):

	Fix the commodity dialog. (Replace GnomeDialog by GtkDialog,
	GtkSignal by GSignal, etc).
	* src/gnome-utils/commodity.glade:
	* src/gnome-utils/dialog-commodity.c: (select_modal_callback),
	(gnc_ui_commodity_set_help_callback),
	(gnc_ui_select_commodity_modal_full),
	(gnc_ui_select_commodity_modal), (select_commodity_close),
	(gnc_ui_select_commodity_create), (g_strcmp),
	(gnc_ui_update_commodity_picker),
	(gnc_ui_select_commodity_destroy),
	(gnc_ui_select_commodity_response_cb),
	(gnc_ui_select_commodity_namespace_changed_cb),
	(gnc_ui_update_namespace_picker), (gnc_ui_namespace_picker_ns),
	(commodity_close), (gnc_ui_new_commodity_create),
	(gnc_ui_edit_commodity_create), (new_modal_callback),
	(gnc_ui_new_commodity_modal_full), (gnc_ui_new_commodity_modal),
	(gnc_ui_edit_commodity_modal), (gnc_ui_commodity_destroy),
	(gnc_ui_commodity_ok_cb), (gnc_ui_commodity_help_cb),
	(gnc_ui_commodity_cancel_cb):
	* src/gnome-utils/dialog-commodity.h:

	Fix the transfer dialog. (Replace GnomeDialog by GtkDialog,
	GtkSignal by GSignal, GncAccountTree by GtkTreeModel etc).
	* src/gnome-utils/dialog-transfer.c:
	(gnc_xfer_dialog_update_price), (gnc_xfer_dialog_toggle_cb),
	(gnc_xfer_dialog_set_price_auto),
	(gnc_xfer_dialog_curr_acct_activate),
	(price_amount_radio_toggled_cb),
	(gnc_xfer_dialog_reload_quickfill),
	(gnc_xfer_dialog_from_tree_selection_changed_cb),
	(gnc_xfer_dialog_to_tree_selection_changed_cb),
	(gnc_xfer_dialog_show_inc_exp_visible_cb),
	(gnc_xfer_dialog_fill_tree_view), (gnc_parse_error_dialog),
	(gnc_xfer_dialog_quickfill), (gnc_xfer_description_insert_cb),
	(common_post_quickfill_handler),
	(gnc_xfer_description_key_press_cb),
	(gnc_xfer_description_button_release_cb),
	(gnc_xfer_dialog_update_conv_info), (gnc_xfer_amount_update_cb),
	(gnc_xfer_update_to_amount), (gnc_xfer_price_update_cb),
	(gnc_xfer_date_changed_cb), (gnc_xfer_to_amount_update_cb),
	(gnc_xfer_dialog_select_from_account),
	(gnc_xfer_dialog_select_to_account),
	(gnc_xfer_dialog_select_from_currency),
	(gnc_xfer_dialog_select_to_currency),
	(gnc_xfer_dialog_lock_account_tree),
	(gnc_xfer_dialog_lock_from_account_tree),
	(gnc_xfer_dialog_lock_to_account_tree),
	(gnc_xfer_dialog_hide_from_account_tree),
	(gnc_xfer_dialog_hide_to_account_tree),
	(gnc_xfer_dialog_is_exchange_dialog), (gnc_xfer_dialog_set_amount),
	(gnc_xfer_dialog_set_description), (gnc_xfer_dialog_set_memo),
	(gnc_xfer_dialog_set_num), (gnc_xfer_dialog_set_date),
	(gnc_xfer_dialog_set_exchange_rate), (gnc_xfer_dialog_response_cb),
	(gnc_xfer_dialog_close_cb), (gnc_xfer_dialog_create),
	(close_handler), (gnc_xfer_dialog), (gnc_xfer_dialog_close),
	(gnc_xfer_dialog_set_title),
	(gnc_xfer_dialog_set_information_frame_label),
	(gnc_xfer_dialog_set_account_frame_label),
	(gnc_xfer_dialog_set_from_account_frame_label),
	(gnc_xfer_dialog_set_to_account_frame_label),
	(gnc_xfer_dialog_set_from_show_button_active),
	(gnc_xfer_dialog_set_to_show_button_active),
	(gnc_xfer_dialog_add_user_specified_button),
	(gnc_xfer_dialog_toggle_currency_frame), (find_xfer),
	(gnc_xfer_dialog_run_until_done),
	(gnc_xfer_dialog_quickfill_to_account),
	(gnc_transfer_dialog_get_selected_account),
	(gnc_transfer_dialog_set_selected_account):
	* src/gnome-utils/dialog-transfer.h:
	* src/gnome-utils/transfer.glade:

	Fix GncDateEdit. (Replace GtkSignal by GSignal and backport
	some GnomeDateEdit fixes)
	* src/gnome-utils/gnc-date-edit.c: (day_selected),
	(key_press_popup), (position_popup), (set_time), (fill_time_popup),
	(gnc_date_edit_class_init), (gnc_date_edit_destroy),
	(date_accel_key_press), (create_children):
	* src/gnome-utils/gnc-date-edit.h:

2003-05-25  Christian Stimming  <stimming@tuhh.de>

	* src/gnome-utils/gnc-tree-model-example-account.c,
	src/backend/file/sixtp-dom-parsers.c,
	src/backend/file/sixtp-utils.c,
	src/backend/file/test/test-dom-converters1.c,
	src/backend/file/test/test-string-converters.c,
	src/calculation/fin.c, src/engine/GNCId.c src/engine/QueryCore.c,
	src/engine/gnc-engine-util.c src/engine/guid.c,
	src/engine/test/test-commodities.c, src/network-utils/gnc-gpg.c:
	Fix signed/unsigned comparison warnings in gcc3.3.

2003-05-22  Jan Arne Petersen  <jpetersen@uni-bonn.de>

	* src/gnome-utils/dialog-account.c:
	Fix 'Notes' TextView.
	Fix selection of parent/base accounts.
	(gnc_account_to_ui),
	(gnc_ui_to_account), (gnc_account_window_create),
	(gnc_ui_new_account_window_internal), (gnc_ui_edit_account_window):
	* src/gnome-utils/gnc-tree-model-account.c:
	Fix virtual toplevel-account.
	Add notification for account changes.
	(gnc_tree_model_account_class_init), (gnc_tree_model_account_init),
	(gnc_tree_model_account_dispose), (gnc_tree_model_account_new),
	(gnc_tree_model_account_set_toplevel),
	(gnc_tree_model_account_get_iter),
	(gnc_tree_model_account_iter_next),
	(gnc_tree_model_account_iter_n_children),
	(gnc_tree_model_account_iter_nth_child),
	(gnc_tree_model_account_iter_parent), (account_row_inserted),
	(gnc_tree_model_account_refresh_handler),
	(gnc_tree_model_account_refresh):
	* src/gnome/druid-hierarchy.c:
	Disable test example accounts.
	(account_types_tree_view_prepare):

2003-05-20  Jan Arne Petersen  <jpetersen@uni-bonn.de>

	* src/gnome-utils/Makefile.am:
	Add src/file/backend to the INCLUDE dirs.

	* src/gnome-utils/dialog-account.c:
	Replace GncAccountTree by GtkTreeView and GNCTreeModelAccount.
	Replace gtk_signal_connect by g_signal_connect.
	Replace GncDateEdit by GnomeDateEdit (probably a temporary fix).
	Replace GnomeDialog by GtkDialog

	(gnc_ui_to_account),
	(gnc_finish_ok), (extra_change_verify), (gnc_edit_account_ok),
	(gnc_new_account_ok), (gnc_account_window_response_cb),
	(gnc_account_type_list_create), (gnc_account_window_create),
	(get_ui_fullname), (close_handler),
	(gnc_ui_new_account_window_internal),
	(gnc_ui_new_accounts_from_name_with_defaults),
	(gnc_ui_edit_account_window), (gnc_ui_refresh_account_window):

	Add support for a virtual toplevel account into the account
	tree model.
	* src/gnome-utils/gnc-tree-model-account.c:
	(gnc_tree_model_account_init), (gnc_tree_model_account_set_root),
	(gnc_tree_model_account_set_toplevel),
	(gnc_tree_model_account_get_toplevel),
	(gnc_tree_model_account_get_iter_from_account),
	(gnc_tree_model_account_get_iter),
	(gnc_tree_model_account_get_path),
	(gnc_tree_model_account_iter_next),
	(gnc_tree_model_account_iter_children),
	(gnc_tree_model_account_iter_has_child),
	(gnc_tree_model_account_iter_n_children),
	(gnc_tree_model_account_iter_nth_child),
	(gnc_tree_model_account_iter_parent), (account_row_inserted):
	* src/gnome-utils/gnc-tree-model-account.h:

	Remove '#if 0' from druid-hierarchy.c and
	update the account glade file (replace GtkCList/Tree by GtkTreeView)
	* src/gnome/druid-hierarchy.c:
	* src/gnome/glade/account.glade:


2003-05-19 TomF changes for gnucash-gnome2-dev, 18th batch
	* src/gnome/dialog-tax-info.c:
	  Replace broken gtk_text_set_word_wrap (GTK_TEXT (text), TRUE);
	  by gtk_text_view_set_wrap_mode(GTK_TEXT_VIEW(text), GTK_WRAP_WORD);

	  Changes made by Jan Arne Petersen  <jpetersen@uni-bonn.de>:
	* src/gnome/druid-hierarchy.c:
	  include "gnc-tree-model-account.h", "gnc-tree-model-example-account.h"
	  Replace deprecated GTK_TREE by GTK_TREE_VIEW; Clear by using
          gtk_tree_store_clear(GTK_TREE_STORE(gtk_tree_view_get_model()));

	  Replace GTK_SIGNAL_FUNC by G_CALLBACK
	  gtk_object_set_data by g_object_set_data
	  Replace gtk_signal_connect by g_signal_connect
	  Rewrite on_final_account_tree_placeholder_toggled to use:
	  Replace gtk_signal_handler_block_by_func
	  by g_signal_handlers_block_by_func,
 	  gtk_signal_handler_unblock_by_func by
	  g_signal_handlers_unblock_by_func,
	  Replace update_account_balance (GtkCTree *ctree, GtkCTreeNode *node)
	  by update_account_balance (GNCTreeModelAccount *model,
		 GtkTreeIter *iter).  In update_account_balance:
	  Replace gtk_ctree_node_get_row_data
	  by gnc_tree_model_account_get_account,
	  gnc_amount_edit_get_amount, xaccAccountGetPlaceholder,
	  gnc_numeric_zero_p

	  Replace gtk_ctree_node_set_text by
	  gtk_tree_model_get_path, gtk_tree_model_row_changed,
	  gtk_tree_path_free (path);

	  Use: GtkTreeView, GtkTreeSelection, GtkTreeModel, GtkTreeIter
 	  GTK_TREE_VIEW (hierarchy_get_widget ()), gtk_tree_view_get_selection,
	  gtk_ctree_node_nth (ctree, GTK_CLIST()),
	  gtk_tree_selection_get_selected, update_account_balance,
	  GNC_TREE_MODEL_ACCOUNT, g_object_set_data, G_OBJECT,
	  GSList, get_example_account_list, GncExampleAccount, Account,
	  g_new0, gnc_get_current_book, xaccMallocAccountGroup

	  Rewrite account_types_tree_view_prepare,
	  on_choose_account_types_prepare,
	  account_types_selection_changed, select_all_clicked,
	  clear_all_clicked, get_selected_account_list,
	  balance_cell_data_func, on_final_account_tree_placeholder_toggled,
	  on_final_account_tree_selection_changed

	  Commented out: struct FinalInsertData_struct,
	  generate_account_titles, free_account_titles,
	  add_to_ctree_final_account, insert_final_accounts

	  Rewrite on_final_account_prepare to use:
	  GtkTreeView, GNCTreeModelAccount, GtkTreeSelection, GtkCellRenderer,
	  GtkTreeViewColumn, g_object_get_data, gnc_tree_model_account_new,
	  gtk_tree_view_set_model (tree_view, GTK_TREE_MODEL (model));
	  g_object_unref, gtk_tree_view_get_selection,
	  gtk_tree_selection_set_mode, g_signal_connect, G_CALLBACK,
	  gtk_cell_renderer_text_new, gtk_tree_view_column_new_with_attributes,
	  gtk_tree_view_append_column, gtk_tree_view_column_new_with_attributes,
	  gtk_cell_renderer_toggle_new, g_object_set,
	  gtk_tree_view_column_set_cell_data_func, g_object_set_data,
	  GNC_TREE_MODEL_ACCOUNT, gtk_tree_view_get_model,
	  gnc_suspend_gui_refresh, gnc_tree_model_account_set_root,
	  delete_our_final_group, get_selected_account_list,
	  hierarchy_merge_groups, gnc_tree_model_account_set_root,
	  gtk_tree_view_expand_all

	  Rewrite on_final_account_tree_selection_changed to use:
	  GtkTreeModel, GtkTreeIter, gboolean, Account, GNCAmountEdit,
	  GNCPrintAmountInfo, gnc_numeric, GtkWidget,
	  gtk_tree_selection_get_selected, get_balance_editor,
	  gnc_amount_edit_gtk_entry, gtk_entry_set_text,
	  gtk_widget_set_sensitive, gnc_tree_model_account_get_account,
	  get_final_balance, gnc_reverse_balance, gnc_numeric_neg,
	  gnc_account_print_info, gnc_amount_edit_set_print_info,
	  gnc_amount_edit_set_fraction , block_amount_changed,
	  gnc_amount_edit_set_amount (balance_edit, balance),
	  gnc_numeric_zero_p, unblock_amount_changed


2003-05-19  Jan Arne Petersen  <jpetersen@uni-bonn.de>

	Fix some nome-mdi problems:
	* src/gnome-utils/gnc-mdi-utils.c: (gnc_mdi_child_changed_cb),
	(gnc_mdi_new), (gnc_app_set_title):
	* src/gnome/window-acct-tree.c: (gnc_acct_tree_view_labeler),
	(gnc_acct_tree_view_new), (gnc_main_window_open_accounts),
	(gnc_acct_tree_find_account_from_gncmdi),
	(gnc_acct_tree_window_new):
	* src/gnome/window-main.c: (gnc_main_window_get_mdi_child),
	(gnc_main_window_add_child_cb), (gnc_main_window_add_view_cb),
	(gnc_main_window_new), (gnc_main_window_dispatch_cb),
	(gnc_main_window_file_close_cb):

	Replace some gtk_signal and gtk_type methods by g_signal and g_type
	methods:
	* src/gnome-utils/gnc-amount-edit.c: (gnc_amount_edit_class_init),
	(gnc_amount_edit_init), (gnc_amount_edit_changed),
	(gnc_amount_edit_new):
	* src/gnome/dialog-commodities.c: (response_cb),
	(gnc_commodities_dialog_create), (close_handler):
	* src/gnome/dialog-new-user.c: (gnc_ui_new_user_dialog):
	* src/gnome/glade/commodities.glade:

	Add GtkTreeModel for Accounts and ExampleAccounts:
	* src/gnome-utils/Makefile.am:
	* src/gnome-utils/gnc-tree-model-account.c
	* src/gnome-utils/gnc-tree-model-account.h
	* src/gnome-utils/gnc-tree-model-example-account.c
	* src/gnome-utils/gnc-tree-model-example-account.h

2003-05-18  Derek Atkins  <derek@ihtfp.com>

	* macros/autogen.sh: comment out intltoolize and libtoolize again

2003-05-17  Jan Arne Petersen  <jpetersen@uni-bonn.de>

	* configure.in: Add Makefile.in to AC_OUTPUT targets.
	* macros/autogen.sh: Add a AM_GLIB_GNU_GETTEXT section to generate a po/Makefile.in.in file.

2003-05-16  Jan Arne Petersen  <jpetersen@uni-bonn.de>

	* configure.in: Add gnucash.desktop, and gnucash.keys to the AC_OUTPUT targets.

	In the following:
	- Replace gtk_signal by g_signal
	- Replace GNOME_DOCK by BONOBO_DOCK
	- Fix wrong gtk_toolbar_new calls
	- Replace some GTK_OBJECTs by G_OBJECTs
	- Remove useless GOBJECT_DESTROYED calls
	- Fix some GType declarations.
	* src/business/business-gnome/business-gnome-utils.c:
	(gnc_fill_account_select_combo), (add_menu_item),
	(make_generic_optionmenu):
	* src/business/business-gnome/dialog-billterms.c: (make_menu),
	(new_billterm_dialog), (gnc_ui_billterms_window_new):
	* src/business/business-gnome/dialog-date-close.c:
	(gnc_dialog_dates_acct_parented):
	* src/business/business-gnome/dialog-invoice.c:
	(gnc_invoice_window_create_popup_menu),
	(gnc_invoice_update_job_choice), (gnc_invoice_update_proj_job),
	(gnc_invoice_update_window), (gnc_invoice_new_window),
	(gnc_invoice_window_new_invoice):
	* src/business/business-gnome/dialog-payment.c:
	(new_payment_window):
	* src/business/business-gnome/dialog-vendor.c:
	(gnc_vendor_name_changed_cb):

	In the following:
	Convert the glade files to Glade 2.0 (with libglade-convert)
	* src/business/business-gnome/glade/billterms.glade:
	* src/business/business-gnome/glade/customer.glade:
	* src/business/business-gnome/glade/date-close.glade:
	* src/business/business-gnome/glade/employee.glade:
	* src/business/business-gnome/glade/invoice.glade:
	* src/business/business-gnome/glade/job.glade:
	* src/business/business-gnome/glade/order.glade:
	* src/business/business-gnome/glade/payment.glade:
	* src/business/business-gnome/glade/vendor.glade:
	* src/business/dialog-tax-table/tax-tables.glade:
	* src/business/business-gnome/search-owner.c:
	* src/gnome-utils/commodity.glade:
	* src/gnome-utils/exchange-dialog.glade:
	* src/gnome-utils/transfer.glade:
	* src/gnome/glade/commodities.glade:
	* src/gnome/glade/fincalc.glade:
	* src/gnome/glade/help.glade:
	* src/gnome/glade/newuser.glade:
	* src/gnome/glade/price.glade:
	* src/gnome/glade/print.glade:
	* src/gnome/glade/progress.glade:
	* src/gnome/glade/register.glade:
	* src/gnome/glade/stocks.glade:
	* src/gnome/glade/tax.glade:
	* src/gnome/glade/userpass.glade:
	* src/import-export/binary-import/binary-import.glade:
	* src/import-export/generic-import.glade:
	* src/import-export/hbci/glade/hbci.glade:
	* src/import-export/hbci/glade/hbcipass.glade:
	* src/import-export/ofx/ofx.glade:
	* src/import-export/qif-import/qif.glade:
	* src/report/report-gnome/report.glade:

	In the following:
	- Replace gtk_signal by g_signal
	- Replace GNOME_DOCK by BONOBO_DOCK
	- Fix wrong gtk_toolbar_new calls
	- Replace some GTK_OBJECTs by G_OBJECTs
	- Remove useless GOBJECT_DESTROYED calls
	- Fix some GType declarations.
	(gnc_search_owner_get_type), (gnc_search_owner_class_init),
	(gnc_search_owner_finalize), (set_owner_widget),
	(type_option_changed), (add_type_menu_item), (make_type_menu),
	(how_option_changed), (add_how_menu_item), (make_how_menu):
	* src/business/dialog-tax-table/dialog-tax-table.c:
	(add_menu_item), (make_menu), (new_tax_table_dialog),
	(gnc_ui_tax_table_window_new):
	* src/gnome-utils/dialog-options.c: (gnc_options_register_stocks):
	* src/gnome-utils/dialog-utils.c:
	(gnc_glade_autoconnect_full_func):
	* src/gnome/dialog-new-user.c: (gnc_ui_new_user_dialog),
	(gnc_ui_new_user_cancel_dialog):
	* src/gnome/reconcile-list.c: (gnc_reconcile_list_get_type),
	(gnc_reconcile_list_new), (gnc_reconcile_list_init),
	(gnc_reconcile_list_class_init), (gnc_reconcile_list_toggle_row),
	(gnc_reconcile_list_toggle), (gnc_reconcile_list_select_row),
	(gnc_reconcile_list_unselect_row), (gnc_reconcile_list_finalize),
	(gnc_reconcile_list_get_needed_height),
	(gnc_reconcile_list_get_num_splits),
	(gnc_reconcile_list_get_current_split),
	(gnc_reconcile_list_refresh),
	(gnc_reconcile_list_reconciled_balance),
	(gnc_reconcile_list_commit), (gnc_reconcile_list_postpone),
	(gnc_reconcile_list_unselect_all), (gnc_reconcile_list_changed),
	(gnc_reconcile_list_set_sort_order):
	* src/gnome/reconcile-list.h:
	* src/gnome/window-reconcile.c: (gnc_recn_create_menu_bar),
	(gnc_recn_create_tool_bar), (recnWindowWithBalance):
	* src/gnome/window-register.c: (gnc_register_setup_menu_widgets),
	(gnc_register_set_read_only):
	* src/import-export/binary-import/druid-commodity.c:
	(make_commodity_druid_page):
	* src/import-export/import-main-matcher.c:
	(gnc_gen_trans_list_new):
	* src/import-export/import-match-picker.c: (init_match_picker_gui):
	* src/import-export/qif-import/druid-qif-import.c:
	(gnc_ui_qif_import_loaded_files_prepare_cb),
	(gnc_ui_qif_import_load_another_cb),
	(gnc_ui_qif_import_default_acct_back_cb), (make_qif_druid_page):

2003-05-15  Jan Arne Petersen  <jpetersen@uni-bonn.de>
	* TODO: Remove 15 th batch task
	* configure.in: Add pkgconfig checks for libgnomeprintui, gal and setenv, putenv checks
	* src/app-file/gnome/gnc-file-history.c: (gnc_history_update_menu):
	* src/backend/file/sixtp.c: (sixtp_sax_get_entity_handler): replace CHAR with xmlChar
	* src/backend/file/sixtp.h: replace CHAR with xmlChar
	* src/gnome-search/Makefile.am: add GNOME_PRINT_CFLAGS and GNOME_PRINT_LIBS

	In the following:
	- Fix wrong gtk_signal_new, gtk_signal_connect method-calls
	- Replace GNOME_DOCK with BONOBO_DOCK
	- Fix wrong gtk_toolbar_new calls
	- Replace gtkhtml-1.0 with gtk-html 2.0
	- Replace some GTK_OBJECTs with G_OBJECTs
	- Remove useless GOBJECT_DESTROYED calls
	- Fix some GType declarations.
	- Convert some *.glade files to glade 2.0.
	* src/gnome-search/dialog-search.c:
	(gnc_search_dialog_result_clicked),
	(gnc_search_dialog_init_result_list),
	(gnc_search_dialog_display_results), (remove_element),
	(attach_element), (option_activate), (search_clear_criteria),
	(get_element_widget), (gnc_search_dialog_add_criterion),
	(gnc_search_dialog_init_widgets),
	(gnc_search_dialog_connect_on_close):
	* src/gnome-search/gnc-general-search.c:
	(gnc_general_search_class_init), (create_children),
	(gnc_general_search_set_selected):
	* src/gnome-search/search-account.c: (gnc_search_account_get_type),
	(gnc_search_account_class_init), (gnc_search_account_finalize),
	(option_changed), (add_menu_item), (make_menu), (gncs_get_widget):
	* src/gnome-search/search-boolean.c: (gnc_search_boolean_get_type),
	(gnc_search_boolean_class_init), (gnc_search_boolean_finalize),
	(option_changed), (add_menu_item), (make_menu), (gncs_get_widget):
	* src/gnome-search/search-core-type.c:
	(gnc_search_core_type_get_type), (gnc_search_core_type_class_init),
	(gnc_search_core_type_init), (gnc_search_core_type_finalize),
	(gnc_search_core_type_new), (gnc_search_core_type_editable_enters),
	(gnc_search_core_type_grab_focus), (gnc_search_core_type_validate),
	(gnc_search_core_type_clone), (gnc_search_core_type_get_widget),
	(gnc_search_core_type_get_predicate),
	(gnc_search_core_type_new_type_name), (validate), (grab_focus),
	(editable_enters), (gnc_search_core_register_type), (init_table),
	(gnc_search_core_initialize), (gnc_search_core_finalize):
	* src/gnome-search/search-core-type.h:
	* src/gnome-search/search-date.c: (gnc_search_date_get_type),
	(gnc_search_date_class_init), (gnc_search_date_finalize),
	(option_changed), (add_menu_item), (make_menu), (gncs_get_widget):
	* src/gnome-search/search-double.c: (gnc_search_double_get_type),
	(gnc_search_double_class_init), (gnc_search_double_finalize),
	(option_changed), (add_menu_item), (make_menu), (gncs_get_widget):
	* src/gnome-search/search-int64.c: (gnc_search_int64_get_type),
	(gnc_search_int64_class_init), (gnc_search_int64_finalize),
	(option_changed), (add_menu_item), (make_menu), (gncs_get_widget):
	* src/gnome-search/search-numeric.c: (gnc_search_numeric_get_type),
	(gnc_search_numeric_class_init), (gnc_search_numeric_finalize),
	(how_option_changed), (option_changed), (add_menu_item),
	(make_how_menu), (make_option_menu), (gncs_get_widget):
	* src/gnome-search/search-reconciled.c:
	(gnc_search_reconciled_get_type),
	(gnc_search_reconciled_class_init),
	(gnc_search_reconciled_finalize), (option_changed),
	(toggle_changed), (add_menu_item), (make_menu), (make_toggle):
	* src/gnome-search/search-string.c: (gnc_search_string_get_type),
	(gnc_search_string_class_init), (gnc_search_string_finalize),
	(option_changed), (add_menu_item), (make_menu), (gncs_get_widget):
	* src/gnome-search/search.glade:
	* src/gnome-utils/dialog-utils.c: (gnc_option_menu_set_one_item),
	(gnc_option_menu_init_w_signal), (gnc_glade_autoconnect_full_func):
	* src/gnome-utils/dialog-utils.h:
	* src/gnome-utils/druid-utils.h:
	* src/gnome-utils/gnc-account-sel.c: (gnc_account_sel_get_type),
	(gnc_account_sel_class_init), (gnc_account_sel_init),
	(gnc_account_sel_new), (gnc_account_sel_finalize),
	(gnc_account_sel_dispose),
	(gnc_account_sel_set_new_account_ability),
	(gnc_account_sel_set_new_account_modal):
	* src/gnome-utils/gnc-account-sel.h:
	* src/gnome-utils/gnc-account-tree.c: (gnc_account_tree_get_type),
	(gnc_account_tree_new), (gnc_account_tree_init),
	(gnc_account_tree_class_init), (gnc_account_tree_set_view_info),
	(gnc_account_tree_get_view_info),
	(gnc_account_tree_expand_account),
	(gnc_account_tree_toggle_account_expansion),
	(gnc_account_tree_expand_all), (gnc_account_tree_set_view_filter),
	(gnc_account_tree_set_selectable_filter),
	(gnc_account_tree_finalize), (gnc_account_tree_dispose):
	* src/gnome-utils/gnc-account-tree.h:
	* src/gnome-utils/gnc-amount-edit.c: (gnc_amount_edit_get_type),
	(gnc_amount_edit_class_init):
	* src/gnome-utils/gnc-amount-edit.h:
	* src/gnome-utils/gnc-currency-edit.c:
	(gnc_currency_edit_get_type), (gnc_currency_edit_class_init),
	(gnc_currency_edit_init):
	* src/gnome-utils/gnc-currency-edit.h:
	* src/gnome-utils/gnc-date-delta.c: (gnc_date_delta_get_type),
	(gnc_date_delta_class_init):
	* src/gnome-utils/gnc-date-delta.h:
	* src/gnome-utils/gnc-frequency.c: (gnc_frequency_get_type),
	(gnc_frequency_class_init):
	* src/gnome-utils/gnc-frequency.h:
	* src/gnome-utils/gnc-general-select.c: (create_children):
	* src/gnome-utils/gnc-html-history.c: (gnc_html_history_append):
	* src/gnome-utils/gnc-html.c: (gnc_html_parse_url), (http_allowed),
	(https_allowed), (gnc_network_allowed), (gnc_html_http_request_cb),
	(gnc_html_start_request), (gnc_html_load_to_stream),
	(gnc_html_link_clicked_cb), (gnc_html_request_url_cb),
	(gnc_html_object_requested_cb), (gnc_html_on_url_cb),
	(gnc_html_set_base_cb), (gnc_html_submit_cb), (gnc_html_open_scm),
	(gnc_html_show_data), (gnc_html_show_url), (gnc_html_reload),
	(gnc_html_new), (html_cancel_helper), (gnc_html_cancel),
	(gnc_html_destroy), (gnc_html_set_urltype_cb),
	(gnc_html_set_load_cb), (gnc_html_set_flyover_cb),
	(gnc_html_set_button_cb), (gnc_html_export), (gnc_html_print),
	(gnc_html_get_history), (gnc_html_get_widget),
	(gnc_html_register_object_handler),
	(gnc_html_unregister_object_handler):
	* src/gnome-utils/gnc-html.h:
	* src/gnome-utils/gnc-mdi-utils.c: (gnc_mdi_show_progress),
	(gnc_mdi_child_find_menu_item), (gnc_mdi_child_find_toolbar_item),
	(gnc_mdi_child_changed_cb), (gnc_mdi_has_apps),
	(gnc_mdi_create_child_toolbar):
	* src/gnome-utils/gnc-menu-extensions.c:
	(gnc_create_extension_info), (cleanup_extension_info),
	(gnc_add_c_extension):
	* src/gnome-utils/gtkselect.c: (gtk_select_get_pos):
	* src/gnome-utils/gw-gnome-utils-spec.scm:
	* src/gnome-utils/print-session.c: (gnc_print_session_create),
	(gnc_print_session_print), (gnc_print_session_render),
	(gnc_print_session_preview):
	* src/gnome-utils/print-session.h:
	* src/gnome-utils/search-param.c: (gnc_search_param_get_type),
	(gnc_search_param_class_init), (gnc_search_param_finalize),
	(gnc_search_param_clone), (gnc_search_param_set_param_path),
	(gnc_search_param_override_param_type),
	(gnc_search_param_get_param_path),
	(gnc_search_param_get_converters),
	(gnc_search_param_get_param_type), (gnc_search_param_set_title),
	(gnc_search_param_set_justify), (gnc_search_param_type_match):
	* src/gnome-utils/search-param.h:
	* src/gnome-utils/window-help.c:
	(gnc_help_window_search_button_cb):
	* src/gnome/dialog-print-check.c:
	(gnc_ui_print_check_dialog_create):
	* src/gnome/dialog-scheduledxaction.c: (gnc_sxed_check_changed),
	(gnc_sxed_check_consistent), (gnc_sxed_save_sx),
	(gnc_sxed_get_widgets), (schedXact_editor_populate),
	(gnc_sxed_update_cal):
	* src/gnome/dialog-sxsincelast.c: (reminders_prep), (created_prep),
	(obsolete_prep), (auto_create_prep), (to_create_prep),
	(add_reminders_to_gui), (add_dead_list_to_gui):
	* src/gnome/dialog-tax-info.c:
	* src/gnome/druid-hierarchy.c:
	* src/gnome/druid-loan.c: (gnc_loan_druid_get_widgets):
	* src/gnome/glade/account.glade:
	* src/gnome/glade/sched-xact.glade:
	* src/gnome/gnc-splash.c: (gnc_show_splash_screen):
	* src/gnome/gnc-split-reg.c: (gsr_create_popup_menu):
	* src/gnome/mainwindow-account-tree.c:
	(gnc_mainwin_account_tree_class_init),
	(gnc_mainwin_account_tree_get_type):
	* src/gnome/reconcile-list.c: (gnc_reconcile_list_init),
	(gnc_reconcile_list_class_init),
	(gnc_reconcile_list_get_needed_height):
	* src/gnome/window-acct-tree.c: (gnc_acct_tree_view_new):
	* src/gnome/window-main-summarybar.c:
	(gnc_main_window_summary_new):
	* src/gnome/window-main.c: (gnc_main_window_app_created_cb),
	(gnc_main_window_flip_summary_bar_cb), (gnc_main_window_about_cb):
	* src/network-utils/gnc-http.c: (gnc_http_new):
	* src/register/register-gnome/combocell-gnome.c:
	(combo_disconnect_signals), (combo_connect_signals):
	* src/register/register-gnome/datecell-gnome.c:
	(date_picker_disconnect_signals), (date_picker_connect_signals):
	* src/register/register-gnome/gnucash-color.c:
	(gnucash_color_alloc), (gnucash_color_alloc_gdk),
	(gnucash_color_alloc_name), (gnucash_color_argb_to_gdk),
	(gnucash_color_init):
	* src/register/register-gnome/gnucash-date-picker.c:
	(gnc_date_picker_class_init):
	* src/register/register-gnome/gnucash-grid.c:
	(gnucash_grid_update):
	* src/register/register-gnome/gnucash-item-edit.c:
	(item_edit_draw_info), (item_edit_destroy),
	(item_edit_set_cursor_pos), (item_edit_claim_selection),
	(item_edit_cut_copy_clipboard), (item_edit_selection_get),
	(item_edit_selection_received):
	* src/register/register-gnome/gnucash-item-edit.h:
	* src/register/register-gnome/gnucash-item-list.c:
	(gnc_item_list_class_init):
	* src/register/register-gnome/gnucash-sheet.c:
	(gnucash_sheet_modify_current_cell), (gnucash_sheet_insert_cb),
	(gnucash_sheet_delete_cb), (gnucash_sheet_check_grab),
	(gnucash_button_press_event), (gnucash_sheet_direct_event),
	(gnucash_sheet_key_press_event):
	* src/register/register-gnome/table-gnome.c:
	(gnc_table_save_state):
	* src/report/report-gnome/dialog-column-view.c:
	(gnc_column_view_edit_options):
	* src/report/report-gnome/window-report.c:
	(gnc_report_window_view_new):


2003-05-15 TomF changes for gnucash-gnome2-dev, 15th batch
	* src/gnome/druid-stock-split.c: gnc_stock_split_druid_create:
	  Use gnome_druid_page_edge functions instead of gnc_druid
	  Replace gnc_get_gdk_imlib_image by 	gdk_pixbuf_new_from_file
	* src/gnome-utils/druid-utils.c, src/gnome-utils/druid-utils.h:
	  Remove functions with < 2 callers:
	  gnc_druid_set_logo_image,
	  gnc_druid_set_watermark_image, gnc_druid_set_title_image

	  In the following, use new gnome_druid function names.
	* src/gnome-utils/druid-utils.c: gnc_druid_set_colors:
	* src/import-export/qif-import/druid-qif-import.c


2003-05-12 TomF changes for gnucash-gnome2-dev, 14th batch
	* TODO: Added items for conversion to Pango,
	  druid, GnomeMDI
	* src/gnome-utils/dialog-utils.c:
	  Change fontdesc to font_desc
	  glade_xml_new (fname, root, NULL): Use NULL for default domain.
	* src/gnome-utils/dialog-utils.h:
	  Enable gnc_get_mdi_mode

	  In the following, use GTK_CLASS_TYPE macro
	* src/gnome/gnc-split-reg.c:
	* src/gnome/mainwindow-account-tree.c
	* src/gnome/reconcile-list.c:
	* src/gnome-search/gnc-general-search.c
	* src/gnome-utils/gnc-account-tree.c
	* src/gnome-utils/gnc-date-delta.c
	* src/gnome-utils/gnc-date-edit.c
	* src/gnome-utils/gnc-frequency.c
	* src/gnome-utils/gnc-general-select.c
	* src/register/register-gnome/gnucash-date-picker
	* src/register/register-gnome/gnucash-item-list
	* src/register/register-gnome/gnucash-sheet.c

	  In the following, use the 2.0 compatability function
	  gdk_font_from_description instead of the 2.2 compatability function
	  gdk_font_from_description_for_display to correct error in 13th batch.
	  Replace deprecated:
    	  gtk_editable_claim_selection( GTK_EDITABLE by
	  gtk_old_editable_claim_selection( GTK_OLD_EDITABLE
	* src/gnome-utils/dialog-transfer.c:
	* src/gnome-utils/dialog-utils.c:
	* src/register/register-gnome/gnucash-item-edit.c:
	* src/gnome-utils/gnc-dense-cal.c:
	* src/gnome-utils/dialog-options.c:
	* src/gnome/reconcile-list.c:
	* src/gnome/dialog-totd.c:
	* src/gnome/dialog-tax-info.c:
	* src/gnome/dialog-price-edit-db.c:
	* src/gnome/dialog-commodities.c:

2003-05-02  Christian Stimming  <stimming@tuhh.de>

	* configure.in: Add pkg-config test for libgnomeui-2.0.
	* src/import-export/hbci/*.c: Port hbci import module to Gnome2,
	sourcecode compiles now. Copy changes from HEAD branch.

2003-05-02 TomF changes for gnucash-gnome2-dev, 13th batch
	* src/gnome-utils/dialog-options.c:
	  Replace deprecated gdk_font_from_description by
	  gdk_font_from_description_for_display
	  #include <gdk/gdk.h>


	  In the following:
	  Replace x->font by gdk_font_from_description_for_display(
		gdk_display_get_default(),x->font_desc)
	  to account for style field restructure.
	* src/gnome-utils/dialog-utils.c:
	* src/register/register-gnome/gnucash-item-edit.c:
	* src/gnome-utils/gnc-dense-cal.c:
	* src/gnome-utils/dialog-transfer.c:
	* src/gnome-utils/dialog-options.c:
	* src/gnome/reconcile-list.c:
	* src/gnome/dialog-totd.c:
	* src/gnome/dialog-tax-info.c:
	* src/gnome/dialog-price-edit-db.c:
	* src/gnome/dialog-commodities.c:


	  In the following:
	  Replace object_class->g_type by GTK_CLASS_TYPE(object_class)
	  to use macro instead of inherited field reference.
	* src/gnome/gnc-split-reg.c:
	* src/gnome/gnc-split-reg.c:
	* src/gnome/mainwindow-account-tree.c:
	* src/gnome/mainwindow-account-tree.c:
	* src/gnome/mainwindow-account-tree.c:
	* src/gnome/reconcile-list.c:
	* src/gnome/reconcile-list.c:
	* src/gnome-search/gnc-general-search.c:
	* src/gnome-utils/gnc-account-tree.c:
	* src/gnome-utils/gnc-account-tree.c:
	* src/gnome-utils/gnc-date-delta.c:
	* src/gnome-utils/gnc-date-delta.c:
	* src/gnome-utils/gnc-date-edit.c:
	* src/gnome-utils/gnc-date-edit.c:
	* src/gnome-utils/gnc-dense-cal.c:
	* src/gnome-utils/gnc-frequency.c:
	* src/gnome-utils/gnc-general-select.c:
	* src/register/register-gnome/gnucash-date-picker.c:
	* src/register/register-gnome/gnucash-date-picker.c:
	* src/register/register-gnome/gnucash-item-list.c:
	* src/register/register-gnome/gnucash-item-list.c:
	* src/register/register-gnome/gnucash-item-list.c:
	* src/register/register-gnome/gnucash-item-list.c:
	* src/register/register-gnome/gnucash-sheet.c:
	* src/register/register-gnome/gnucash-sheet.c:
	* src/register/register-gnome/gnucash-sheet.c:





2003-04-29 TomF changes for gnucash-gnome2-dev, 12th batch
	* src/gnome-utils/gnc-date-edit.c:gnc_date_edit_class_init:
	  Replace object_class->type by object_class->g_type
	  to reflect change in GtkObjectClass
	  Delete call of deprecated  gtk_object_class_add_signals
	* src/gnome-utils/gnc-date-edit.c:date_accel_key_press
	  Change declare to G_CONST_RETURN char *string;
	  to reflect change in gtk_entry_get_text
	* src/business/business-gnome/search-owner.c:gnc_search_owner_class_init:
	  Delete call of deprecated  gtk_object_class_add_signals
	* src/gnome/gnc-split-reg.c:gnc_split_reg_get_type:
	  GtkObjectClass *object_class; Replace object_class->type by
	  object_class->g_type to reflect change in GtkObjectClass
	  Delete call of deprecated  gtk_object_class_add_signals
	* src/gnome/mainwindow-account-tree.c:gnc_mainwin_account_tree_class_init:
	  Replace object_class->type by object_class->g_type to
	  reflect change in GtkObjectClass
	  Delete call of deprecated  gtk_object_class_add_signals
	* src/gnome/reconcile-list.c:gnc_reconcile_list_class_init
	  Replace object_class->type by object_class->g_type to
	  reflect change in GtkObjectClass
	  Delete call of deprecated  gtk_object_class_add_signals

	  In the following:
	  Delete call of deprecated  gtk_object_class_add_signals
	  Replace object_class->type by object_class->g_type to
	  reflect change in GtkObjectClass
	* src/gnome-search/gnc-general-search.c:gnc_general_search_class_init:
	* src/gnome-utils/gnc-account-tree.c:gnc_account_tree_class_init:
	* src/gnome-utils/gnc-date-delta.c:gnc_date_delta_class_init:
	* src/gnome-utils/gnc-dense-cal.c: gnc_dense_cal_class_init:
	* src/gnome-utils/gnc-frequency.c:  gnc_frequency_class_init:
	* src/gnome-utils/gnc-general-select.c:gnc_general_select_class_init:
	* src/register/register-gnome/gnucash-item-list.c:  gnc_item_list_class_init:
	* src/register/register-gnome/gnucash-sheet.c:gnucash_register_class_init:


	  In the following, Delete call of deprecated gtk_object_class_add_signals
	* src/gnome-search/search-account.c:gnc_search_account_class_init:
	* src/gnome-search/search-boolean.c:gnc_search_boolean_class_init:
	* src/gnome-search/search-core-type.c:gnc_search_core_type_class_init:
	* src/gnome-search/search-date.c:gnc_search_date_class_init:
	* src/gnome-search/search-double.c: gnc_search_double_class_init:
	* src/gnome-search/search-int64.c:gnc_search_int64_class_init:
	* src/gnome-search/search-numeric.c:gnc_search_numeric_class_init:
	* src/gnome-search/search-string.c:gnc_search_string_class_init:
	* src/gnome-utils/gnc-account-sel.c:gnc_account_sel_class_init:
	* src/gnome-utils/gnc-amount-edit.c:gnc_amount_edit_class_init:
	* src/gnome-utils/search-param.c: gnc_search_param_class_init:


	  In the following,
	  Change declare to const char *
	  to reflect change in gtk_entry_get_text
	* src/app-file/gnome/gnc-file-dialog.c:store_filename:
	* src/business/business-gnome/business-gnome-utils.c:
	  gnc_fill_account_select_combo:
	* src/business/business-gnome/dialog-billterms.c:get_int, new_billterm_ok_cb:
	* src/business/business-gnome/dialog-customer.c:
	  gnc_customer_name_changed_cb:
	* src/business/business-gnome/dialog-employee.c:
	  gnc_employee_name_changed_cb:
	* src/business/business-gnome/dialog-invoice.c:  gnc_invoice_id_changed_cb:
	* src/business/business-gnome/dialog-job.c: gnc_job_name_changed_cb:
	* src/business/business-gnome/dialog-payment.c:  gnc_payment_ok_cb:
	* src/business/dialog-tax-table/dialog-tax-table.c:new_tax_table_ok_cb:
	* src/gnome/dialog-print-check.c:   entry_to_double:
	* src/gnome-search/search-string.c:  entry_changed:
	* src/gnome-utils/dialog-transfer.c:
	  gnc_xfer_dialog_quickfill,gnc_xfer_dialog_ok_cb:
	* src/gnome-utils/window-help.c:  gnc_help_window_search_button_cb:
	* src/import-export/binary-import/druid-commodity.c:
	  gnc_ui_commodity_druid_comm_check_cb
	* src/import-export/qif-import/druid-qif-import.c:
	  gnc_ui_qif_import_load_file_next_cb,
	  gnc_ui_qif_import_convert, gnc_ui_qif_import_comm_check_cb,
	  gnc_ui_qif_import_default_acct_next_cb:
	* src/report/report-gnome/dialog-style-sheet.c:  gnc_style_sheet_new_cb:

	* TODO:
	  Is deprecated gtk_object_class_add_signals handled correctly?


2003-04-26 TomF changes for gnucash-gnome2-dev, 11th batch
	* src/gnome-utils/cursors.c:
	  Fix incorrect g_list_free.

	* src/gnome/window-main.c,
	* src/gnome-utils/gnc-mdi-utils.c,
	* src/app-file/gnome/gnc-file-history.c:
	  Replace calls of deprecated gtk_container_get_toplevels by
	  gtk_window_list_toplevels

	* src/gnome-utils/dialog-options.c:
	  Move gnc_options_register_stocks call to gnc_options_ui_initialize,
	  to be called just once for all stock items at module initialization.
	  Remove include gtk/gtktextview.h.  It is included under gnome.h
	* src/gnome-search/dialog-search.c: attach_element,
	  gnc_search_dialog_init_widgets:
	  Replace deprecated gnome_stock_new_with_icon, gnome_pixmap_button
	  by gtk_button_new_from_stock
	* src/gnome-utils/gnc-date-edit.c: select_clicked:
	  Remove inactivated block referencing deprecated gnome_stock_cursor_new


2003-04-26 TomF changes for gnucash-gnome2-dev, 11th batch

	* src/gnome-utils/cursors.c:
	  Fix incorrect g_list_free.

	* src/gnome/window-main.c,
	* src/gnome-utils/gnc-mdi-utils.c,
	* src/app-file/gnome/gnc-file-history.c:
          Replace calls of deprecated gtk_container_get_toplevels by
	  gtk_window_list_toplevels

	* src/gnome-utils/dialog-options.c:
	  Move gnc_options_register_stocks call to gnc_options_ui_initialize,
	  to be called just once for all stock items at module initialization.
	  Remove include gtk/gtktextview.h.  It is included under gnome.h
	* src/gnome-search/dialog-search.c: attach_element,
	  gnc_search_dialog_init_widgets:
	  Replace deprecated gnome_stock_new_with_icon, gnome_pixmap_button
	  by gtk_button_new_from_stock
	* src/gnome-utils/gnc-date-edit.c: select_clicked:
	  Remove inactivated block referencing deprecated gnome_stock_cursor_new


2003-04-02 TomF changes for gnucash-gnome2-dev, 10th batch
	* src/gnome-utils/dialog-account.c
	  Change declares of name to const gchar.
	* src/gnome-utils/dialog-account-pick.c
	  Parentheses around assignment in expression
	* src/gnome-utils/dialog-commodity.c
	  Change declare of fullname to const gchar
	* src/gnome-utils/dialog-options.c
	  Replace "if (!GTK_OBJECT_DESTROYED(xxx))" by "if (!container)"
	  to remove deprecated macro
	  Replace call of gnome_stock_button by call to new function
	  gnc_options_register_stocks
	  Replace deprecated gtk_text* functions by gtk_text_view*
	  Change style->font to gdk_font_from_description(style->font_desc)
	  Change style->klas->xthickness to style->xthickness
	* src/gnome-utils/dialog-options.h
	  Prototype for gnc_options_register_stocks
	* TODO : Started categorized todo list for internal work items


2003-04-01 TomF changes for gnucash-gnome2-dev, 9th batch

	* src/gnome-utils/gnc-html.h
	  Replace gtkhtml/gtkhtml.h by libgtkhtml/gtkhtml.h
	  Delete declare of gnc_html_register_object_handler	(FIXME)
	  Delete typedef of GncHTMLObjectCB			(FIXME)
	* src/gnome-utils/dialog-account.c
	  cast assignment statements to char *

	  In the following, replace glib macro wrappers GTK_CHECK*
	  by G_TYPE_CHECK* and remove {BEGIN,END}_GNOME_DECLS

	* src/gnome-utils/gnc-amount-edit.h
	* src/gnome-utils/gnc-general-select.h
	* src/gnome-search/gnc-general-search.h
	* src/gnome-utils/gnc-account-sel.h
	* src/gnome-utils/gnc-currency-edit.h
	* src/gnome-utils/gnc-date-delta.h
	* src/gnome-utils/gnc-date-edit.h
	* src/gnome-utils/gnc-frequency.h


2003-04-01  Derek Atkins  <derek@ihtfp.com>

	* remove TomF's comments from files in batch 7; the
	  ChangeLog is sufficient.

2003-03-16 TomF changes for gnucash-gnome2-dev, 8th batch

	* src/gnome-utils/cursors.c
	  Replace calls of deprecated gtk_container_get_toplevels by
	  gtk_window_list_toplevels

2003-03-14 TomF changes for Gnome-2 branch, 7th batch

	  Change gtk_*_ref to g_object_ref, same for unref,
	  to replace deprecated functions in the following files.

	* src/business/business-gnome/dialog-billterms.c
	* src/gnome/dialog-price-edit-db.c
	* src/gnome/gnc-split-reg.c
	* src/gnome/window-register.c
	* src/gnome-utils/dialog-options.c
	* src/gnome-utils/dialog-transfer.c
	* src/gnome-utils/dialog-utils.c				    *
	* src/gnome-utils/gnc-account-tree.c
	* src/gnome-utils/dialog-utils.c
	* src/gnome-utils/gnc-html.c
	* src/gnome-utils/gnc-mdi-utils.c
	* src/gnome-utils/gtkselect.c
	* src/gnome-utils/print-session.c
	* src/gnome-utils/window-help.c
	* src/gnome-search/dialog-search.c
	* src/import-export/hbci/hbci-interaction.c
	* src/import-export/hpci/hbci-progressmon.c
	* src/register/register-gnome/combocell-gnome.c
	* src/register/register-gnome/datecell-gnome.c
	* src/register/register-gnome/gnucash-sheet.c
	* src/register/register-gnome/table-gnome.c
	* src/report/report-gnome/dialog-style-sheet.c

2003-03-12 TomF changes for Gnome-2 branch, 6th batch

	* src/network-utils/test/Makefile.am:
	  Add libgncmod-engine.la to fix undefined ref to `gnc_should_log'
 	* src/backend/net/NetIO.c: Remove include ghttp.h
 	  to bypass missing ghttp.  The functions were already disabled.

2003-03-12  Derek Atkins  <derek@ihtfp.com>

	* src/gnome/Makefile.am: remove GHTTP_CFLAGS

	* configure.in: can't use AM_PATH_GDK_PIXBUF; that's a gnome-1
	  feature and doesn't work for gnome2

2003-03-11  Derek Atkins  <derek@ihtfp.com>

	* configure.in: get the configure script to actually attempt to do
	  something real in terms of gnome-print, gdk-pixbuf, and guppi.

2003-03-11 TomF changes for Gnome-2 branch, 5th batch

	* src/network-utils/Makefile.am: add src/engine to allow
	  including gnc-engine-util.h
	* src/network-utils/gnc-http.c: Disable all functions to bypass
	  missing ghttp.
	  Include "gnc-engine-util.h" to allow PERR warnings.
	  Use long if 0 to make it easy to go back to the original to
	  start developing a ghttp replacement.
          Declare variable "module" to make the PERR warnings work.

	Added by warlord:
	* src/network-utils/Makefile.am: remove GHTTP references

2003-03-09 TomF changes for Gnome-2 branch, 4th batch

	* src/gnome-utils/dialog-utils.h: Disabled declarations of
	  functions not used in QuickFill to bypass missing typedef
	  for GdkImlibImage
	* Next make problems are in:
	    cursors.c, in function `gnc_set_busy_cursor'
	    references to ghttp in gnc-http.c

2003-03-09 TomF changes for Gnome-2 branch

	* configure.in: Disabled gnome-print.  Added LIBGUPPI.
	  AM_PATH_LIBGLADE  replaced by PKG_CHECK_MODULES
	  Disabled gtkhtml check
	* gnome.m4:  Fixed use of wrong gnome2 names introduced 2/27

2003-03-02 TomF changes for Gnome-2 branch

	* configure.in: Change GNOME_XML_CHECK call to GNOME_XML2_CHECK
	  to fix wrong libxml library in gcc calls.
          Move AS_SCRUB_INCLUDE call to macros/gnome-xml-check.m4
	  Commented out the po/Makefile lines in AC_OUTPUT calls to bypass
	  "not found" errors
	* macros/autogen.sh: Commented out gettextize lines to bypass
	  "not found" errors
	  might want to change the gettextize to glib-gettextize
	* macros/gnome-xml-check.m4: changed macro name to GNOME_XML2_CHECK
	  Changed xml to xml2; changed GNOME-CONFIG to PKG-CONFIG
	  Moved AS_SCRUB_INCLUDE call from configure.in
	  This .m4 file was not in the Gnome-2 branch, so it has to be
	  added in cvs.  I don't know how it got dropped.
	* src/engine/gnc-associate-account.c: Fixed gcc warning messages.
	* Currently, make fails at gnc-gpg.c, and there is an unknown text
	  file: src/network-utils/gnc-gpg.loT

2003-02-27   Derek Atkins  <derek@ihtfp.com>

	* re-add macros/gnome.m4 for GNOME_INIT
	* configure.in: re-add call to GNOME_INIT

2003-02-18 TomF changes for Gnome-2 branch

	* autogen.sh: Use Gnome2 libraries
	* configure.in: Initial changes to make autogen.sh work and have
	  make use the correct glib_2_0.  Many changes still needed for
	  make to complete without errors.
	* acconfig.h: Use GETTEXT_PACKAGE

2003-02-15  Derek Atkins  <derek@ihtfp.com>

	* Start changes for Gnome-2.
	* remove macros/gnome*.m4, so we can use gnome's installed versions.


-=-=-=- cvs gnome2 branch ChangeLog is above this line -=-=-=-


2005-10-26  Christian Stimming  <stimming@tuhh.de>

	* po/eu.po: Add Basque translation by Mikel Olasagasti
	<hey_neken@mundurat.net>.

2005-10-16  Christian Stimming  <stimming@tuhh.de>

	* po/glossary/pl.po: Added polish glossary by A. Tokarski
	<szczur@malinablue.punkt.pl>

2005-10-08  Christian Stimming  <stimming@tuhh.de>

	* src/engine/Transaction.c: Remove misleading (char*) casts by
	Linas Vepstas from 2003-09-14, but nevertheless the code doesn't
	have any errorneous double-free's at this point.

2005-10-07  Christian Stimming  <stimming@tuhh.de>

	* src/engine/iso-4217-currencies.scm: Fix spelling of TJS
	currency. Fixes #310697.

2005-10-06  David Hampton  <hampton@employees.org>

	* src/app-utils/date-utilities.scm: Patch from Yves-Eric Martin
	<yem_lists.gnucash.org@filter.yve.net> to make it easier for users
	to change the financial year end date.  They still have to edit a
	scheme file though.

2005-08-16  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/hbci-interaction.c (inputBoxCB): Aaarg,
	fix extremely stupid bug that occasionally crashes the PIN entry.

2005-08-15  David Hampton  <hampton@employees.org>

	* src/engine/Query.c: Todd T. Fries patch for compilation on
	OpenBSD 64bit architectures.

2005-08-15  Derek Atkins  <derek@ihtfp.com>

	* src/business/business-core/business-core.scm:  need to
	  properly recurse in gnc:owner-get-owner-id.  there is no
	  gnc:owner-get-id API.

2005-07-17  Christian Stimming  <stimming@tuhh.de>

	* macros/openhbci.m4: Remove old unused macros. Add macro name
	quotations as required by newer automake.

2005-07-10  David Hampton  <hampton@employees.org>

	* src/engine/iso-4217-currencies.scm: Add the new Romanian Leu.

2005-05-23  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/dialog-hbcitrans.c: Fix handling of debit
	notes -- they were broken at all times since the aqbanking
	transition, oops.

	* src/import-export/hbci/dialog-hbcitrans.c: Add sanity checks and
	ask user when there are no purpose lines.

2005-05-06  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/druid-hbci-initial.c (on_aqhbci_button):
	Finally generalize the AqBanking setup call. Now the setup wizard
	for OFX-DirectConnect can be called by Tools -> HBCI Setup as
	well.

2005-05-05  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/gnc-hbci-utils.c: Improve debugging
	messages.

2005-04-21  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/gnc-hbci-getbalance.c: Fix forgotten NULL
	check as reported by Martin Preuss <aquamaniac@gmx.de>.

2005-04-14  David Hampton  <hampton@employees.org>

	* src/engine/iso-4217-currencies.scm:
	* src/engine/gnc-commodity.c: Update the Bulgarian Lev and add the
	Malagasy Ariary.

2005-04-06  Christian Stimming  <stimming@tuhh.de>

	* po/rw.po, po/glossary/rw.po: Add Kinyarwanda translation by
	Steven Michael Murphy <murf@e-tools.com>

2005-04-06  David Hampton  <hampton@employees.org>

	* src/bin/generate-gnc-script: Be vocal when using deprecated
	guile functions.

	* src/report/report-system/report-system.scm:

	* src/report/utility-reports/utility-reports.scm:
	* src/business/business-reports/business-reports.scm: Use
	re-export instead of export for one function.

2005-04-02  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/dialog-hbcitrans.c: Fix warning about
	deprecated aqbanking function in aqbanking-1.0.7

2005-03-20  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/gnc-hbci-utils.c: Retrieve the current
	book's character encoding which so far is identical to the
	locale's encoding by nl_langinfo().

	* src/import-export/hbci/hbci-interaction.c: Fixed ignored 'abort'
	button.

2005-03-19  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/gnc-hbci-utils.c (gnc_hbci_descr_tognc):
	Correctly convert imported transaction description from utf-8 to
	the local encoding.

2005-03-13  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/gnc-hbci-getbalance.c: Improve user
	message when downloaded balance is already identical to reconciled
	balance.

2005-03-12  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/gnc-hbci-gettrans.c, hbci-interaction.h:
	Improve error handling in HBCI operations.

2005-02-26  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/gnc-hbci-kvp.c (force_account_dirty):
	Force account 'dirty' after modifying the kvp_frame. Hopefully
	fixes #165096.

2005-02-21  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/import-backend.c, import-backend.h,
	import-main-matcher.h: Revert the change in December about date
	matching thresholds that broke some OFX import. Now, the hard
	limit days interval is set by the importing sub-module when
	creating the dialog. This way, HBCI and OFX can set their
	different requirements. (Note: QIF does not use this code at all.)

2005-02-20  Neil Williams  <linux@codehelp.co.uk>
	* src/engine/qof_book_merge.c: Fix double free of the targetList
	entities that cause xaccGroupGetNumSubAccounts to generate a
	segmentation fault.
	* src/engine/kvp_frame.c:
	* src/engine/kvp_frame.h:
	Add kvp_value_to_bare_string to
	generate strings without debug information.
	* src/engine/qofsession.h:
	* src/engine/qofsession.c:
	Documentation tweaks to bring them into line with QOF and the
	gnucash-gnome2-dev branch.

2005-02-16  Derek Atkins  <derek@ihtfp.com>

	* src/gnome-utils/dialog-utils.c: When trying to load the symbol
	  from a glade file, Fall back to dlsym() if g_module_symbol()
	  fails.  This is necessary to find the symbols on on certain *BSD
	  systems.

	* acinclude.m4: Add mips, mipsel, arm, and m68k for Debian.

2005-02-06  Chris Lyttle  <chris@wilddev.net>

	* src/scm/main.scm: Update for 1.8.11 release

2005-02-06  Derek Atkins  <derek@ihtfp.com>

	* src/engine/date.c: Fix the last-day-of-month computation for
	  leap years.  Need to use modulo, not divide.  (Patch by
	  Neil Williams.

2005-02-06  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/gnc-hbci-gettrans.c: Fix HBCI date range
	for statement download.

2005-02-05  Derek Atkins  <derek@ihtfp.com>

	* src/report/locale-specific/us/Makefile.am: make sure the
	  scheme reports are part of the DIST.

2005-01-30  Derek Atkins  <derek@ihtfp.com>

	* src/engine/Account.c:
	  This patch fixes: (QofAccessFunc)xaccAccountSetNonStdSCU in
	  src/engine/Account.c - that's a Set routine allocated as a
	  QofAccessFunc - the patch changes it to the appropriate Get
	  routine - the QofSetterFunc is OK.

	Neil Williams' QOF sync patch:
	* This patch updates the QOF merge code to current QOF to bring
	  the HEAD branch into sync. This update also makes
	  qof_book_merge_param_as_string output strings that are
	  compatible with QSF: using false instead of FALSE in string
	  output and using the QSF_XSD_TIME for the datestrings.

	* src/engine/Account.c:
	  - updated implementation of qofAccountSetParent().

	* src/engine/Scrub.c:
	* src/engine/Transaction.c:
	  Add the transaction guid to some error warning messages.
	  Fixes #165571.

2005-01-29  Derek Atkins  <derek@ihtfp.com>

	David Montenegro's patch for bugs #95551, #124367.
	* src/report/standard-reports/account-summary.scm:
	  Rewrote account summary report. Now has fields for
	  more account metadata. Properly handles mixed
	  asset/liability subaccounts.
	* src/report/standard-reports/html-acct-table.scm:
	  Added functionality (account-type &c) and bug fixes
	  (lone zb subtotals, spurious 'recursive-bal, typos)
	  needed to make the new account-summary.scm work.

	Thomas Bushnell's patch to protect non-backup pruning (#164875)
	* src/backend/file/gnc-backend-file.c:
	  When working on the file foo.xac, backups are named
	  foo.DATE.xac.  But the backup file pruner will prune any old
	  file named foo.DATE.anything.

2005-01-29  Christian Stimming  <stimming@tuhh.de>

	* configure.in, src/tax/us/gncmod-tax-us.c,
	src/report/locale-specific/us/gncmod-locale-reports-us.c,
	src/app-utils/gnc-ui-util.c: Make localized tax categories
	disabled by default; can be enabled by
	--enable-locale-specific-tax switch.

	* src/import-export/hbci/dialog-hbcitrans.c: Enable debit notes
	again. Various other improvements.

	* src/import-export/hbci/druid-hbci-initial.c (on_aqhbci_button),
	configure.in: Adapt to latest changes in aqbanking; external
	wizard name is no longer hard-coded here but is asked from
	aqbanking.

2005-01-23  Derek Atkins  <derek@ihtfp.com>

	* src/business/business-core/gncInvoice.c: Properly accumulate
	  splits (bug #165053).  Also fixes a (related) memory leak
	  (caused by the same lack-of-reference to accumulated splits).

2005-01-16  Christian Stimming  <stimming@tuhh.de>

	* src/app-utils/gnc-ui-util.c: Modify tax option code to load
	tax-de_DE module in the appropriate locale.

	* src/report/locale-specific/us/gncmod-locale-reports-us.c,
	de_DE.scm: Add scheme module for locale-report/us
	resp. locale-report/de_DE again because it seems to be required.

2005-01-15  Derek Atkins  <derek@ihtfp.com>

	* Neil William's patch to remove static mergeData context.

2005-01-12  Christian Stimming  <stimming@tuhh.de>

	* rpm/gnucash.spec.in, rpm/README: Remove obsolete package
	requirements from rpm spec file. Add warnings about using these
	spec files with caution.

2005-01-10  Christian Stimming  <stimming@tuhh.de>

	* src/engine/guid.h: Fix gcc4 warnings as pointed out by bug
	#162635

	* src/report/locale-specific/us/gncmod-locale-reports-us.c,
	src/tax/us/gncmod-tax-us.c: For German tax categories, make sure
	the module name will match the de_DE locale or will fall back to
	us module name all the time.

2004-12-31  Derek Atkins  <derek@ihtfp.com>

	John Ellson's patch to fix some gcc4 warnings (bug #162582).

	Chris Shoemaker's gnc-trace patch.
	* src/engine/gnc-trace.[ch]:
	  - Recent use of malloc in gnc-trace breaks my compile, use g_malloc
	  - Fix leak of filename mem
	  - add indenting of trace file according to ENTER/LEAVE stack depth
	  - have ENTER report file name of function along with function name

	Chris Shoemaker's typo-fix patch.
	* src/engine/qofbook.h:
	* src/engine/qofid.h:
	  general fixed typos and comments

2004-12-29  Christian Stimming  <stimming@tuhh.de>

	* src/tax/us/txf-de_DE.scm: Add Tax TXF categories for the de_DE
	locale, i.e. the German tax report. If the current locale begins
	with de_DE, the new German tax categories will be loaded,
	otherwise the conventional U.S. ones. This is the easiest method
	to allow other (non-U.S.) tax categories to be selected in the
	accounts' tax settings.

	* src/report/locale-specific/us/taxtxf-de_DE.scm: Add Tax report
	for de_DE locale. If the current locale begins with de_DE, the new
	German tax report will be loaded, otherwise the conventional
	U.S. report.

2004-12-23  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/druid-hbci-initial.c (on_aqhbci_button):
	Add extra sanity checks and verbose error message if the setup
	wizard of aqhbci cannot be found.

	* src/import-export/hbci/gncmod-hbci.c: Fix potentially missing
	initialization of gwenhywfar library, as reported by Peter
	O'Gorman on Max OS X.

2004-12-17  Derek Atkins  <derek@ihtfp.com>

	Rich Johnson's patch to include private structures in the doxygen docs
	* src/doc/doxygen.cfg.in:
	  extract local classes = yes
	  don't exclude *P.h

2004-12-05  Derek Atkins  <derek@ihtfp.com>

	* src/engine/test/test-book-merge.c: targetEnt is always NULL
	  during MERGE_NEW so don't test it in that case.

2004-12-04  Derek Atkins  <derek@ihtfp.com>

	* src/backend/file/Makefile.am:
	* src/backend/file/test/Makefile.am:
	* src/business/business-core/file/Makefile.am:
	  Need to include GNOME_XML_CFLAGS to make sure the libxml includes
	  are found during the compile.  Fixes #121026.

	* src/gnome/glade/register.glade:
	  Increase "number" spin box to a maximum of 1billion.  Fixes #152772.

	* src/business/business-core/gncInvoice.c:
	  send an event when a payment is processed so the invoice gets
	  updated as "paid" in the search window.
	  Fixes #139092.

	* src/business/business-gnome/dialog-vendor.c:
	  Make sure we set the proper search-type when we create the
	  query, otherwise the search will fail later.
	  Fixes #141526.

	* src/engine/test/test-numeric.c:
	  Make sure we use gint64 instead of gint when trying to test
	  values > 2^32.

2004-12-02  Derek Atkins  <derek@ihtfp.com>

	* src/business/business-ledger/Makefile.am: add explicit
	  dependency on business-utils.

	* src/engine/gnc-trace.c: Try a few different filenames for
	  the trace log and if all else fails fall back to stderr.

2004-11-27  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/import-backend.c
	(gnc_import_find_split_matches): Improve importer performance by
	matching imported transactions only against transactions in the
	proper time interval.

2004-11-22  Christian Stimming  <stimming@tuhh.de>

	* configure.in, README: Add configure check for libofx version
	0.7.0 and respective error message. Update docs. Fixes #159050

2004-11-13  Christian Stimming  <stimming@tuhh.de>

	* src/report/report-gnome/window-report.c,
	src/scm/main-window.scm: Identified and fixed several places with
	untranslated strings.

2004-11-10  Christian Stimming  <stimming@tuhh.de>

	* src/engine/gnc-commodity.c, src/engine/iso-4217-currencies.scm:
	Change currency mnemonic for "New Israeli Shekel" from "ILS" to
	"NIS". Fixes #152755.

2004-11-01  Christian Stimming  <stimming@tuhh.de>

	* src/gnome/dialog-find-transactions.c: Mark search criteria for
	translation -- somehow this had been missed all the time.

2004-10-31  Derek Atkins  <derek@ihtfp.com>

	* Neil Williams' QOF Book Merge Patch #2.

	* src/engine/gnc-pricedb.c:
	  Phil Longstaff's patch to prevent duplicate pricedb entries.

	Heath Martin's x86_64 patch:
	* macros/autogen.sh:
	  change "head -1" to "head -n 1"
	* src/engine/gnc-numeric.[ch]:
	  change string_to_gnc_numeric() to return gboolean.
	* src/app-utils/gnc-exp-parser.c:
	* src/backend/file/sixtp-dom-parsers.c:
	  use new string_to_gnc_numeric() API
	* src/engine/gnc-lot.c:
	  64-bit safe for x86_64
	* src/gnome/dialog-scheduledxaction.c:
	* src/gnome/dialog-sxsincelast.c:
	* src/gnome/druid-loan.c:
	* src/gnome-utils/dialog-account.c:
	* src/gnome-utils/gnc-query-list.c:
	* src/import-export/import-match-map.c:
	  use GPOINTER_TO_INT and GINT_TO_POINTER macros to be 64-bit safe.

	James Strandboge's "Easy Invoice" patch:
	* src/business/business-reports/Makefile.am:
	* src/business/business-reports/business-reports.scm:
	* src/business/business-reports/easy-invoice.scm:
	  add "easy invoice" code.
	* src/business/business-utils/business-prefs.scm:
	* src/business/business-utils/business-utils.scm:
	  add preferences for the business ID, used in the easy invoice.
	* src/report/stylesheets/Makefile.am:
	* src/report/stylesheets/stylesheets.scm:
	* src/report/stylesheets/stylesheet-easy.scm:
	  add "easy stylesheet" code.

	* src/engine/gw-engine-spec.scm:
	  Fix parameter order to match C file (thanks for Erwin Rieger).

2004-10-30  Christian Stimming  <stimming@tuhh.de>

	* doc/README.HBCI: Updated HBCI readme.

	* src/import-export/hbci/hbci-interaction.c: Fix problems with
	user messages.

2004-10-24  Benoit Grgoire <bock@step.polymtl.ca>
	* po/fr.po:  Translation from Johan Buret, unfortunately on the wrong branch.

2004-10-16  Derek Atkins  <derek@ihtfp.com>

	* Neil Williams' QOF book merge patch #1:
	  qof_book_merge - release 1.

	  Includes
	  qof_book_merge.c
	  qof_book_merge.h
	  test-book-merge.c test routine
	  New Account Hierarchy druid
	  Sundry adjustments to QOF support.
	  Tweaks to several Makefile.am files to support new files.
	  Tweaks to window-main.c to support new menu item
	  Changes to druid-hierarchy.c to support the merge druid.

2004-10-15  Derek Atkins  <derek@ihtfp.com>

	* src/business/business-core/gncInvoice.[ch]
	* src/business/business-gnome/dialog-date-close.[ch]
	* src/business/business-gnome/dialog-invoice.c
	* src/business/business-gnome/glade/date-close.glade
	* src/business/business-utils/business-prefs.scm
	  Daniel Lindenaar's patch to implement a check-box in the Invoice Post
	  Dialog (with a default in the File Preferences) to choose to accumulate
	  splits when posting an invoice, or post a 1:1 mapping.

2004-10-13  Derek Atkins  <derek@ihtfp.com>

	* src/import-export/qif-import/qif-object.scm:
	  provide a default account name so we don't crash when someone
	  imports a broken QIF that has a !Account without an account name.
	  Fixes bug #155244.

2004-10-08  Derek Atkins  <derek@ihtfp.com>

	* engine/gw-engine-spec.scm:
	* gnome-search/dialog-search.h:
	* report/report-gnome/dialog-column-view.h:
	  Andreas Rottmann's patch to support g-wrap 1.9.
	  - don't wrap non-existent objects
	  - protect headers from multiple inclusion
	  - include gtk.h header when we use gtk objects.

2004-10-08  Benoit Grgoire <bock@step.polymtl.ca>
       	* src/import-export/import-backend.c:  Duplicate match tweaks:
               -Change MATCH_DATE_NOT_THRESHOLD from 3 weeks to two weeks
               -A transaction amount mismatch past the threshold is now punished by -5 instead of -1
               -Date mismatch is now worth -5 isntead of -10
               -Check number mismatch is now punished -2, but only if both numbers are NOT empty.
       	* src/import-export/ofx/gnc-ofx-import.c: Update for new LibOfx, this among other things, gives gnucash Microsoft OFC support.
       	* src/import-export/ofx/test/test-link.cL Update for new LibOfx.
       	* configure.in:  Partly update for new libofx.  It will crash if the right version isn't available, but there is no explicit version support (if someone wants to code it, you can use the output of "ofxdump --version".
	* src/gnome-utils/gnc-query-list.c:  Fix gcc3.4 compile problem

2004-09-30  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/gnc-hbci-getbalance.c: Fix HBCI balance
	retrieval when some of the returned balance is NULL.

2004-09-28  Derek Atkins  <derek@ihtfp.com>

	* src/engine/qofquerycore.c: Fix for x86_64.
	* src/backend/file/io-gncbin-r.c: Fixes for x86_64

2004-09-22  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/hbci-interaction.c: Finally fix the HBCI
	implementation based on aqbanking/aqhbci. This can now be tested
	intensively.

2004-09-22  Derek Atkins  <derek@ihtfp.com>

	* src/engine/test/test-transaction-reversal.c:
	* src/engine/test-core/test-engine-stuff.c:
	  Fix for ISO C90.  Fixes #153465.

2004-09-06  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/dialog-hbcitrans.c,
	gnc-hbci-getbalance.c, gnc-hbci-gettrans.c: More AqBanking work
	after hints from Martin Preuss <martin@libchipcard.de>.

2004-09-04  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/*.h, *.c, macros/aqbanking.m4,
	configure.in: Major change for HBCI. It is no longer based on the
	openhbci2 library but instead on the aqbanking library
	http://sf.net/projects/aqbanking which is Martin Preuss' successor
	of openhbci2. This means that now aqbanking-0.9.2 is required
	instead of any of the openhbci[2] package. Still needs more
	testing, though.

2004-08-28  Derek Atkins  <derek@ihtfp.com>

	* src/engine/Account.c: fix xaccAccountGetBalanceAsOfDate() to properly
	  compute the balance at the end of the split list.  Fixes #150757.

2004-08-21  Derek Atkins  <derek@ihtfp.com>

	* src/report/standard-reports/advanced-portfolio.scm:
	  Add option to include zero-amount splits in computations.
	  Fixes #143722.

2004-08-19  Derek Atkins  <derek@ihtfp.com>

	Neil Williams's "QOF create: functionality added" patch:

	QOF create: adding functions to be used with
	qof_object_new_instance for new qof_book_merge objects, including
	business objects.

	Small documentation tweak to make QofEntity and QofParam
	structures visible to doxygen.

	* src/import-export/qif-import/qif-dialog-utils.scm:
	  Perry Smith's Null Account Patch.  Make sure the security is
	  a real string before appending an account separator, so we
	  don't try to create a "null" account.

2004-08-19  Derek Atkins  <derek@ihtfp.com>

	* configure.in: change the gtkhtml order to search for >= 1.1 before
	  < 1.1, in order to try to fix #84707 on systems with multiple
	  versions of gtkhtml.

2004-08-12  David Montenegro  <sunrise2000@comcast.net>

        * src/report/standard-reports/trial-balance.scm:
	    src/report/standard-reports/equity-statement.scm:
	    src/report/report-system/report-utilities.scm:
	    Added to the work sheet special handling of
	    inventory and income summary accounts for
	    merchandising businesses.  Fixes #150008.

2004-08-11  Derek Atkins  <derek@ihtfp.com>

	* src/gnome/gnucash.desktop.in: make the desktop HIG compliant.
	  Fixes #145545

2004-07-20  Derek Atkins <derek@ihtfp.com>

	* src/engine/Scrub.c
	* src/engine/Scrub2.c
	* src/engine/gnc-numeric.c
	* src/engine/gnc-pricedb.c
	* src/engine/kvp-util.c
	* src/engine/qofid.c
	* src/engine/qofmath128.c
	* src/engine/qofquery.c
	* src/engine/qofsession.c
	* src/engine/test/test-numeric.c
	  Priit Laes' patch for C90 compliance.

2004-07-13  David Montenegro  <sunrise2000@comcast.net>

        * src/report/standard-reports/general-ledger.scm:
	  src/report/standard-reports/standard-reports.scm:
          src/report/standard-reports/Makefile.am:
          Added General Ledger report, a Transaction Report
          with a pre-set set of options.

	* src/report/standard-reports/transaction.scm:
          FIXME - All accounts now selected by default, avoids
          confusing error message. Error message also clarified.
          Fixed "Totals" option so that it works.

        * src/report/standard-reports/balance-sheet.scm:
        * src/report/standard-reports/equity-statement.scm:
        * src/report/standard-reports/trial-balance.scm:
        Updated comments
	* Fixes #144268

        * src/report/standard-reports/income-statement.scm:
          src/report/standard-reports/pnl.scm:
          src/report/standard-reports/standard-reports.scm:
          src/report/standard-reports/Makefile.am:
          Rewrote pnl.scm, renamed it to income-statement.scm.
          Can now create a meaningful statement post-closing.

        * src/report/report-system/html-acct-table.scm:
          Updated to include ability to "see through" closing
          and/or adjusting entries.
	* Fixes #105330.

        * src/report/standard-reports/general-journal.scm:
          src/report/standard-reports/standard-reports.scm:
          src/report/standard-reports/Makefile.am:
          Added General Journal report, a Register Report
          with a pre-set set of options.
	* Bug #109738.

2004-07-13  David Montenegro  <sunrise2000@comcast.net>

        * src/report/standard-reports/trial-balance.scm:
        * src/report/standard-reports/standard-reports.scm:
        * src/report/standard-reports/Makefile.am
          added Trial Balance/Work Sheet report

        * src/report/standard-reports/balance-sheet.scm:
          added drop-down choices missing in previous version
          added support for adjusting/closing entries

        * src/report/standard-reports/equity-statement.scm:
          added support for adjusting/closing entries
          fixed "For Period Covering" label
          fixed handling of unrealized gains
          investment/draw discrimination based on shares sign
          omit unrealized gains when zero

        * src/report/report-system/html-acct-table.scm:
        * src/report/report-system/html-table.scm:
          null reference bug fixes

        * src/report/report-system/report-utilities.scm:
          added utility functions for accessing splits
          and creating double-column balance HTML
          gnc:double-col,
          gnc:account-get-trans-type-balance-interval,
          gnc:account-get-pos-trans-total-interval

        * src/report/report-system/commodity-utilities.scm:
        * src/report/report-system/html-acct-table.scm:
        * src/report/report-system/report-utilities.scm:
          moved gnc:commodity-collector-commodity-count and
          gnc:uniform-commodity? into commodity-utilities.scm

        * src/report/report-system/report-system.scm:
          added some additional exports

	Bug #144265

2004-07-04  Derek Atkins  <derek@ihtfp.com>

	* acinclude.m4: create a SCANF_QD_CHECK and make sure both
	  that and SCANF_LLD_CHECK are "long long" constant-safe
	* configure.in: use the new SCANF_QD_CHECK and use it
	  earlier in the configuration.

2004-07-02  Derek Atkins  <derek@ihtfp.com>

	* src/gnome/dialog-print-check.c:
	* src/gnome/glade/print.glade:
	* src/scm/printing/print-check.scm:
	  Apply David Reiser's patch for Quicken(tm) cheques with stub.

	* src/engine/gnc-commodity.c:
	  Apply David Grant's patch to add TD Efunds.  Fixes #145297.

2004-06-30  Christian Stimming  <stimming@tuhh.de>

	* src/report/report-gnome/window-report.c: Add toolbar element for
	saving the current report.

	* src/report/report-system/report.scm, report-system.scm: Add
	function for saving one particular report to the
	~/.gnucash/saved-reports-1.8 file. Add extra menu only for
	customized reports.

	* src/scm/main-window.scm, src/scm/main.scm: Remove the previous
	function for saving all reports since it is no longer necessary.

2004-06-26  Derek Atkins  <derek@ihtfp.com>

	* src/gnc-module/gnc-module.scm: create (and export) a re-export macro
	  is guile doesn't already provide one.  Then re-export the symbols
	  instead of exporting them.  Fixes some deprecated guile warnings.
	* src/guile-mappings.h: convert scm_gc_{un,}protect_object() back
	  to its pre-1.6 type for earlier guiles, but upconvert to the new
	  type to fix a deprecated warning.  Note that g-wrap is still
	  outputting deprecated code.
	* lots of other files:
	  convert scm_{un,}protect_object -> scm_gc_{un,}protect_object because
	  the former is now deprecated in guile.  Fixes a bunch of
	  GUILE_WARN_DEPRECATED warnings (but probably not all of them).

2004-06-25  Derek Atkins  <derek@ihtfp.com>

	* src/engine/gnc-numeric.c: small change to the 128-bit math
	  routines to actually mark a 'carry bit' to denote numbers
	  >= 2^63 to fix bug #144980.

2004-06-24  Derek Atkins  <derek@ihtfp.com>

	* Makefile.am: be sure to rebuild make-gnucash-patch and
	  make-gnucash-potfiles when the Makefile changes (which means the
	  PERL paths might have changed).
	* src/scm/paths.scm: change the default config file to 1.9, so we
	  don't screw up users of 1.8.

2004-06-23  David Montenegro  <sunrise2000@comcast.net>

	* src/report/report-system/html-acct-table.scm:
	  Added file implementing gnc:html-acct-table utility
	  object for easier creation of HTML reports.

        * src/report/standard-reports/balance-sheet.scm:
	  Updated to use the new gnc:html-acct-table object.
	  Added many new options, including report/account
	  form option.

        * src/report/standard-reports/equity-statement.scm:
	  Created Statement of Owner's Equity.
	  (Unsure if correct exchange-fn's are being used.)

        * src/report/report-system/commodity-utilities.scm:
	* src/report/report-system/html-table.scm:
	* src/report/report-system/html-utilities.scm:
	* src/report/report-system/report-system.scm:
	* src/report/report-system/report-utilities.scm:
	  miscellaneous small additions and/or fixes
	Fixes #144243.

2004-06-18  Christian Stimming  <stimming@tuhh.de>

	* src/scm/main-window.scm, src/scm/main.scm: Added example Menu
	item "File -> Save all reports" that will call the new report
	saving function for all reports. Reports are appended to
	~/.gnucash/saved-reports-1.8 . This would need more work so that
	not all reports are saved but only the currently selected one --
	any volunteer may feel free to add that.

	* src/report/report-system/report.scm, report-system.scm: Added
	gnc:report-generate-saved-forms that will generate the scheme code
	necessary to create a new report from the saved options of an old
	report (merged from 1-8-branch).

2004-06-18  Derek Atkins  <derek@ihtfp.com>

	* src/scm/paths.scm: create gnc:current-saved-reports, as
	  the file to store saved reports from cstim.  Autoload the
	  saved-reports file at startup (after config.user/config.auto
	  is loaded).
	* src/scm/main.scm: export gnc:current-saved-reports

2004-05-29  Derek Atkins  <derek@ihtfp.com>

	* src/engine/Transaction.c:
	  Don't recompute balances or write to the translog when we're
	  shutting down.  Destroy the parent transaction from xaccSplitDestroy()
	  if we're shutting down.
	* src/engine/qofbook-p.h:
	* src/engine/qofbook.h:
	* src/engine/qofbook.c:
	  add "shutting_down" parameter and getter-method, so that
	  objects can detect when the book is shutting down and
	  ignore non-necessary reprocessing.  Fixes a memory corruption
	  bug during book-closing.

2004-05-24  Derek Atkins  <derek@ihtfp.com>

	* src/report/standard-reports/transaction.cm: applied Vasil's
	  patch to improve the transaction report for HTML export
	  purposes.  Fixes bug #142942.

	* src/gnome-search/dialog-search.c:
	* src/gnome-search/gnc-general-search.c:
	* src/gnome-utils/gnc-query-list.c:
	  Linas missed a few QOF_QUERY_PARAM_GUID -> QOF_PARAM_GUID
	  conversions.

2004-05-17  Derek Atkins  <derek@ihtfp.com>

	* src/report/locale-specific/us/taxtxf.scm: guile-1.6 complains
	  about string->symbol when passed a symbol.  Fixes #131201
	  Also add some code to handle accounts that are expected to
	  have parents but do not (also described in #131201).

2004-05-15  Derek Atkins  <derek@ihtfp.com>

	* Luigi Ballabio's automake patch to gnucash.m4

2004-05-08  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/import-match-map.c
	(gnc_imap_add_account_bayes): Skip the case when a token is the
	empty string. This caused many warnings about a NULL kvp_frame
	lookup.

2004-05-07  David Hampton  <hampton@employees.org>

	* src/engine/gnc-commodity.c: Added quote sources for Indian
	Mutual Funds.

2004-05-05  Derek Atkins  <derek@ihtfp.com>

	* src/engine/iso-currencies-to-c: don't automatically try to
	  (require 'format), so gnucash will build on an slib-3 system.

2004-05-02  David Hampton  <hampton@employees.org>

	* src/business/business-core/Makefile.am:
	* src/business/business-gnome/Makefile.am:
	* src/import-export/binary-import/Makefile.am: Work around
	problems with libltdl3.

2004-04-26  Derek Atkins  <derek@ihtfp.com>

	* src/scm/Makefile.am: look in ${srcdir} for build-config.scm.in
	  Fixes #141129

2004-04-20  Derek Atkins  <derek@ihtfp.com>

	* src/report/report-system/html-utilities.scm:
	  Fix a broken recursion problem.  Don't call show-acct? from
	  use-acct? so we don't recurse ad flictum.  This recursive
	  call isn't necessary, just have use-acct? recurse unto itself.

2004-04-19  Derek Atkins  <derek@ihtfp.com>

	* src/report/standard-reports/balance-sheet.scm:
	* src/report/standard-reports/pnl.scm:
	  Fabien COELHO's zero-balance patch to remove accounts of
	  zero balance from the report.

2004-04-18  Derek Atkins  <derek@ihtfp.com>

	* src/engine/Transaction.c: fix a comment to better explain why
	  we have no-op functions for some parameters.
	* src/engine/qof*:  Revert Linas' patch from last night which
	  is broken is way too many ways to count.  First, the code didn't
	  compile.  Second it was calling functions that took one argument
	  with two due to broken casting.  Third, it had repurcusions in
	  other sections of the code that Linas needs to take into account.

2004-05-16  Derek Atkins  <derek@ihtfp.com>

	* src/macros/autogen.sh: Add MORE warnings around gettext because
	  some users STILL don't "get it".

2004-05-15  Derek Atkins  <derek@ihtfp.com>

	* src/import-export/hbci/dialog-hbcitrans.c:  Don't use C++/C99
	  declarations.  Declare variables at the top of the function.
	  Fixes #140070

2004-04-12  Chris Lyttle  <chris@wilddev.net>

	* src/scm/main.scm: Update for 1.8.9 release

2004-04-05  Derek Atkins  <derek@ihtfp.com>

	* macros/autogen.sh: make sure we always have intl and po Makefiles
	  in the configure script.  Sometimes it was ripped out without being
	  replaced.  Reported by twunder.

	* src/engine/test/.cvsignore: ignore test-link in CVS.

2004-04-01  Derek Atkins  <derek@ihtfp.com>

	* src/gnome/dialog-scheduledxaction.c: Move variable declaration
	  to the top of the block.

2004-03-31  Derek Atkins  <derek@ihtfp.com>

	* configure.in: move m4/Makefile to its own line
	* macros/autogen.sh: add code to remove "intl/Makefile po/Makefile"
	  from AC_OUTPUT in configure.in prior to calling gettextize
	  to make sure that you can build from CVS with recent versions
	  of gettextize.  Tested with both RH9 and RH7.3 to make sure
	  it works with both old and new.  Fixes #120206.

	* accounts/hu_HU/Makefile.am: don't include files in the DIST that
	  we don't have in CVS.

2004-03-30  Derek Atkins  <derek@ihtfp.com>

	* src/report/report-system/report-system.scm:
	* src/report/utility-reports/iframe-url.scm:
	  don't need to require format; main.scm handles it, and
	  the default "format" (simple-format) is sufficient to
	  handle everything we need.  This allows gnucash to work
	  with slib3.

2004-03-14  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/druid-loan.c (ld_get_loan_range): Fix precedence bug
	screwing up loan review page.

2004-03-14  Joshua Sled  <jsled@asynchronous.org>

	* src/register/register-core/formulacell.c
	(gnc_formula_cell_modify_verify): Add ':' to the token list of
	allowable characters in the formula cell. Fixes Bug#106260.

2004-03-14  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/druid-loan.c (gnc_ui_sx_loan_druid_create): Use the
	account-list filtering capability of the GncAccountSel to only
	show/allow-creation-of valid account-types in the
	loan-druid. Fixes Bug#124595.

2004-03-13  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/dialog-scheduledxaction.c (gnc_sxed_check_consistent):
	Bug#133709 fix: when we have a problem parsing a credit/debit
	cell, indicate to the user what occurred.

2004-03-08  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/dialog-hbcitrans.c, dialog-hbcitrans.h,
	glade/hbci.glade, gnc-hbci-transfer.c: Transfer template management
	GUI added by Bernd Wagner <F.J.Bernd.Wagner@t-online.de>

2004-03-07  Joshua Sled  <jsled@asynchronous.org>

	* HACKING: Added instructions about running under valgrind.

	* lib/gnucash_valgrind.supp: Added a large set of valgrind
	suppressions for both guile and gnucash.

	* src/register/ledger-core/gnc-ledger-display.c
	(gnc_ledger_display_template_gl): Change the reg_type to
	SEARCH_LEDGER so all the 'action' types appear. Bug#108833.

	* src/gnome/glade/sched-xact.glade: Remove unused 'ledger_status'
	widget. Bug#102269.

	* src/gnome-utils/gnc-dense-cal.c (gnc_dense_cal_draw_to_buffer):
	At least be consistent about the background coloring of the month
	labels, even if we're still not using GTK themeage correctly.

	* src/gnome-utils/gnc-dense-cal.c (gnc_dense_cal_destroy): Destroy
	the transient window when the widget is destroyed. Bug#103910.

	* src/gnome/dialog-scheduledxaction.c
	(gnc_ui_scheduled_xaction_editor_dialog_create): Make the advance
	and remind spin-buttons editable [Bug#94963].

	* src/gnome/glade/sched-xact.glade: Change the upper bound on the
	advance and remind spins to 365 [days], with a page-size of 30
	[days].

	* src/gnome/dialog-sx-from-trans.c (gnc_sx_create_from_trans):
	Disallow the Scheduling of being-editing transactions in the
	Register, preventing a class of unbalacned SX template
	transactions from being entered and propogated through the
	system. See Bug#130330.

	* src/engine/FreqSpec.c (xaccFreqSpecGetFreqStr): Fix nasty
	memory-corruption issue; insufficent bounds checking on array
	index. Bug#125600.

	* src/gnome/dialog-sxsincelast.c (create_each_transaction_helper):
	Better handling of various error cases in
        transaction-creation. Bug#102311; Bug#130330.

2004-03-03  Derek Atkins  <derek@ihtfp.com>

	* src/register/ledger-core/split-register-load.c: make the code a
	  little cleaner by not re-using (and re-defining!) the same
	  variable name inside a block of code and "over-riding" an
	  existing variable.  Unlikely to actually fix anything, but
	  you never know what a compiler might do.

2004-03-01  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/dialog-scheduledxaction.c (gnc_sxed_check_consistent):
	Fix for part of Bug#121740 -- only allow auto-create SXes which
	have splits to be created.

2004-02-07  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/dialog-scheduledxaction.c (editor_ok_button_clicked):
	* src/gnome-utils/gnc-frequency.c (gnc_frequency_save_state):
	* src/backend/file/gnc-freqspec-xml-v2.c (fs_none_handler):
	* src/engine/FreqSpec.c (xaccFreqSpecGetFreqStr):
	Adding "NONE" as an allowable FreqSpec [Bug#103968].

2004-02-14  Christian Stimming  <stimming@tuhh.de>

	* configure.in: Require the correct openhbci2 version. Add verbose
	error message for the currently unavailable mt940 support.

	* src/import-export/hbci/hbci-druid-initial.c, gnc-hbci-utils.c:
	Finally finish openhbci2 support, phew. Requires
	openhbci2-1.9beta7 from http://sourceforge.net/projects/openhbci

2004-02-04  Derek Atkins  <derek@ihtfp.com>

	* src/business/business-core/gncJob.c: Linas checked the wrong
	  argument in SetOwner() in revision 1.40 thereby causing ALL new
	  jobs to fail to work.  Check the new owner, not the original.
	  Fixes #133392.

2004-01-31  Christian Stimming  <stimming@tuhh.de>

	* src/engine/gnc-commodity.c, src/engine/iso-4217-currencies.scm:
	Change Ukrainian "UAG" into "UAH" #128913

	* src/import-export/import-backend.c: Commented out setting the
	memo always to "Auto-created split" due to popular request.

	* src/import-export/hbci/druid-hbci-initial.c, hbci-interaction.c,
	all files: Preliminary completion of openhbci2 support -- getting
	the transactions seems to work, as well as the HBCI setup.

	* src/engine/kvp_frame.h, src/engine/Account.c: Add clear notice
	of the semantic change of kvp_frame_get_frame
	function. Fortunately it seems the only place that still had to be
	fixed, apart from the hbci module, has been in Account.c.

	* src/import-export/import-account-matcher.h: Make string argument
	a const char*. Make boolean argument a gboolean.

2004-01-30  Derek Atkins  <derek@ihtfp.com>

	* src/register/ledger-core/split-register-layout.c:  Remove the
	  RECN cell from payable/receivable to stop confusing people.

2004-01-21  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/gnc-hbci-utils.c: Set application log
	directory, needs more work.
	* src/import-export/hbci/druid-hbci-utils.c:
	More work for openhbci2 support.

2004-01-20  Christian Stimming  <stimming@tuhh.de>

	* configure.in, macros/openhbci2.m4: Add checking for new
	openhbci2 library.

	* src/import-export/hbci/ all files: Switch HBCI code to the new
	openhbci2 library. Should be working, but needs further testing.

2004-01-20  Derek Atkins  <derek@ihtfp.com>

	* src/bin/overrides/gnucash-build-env.in: add import-export, ofx,
	  and hbci which should allow running with ofx and hbci in the
	  build tree.

2004-01-19  Herbert Thoma  <herbie@hthoma.de>

	* src/gnome-utils/transfer.glade: rename from_xxx and to_xxx account
	  tree widgets to left_xxx and right_xxx
	* src/gnome-utils/dialog-transfer.c: if in "accountant mode" call
	  "transfer from" "credit account" and "transfer to" "debit account"
	  and interchange account trees

2004-01-16  Derek Atkins  <derek@ihtfp.com>

	* configure.in: fix a typo in the help (was --diable-gui).  Fixes #131414

	* configure.in: add db-4.2 to the list of databases we search.
	  We probably need a better mechanism to search for a working db
	  library, like defining our own macro and just supplying a list.
	  We probably can get rid of the prefer-db1 option as well, maybe?
	  Fixes #131506

2004-01-15  Derek Atkins  <derek@ihtfp.com>

	* src/app-utils/options.scm: Create two new functions to centralize
	  date-selection option creation.
	* src/app-utils/app-utils.scm: export the new scheme functions
	* src/app-utils/prefs.scm: Modify Herbert's patch to centralize
	  the date-selection option code.
	* src/report/report-system/options-utilities.scm: use the new
	  centralized date-selection option-creation code.

2004-01-13  Herbert Thoma  <herbie@hthoma.de>

	* src/app-utils/global-options.c:
	* src/app-utils/global-options.h: add gnc_lookup_date_option()
	  function
	* src/app-utils/gnc-ui-util.c:
	* src/app-utils/gnc-ui-util.h: add
	  gnc_ui_account_get_balance_in_currency() function
	* src/app-utils/prefs.scm: add preferences for summarybar
	* src/engine/Account.c:
	* src/engine/Account.h: add
	  xaccAccountConvertBalanceToCurrencyAsOfDate() function
	* src/gnome/window-main-summarybar.c: summarybar can now display
	  a grand total of all commodities, profits of a period of time
	  and net assets at the end of the period; summarybar can be
	  configured with some options under edit->preferences

2004-01-13  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/hbci-interaction.c, gnc-hbci-utils.c: Add
	workaround code for openhbci/chipcard problem.

2004-01-12  Derek Atkins  <derek@ihtfp.com>

	* src/app-utils/file-utils.[ch]:  add gnc_getline() function
	  to read an unlimited line-length from a file (so you're
	  not limited to a buffer size with fgets() and the like).
	  It is similar to the getline(3) on Linux except the API
	  is different and it will always set the return string.

	* src/doc/Makefile.am: add new documentation: generic-druid-framework.txt
	* src/doc/generic-druid-framework.txt: new documentation

	* src/import-export/csv/gnc-csv2glist.[ch]: add file from Kevin Hammack
	  to parse CSV files.
	* src/import-export/csv/test/test.csv:  a test CSV file

2004-01-07  Derek Atkins  <derek@ihtfp.com>

	* src/engine/Transaction.h: fix the xaccTransOrder() documentation
	  to be more accurate with the actual implementation.

	* src/doc/Makefile.am:
	* src/doc/qif.txt:
	  Add new qif importer documentation to the repository/dist

2004-01-06  Derek Atkins  <derek@ihtfp.com>

	* src/engine/qofinstance.c: revert fix from 01-01, because it's wrong.
	  Fix the actual problem, all the ...ReturnGUID() #define's which
	  don't check that it's passed a NULL value.
	* src/engine/Transaction.h:
	* src/engine/Account.h:
	  Fix ...ReturnGUID() to check whether it was passed a NULL object
	  and, if so, return the null GUID instead of crashing.
	* src/business/business-core/gncCustomer.h:
	* src/business/business-core/gncEmployee.h:
	* src/business/business-core/gncInvoice.h:
	* src/business/business-core/gncJob.h:
	* src/business/business-core/gncTaxTable.h:
	* src/business/business-core/gncVendor.h:
	  Fix ...RetGUID() to check whether it was passed a NULL object
	  and, if so, return the null GUID instead of crashing.

	* README.cvs: make it even more explicit that you should not run configure
	* src/engine/Makefile.am: remove the circular dependency I added earlier
	* src/engine/gw-engine-spec.scm: don't include gnc-engine-util.h (it's
	  not required and may break things).
	* src/engine/gnc-trace.[ch]: move gnc_should_log() out of the .h
	  and into the .c (making it a function instead of an array) due
	  to symbol problems with libgw-engine.  With it the other way the
	  test-account-create test was throwing an error about an
	  undefined symbol (gnc_log_modules).
	  NOTE: If you don't like this de-optimization then feel free to remove
	  all the P*() calls from engine-helpers.c and then revert gnc-trace.
	  Or you can find another way around the undefined symbol problem.
	* src/doc/Makefile.am: include guid.txt in the dist

2004-01-02  Derek Atkins  <derek@ihtfp.com>

	* README.patches:
	* make-gnucash-patch.in:
	  Patch by Geoff Kassel to work on OpenBSD (allow user to set diffcmd)
	Fixes #122646

	* src/business/business-core/gncInvoice.c: need a non-const string
	* src/engine/test/Makefile.am: add test-link, make libgw-engine
	  depend on libgncmod-engine
	* src/engine/test/test-link.c: add a source-file to test-link

	* src/engine/test-core/test-engine-stuff.c: don't test double
	  KVPs, on the theory that they will soon be deprecated.
	Fixes #127315

	* src/engine/test-core/test-engine-stuff.c: random queries only
	  get up to 3 terms, not 4
	* src/app-utils/test/test-scm-query-string.c: loop the test 1000
	  times, now that the queries are smaller.
	Fixes #127492

	* src/business/business-core/gncInvoice.c: set the lot title to
	  "<Invoice Type> <Invoice ID>" (e.g., "Invoice 000001" or
	  "Bill I2-34") when posting an invoice.  We already assume
	  one invoice to a lot.

	* src/business/business-reports/aging.scm:  When computing the aging
	  report, ignore splits that belong to closed lots.  This way we wont
	  get the wrong values when the invoice falls outside the 360-day
	  window but its payment falls inside the window.

2004-01-01  Derek Atkins  <derek@ihtfp.com>

	* src/engine/qofinstance.c: return a "valid" GUID even if passed a NULL
	  object, because lots of code assumes you can get a guid all the time.
	  So, just return guid_null() instead of NULL.  Fixes a SEGV.

2003-12-23  Christian Stimming  <stimming@tuhh.de>

	* src/engine/gnc-trace.c: Patch enabling compilation on Mac OS X
	by Rich Johnson <rich@dogstar-interactive.com>: Some platforms
	define timeval data members as "int".  Explicitly casting to "long
	int" for "%ld" directive avoids type mismatch.

2003-12-22  Christian Stimming  <stimming@tuhh.de>

	* accounts/tr_TR/*.xea: Added Turkish account templates by
	A. Alper Atici <alper_atici@yahoo.com>

	* accounts/hu_HU/*xea: Hungarian account templates by Sulyok Peter
	<sp@elte.hu>

	* src/engine/gnc-trace.h: Fix for gcc2.95 for macros with variable
	arguments by Lionel Elie Mamane <lionel@mamane.lu>.

2003-12-18  Herbert Thoma  <herbie@hthoma.de>

	* src/gnome/dialog-price-editor.c: when the commodity is changed,
	then set the currency to the currency of the last price entered
	for this commodity

2003-12-11  Derek Atkins  <derek@ihtfp.com>

	* src/gnome/reconcile-list.c: make sure to verify that the items
	  in the reconcile hash are still around after a refresh.  Fixes
	  bug #129121.

2003-12-08  Derek Atkins  <derek@ihtfp.com>

	* src/engine/gnc-numeric.c:  Rich Johnson's patch to convert
	  atoll() -> strtoll()

2003-12-08  Benoit Grgoire  <bock@step.polymtl.ca>
	*src/import-export/log-replay/gnc-log-replay.c:  Increase read buffer size.
	Hopefully fixes 127421, but this time someone please do test the fix...

2003-12-01  Benoit Grgoire <bock@step.polymtl.ca>

	* po/POTFILES.in: Remove reference to bin/strsub.c.

2003-11-19  David Hampton  <hampton@employees.org>

	* src/quotes/dump-finance-quote: Be more explicit when a lookup fails.

2003-11-17  Chris Lyttle  <chris@wilddev.net>

	* src/scm/main.scm: Update for 1.8.8 release

2003-11-17  Derek Atkins  <derek@ihtfp.com>

	* Makefile.am, Makefile.DEPS:
	  remove Makefile.DEPS because we don't support automake-1.4 anymore
	* src/bin/Makefile.am, strsub.c:
	  remove strsub.c because we don't need it now that we've dropped 1.4
	Fixes #120207

2003-11-16  Derek Atkins  <derek@ihtfp.com>

	* src/engine/test-core/test-engine-stuff.c:  don't make a timespec
	  with tv_sec == 0.  Fixes some tests on the alpha platform.

2003-11-16  Linas Vepstas <linas@linas.org>

	* src/doc/guid.txt: add document debating issues of guid usage in
	  the closing of books.

2003-11-14  Derek Atkins  <derek@ihtfp.com>

	* src/report/standard-reports/advanced-portfolio.scm:
	Applied Frank Pavageau's patch regarding capital gains to
	handle split transactions.

2003-10-26  David Hampton  <hampton@employees.org>

	* src/engine/qofid.[ch]: Fix another crash caused by qof changes.

2003-10-25  David Hampton  <hampton@employees.org>

	* src/gnome/druid-stock-split.c: Fix crash caused by qof changes.

2003-10-24  David Hampton  <hampton@employees.org>

	* src/import-export/hbci/druid-hbci-initial.c: Use the generic
	import account picker.

	* src/gnome-utils/Makefile.am:
	* src/gnome-utils/dialog-account-pick.[ch]: Remove unused files.

2003-10-23  David Hampton  <hampton@employees.org>

	* src/AccWindow.h:
	* src/gnome-utils/dialog-account.h: Move function declarations to
	the right header file.  Document them as well.

	* (various): Include the right header file.

2003-10-23  Derek Atkins  <derek@ihtfp.com>

	* src/app-utils/prefs.scm:
	* src/business/business-utils/business-prefs.scm:
	  Add new preferences for the default "fancy date format",
	  even if it's not used, yet.  Another step to fixing #99574

	* Added GPL boilerplates to many of my files.

2003-10-21  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/gnc-hbci-utils.c: Refactor some GUI
	code. Improve user messages.

2003-10-20  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/hbci-interaction.c,
	gnc-hbci-getbalance.c, dialog-hbcitrans.c: Improved user messages.

	* src/import-export/hbci/gnc-hbci-utils.c: Fixed extremly stupid,
	old bug that causes weird HBCI errors.

2003-10-18  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/druid-hbci-initial.c: Fix and initially
	implement handling of multiple banks/users/customers.

	* src/import-export/hbci/dialog-hbcitrans.c: Fix handling of HBCI
	direct debits (fix wrong textkey).

2003-10-01  Derek Atkins  <derek@ihtfp.com>

	* src/backend/postgres/gncquery.c:  Linas broke SQL when we renamed
	  the QueryObjects to QofClass.

2003-09-30  Derek Atkins  <derek@ihtfp.com>

	* src/engine/gnc-date.h: add a comment about minimum string length
	* src/engine/Transaction.c: fix the ISO_DATELEN to be "long enough"
	  Fixes #123558

2003-09-18  Christian Stimming  <stimming@tuhh.de>

	* configure.in: Add correct configure test for openhbci version
	required by mt940 module.

2003-09-16  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/gnc-hbci-kvp.c: Fix broken compile due to
	Linas' change of the kvp_frame_get_frame() arguments. By
	Jan-Pascal van Best <j.p.vanbest@tbm.tudelft.nl>

	* src/import-export/hbci/gnc-hbci-gettrans.[hc]: Code
	refactorization so that the mt940 importer can re-use the existing
	import functions from the hbci module. By Jan-Pascal van Best
	<j.p.vanbest@tbm.tudelft.nl>

	* src/import-export/mt940/gncmod-mt940-import.[hc]: Import module
	for SWIFT MT940 files added. By Jan-Pascal van Best
	<j.p.vanbest@tbm.tudelft.nl>

2003-09-14  Derek Atkins  <derek@ihtfp.com>

	* src/backend/postgres/test/run-tests.sh: small fix from
	  hawkfan to get tests to work when building outside srcdir.
	* src/backend/postgres/putil.c: fix a bug introduced by Matthew --
	  ANSI C does not allow you to declare a variable in the middle
	  of an expression.  Move the declaration to the top of the function.
	* src/backend/postgres/functions.sql:
	* src/backend/postgres/table-audit.sql:
	  We don't need the trailing semi-colon because the #include adds
	  one.  The double semi-colon causes build failures in some cases.

2003-09-13  Derek Atkins  <derek@ihtfp.com>

	* src/import-export/ofx/gnc-ofx-import.c:  use <libofx/libofx.h>
	  instead of "libofx/libofx.h" as it's not part of our system.
	  Fixes a dependency problem in 1.8.6 release.

2003-09-11  Derek Atkins  <derek@ihtfp.com>

	* src/business/business-core/file/gnc-*.c:
	  Add a "slots" parameter to allow for future expansion.  Right
	  now this is completely ignored (which will allow future releases
	  to add a kvp-frame slots to any business function and allow that
	  file to be read by older versions).  Right now the slot is ignored,
	  but that's better than barfing on the data file.

2003-09-09  Derek Atkins  <derek@ihtfp.com>

	* src/gnome-utils/dialog-transfer.c:  during the dialog startup it
	  tries to build the transfer rate.  This crashes on Solaris because
	  during startup one commodity is still NULL when it tries to print
	  it.
	Fixes bug #121677

	* src/engine/engine-helpers.c:  turn off scheme garbage collection
	  during query->scm and scm->query conversion.  It shaves about 50%
	  off the test-scm-query-string tests.
	* src/engine/test-core/test-engine-stuff.c:  add some code to help
	  track down what the get_random_query() is doing.  Turned off by
	  default.
	* src/app-utils/test/test-scm-query-string.c: make the test
	  deterministic by seeding the RNG with a known value.  There is a
	  known "delay" at #245 with a seed of 1 on Linux systems.

2003-09-04  Derek Atkins  <derek@ihtfp.com>

	Apply Nigel Titley's patch to fix #103174:
	* src/register/register-core/basiccell.c:
	  - add some debugging messages
	  - don't kill ourself if we're asked to set the value to our own value.

	Description of the problem from Nigel:

	The problem is that the SX formula_cell stuff calls (via an
	intermediate step)

	gnc_basic_cell_set_value_internal (BasicCell *cell, const char *value)

	with value pointing at cell->value. The overall effect of this as far
	as gnc_basic_cell_set_value_internal is concerned is to trash the value
	stored in cell->value *before* re-writing back to the same place (the
	g_free() writes memory management stuff in the first few bytes of the
	value). This is what trashes the debit/credit value in the SX register
	entry.

2003-08-29  David Hampton  <hampton@employees.org>

	* src/engine/Account.c: Fix bug in computing cleared balance.  The
	bug was introdiced 4/1.

	* lots of scm files: Remove the RCS "Id:" tag.  Its a PITA when
	syncing between branches.

2003-08-28  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/import-backend.c: Aaarg. Fixed extremely
	stupid bug in the import value setting workaround.

2003-08-19  Chris Lyttle  <chris@wilddev.net>

	* src/scm/main.scm: Update for 1.8.5 release

2003-08-15  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/import-backend.c: Workaround for
	multi-currency importing bug as discussed on gnucash-devel.

2003-08-13  Matt Vanecek   <mevanecek@yahoo.com>

    * src/backend/postgres/PostgresBackend.c pgend_session_begin():
      Moved the pgendUpdgradeDB() call outside of the SQL transaction,
      because the upgrades performed each have their own separate
      transaction.

    * src/backend/postgres/newtables.h: A little bit of cleanup. Also
      changed all the INSERTs to specify column names, to prevent
      problems with column orders between old/new tables.

    * src/backend/postgres/table-audit.sql: Moved bookGuid in
      gncPriceTrail to be the second column.

    * src/backend/postgres/table-create.sql: Moved bookGuid in
      gncPrice to be the second column.

    * src/backend/postgres/upgrade.c: (re)Added transaction control
      to each upgrade function.  Also, the following fixes came out
      of regression testing:
    - add_multiple_book_support():  Removed the "NOT NULL" from the
      ADD COLUMN statements, and placed them in an ALTER TABLE...SET
      NULL construct.  The original is not supported in Postgresql
      and fails to execute.
    - Changed the stpcpy() to use g_strdup_printf() instead, for dynamic
      query assembly.
    - Made a few cosmetic changes to comparisons for readability.

2003-08-10  David Hampton  <hampton@employees.org>

	* src/gnome/gnc-splash.[ch]:
	* src/gnome-utils/gnc-splash.[ch]: Move this code to the
	gnome-utils directory.

2003-08-10  Derek Atkins  <derek@ihtfp.com>

	* rpm/Makefile.am: add gnucash.spec to the DIST; clean during
	  distclean.  Rebuild it whenever the .in, Makefile, or config.status
	  changes.  Fixes #119446.

	* src/backend/file/sixtp.c: Add code to read XML files with real
	  namespace declarations.  (see bug #88078)

	* src/*/Makefile.am: Make sure we define PWD, as not all shells
	  define it properly.  Fixes #119114.

	* src/gnome/reconcile-list.c: our parent is a gnc-query-list, not
	  a clist.  Fix a bug so we properly call the parent destroy function.

2003-08-08  Matt Vanecek  <mevanecek@yahoo.com>

    * src/backend/postgres/PostgresBackend.c: Changed all the
      gncEntry references to gncSplit, and entryGuid to splitGuid.
    - pgend_session_begin(): Changed the 2nd qof_backend_set_message()
      message argument to the internationalization format.
    - Changed the pgendUpgradeDB() call to come after a commit--the
      upgrade process uses its own transaction handling (now).

    * src/backend/postgres/checkpoint.c:
    * src/backend/postgres/gncquery.c:
    * src/backend/postgres/gncquery.h:
    * src/backend/postgres/txn.c:
    * src/backend/postgres/txnmass.c:
    * src/backend/postgres/events.c: Changed all the gncEntry
      references to gncSplit, and entryGuid to splitGuid.

    * src/backend/postgres/functions.sql: Changed the TIMESTAMP args
      to TIMESTAMP WITH TIME ZONE args, and gncEntry args to gncSplit.

    * src/backend/postgres/putil.c: Added the execQuery() function
    - sendQuery(): Added internationalization to the
      qof_backend_set_message() call.

    * src/backend/postgres/putil.h: Added the execQuery() prototype.

    * src/backend/postgres/table-create.sql:
    * src/backend/postgres/table-audit.sql: Changed all the TIMESTAMP
      types to TIMESTAMP WITH TIME ZONE.  Change all the gncEntry refs
      to gncSplit, and entryGuid to splitGuid.
    - Grouped all the index creates at the end for readability and
      maintenance ease.

    * src/backend/postgres/table-version.sql: Added a new insert row for
      the gncVersion table to reflect these changes.

    * src/backend/postgres/table.m4: Change all the gncEntry refs to
      gncSplit, and entryGuid to splitGuid.

    * src/backend/postgres/upgrade.c: Added message.h and qofbackend.h
      for error messaging support.
    - In each update function, added a call the DB for BEGIN and COMMIT.
    - Changed all the gncEntry and entryGuid to gncSplit and splitGuid.
    - Added the add_timezone_support() function to perform the latest
      upgrades.
    - pgendUpgradeDB(): Add a call to add_timezone_support() if the minor
      version is less than 5.
    - Changed PGEND_CURRENT_MINOR_VERSION from 4 to 5

    * src/backend/postgres/newtables.h: new file for upgrading db tables
      to v1.5.0.

    * src/engine/qofbackend.c -- qof_backend_set_message(): Allow the
      function to accept an NULL argument for the message, and to set
      the backend error message to NULL in such a case.

	FIXES #90768

2003-08-03  Derek Atkins  <derek@ihtfp.com>

	* src/gnome/druid-loan.c: Apply patch to fix a number of
	  off-by-one bugs in the loan druid.  Fixes #119001.

2003-07-30  Derek Atkins  <derek@ihtfp.com>

	* src/gnome-utils/gnc-account-tree.c: add "(Report)" strings
	  to the various columns displayed in the report currency.
	  Partial fix for #118695.

	* src/business/business-core/gncInvoice.c: set the date-entered on
	  invoice transactions to "now" instead of the post date.  This
	  lets us know when an invoice was actually posted, or a payment
	  was actually made.

	Support "gain/loss" balancing splits on stocks:
	* src/engine/Transaction.c: fix xaccSplitGetPrice() to return '0'
	  if 'amount' is zero but 'value' is non-zero
	* src/register/ledger-core/split-register-model-save.c: if we've
	  already handled the debcred cell then DON'T handle the price cell
	  as it will override the debcred's value.
	* src/register/ledger-core/split-register.c: if #shares == 0,
	  price == 0, and value (buy/sell) != 0 then allow this entry;
	  it's an income/expense balancing split.
	* src/register/ledger-core/split-register-control.c: if the exchange
	  rate cell is 0 but this is NOT the blank split, then don't run
	  the exchange-rate dialog unless specifically requested.
	* src/register/ledger-core/split-register-model.c: when trying to
	  find the conversion rate for a split, remember if we found
	  a matching split (even if the amount is 0).  If all matching
	  splits are 0, then return 0, not 1.

2003-07-29  Derek Atkins  <derek@ihtfp.com>

	* src/import-export/qif/ -- add functionality to merge multiple
	  qif file contexts into a single parent context while retaining
	  the ability to add/remove new files.

	* src/import-export/qif-context.c: add functions to get the list
	  of used QifAccount and QifCategory objects from the set of
	  transactions.

2003-07-28  Derek Atkins  <derek@ihtfp.com>

	* src/business/business-gnome/business-gnome.scm: remove
	  some unused (old) code.

2003-07-28  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/druid-hbci-initial.c: Add button for
	manual adding of HBCI accounts. Fixes #117760. Requires latest
	OpenHBCI CVS -- next openhbci-0.9.13 will be out this weekend.

	* src/import-export/hbci/gnc-hbci-{getbalance,gettrans,transfer}.c:
	Add saving of the HBCI_API so that bank's status changes will now
	be remembered immediately. However this might save some
	unnecessary information to disk, but hopefully we will have fixed
	that in OpenHBCI soon.

2003-07-28  Derek Atkins  <derek@ihtfp.com>

	* src/gnome-utils/gnc-date-edit.c: hide the calendar popup
	  on enter/return keypress events (in addition to ESC).
	Fixes #118500

2003-07-27  Matt Vanecek  <mevanecek@yahoo.com>

    * src/backend/postgres/PostgresBackend.c: Added pgendGetBook(),
      to retrieve the QofBook from the session, instead of storing the
      book in the backend object.
    - Where be->book was used, use pgendGetBook() instead.
    - Enhanced debug messages.
    * src/backend/postgres/PostgresBackend.h: Added the qofbook.h
      include, and the pgendGetBook() prototype
    * src/backend/postgres/book.c: Changed pgendGetBook to
      pgendBookRestore() to reflect its functionality of restoring
      the book's data to the engine.
    * src/backend/postgres/price.c: In pgendPriceFind(), couched the
      currenct portion of the SQL statement in an "if" statement,
      because gnc_pricedb_lookup_latest_any_currency() can pass in
      a NULL currency, and stpcpy() doesn't like NULLs.
    * src/backend/postgres/escape.c: enhanced debug messages.
    Fixes bug #116546

2003-07-26  Derek Atkins  <derek@ihtfp.com>

	* src/engine/qofbackend.h: add a new error, ERR_BACKEND_READONLY
	* src/engine/gw-engine-spec.scm: add new error type
	* src/backend/file/gnc-backend-file.c: differentiate between
	  "file is already locked" and "we can't create the lockfile"
	  so we can let the user know.
	* src/app-file/gnc-file.c: handle the new ERR_BACKEND_READONLY
	  error message by changing the error dialog presented to the
	  user.
	Fixes #117665

	* src/backend/file/gnc-backend-file.c: don't make the chmod() and
	  chown() functions fatal errors.  Warn the user if they fail, but
	  don't fail to save.  In the long run we need some way to pop up
	  warning messages from a backend, but until then we'll have to
	  stick with PWARN() and hope users see the console.
	Fixes #118258

	* src/app-file/gnc-file.c: fix the message to be more appropriate
	  when we hit a READONLY error.
	* src/backend/file/gnc-backend-file.c: return ERR_BACKEND_READONLY
	  on save if the XML write fails and the unlink() fails with
	  ENOENT, EPERM, EROFS, or EACCES.
	* src/engine/qofsession.c: don't call end_session just because
	  there's an error.
	Fixes #117657

2003-07-26  Benoit Grgoire  <bock@step.polymtl.ca>

	* src/import-export/import-account-matcher.c: Fix bug #105293

2003-07-23  Derek Atkins  <derek@ihtfp.com>

	* src/engine/qofbook.c: be sure to delete the book's KVP when we
	  destroy it.

2003-07-22  Derek Atkins  <derek@ihtfp.com>

	* src/import-export/qif/...
	  more work on the new qif importer.  structure it into a parent
	  context that contains a "list of files" (each file has its own
	  context).  Add some tests to actually test the code.  It
	  actually loads a basic qif file, now.  Still need to perform
	  merging (internal and into GNC) as well as the qif-to-gnc maps.

2003-07-17  Derek Atkins  <derek@ihtfp.com>

	* src/backend/file/gnc-backend-file.c:  Don't need to set the
	  backend error directly after calling gnc_file_be_get_file_lock(),
	  as get_file_lock will set the backend error itself.

2003-07-16  Derek Atkins  <derek@ihtfp.com>

	* src/business/business-core/gncInvoice.c: change the description
	  and action of Invoice and Payement Transactions/Splits, to make
	  it easier to print a check off the posted transactions.

	* src/report/standard-reports/cash-flow.scm: fix some labels and
	  add more text to make it more clear what's going on.  Hopefully
	  fixes #104878.

	* src/report/standard-reports/register.scm: add Debit and Credit
	  totals.  Fixes bug #115611.

2003-07-14  Derek Atkins  <derek@ihtfp.com>

	* src/import-export/qif: an incomplete implementation of a new
	  (written-in-C) QIF importer.  The code compiles but has not
	  been tested.  Yet to do: merging, conversion to gnc, and UI.

	* configure.in: search for db-4.1.  Fixes #116509.

	* src/gnome-util/dialog-transfer.c: fix a bunch more rounding
	  errors, and add more precision to the price.  There is still a
	  problem when acquiring a high-precision price out of the pricedb
	  where it will get truncated in the AmountEdit widget.

2003-07-10  Derek Atkins  <derek@ihtfp.com>

	* src/import-export/import-parse.[ch]: routines to parse numbers
	  and dates in a mostly-locale-agnostic way.
	* src/import-export/import-format-dialog.c: a dialog to ask the user
	  to choose a format, when parsing just isn't enough.
	* src/import-export/generic-import.glade: add the format_match dialog
	* src/import-export/test/test-import-parse.c: test the import-parse
	  routines.

2003-07-09  Derek Atkins  <derek@ihtfp.com>

	* configure.in: change (and comment out) checks for pthreads
	* macros/acx_pthread.m4: change pthread search (should be removed)
	* src/engine/guid.c: remove pthread code and just use a static buffer.
	  (pthread code is kept within some #ifdef's, just in case we decide to
	   put it back in later).

	* src/app-utils/gnc-ui-util.[ch]: add a function to parse a numeric
	  with the caller providing all the locale-specific information

	* src/business/business-core/gncBillTerm.c:
	* src/business/business-core/gncTaxTable.c:
	  Fix a crash where removing items in the wrong order could
	  cause "Bad Things" to happen -- referencing an invalid
	  object.  When being destroyed, an object should remove itself
	  from it's parent's list of children, in addition to removing
	  itself from it's children's pointer-to-parent.

2003-07-09  Christian Stimming  <stimming@tuhh.de>

	* README: Added remark about gnucash-docs.

	* src/import-export/hbci/druid-hbci-initial.c: Clarify the part of
	the HBCI setup about potentially adding HBCI accounts manually.

2003-07-04  David Hampton  <hampton@employees.org>

	* src/gnome/dialog-price-edit-db.c: Add a couple of extra checks
	to prevent crashing if the commodity attached to a price quote has
	disappeared. #111643

	* src/gnome/dialog-commodities.c: Provide a new warning message
	before deletion if a commodity has any quice quotes.  If the user
	deletes the commodity anyway, removed any quotes are based on the
	commodity

	* src/engine/gnc-pricedb.c: Enhance the get prices routine to
	handle a request with a NULL currency.

2003-07-03  David Hampton  <hampton@employees.org>

	* src/scm/price-quotes.scm:
	* src/engine/gnc-commodity.[ch]: Allow the user to specify by
	namespace which commodities should be retrieved when getting price
	quotes.

	* src/scm/command-line.scm:
	* src/scm/main.scm: Support a new command line argument for
	specifying a namespace.  To be used in conjunction with the
	--add-price-quotes argument.

2003-07-02  Chris Lyttle  <chris@wilddev.net>

	* src/scm/help-topics-index.scm: add Jon Lapham's patch

2003-07-03  Matthew Vanecek  <mevanecek@yahoo.com>

    * po/POTFILES.in: ran make-gnucash-potfile, to pick up all the
    changes for the Qof migration.

2003-07-02  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/gnc-hbci-transfer.c,
	src/import-export/hbci/dialog-hbcitrans.c: Change HBCI online
	transfer action so that first the gnucash Transaction is created
	and only after that the HBCI connection is started. Necessary for
	later implementation of offline queueing and multi-job execution.

2003-07-01  David Hampton  <hampton@employees.org>

	* src/backend/file/gnc-backend-file.c: New data file should have
	same uid/gidas original file. #105662

	* src/app-utils/gnc-ui-util.[ch]:
	* src/app-utils/gw-app-utils-spec.scm:
	* src/engine/gnc-commodity.[ch]:
	* src/engine/gw-engine-spec.scm:
	Move Finance::Quote related information to live with the rest of
	the commodity related code.

	* src/engine/gnc-engine.h:
	* src/engine/gnc-commodity.[ch]: Convert the price quote source
	data into an object of its own.  Eliminate the old "internal" name
	in favor of the F::Q name.  Dynamically find and add new quote
	sources when the user runs gnucash.

	* src/backend/file/gnc-account-xml-v2.c:
	* src/backend/file/gnc-commodity-xml-v2.c:
	* src/engine/Scrub.c: Ensure backwards compatability of the XML file.

	* src/app-utils/gnc-helpers.c: Update for changes in accessing
	quote source information.

	* src/gnome-utils/commodity.glade:
	* src/gnome-utils/dialog-commodity.c: Reorganize the dialog for
	selection price quote information.

	* src/scm/price-quotes.scm: Print debugging info when getting
	stock quotes if gnucash is run with the --debug flag.

2003-06-30  Derek Atkins  <derek@ihtfp.com>

	* macros/acx_pthread.m4: macro to find the pthread library for
	  the particular system
	* configure.in: look for pthread library (now that we actually
	  USE pthreads, even if only for Thread Local Storage).

2003-06-27  David Hampton  <hampton@employees.org>

	* src/backend/file/gnc-backend-file.c: Fix 'Save As' so it can
	write to non-existing files.

	* src/gnc-module/gnc-module.c: Fix a small memory leak.

	* src/import-export/import-main-matcher.c:
	* src/import-export/import-match-picker.c: No need to duplicate
	the string returned by xaccPrintDateSecs.

	* src/engine/Account.[ch]: Correctly mark a function as returning
	a const char string.

	* src/engine/guid.c: Use a thread local buffer for guid_to_string.
	Mark this routine as returning a const char string so any attempts
	to free this buffer will be caught at compile time.

	* src/app-utils/guile-util.c:
	* src/backend/file/gnc-schedxaction-xml-v2.c:
	* src/backend/file/sixtp-dom-generators.c:
	* src/backend/postgres/checkpoint.c:
	* src/backend/postgres/gncquery.c:
	* src/backend/postgres/txn.c:
	* src/backend/postgres/test/test-db.c:
	* src/engine/SchedXaction.c:
	* src/engine/TransLog.c:
	* src/engine/Transaction.c:
	* src/engine/kvp_frame.c:
	* src/engine/qofquery.c:
	* src/experimental/cgi-bin/gnc-server.c:
	* src/gnome/dialog-scheduledxaction.c:
	* src/gnome/dialog-sxsincelast.c:
	* src/import-export/log-replay/gnc-log-replay.c: Clean up usage of
	guid_to_string() function. There is no longer any need to release
	the pointer returned by this function.

2003-06-27  Derek Atkins  <derek@ihtfp.com>

	* src/engine/gnc-event*.[ch]:
	  Change the event generation and callback routines to
	  pass a QofIdType in addition to the GUID*

	* src/app-utils/gnc-component-manager.c:
	* src/gnome-utils/gnc-account-sel.c:
	  change to match the new event API.  Remove the need for
	  xaccGUIDType(), which means we no longer get the g_warning.

	* src/backend/postgres/events.c:
	* src/business/business-core/gncAddress.c:
	* src/business/business-core/gncAddress.h:
	* src/business/business-core/gncBillTerm.c:
	* src/business/business-core/gncCustomer.c:
	* src/business/business-core/gncEmployee.c:
	* src/business/business-core/gncEntry.c:
	* src/business/business-core/gncInvoice.c:
	* src/business/business-core/gncJob.c:
	* src/business/business-core/gncOrder.c:
	* src/business/business-core/gncTaxTable.c:
	* src/business/business-core/gncVendor.c:
	* src/business/business-core/test/test-address.c:
	* src/engine/Account.c:
	* src/engine/FreqSpec.c:
	* src/engine/Group.c:
	* src/engine/Period.c:
	* src/engine/SchedXaction.c:
	* src/engine/Transaction.c:
	* src/engine/gnc-lot.c:
	* src/engine/gnc-pricedb.c:
	* src/engine/qofbook.c:
	  Pass the QofIdType into the event generation code.
	Fixes #115988

	* src/engine/qofid.c: change the entity table to use
	  two hash tables to make iterating over all the objects
	  of a particular type a bit faster.  This should improve
	  Query performance on larger datasets.
	Fixes #115989

2003-06-27  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/dialog-hbcitrans.c: Fix stupid bug with
	transaction templates, introduced during code refactoring.

2003-06-25  David Hampton  <hampton@employees.org>

	* src/scm/price-quotes.scm: Don't print the "handling-request"
	messages when getting stock quotes. #110687

	* src/report/report-system/html-document.scm:
	* src/report/report-system/html-text.scm: Correctly quote
	attribute values. #115244

	* src/gnome-utils/dialog-options.c: Display selected pixmap when
	opening an options window.

	* src/gnome-utils/dialog-commodity.c:
	* src/gnome-utils/dialog-utils.[ch]: Consolidate a couple of
	functions into the only file where they areused.

2003-06-25  Derek Atkins  <derek@ihtfp.com>

	* src/report/standard-reports/balance-sheet.scm: Add a "retained
	  earnings" item under equity, and change the title to include
	  the start date.  Fixes (finally!) bug #113196

	* src/gnome-utils/dialog-transfer.c: if we've got the 'exch rate'
	  button set, then make sure we update the to-amount before we use
	  it.  Also be sure to use the values we just obtained.
	  Fixes #115991.

2003-06-25  Christian Stimming  <stimming@tuhh.de>

	* src/gnome-utils/dialog-transfer.h: Add callback handler that is
	notified of the newly created Transaction.

2003-06-24  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/*: Refactor many HBCI functions to
	eventually enable queued processing of several HBCI jobs.

2003-06-23  David Hampton  <hampton@employees.org>

	* src/gnome-utils/dialog-account.c: Limit the commodity choices
	based upon the current account type. #102023, #115461

	* src/gnome-utils/dialog-commodity.c: Add a new argument to the
	dialog creation functions to specify what types of commodities
	should be presented.  Also tweak the title of the dialog based
	upon this argument.  Remove the "new" button when the dialog is
	limited strictly to currencies.

	* src/gnome-utils/gnc-commodity-edit.c:
	* src/import-export/binary-import/druid-commodity.c:
	* src/import-export/import-commodity-matcher.c:
	* src/import-export/qif-import/druid-qif-import.c: Updated for new
	commodity dialog argument.

	* src/report/standard-reports/register.scm: Show the running
	balance column by default. #92052.

	* src/gnome/window-register.c: Annotate the window title to
	indicate whether a register is for a single account or it includes
	all subaccounts. #107927

	* src/gnome/gnc-split-reg.c: Change the register close dialog to
	include a cancel option. #105742

	* src/gnome/window-register.c: Don't close the register if the
	user cancelled. #105742

	* src/engine/Scrub.c (xaccSplitScrub): Change a warning message to
	an info. This clause is hit every time a user saves a changed
	transaction by clicking on another transaction.

	* src/gnome/window-reconcile.c: If the user has manually entered
	an amount, then stop automatically updated the amount when the
	date is changed. #110806

2003-06-22  David Hampton  <hampton@employees.org>

	* src/gnome-utils/dialog-commodity.[ch]: Clean up usage of the
	gnc_ui_update_namespace_picker function.

2003-06-22  Derek Atkins  <derek@ihtfp.com>

	* src/report/standard-reports/category-barchart.scm: Properly
	  reverse the balances of accounts instead of using the internal
	  functions to determine when to reverse.  Fixes #115268.

	* src/backend/file/gnc-backend-file.c: Apply sam's patch:
	  don't allow selection of directory for save file

	* src/business/business-reports/Makefile.am: add fancy-invoice report
	* src/business/business-reports/business-reports.scm: load the fancy-invoice
	* src/business/business-reports/fancy-invoice.scm: a fancy invoice
	  report, to show what else is possible.  It's not really useful per
	  se, but it is another example for users.  To be useful it requires
	  some custom editing.  Thanks to Oliver Jones for submitting the
	  changes.

2003-06-19  Chris Lyttle  <chris@wilddev.net>

	* src/scm/help-topics-index.scm: add Jon Lapham's patch

2003-06-18  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/druid-hbci-initial.c: Tolerate some
	banks' failure of the GetSystemId-job.

2003-06-17  Chris Lyttle  <chris@wilddev.net>

	* src/scm/help-topics-index.scm: add Jon Lapham's patch

2003-06-17  Derek Atkins  <derek@ihtfp.com>

	* src/engine/QueryNew.h: change QUERY_FIRST_TERM to a #define.
	  It does not need to be part of the enum (it's not even used anywhere)
	* src/engine/QueryCore.h: gint32 prints as a "%d", not a "%ld".

	* src/business/business-core/gncBillTerm.c: fix gncBillTermCopy()
	  so it PROPERLY copies the bill term.  Oops!
	* src/business/business-core/file/gnc-tax-table-xml-v2.c:
	  when rebuilding the refcount, make sure we fix the grandparent
	  problems first so we refcount the correct object.
	* src/business/business-core/file/gnc-bill-term-xml-v2.c:
	  when rebuilding the refcount, make sure we fix the grandparent
	  problems first so we refcount the correct object.  Also cope
	  with the broken gncBillTermCopy() and hope that the existing
	  parent is correct.

2003-06-16  David Hampton  <hampton@employees.org>

	* src/gnome/window-register.c: Register with the component manager
	for ACCOUNT events.  Redo the window title when an event is
	received. Fixes #113164.

	* src/app-utils/gnc-component-manager.c: Enhance debugging.

2003-06-15  David Hampton  <hampton@employees.org>

	* src/gnome/gnc-split-reg.c:
	* src/gnome/window-register.c:
	* src/gnome/glade/register.glade:
	* src/register/ledger-core/split-register.c: Add new menu items
	and functions for voiding, un-voiding, and reversing transactions.

	* src/register/ledger-core/split-register-layout.c:
	* src/register/ledger-core/split-register-model.c: Utilized an
	empty register cell for displaying the note entered when a
	transaction is voided.  Added an extra test to
	gnc_split_register_cursor_is_readonly() to see if a transaction
	has been marked read-only.

	* src/engine/Transaction.h: Documentation.

	* src/engine/Transaction.c: Create a couple of new functions by
	extracting common code from existing functions.  New functions to
	clone Splits and Transactions.  New debug functions to dump Splits
	and Transactions to stdout.  New functions to un-void a
	transaction and to reverse all the values in a transaction.  Mark
	voided transactions as read-only.

	* src/engine/test-core/test-engine-stuff.c: Randomly un-void a
	transaction.

	* src/engine/test/test-transaction-voiding.c: Add code to un-void
	a transaction and check that all the values are restored to their
	original state.

	* src/engine/test/test-transaction-reversal.c: Add a new test to
	test the code that clones and reverses transactions.

	* src/engine/Account.c:
	* src/backend/postgres/test/test-db.c:
	* src/backend/file/test/test-xml-transaction.c: Changed function args.

2003-06-15  Derek Atkins  <derek@ihtfp.com>

	* src/import-export/qif-import/druid-qif-import.c:  raise the
	  import window after choosing a file.  I think this fixes #114209
	  but I couldn't reproduce the problem so I couldn't actually test
	  the fix.

	* src/business/business-gnome/dialog-billterms.c:
	* src/business/business-gnome/dialog-customer.c:
	* src/business/business-gnome/dialog-employee.c:
	* src/business/business-gnome/dialog-payment.c:
	* src/business/business-gnome/dialog-vendor.c:
	* src/business/dialog-tax-table/dialog-tax-table.c:
	* src/gnome/dialog-scheduledxaction.c:
	* src/gnome/gnc-split-reg.c:
	* src/import-export/hbci/hbci-interaction.c:
	  Change dialog statements to allow for embedded percent signs in
	  the messages.  In other words, don't allow user input into the
	  format string of a printf.  There may be other forms of this bug
	  elsewhere -- the code should be manually scrubbed file by file
	  for all printf()'s to make sure no user-servicable strings are
	  used as a printf format argument.  Fixes #115245.

	* src/business/business-gnome/dialog-invoice.c: change how the
	  billterms option menu is used so it will change properly if
	  you change the invoice's owner.  Fixes #115290.

	* src/report/standard-reports/account-piecharts.scm: Don't use
	  gnc:reverse-account-balance? to determine whether to reverse
	  the balance -- base it purely on the report type.  Otherwise
	  certain reports doesn't work right when the "reverse account
	  balances" is set in certain ways.  Fixes #107472.

	* src/engine/Account.c: initialize the returned values in
	  finder_help_function().  This fixes bug #108883 (and possibly
	  others not reported).

2003-06-14  Derek Atkins  <derek@ihtfp.com>

	* src/backend/file/io-gncxml-v2.c: make the book-string an extern
	* src/backend/file/gnc-book-xml-v2.c: make the book-string non-static
	Fixes #114401

	* src/register/ledger-core/split-register-model.c: enable the
	  exchange-rate dialog on "search ledger" registers.
	Fixes #113987

	* src/engine/QueryCore.[ch]: create a new GUID_MATCH_LIST_ANY
	  match-type, which can eventually be used to make an AccountGroup
	  comparrison (once we figure out how to label an account group with
	  a GUID)
	* src/engine/QueryNew.c: print out GUID_MATCH_LIST_ANY query terms
	* src/engine/gw-engine-spec.scm: wrap GUID_MATCH_LIST_ANY

2003-06-14  Chris Lyttle  <chris@wilddev.net>

	* src/scm/help-topics-index.scm: add Jon Lapham's patch

2003-06-13  Derek Atkins  <derek@ihtfp.com>

	* src/backend/file/io-gncxml-v2.[ch]: add API to the plugin
	  modules to allow post-processing (scrubbing) of the book after
	  it is loaded from XML.  This allows a plug-in to post-process
	  the complete book.
	* src/business/business-core/file/gnc-customer-xml-v2.c:
	* src/business/business-core/file/gnc-employee-xml-v2.c:
	* src/business/business-core/file/gnc-entry-xml-v2.c:
	* src/business/business-core/file/gnc-invoice-xml-v2.c:
	* src/business/business-core/file/gnc-job-xml-v2.c:
	* src/business/business-core/file/gnc-order-xml-v2.c:
	* src/business/business-core/file/gnc-vendor-xml-v2.c:
	  add a NULL scrub member to the XML plugin API.
	* src/business/business-core/file/gnc-tax-table-xml-v2.c:
	  create a scrub function to clear up bogus tax tables due
	  to bug #114888 (and related bugs) which could cause
	  tax tables to get created ad-nausium if you post and then
	  unpost an invoice.  Scrubs all the entries for bogus
	  tax tables, and then clears out the bogus tax tables.
	* src/business/business-core/file/gnc-bill-term-xml-v2.c:
	  Hook in an empty scrub routine, because I think the same
	  bug exists here, but I'll work on that later.
	* src/business/business-core/gncEntry.c:
	  make sure we properly dereference tax tables when we destroy
	  an entry.
	* src/business/business-core/gncTaxTable.c:
	  - keep a list of children so we can unref ourselves from our
	    children when we get destroyed
	  - deal with parentless children
	Fixes bug #114888 -- don't generate phantom (parent) tax tables
	and clean up any existing bogus tax tables.

	* src/business/business-core/gncBillTerm.c:
	  - keep a list of children so we can unref ourselves from our
	    children when we get destroyed
	  - deal with parentless children
	* src/business/business-core/gncCustomer.c:
	* src/business/business-core/gncInvoice.c:
	* src/business/business-core/gncVendor.c:
	  deal with properly un-ref'ing Bill Terms and Tax Tables
	* src/business/business-core/file/gnc-bill-term-xml-v2.c:
	  create a scrub function to clear up bogus bill terms due to
	  bug #114888 which could cause bill terms to get created
	  due to post/unpost of invoices.  Scrubs all invoices and
	  fixes the reference to bill terms, and updates the refcounts.
	Fixes bug #114888 for bill terms.

	* src/business/business-core/gncTaxTable.c:
	* src/business/business-core/gncBillTerm.c:
	  Mark the data book as dirty if a tax table or bill term is
	  destroyed.  Fixes all of #114889 that I can reproduce.

2003-06-12  Christian Stimming  <stimming@tuhh.de>

	* doc/TRANSLATION_HOWTO: Added, by Jon Lapham
	<lapham@extracta.com.br>.

2003-06-11 Linas Vepstas <linas@linas.org>

	* src/engine/*.[ch]: shuffle code around so that the non-accounting
	  part of the engine can be built separately from accounting part.
	* src/*/*/*.c: changes to fix header file includes to support
	  above changes

2003-06-09  Christian Stimming  <stimming@tuhh.de>

	* configure.in, src/import-export/hbci/dialog-hbcitrans.c: Add
	support for KtoBlzCheck, a small checking package for destination
	account numbers for German banks. Very small, very useful :),
	http://sourceforge.net/projects/ktoblzcheck

2003-06-08  Derek Atkins  <derek@ihtfp.com>

	* src/report/standard-reports/transaction.scm: make sure we have
	  the right number of arguments for all renderers.  Fixes #114641.

	* src/gnome-utils/gnc-date-format.c: ignore empty "custom" formats.
	* src/gnome-utils/gnc-query-list.c: add a test for NULL.

	* src/app-utils/app-utils/scm: export new dateformat option symbols
	* src/app-utils/option-util.[ch]: create dateformat option utility functions
	* src/app-utils/options.scm: create a dateformat option
	* src/engine/date.[ch]: create APIs to handle date-format types.
	  - conversions of date-format to/from strings
	  - move the month format enum to here
	  - conversion of month format to/from strings
	* src/gnome/top-level.c: move date-format string conversion from here
	* src/gnome-utils/dialog-options.c: implement a date-format options
	  that uses the gnc-date-format widget.
	* src/gnome-utils/gnc-date-format.h: remove month format (to date.h)
	Initial fix for #99574

2003-06-08  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/*.c: Remove old unused code.

	* src/import-export/hbci/hbci-interaction.c: Add more user
	feedback functions.

	* src/import-export/hbci/gnc-hbci-utils.c: Improve error handling.

2003-06-01  Derek Atkins  <derek@ihtfp.com>

	* src/gnome-utils/gnc-date-format.*: Create a new "date format"
	  widget to let the user choose a date format (and see the results
	  of what the date would look like).
	* src/gnome-utils/Makedile.am: add gnc-date-format files to the build
	* src/gnome/dialog-print-check.c: use the new date-format widget
	* src/gnome/glade/print.glade: remove data that is now part of the
	  date-format widget.

2003-05-30  Derek Atkins  <derek@ihtfp.com>

	* src/business/business-gnome/dialog-customer.c:
	* src/business/business-gnome/dialog-vendor.c:
	  - Fix the window title to use the company name, not the contact name
	  - Change the message when the company name is left blank.
	Fixes #109754

	* src/gnome/dialog-print-check.c: a simple change -- use a globally-
	  defined option-menu helper function instead of defining our own
	  copy for no particular reason.

2003-05-30  Christian Stimming  <stimming@tuhh.de>

	* lib/guppi-legend.patch: Include patch for Guppi that fixes
	reversed legend problem.

2003-05-29  Derek Atkins  <derek@ihtfp.com>

	* src/gnome/glade/register.glade: add sort entries for Action and Notes
	* src/gnome/gnc-split-reg.[ch]: add ability to sort by Action and Notes
	Fixes #113990.

2003-05-29  David Hampton  <hampton@employees.org>

	* src/engine/iso-4217-currencies.scm: Update the Polish Zloty for
	its new ISO currency code.

	* src/engine/gnc-commodity.c: Convert from the old Zloty code to
	the new one.

2003-05-30  Christian Stimming  <stimming@tuhh.de>

	* src/report/standard-reports/category-barchart.scm: Re-enable
	reversed legend in stacked barcharts. Needs Guppi 0.40.4
	a.k.a. Guppi CVS, though, to actually work.

2003-05-29  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/gnc-hbci-transfer.c: Make sure the amount
	stays a decimal number instead of some fraction.

2003-05-29  Derek Atkins  <derek@ihtfp.com>

	* src/business/business-core/gncInvoice.[ch]: add APIs to get
	  TotalSubtotal() and TotalTax().
	* src/business/business-gnome/dialog-invoice.c: Add Subtotal and Tax
	  labels in the summary bar to print the Invoice's total amounts.
	Fixes #113769.

2003-05-29  Benoit Grgoire  <bock@step.polymtl.ca>

	* src/engine/TransLog.c: Now log the transaction notes field (kvp actually).
	* src/engine/kvp_frame.h: Docs
	* src/import-export/log-replay/gnc-log-replay.c: Actually make it work:) Thanks Derek for pointing me to the private headers.  Support the new note field.

2003-05-29  Christian Stimming  <stimming@tuhh.de>

	* configure.in: OpenHBCI version 0.9.11 is required now. Earlier
	versions cause a segfault with any recent OpenSSL.

2003-05-29  Derek Atkins  <derek@ihtfp.com>

	* src/gnome-utils/gnc-query-list.c: the query headers were restructured
	  by linas so we need to add an extra #include to compile
	* src/import-export/log-replay/gnc-log-replay.c: get it to compile.
	  - Doesn't need libofx.h
	  - use TRUE/FALSE, not true/false.

2003-05-28  Benoit Grgoire  <bock@step.polymtl.ca>

	* src/import-export/import-settings.c: Revert previous gettext macro addition.
	* src/engine/TransLog.c,h: Change the log format to use GUID instead of
	  C pointers and to use ISO8601 instead of proprietary format.

	* src/engine/gnc-numeric.h
	* src/import-export/import-match-map.c: Doxygen update

	* configure.in
	* src/scm/main.scm
	* src/import-export/Makefile.am
	* src/import-export/log-replay/*: New log replay module.  This
	  ALMOST works, except I forgot you can't set the GUID of
	  gnucash's objects, and thus completely screwed up on the
	  playback logic.  I'll think of a solution when I am rested.

2003-05-28  Derek Atkins  <derek@ihtfp.com>

	* src/business/business-core/gncTaxTable.c: when asking for
	  the child, return ourself if we're already a child instead
	  of making a (useless) grandchild.

	* src/business/business-ledger/gncEntryLedger.c: fix a bug where
	  if you unpost an invoice and don't bring the TaxTables up to
	  date, the total value shown in the register is different
	  dependending on whether the cursor is on the current line or
	  not.

	* src/business/business-core/gncInvoice.[ch]: change the unpost
	  API to select whether to repoint the entries to the current tax
	  table or leave it at the child tax table.
	* src/business/business-gnome/glade/invoice.glade:
	* src/business/business-gnome/dialog-invoice.c:
	  New UI when unposting an invoice -- ask whether to bring the tax
	  tables up to date or leave the values when it was posted.
	Fixes #113774

	* src/business/business-gnome/dialog-invoice.c: don't constantly
	  resize the invoice window every time we update ourselves.  Fixes
	  #113775

2003-05-28  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/gnc-hbci-transfer.c, dialog-hbcitrans.c,
	glade/hbci.glade: Add coarse GUI so that transfer templates are
	somehow usable.

	* src/import-export/hbci/gnc-hbci-kvp.[hc]: Store the online
	transfer templates in the book's kvp_frame.

	* src/import-export/hbci/gnc-hbci-trans-templ.[hc]: Add data type
	for online transfer templates.

2003-05-26  Derek Atkins  <derek@ihtfp.com>

	* src/register/ledger-core/dialog-dup-trans.c: If the "number" is
	  set to 0, then empty out the entry.  Considering the SpinButton
	  wants to force a digit, this lets you set an empty number if you
	  accidentally tab into and out of the number field.  This also
	  means you cannot have a check numbered '0', but that is probably
	  a reasonable limitation.  Fixes #109610.

2003-05-26  Chris Lyttle  <chris@wilddev.net>

	* src/scm/main.scm: Change stable version to 1.8.4

2003-05-26  Benoit Grgoire  <bock@step.polymtl.ca>

	* src/import-export/import-settings.c: Fix pref page define to the
	  proper page, should fix the problem of all prefs being ignored.
	  Also make strings in the lookup code translatable so that the
	  matching won't be lost when changing language.
	* src/import-export/generic-import.scm: Add note not to forget to
	  change the c file as well when changing preference page.

2003-05-25  Derek Atkins  <derek@ihtfp.com>

	* src/report/report-gnome/dialog-view-column.c:
	  - fix a bug in the gh_ -> scm_ conversion:  gh_appendN() needs
	    to be converted to gh_append(gh_listify(..., SCM_UNDEFINED)).
	    Just using gh_listify is wrong and causes a crash.
	  - fix a bug that crashes gnucash if you remove the last entry
	    and then add another entry.

	* src/business/business-reports/aging.scm:
	  - Deal with the case where the first transaction found for a
	    particular company is a payment (it used to just ignore it!
	    Oops!  That throws off all the numbers...)
	  - Also print out any overpayment in the total column.

	* src/report/utility-reports/view-column.scm:
	  Catch errors when running the child reports so we display the
	  failed report backtrace but also display an error and continue
	  with the multicolumn report.  Fixes #113668.

2003-05-24  Derek Atkins  <derek@ihtfp.com>

	* src/gnome-utils/dialog-options.c: back out previous change.
	* src/report/report-gnome/window-report.c: a better fix for
	  #107953.  When we are asked to reload the report, queue the
	  request, queue a draw event, and then return immediately.  When
	  the draw event happens, load the report then.  This lets you
	  hit Apply and then OK before the report finishes loading.

	* src/import-export/ofx/test/Makefile.am: make sure we can find
	  libofx/libofx.h

	* src/report/standard-reports/transaction.scm: include split
	  transactions in the filtering of the transaction report.
	  Fixes #113461.

	* src/report/standard-reports/balance-sheet.scm: use a 'from' date
	  to better compute the Net Income on the report.  Fixes #113196
	  (although not its dependency, #101519; that requires new strings)

	* src/gnome-search/search-double.c:
	* src/gnome-search/search-int64.c:
	* src/gnome-search/search-numeric.c:
	  Change the default Search Operation for numerics from "less
	  than" to "equals" -- so by default you would search for an exact
	  value.  Fixes #106443

	* src/report/standard-reports/price-scatter.scm: "eval" changed
	  API on guile-1.6.  Use the existing API to convert a delta
	  symbol to a delta time.
	* src/scm/main.scm: call eval with the right number of arguments
	  based on early or late versions.

	* src/business/business-reports/invoice.scm:
	* src/business/business-reports/owner-report.scm:
	  Change the date format string to be consistent with other places
	  (e.g. the check print dialog) and use '%' instead of '~'.
	  This is an interim fix for #99574, at least until we can
	  centralize the functionality.

	* src/business/business-utils/business-prefs.scm: make the
	  Bill Due Days option selectable based on the setting of
	  Notify Bills Due?

2003-05-23  Derek Atkins  <derek@ihtfp.com>

	* src/gnome-utils/dialog-options.c: don't let the user do anything
	  with the options dialog until Apply() finishes.  This is a
	  simple fix for #107953 so that a user can't crash gnucash by
	  hitting Apply and then OK (before the Apply completes).
	  However, what should really happen is that we queue up requests
	  to destroy ourselves and process the event later.  See #107953
	  for more information.

	* src/report/report-system/report-utilities.scm: had the wrong
	  number of arguments in gnc:account-get-balance-at-date.

	* src/report/standard-reports/balance-sheet.scm: add some
	  (commented out) code to support a start date for computing the
	  Net Income (aka Net Profit) in the Balance Sheet.  This is
	  a commented-out partial fix for #113196.

	* src/business/business-gnome/business-gnome.scm:
	* src/scm/main-window.scm:
	  Move the instantiation of File -> Properties into
	  main-window.scm (out of business-gnome.scm) for future cases
	  where we might decide to ship the business modules separately.

	* src/import-export/ofx/test/test-link.c: fix the test program
	  to make sure it links on many weird platforms.

2003-05-22  Derek Atkins  <derek@ihtfp.com>

	* src/business/business-reports/owner-report.scm:  Better fix for 108731
	  limit the itemized invoices/payments to the start/end date range,
	  but print out a "Balance" line if there is a non-zero balance as
	  of the start date.

	Nikos Charonitakis's account chart updates:
	* accounts/el_GR/Makefile.am: added new carloan account chart
	* accounts/el_GR/acctchrt_common.gnucash-xea: updated account chart
	* accounts/el_GR/acctchrt_carloan.gnucash-xea: new car loan chart

	* src/report/standard-reports/average-balance.scm:
	  Use the correct columns when printing the Gain column, don't
	  reuse the same column as profit; we want to report different
	  values.  Fixes #113096.

2003-05-21  Derek Atkins  <derek@ihtfp.com>

	* src/report/standard-reports/advanced-portfolio.scm:
	  Deal properly when there are no prices for a commodity.

	* src/business/business-reports/owner-report.scm:
	  Supply a start date (as well as an end date) and don't print
	  invoices that occur prior to the start date or after the end date.
	  The aging information ignores the start date, but not the end date.
	  This means the aging information will always be acurate through the
	  end date (even if all the invoices and payments are not displayed).
	  Fixes #108731.

2003-05-20  Derek Atkins  <derek@ihtfp.com>

	* src/scm/printing/print-check.scm: some finer adjustments on
	  the locations for Deluxe personal checks.

	* acinclude.m4: modify the AC_GWRAP_CHECK_GUILE() macro to
	  take an argument, the g-wrap module directory.  Then actually
	  test that the g-wrap module loads.  This should detect systems
	  without slib installed.
	* configure.in: all the new gwrap check macro
	  Fixes #113218

2003-05-19  Derek Atkins  <derek@ihtfp.com>

	* src/engine/QueryNew.[ch]: add gncQueryGetBooks() API to return
	  list of books in a query.
	* src/business/business-core/gncInvoice.[ch]: add INVOICE_POST_LOT
	  query parameter methods

	* src/engine/gnc-event*: add an api to force an event even when
	  events are suspended.  Without such an API, events can be lost
	  if the event system is suspended when the event comes in.

	* src/gnome-utils/dialog-query-list*: the glade and C code for
	  a general QueryList Dialog.
	* src/gnome-utils/Makefile.am: compile the new dialog.
	* src/business/business-gnome/business-gnome.scm: use the new
	  querylist dialog to display the due bills
	* src/business/business-gnome/dialog-invoice.[ch]: create a new
	  API to run a due-bills dialog.
	* src/business/businss-gnome/gw-business-gnome-spec.scm: wrap the
	  new due-bills api
	* src/engine/gnc-book.c: forcibly signal a book destroy event

	* src/business/business-gnome/dialog-invoice.[ch]: pass a double
	  instead of an int, because guile-1.6 sucks.  Also fix the Query
	  to actually include the Due Date of the invoice.
	* src/business/business-gnome/gw-business-gnome-spec.scm:
	  change the int to a double on the bills-due api

	* src/gnome-utils/print-session.[ch]: added gnucash wrappers
	  around gnome-print's rotate, translate, gsave, and grestore
	  APIs.  All to allow sideways printing (by rotating the image).
	* src/gnome-utils/gw-gnome-utils-spec.scm: wrap the new print-session
	  apis.

	* src/gnome/glade/print.glade: add "Deluxe Personal Check" type
	* src/gnome/dialog-print-check.c: add support for choosing
	  a "deluxe" check type.
	* src/scm/printing/print-check.scm: add support for printing
	  to "deluxe" personal checks.  This prints the check "sideways"
	  on a US-Letter configuration.

	* src/engine/QueryCore.c:
	* src/engine/guid.c:
	* src/engine/kvp-util.c:
	  Fixes for 64-bit architectures.  Fixes bug #113231.

2003-05-18  Derek Atkins  <derek@ihtfp.com>

	* src/engine/gnc-lot.[ch]: add LOT_IS_CLOSED and LOT_BALANCE
	  query parameter methods

2003-05-17  Derek Atkins  <derek@ihtfp.com>

	* src/import-export/qif-import/qif-file.scm:  the numeric test
	  regex was broken and would fail on ALL numerics, causing all
	  imports to be of value zero.  Oops.  I _thought_ I tested this,
	  but clearly not sufficiently.  :(

2003-05-16  David Hampton  <hampton@employees.org>

	* src/gnome/window-main.c:
	* src/gnome-utils/gnc-mdi-utils.c:
	* src/gnome-utils/gnc-mdi-utils.h: Fix the "View xxxbar" menu
	items to track properly when a new data file is opened. #99598
	Consolidate the code for manipulating the View/Statusbar and
	View/Summarybar menu items.  Work around a Gnome MDI bug as best
	as possible.

2003-05-16  Derek Atkins  <derek@ihtfp.com>

	* src/gnome/reconcile-list.[ch]: Port to the gnc-query-list.
	  Remove all the extraneous code.
	* src/gnome-utils/gnc-query-list.[ch]: Add code so the reconcile-list
	  can successfully use the query-list.  Add a construct() method.
	  Add an "unselect_all()" method.  Add the ability to print numerics
	  as an ABS and invert the sort (defaults to off).  Add methods to
	  determine if an item is in the list, and one to refresh the display
	  of an item.
	* src/gnome-utils/search-param.[ch]: fix the spelling of resizeable

	* src/gnome-utils/gnc-query-list.c: we can't use a reversed list
	  and prepend() because then we're always adding row 0 so the
	  saved checkmarks fail.  So, use the slow way and use 'append()'.

2003-05-12  David Hampton  <hampton@employees.org>

	* src/quotes/finance-quote-check.in:
	* src/quotes/update-finance-quote.in: Add HTML::Parser to the list
	of items checked/installed. #104197

2003-05-12  Derek Atkins  <derek@ihtfp.com>

	* src/gnome-utils/gnc-query-list.[ch]: an abstracted Query list
	  widget to display the results of a Query.

	* src/engine/Query{,P}.h: move the location of gncQuerySearchFor()
	  to allow callers to look it up without requiring the private
	  header.
	* src/business/business-core/gncInvoice.[ch]: define
	  INVOICE_IS_PAID and create gncInvoiceIsPaid() function (the
	  prototype already existed, but it was never implemented).
	* src/business/business-gnome/dialog-invoice.c: add IS_PAID column
	  and the ability to search for paid/not-paid invoices.
	* src/gnome-utils/Makefile.am: build gnc-query-list
	* src/gnome-utils/gnc-query-list.[ch]: finish the GNCQueryList.
	  - allow active-column sorting
	  - watch all the entities in the query and update when an entry changes
	  - use a checkbox to display booleans
	* src/gnome-utils/search-param.[ch]: add extra APIs required to support
	  the initial QueryList implementation
	* src/gnome-search/dialog-search.c: Convert to use the new
	  GNCQueryList to display the search results.
	Fixes #106035

2003-05-11  David Hampton  <hampton@employees.org>

	* src/gnome/dialog-commodities.c:
	* src/app-utils/prefs.scm: Remember the state of the "show
	currencies" check box from one time to the next.

	* src/gnome-utils/dialog-transfer.c: Fix transfer dialog to not
	hang if OK button is clicked w/o filling in dialog properly.
	#109497

	* src/gnome/window-reconcile.c: Button shouldn't take full width
	of the window.

	* src/app-utils/gnc-component-manager.c: Add some debugging.

	* src/gnome-utils/dialog-commodity.c: Fix problem selecting quote
	source.

	* configure.in:
	* src/gnome/gnc-splash.c:
	* src/gnome/window-main.c: Give more control over what builds have
	a version number and what builds are labelled "cvs".

2003-05-11  Derek Atkins  <derek@ihtfp.com>

	* src/import-export/hbci/gnc-hbci-utils.c: you have to declare
	  your variables before you g_assert() anything.

2003-05-10  David Hampton  <hampton@employees.org>

	* src/backend/file/gnc-commodity-xml-v2.c:
	* src/engine/gnc-commodity.c:
	* src/engine/gnc-commodity.h:
	* src/gnome/glade/account.glade:
	* src/gnome-utils/commodity.glade:
	* src/gnome-utils/dialog-account.c:
	* src/gnome-utils/dialog-commodity.c:
	* src/gnome-utils/dialog-commodity.h:
	* src/gnome-utils/dialog-utils.c:
	* src/gnome-utils/dialog-utils.h: Migrate fields and functions
	related to price quotes from the account to the commodity.  Fixed
	the original complatint in #104197 as part of these changes.

	* src/backend/file/io-gncxml-v2.c:
	* src/engine/Scrub.c:
	* src/engine/Scrub.h: Migrate price quote information when reading
	in the data file.

	* src/app-utils/gnc-helpers.c:
	* src/app-utils/gnc-helpers.h:
	* src/app-utils/gw-app-utils-spec.scm:
	* src/engine/gw-engine-spec.scm:
	* src/scm/price-quotes.scm: The code to get quotes from F::Q now
	needs to get the information from the commodity data structures,
	not the Account data structures.

	* src/backend/file/gnc-account-xml-v2.c: Continue to write out
	price quote information with the Account data. This allows users
	to fall pack to production code without loss of information.  This
	code will drop out in the next release of gnucash (1.10 or 2.0).

	* src/engine/Account.c:
	* src/engine/Account.h: Deprecated a couple of functions.
	Continue existing hack of automatically marking cross currency
	accounts for automatic quote retrieval.

	* src/backend/file/io-gncbin-r.c: Update for the new names of
	deprecated functions.

	* src/import-export/import-commodity-matcher.c: Update for changed
	calling conventions.

	* configure.in: Restore some lost changes.

2003-05-09  Christian Stimming  <stimming@tuhh.de>

	* macros/openhbci.m4: Fix openhbci macro again so that it uses a C
	check program.

2003-05-08  Derek Atkins  <derek@ihtfp.com>

	* configure.in: add AC_PREREQ(2.53) to require 2.53 :)
	* macros/autogen.sh: add more searches for a good version of
	  the autotools.

	* configure.in: fix some AC_DEFINE macros
	* macros/autogen.sh: a bit more work on the version searches.

	* acconfig.h: remove duplicate entries (for use with more recent autoheader)
	* configure.in: supply AC_PROG_CXX to fix the automake-1.7 problem

2003-05-07  Derek Atkins  <derek@ihtfp.com>

	* macros/autogen.sh: require autoconf >= 2.53 and automake >= 1.5
	  Also look for appropriately-named versions on systems like RH7.3

2003-05-05  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/dialog-hbcitrans.c, gnc-hbci-utils.h,
	gnc-hbci-utils.c, hbci-interaction.h, hbci-interaction.c: Add
	*much* better error checking -- the user now gets almost always
	correct feedback if an online transfer cannot be executed.

2003-05-05  David Hampton  <hampton@employees.org>

	* macros/openhbci.m4: Fix problem with latest versions of autoconf.

2003-05-03  Christian Stimming  <stimming@tuhh.de>

	* configure.in: Fix hbci and ofx test for handling --disable
	correctly.

2003-05-01  Derek Atkins  <derek@ihtfp.com>

	* src/import-export/qif-import/qif-parse.scm: Don't assume that a
	  date of the form XXXXXXXX is always YYYYMMDD.  There is at least
	  one example where it is MMDDYYYY.  So, test it both ways:
	  xxxxYYYY and YYYYxxxx.  Make sure a 4-digit year "makes sense"
	  (e.g., the year is after 1930). Fixes bug #111889.

2003-04-29  Derek Atkins  <derek@ihtfp.com>

	* src/engine/test/Makefile.am: disable the test-scm-query-import
	  test, since it breaks on guile-1.6 (which does mean that
	  importing into a guile-1.6-based system will fail, but so much
	  else fails when upgrading from 1.6 to 1.8 that it really doesn't
	  matter.  Users will have to reset their reports anyways.

2003-04-28  David Hampton  <hampton@employees.org>
	* src/engine/iso-4217-currencies.scm: Remove two duplicate
	commodities.  The newer name for these commodities was retained.

	* src/app-utils/gnc-euro.c:
	* src/app-utils/gnc-ui-util.c:
	* src/backend/file/io-gncxml-v2.c:
	* src/backend/postgres/test/test-db.c:
	* src/backend/rpc/RpcUtils.c:
	* src/engine/gnc-commodity.c:
	* src/engine/gnc-commodity.h:
	* src/engine/test-core/test-engine-stuff.c:
	* src/gnome/dialog-commodities.c:
	* src/gnome-utils/dialog-commodity.c:
	* src/gnome-utils/dialog-transfer.c:
	* src/import-export/binary-import/druid-commodity.c:
	* src/import-export/qif-import/druid-qif-import.c: Consolidate all
	the tests for an ISO 4217 commodity into a pair of functions.  Use
	these functions throughout the code.

2003-04-26  David Hampton  <hampton@employees.org>

	* src/backend/file/gnc-commodity-xml-v2.c: Consolidate duplicate
	strings.

2003-04-23  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/druid-hbci-initial.c: Adapt to latest
	OpenHBCI changes.

2003-04-21  Derek Atkins  <derek@ihtfp.com>

	* src/business/business-reports/aging.scm: fix the percentage
	  calculations so we don't get GtkCritical warnings.

2003-04-20  Derek Atkins  <derek@ihtfp.com>

	* src/report/standard-reports/transaction.scm: Applied Tomas
	  Pospisek's patch to the transaction report (fixes bug #110598)

	* src/gnome-utils/gw-gnome-utils-spec.scm: fix the description
	  of gnc:mdi-show-progress.

	* src/business/business-gnome/dialog-customer.c:
	* src/business/business-gnome/dialog-employee.c:
	* src/business/business-gnome/dialog-job.c:
	* src/business/business-gnome/dialog-vendor.c:
	  Enable changing the "ID" for different business objects.
	  Fixes #108563.

	* src/import-export/qif-import/qif-file.scm: Don't try to
	  parse values that begin "..." because it is clearly not
	  valid (regardless of the locale).  Fixes #109868.

2003-04-18  Herbert Thoma  <herbie@hthoma.de>

	* src/engine/Account.c: move currency conversion to gnc-pricedb.c

	* src/engine/gnc-pricedb.c
	* src/engine/gnc-pricedb.h: add functions
	  gnc_pricedb_convert_balance_latest_price and
	  gnc_pricedb_convert_balance_nearest_price

	* src/engine/gw-engine-spec.scm: wrap functions
	  gnc_price_list_destroy, gnc_pricedb_lookup_latest_any_currency,
	  gnc_pricedb_lookup_nearest_in_time_any_currency,
	  gnc_pricedb_convert_balance_latest_price and
	  gnc_pricedb_convert_balance_nearest_price

	* src/report/report-system/commodity-utilities.scm: use
	  gnc:pricedb-convert-balance-latest-price and
	  gnc:pricedb-convert-balance-nearest-price to improve
	  multiple currency reports

	* src/report/standard-reports/advanced-portfolio.scm:
	  improve report for stocks and funds not denominated in report currency

2003-04-16  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/druid-hbci-initial.c,
	src/import-export/hbci/hbci-interaction.c: Adapt to latest changes
	in OpenHBCI CVS.

2003-04-14  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/hbci-interaction.c: Fix some user
	messages where chip cards were confused with key files.

2003-04-12  Herbert Thoma  <herbie@hthoma.de>

        * src/backend/file/sixtp-dom-parsers.c
        * src/backend/file/sixtp-utils.c
        * src/backend/file/test/test-dom-converters1.c
        * src/backend/file/test/test-string-converters.c
        * src/business/business-ledger/gncEntryLedgerLayout.c
        * src/business/business-ledger/gncEntryLedgerModel.c
        * src/calculation/fin.c
        * src/engine/GNCId.c
        * src/engine/QueryCore.c
        * src/engine/gnc-engine-util.c
        * src/engine/guid.c
        * src/engine/test/test-commodities.c
        * src/gnome-utils/dialog-options.c
        * src/gnome-utils/dialog-utils.c
        * src/gnome-utils/gnc-dense-cal.c
        * src/gnome-utils/gnc-frequency.c
        * src/gnome-utils/gnc-html.c
        * src/gnome/dialog-fincalc.c
        * src/gnome/dialog-scheduledxaction.c
        * src/gnome/dialog-sx-from-trans.c
        * src/gnome/gnc-split-reg.h
        * src/gnome/reconcile-list.h
        * src/import-export/import-account-matcher.c
        * src/network-utils/gnc-gpg.c
        * src/register/register-core/formulacell.c
        * src/register/register-core/pricecell.c
        * src/register/register-gnome/combocell-gnome.c
        * src/register/register-gnome/datecell-gnome.c
        * src/register/register-gnome/gnucash-sheet.h:
	  fixes for GCC 3.3 warnings
	  comparison between signed and unsigned and
	  dereferencing type-punned pointer will break strict-aliasing rules
	  fixes #110320

        * src/engine/gnc-pricedb-p.h
        * src/engine/gnc-pricedb.c
        * src/engine/gnc-pricedb.h:
	  gnc_pricedb_lookup_at_time_any_currency,
	  gnc_pricedb_lookup_day_any_currency and
	  gnc_pricedb_lookup_nearest_in_time_any_currency functions

2003-04-11  Derek Atkins  <derek@ihtfp.com>

	* src/engine/Transaction.c: xaccSplitGetCorrAccountCode() should
	  actually return the account Code, not the account Name!  Fixes
	  #110561.

2003-04-06  Derek Atkins  <derek@ihtfp.com>

	* src/gnome-util/transfer-dialog.c: Pop up a dialog if the user
	  tries to transfer from a non-currency account, and don't let
	  them do it.  Yes, this means you cannot transfer between mutual
	  funds, but the logic for that can be added later.  This fixes
	  bug #109641.

	* src/gnome-search/search-date.c: Evaluate the date during
	  get_predicate() in case the user just "hit return" (and the
	  auto-evaluate didn't happen).  Fixes bug #106444.

2003-04-04  Derek Atkins  <derek@ihtfp.com>

	* src/report/standard-report/transaction.scm: symbols are not
	  strings in guile-1.6.  Fixes debian bug #186004.
	* doc/gnucash.1.in: it's --add-price-quotes (not quote)
	* src/app-utils/date-utilities.scm: fix "WeekDelta" and add
	  TwoWeekDelta.  Fixes debian #185860.

2003-04-03  Derek Atkins  <derek@ihtfp.com>

	* src/scm/main.scm: guile-1.6 requires empty lists to be quoted
	  (fixes debian bug #186188)

2003-04-03  Benoit Grgoire  <bock@step.polymtl.ca>

	* src/import-export/import-commodity-matcher.c: Fix debian bug #187061
	Crash during import of investment accounts.

2003-04-02  Benoit Grgoire  <bock@step.polymtl.ca>

	* po/POTFILES.in,
	src/import-export/ofx/Makefile.am,
	src/import-export/ofx/ofx.glade: Remove obsolete ofx.glade
	* po/fr.po: Update french translation again, 200 more messages handled

2003-04-01  Derek Atkins  <derek@ihtfp.com>

	* src/business/business-core/gncEntry.h:  Move the definitions
	  of PaymentType and DiscountHow higher earlier in the file
	  to prevent problems of circular dependencies.
	* src/business/business-core/gncInvoice.[ch]:
	  - Add the storage of the to_charge_amount.
	  - Add GetTotalOf() to find the total of Cash and Charge amounts
	  - Use the to_charge_amount when posting an invoice
	* src/business/business-core/dialog-invoice.c:
	  - add a to_charge_amount for Exp. Vouchers
	  - add a "Total Cash" and "Total Charge" summary
	* src/business/business-gnome/glade/invoice.glade:
	  - add the to_charge_amount frame and labels.
	* src/busines/business-core/file/gnc-invoice-xml-v2.c: Add support
	  for the to-charge amount.

	* src/business/business-gnome/dialog-invoice.c: fix an assertion
	  failure -- don't try to set the to_charge_amount value unless
	  we're in a VIEW/EDIT invoice.

	* src/business/business-ledger/gncEntryLedgerControl.c:
	  Don't ask the user in the general case when making changes
	  to entries.  Generally the user should be allowed to make
	  whatever changes they want without being pestered.

	* src/business/business-ledger/gncEntryLedgerControl.c:
	  Save the entry cells before adding an it to the invoice,
	  otherwise it wont get sorted properly.  Fixes #108910.

	* src/business/business-gnome/glade/date-close.glade:
	  Fix the glade settings so resizing the window will properly
	  resize the widgets.  Fixes #107586.

	* src/business/business-core/business-core.scm:
	  When building the "name + address" string, check if the
	  company name and contact name are the same and, if so,
	  only print one of them.  Fixes #109753.

	* src/business/business-reports/owner-report.scm:
	* src/business/business-reports/aging-report.scm:
	  Fix a couple strings to improve comments when owners and accounts
	  are missing.  Direct the user to select them in the report options.

2003-04-01  Christian Stimming  <stimming@tuhh.de>

	* src/report/report-system/options-utilities.scm: Fix missing i18n
	markup on some option names.

2003-03-31  David Hampton  <hampton@employees.org>

	* src/engine/Account.c:
	* src/gnome/gnc-split-reg.c:
	* src/app-utils/gnc-ui-util.c: Push gui independent functions into
	the engine.

	* src/gnome/window-acct-tree.c:
	* src/gnome-utils/gnc-account-tree.c:
	* src/scm/main-window.scm: Collapse the account tree data
	declarations into a common table.  Change functions to be driven
	off this data table instead of explicitly coding each field.  Add
	new fields in the account tree window for present, cleared,
	reconciled, and future minimum balances.  #95628

	* src/gnome-utils/dialog-account.c: Update for changes to function
	parameters.

2003-03-31  Herbert Thoma  <herbie@hthoma.de>

	* src/engine/gnc-pricedb.c
	* src/engine/gnc-pricedb.h: new function
	gnc_pricedb_lookup_latest_any_currency, return any available
	prices for given commodity regardless of currency

	* src/app-utils/gnc-ui-util.c: do a "two stage" price lookup in
	gnc_ui_convert_balance_to_currency if no price for the commodity
	is found in the requested currency, then look for prices in any
	currency and for a exchange rate from the price currency to the
	requested currency

	* src/gnome/gnc-split-reg.c: do currency conversion and show the
	value in the status line of stock and mutual fund accounts

2003-03-31  Derek Atkins  <derek@ihtfp.com>

	* src/business/business-core/test/test-employee.c:  fix the test
	  to reflect the change in Employee->Printable()

2003-03-29  Christian Stimming  <stimming@tuhh.de>

	* src/report/standard-reports/daily-reports.scm: New report
	"income vs. day of week" by Andy Wingo <wingo@pobox.com>.

	* src/engine/gnc-session.c: OpenBSD fix by Todd T. Fries
	<todd@flare.fries.net>

	* src/engine/Transaction.c: OpenBSD fix by Todd T. Fries
	<todd@flare.fries.net>: time_t is not long everywhere.

2003-03-23  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/hbci-interaction.c (GNCInteractor_hide):
	Fix close-on-finished checkbutton.

	* src/import-export/hbci/hbci-progressmon.c: Add descriptions of
	new HBCI actions.

2003-03-20  Derek Atkins  <derek@ihtfp.com>

	* configure.in: don't add -I$(GNC_INCLUDE_DIR) to the engine
	  cflags, because it can cause build warnings on platforms with
	  gcc-3.2, and frankly we don't need it since we don't install
	  before we're building.

2003-03-18  Benoit Grgoire  <bock@step.polymtl.ca>
	* Documentation update

2003-03-16  David Hampton  <hampton@employees.org>

	* src/business/business-ledger/gncEntryLedgerLoad.c:
	* src/engine/date.c:
	* src/engine/date.h:
	* src/gnome/gnc-split-reg.c:
	* src/gnome/window-register.c:
	* src/gnome-utils/gnc-date-edit.c:
	* src/register/ledger-core/gnc-ledger-display.c:
	* src/register/ledger-core/split-register-load.c:
	* src/register/ledger-core/split-register-util.c:
	* src/register/register-gnome/datecell-gnome.c:
	Consolidate all the functions that convert time values to be the
	beginning, middle, or end of a day.

	* src/backend/file/gnc-backend-file.c:
	* src/backend/file/io-gncbin-r.c:
	* src/engine/Makefile.am:
	* src/engine/TransLog.c:
	* src/engine/date.c:
	* src/engine/date.h:
	* src/engine/gnc-book.c:
	* src/engine/gnc-session-scm.c:
	* src/engine/gnc-session.c:
	* src/optional/swig/Makefile.am:
	Collapse the DateUtils.[ch] files into date.[ch].

2003-03-15  David Hampton  <hampton@employees.org>

	* src/gnome-utils/gnc-date-edit.c: Fix the keypress handlers so
	they work properly for both the text entry widget and the calendar
	popup widget.

	* src/gnome-utils/dialog-utils.c (gnc_handle_date_accelerator):
	Eliminate a critical warning message. #106675

	* src/register/ledger-core/split-register.c
	(gnc_split_register_config): Force the cursor to the first line of
	a transaction split before disabling "double line" mode in the
	register.  This prevents the register refresh code from trying to
	update a cell that is no longer visible.  #105346

2003-03-15  Christian Stimming  <stimming@tuhh.de>

	* src/engine/gnc-book.h, src/engine/*.h: Added a lot of
	documentation comments, improved doxygen output. At least the most
	important header files will now show up in doxygen.

2003-03-14  David Hampton  <hampton@employees.org>

	* src/gnome/window-reconcile.c (gnc_start_recn_date_changed):
	Don't reverse the account balance here. The routine called to
	retrieve the account balance has already taken care of reversing
	the sign where necessary.

2003-03-13  David Hampton  <hampton@employees.org>

	* src/app-utils/option-util.c (gnc_option_get_range_info): Reapply
	Derek's fix for a crash when opening the Pref's dialog when using
	guile-1.6.1.  Lost when converting to the scheme scm_xxx
	interface.

2003-03-13  Derek Atkins  <derek@ihtfp.com>

	* src/engine/Makefile.am: make sure to add INTLLIBS in case
	  we're compiling against an external -lintl (like on Solaris)

	* src/calculation/Makefile.am: fix to build on systems that don't
	  have GUILE installed in the system path or in the same place
	  as GLIB.

2003-03-12  Derek Atkins  <derek@ihtfp.com>

	* src/gnome-utils/dialog-transfer.c: the Euroland currency rates
	  were inverted in the transfer dialog.

	* src/app-utils/gnc-ui-util.c:
	* src/gnome/top-level.c:
	  the Account Separator option was moved to the Accounts page --
	  reference is correctly.
	Fixes #106673

2003-03-11  Derek Atkins  <derek@ihtfp.com>

	* src/scm/main-window.scm:  turn off the report-total by default

2003-03-10  Derek Atkins  <derek@ihtfp.com>

	* src/business/business-core/gncEmployee.c: name the employee name
	  the specific 'printable' name.
	* src/business/business-core/gncInvoice.c: if an invoice is owned
	  by an EMPLOYEE, then consider it an expense voucher.  Check the
	  entry payment-type and post directly to a CC account if one is
	  available.
	* src/business/business-core/gncOwner.c: use the employee->address->name
	  instead of the employee->username
	* src/business/business-gnome/business-gnome.scm: add employee items
	  to the main menu
	* src/business/business-gnome/dialog-employee.c:
	  - add a UI to choose an employee credit-card account
	  - add "expense vouchers" and "payments" to the employee search results
	  - change the search criteria and result column order
	* src/business/business-gnome/dialog-invoice.c:
	  - hide the 'job' if this is an expense voucher
	  - create an expense-voucher register is the invoice owner is an employee
	* src/business/business-gnome/gw-business-gnome-spec.scm:
	  add gnc:url-type-employee
	* src/business/business-gnome/glade/employee.glade: add the
	  UI for the CCard account
	* src/business/business-gnome/glade/invoice.glade: name the job label
	  widget
	* src/business/business-ledger/gncEntryLedger.[ch]:
	  - define an expense voucher register
	* src/business/business-ledger/gncEntryLedgerControl.c:
	  add support for expense vouchers
	* src/business/business-ledger/gncEntryLedgerDisplay.c:
	  - add support for expense vouchers
	  - add a component watch on the employee and refresh if it changes.
	    this lets us change the available payment options based on whether
	    the employee has a ccard account assigned.
	* src/business/business-ledger/gncEntryLedgerLayout.c:
	  - create the layout for an expense voucher register
	  - widen the account columns
	* src/business/business-ledger/gncEntryLedgerLoad.c:
	  - add support for expense vouchers
	  - load the payment cell based on the invoice owner -- don't allow
	    'charge' unless the employee actually has an assigned ccard account.
	* src/business/business-ledger/gncEntryLedgerModel.c:
	  - add functions to support the payment cell
	  - add support for expense vouchers
	* src/business/business-reports/business-reports.scm:
	  - add gnc:employee-anchor-text
	  - add support for employee "owner reports" and an employee link
	* src/business/business-reports/invoice.scm:
	  label the Expense Report "properly"
	* src/business/busines-reports/owner-report.scm:
	  create an "employee report"
	* src/business/business-utils/business-prefs.scm:
	  save the voucher register width
	Implements RFE #90371

	* src/gnome-utils/gnc-account-sel.c:
	  If the nameList == NULL then add a blank line, to make sure
	  the selector list is really empty, rather than defaulting to all of
	  the accounts in the tree if there are none matching.

2003-03-09  Derek Atkins  <derek@ihtfp.com>

	* src/business/business-core/gncEmployee.[ch]: added APIs to
	  store a Credit Card account for the employee.
	* src/business/business-core/file/gnc-employee-xml-v2.c:
	  store the employee's CC Account in the XML file.

2003-03-08  Derek Atkins  <derek@ihtfp.com>

	* src/import-export/import-backend.c:
	* src/import-export/import-match-map.c:
	* src/import-export/import-match-map.h:
	  Chris Morgan's Baysian Matching code, to match transactions
	  based on Bayesian filtering of previously matched transactions.

	* src/business/business-ledger/gncEntryLedger.c: allow the user
	  to enter any Action they wish.

2003-03-06  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/dialog-hbcitrans.c: Include a latest
	change in OpenHBCI: Use bank code from HBCI account instead of
	HBCI bank, if the available openhbci version supports it.

2003-03-03  Derek Atkins  <derek@ihtfp.com>

	* src/business/business-core/business-core.scm: don't export
	  gnc:owner-get-name -- it overrides the g-wrap'ed version

2003-03-02  Derek Atkins  <derek@ihtfp.com>

	* src/business/business-core/gncEntry.[ch]: add interfaces
	  to deal with bill 'payment types', in preparation for
	  employee expense vouchers.
	* src/business/business-core/file/gnc-entry-xml-v2.c:
	  add support for the bill payment type.

	* src/business/business-core/business-core.scm:
	  don't need gnc:owner-get-name in scheme
	  add employee support to owners
	  fix bug in (gnc:owner-get-id)
	* src/business/business-core/gncEmployee.[ch]:
	  add APIs to get-guid and lookup from scheme
	* src/business/business-core/gw-business-core-spec.scm:
	  wrap employee-get-guid, employee-lookup, employee-get-id,
	  employee-get-username, employee-get-addr, owner-init-employee,
	  owner-get-employee, owner-get-name
	* src/business/business-gnome/business-options-gnome.c:
	  create an "employee option" widget set
	* src/business/business-gnome/business-urls.c:
	  define an 'employee' URL type
	* src/business/business-gnome/dialog-employee.[ch]:
	  remove old, unused search APIs,
	  add new search APIs
	* src/business/business-gnome/dialog-invoice.c:
	  add _some_ employee support.  Still doesn't contain the code
	  to display an employee-owned invoice (expense voucher).
	* src/business/business-utils/business-options.scm:
	  create an employee option type
	* src/business/business-core/gncInvoice.c:
	* src/business/business-core/gncOwner.[ch]:
	* src/business/business-core/file/gnc-owner-xml-v2.c:
	* src/business/business-gnome/business-gnome-utils.c
	* src/business/business-gnome/search-owner.c:
	  add employee support

2003-03-02  Christian Stimming  <stimming@tuhh.de>

	* src/app-utils/prefs.scm: Adjust the names of register styles in
	the preferences to those names used in the register View
	menu. This didn't require changes in any option lookup code.

	* src/gnome/glade/register.glade: 'Duplicate Transaction' could
	either mean 'to duplicate a transaction' or 'the duplicate of a
	transaction'. Both need very different translations. Therefore
	changed 'Duplicate Transaction' in the register into 'Duplicate
	this Transaction' to resolve that ambiguity here.

2003-03-01  Derek Atkins  <derek@ihtfp.com>

	* src/gnome/dialog-sxsincelast.c: make sure to resume gui refresh events

2003-02-26  Benoit Grgoire  <bock@step.polymtl.ca>

	* src/import-export/import-backend.c:
	-Disable -3 punishment for transactions which have an online ID.  This punished credit card transfer yet added no tangible benefit.

2003-02-22  Derek Atkins  <derek@ihtfp.com>

	* src/gnome/glade/account.glade: Increase height of
	  account-hierarchy druid.

2003-02-22  David Hampton  <hampton@employees.org>

	* src/gnome/window-register.c: Don't override the user's toolbar
	style preference by calling gtk_widget_show_all() on the toolbar.
	#102041

	* various: Initial port from the deprecated (in 1.6) guile gh_xxx
	interface to the supported scm_xxx interface.

2003-02-22  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/dialog-hbcitrans.c: Quick fix to avoid
	online transfers being sent to the bank twice.

2003-02-19  Derek Atkins  <derek@ihtfp.com>

	* configure.in: move AS_SCRUB_INCLUDE _before_ tests so it wont
	  fail on gcc 3.2.2 which actually cares.  This is particularly
	  important for AC_CHECK_HEADER(S)

	* configure.in: change the configure help message from
	  "--enable-gui" to "--disable-gui", because the default is
	  enabled.  Also changed "--enable-error-on-warning" for the
	  same reason.

2003-02-18  David Hampton  <hampton@employees.org>

	* acconfig.h:
	* configure.in: Export the guile version number so it can be used
	in the code.  Add new variable for conditionally including the
	SRFI directory when doing 'make check'.  Should be null when using
	guile 1.6.

	* Various Makefile.am files: Use new conditional include for the
	SRFI directory when running 'make check'.

2003-02-17  Derek Atkins  <derek@ihtfp.com>

	* src/gnome-utils/dialog-transfer.c: don't round the exchange
	  rate when returning it to callers...  Compute it from the
	  from_amount and to_amount.
	* src/register/ledger-core/split-register.c: change the rate-cell
	  to a shares_print_info so we don't lose accuracy due to rounding
	  errors.
	  Fixes bug #106332

2003-02-16  David Hampton  <hampton@employees.org>

	* src/quotes: List HTML::TableExtract as an explicit requirement,
	since about half of the of Finance::Quote modules require it even
	though F::Q doesn't list it as a dependency.

2003-02-16  Derek Atkins  <derek@ihtfp.com>

	* src/import-export/import-backend.c: fix a bug keeping the code
	  from compiling.

2003-02-16  Herbert Thoma  <herbie@hthoma.de>

	* src/gnome/gnc-split-reg.c:
	  only display an euro amount in the status bar of a register window
	  if the account currency is a euro currency but NOT euro itself

	* src/gnome-utils/gnc-account-tree.c:
	  auto resize balance and total columns

2003-02-15  Derek Atkins  <derek@ihtfp.com>

	* src/import-export/qif-import/qif-file.scm:
	  - No need to use the 'negative' field anymore
	  - Save the default split, even if we've got a split transaction.
	    It will be useful later to make sure we have a properly balanced
	    transaction and everything has the "right sign"
	* src/import-export/qif-import/qif-objects.scm:
	  - remove the 'negative' field of a split
	  - add a 'default-split' field of a transaction
	  - change the split-amounts and set-split-amounts! functions
	    the split-amounts will also return the default-split, if it
	    exists.  set-split-amounts! will figure out if we need to
	    reverse the splits by seeing if the amounts add up to 0 and
	    coping appropriately..  This is to fix a bug where SOME programs
	    make splits positive, and some make them negative.  This should
	    deal properly in both cases, so it's a better fix for #105139.

2003-02-14  Benoit Grgoire  <bock@step.polymtl.ca>

	* src/import-export/import-backend.c:
	-Remove unused code.
	-Fix "destination account written to the matchmap even when
	 autoselected" bug.
	-Disable destination account matching by memo, until bayesian
	 filtering is implemented.  It's currently unlikely to help, and
	 causes false positives since very often the type of the
	 transaction is stored there.

2003-02-14  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/glade/hbci.glade: Clarify some
	HBCI strings.

2003-02-14  David Hampton  <hampton@employees.org>

	* src/quotes/dump-finance-quote: Do a runtime check for
	Finance::Quote instead of including the perl 'use' declaration.
	The latter causes RPM to add a dependancy on F::Q.

2003-02-13  Derek Atkins  <derek@ihtfp.com>

	* src/gnome-utils/dialog-options.c:  guile-1.6 doesn't like
	  "()" as an empty list.  Change it to "'()" to make it happy.
	  This is backwards compatible with older guiles.

2003-02-12  Derek Atkins  <derek@ihtfp.com>

	* applied Matthew Vanecek's patch to postgres/kvp-sql.c

2003-02-10  Herbert Thoma  <herbie@hthoma.de>

	* src/app-utils/gnc-ui-util.c:
	* src/app-utils/gnc-ui-util.h:
	* src/gnome-utils/gnc-account-tree.c:
	* src/gnome/window-acct-tree.c:
	* src/scm/main-window.scm:
	  recycle ACCOUNT_BALANCE_EURO and ACCOUNT_TOTAL_EURO account tree
	  columns to display balance resp. total in default report currency

	* src/import-export/import-backend.c: in
	  gnc_import_TransInfo_refresh_destacc move g_assert before first
	  assignment, otherwise I get a syntax error

2003-02-10  Benoit Grgoire  <bock@step.polymtl.ca>

	* src/import-export/import-main-matcher.c: Patch by cmorgan to
	  restrict iterative destination account matching to transactions
	  AFTER the current one in the clist.

2003-02-10  Benoit Grgoire  <bock@step.polymtl.ca>

	* src/import-export/import-backend.c,h:
	* src/import-export/import-main-matcher.c: Apply most of cmorgan's
	  patch for iterative destination account matching.  Optionally
	  restricting to the transactions after the one being edited still
	  need's to be implemented.

2003-02-10  Derek Atkins  <derek@ihtfp.com>

	* po/POTFILES.in: fox for the search-param.c move

	* src/import-export/import-main-matcher.c: freeze/thaw the clist
	  around the iterator to ease the visual affects.

2003-02-09  Chris Lyttle  <chris@wilddev.net>

	* rpm/gnucash.spec.in: fix info file not found.

2003-02-09  Derek Atkins  <derek@ihtfp.com>

	* src/register/ledger-core/split-register-control.c
	  If we're expanded, ignore TRANS cursor classes.  This prevents
	  a bug where the exchange-rate dialog is realized when there really
	  is nothing to do (because we're in an expanded transaction).
  	* src/register/ledger-core/split-register-model.c
	  Don't PERR() if we have no account -- this prevents annoying
	  messages when handling multi-currency txns in the GL.  Note:
	  all GL txns are displayed in the locale currency (if possible).
	* src/register/ledger-core/split-register.c
	  AUTO_LEDGER and JOURNAL register types _ARE_ expanded -- return
	  TRUE, not FALSE.
	Fixes 105319

	* src/report/standard-report/advanced-portfolio.scm: add extra
	  arguments to prevent scheme crash.
	Fixes 105405

	* src/gnome/glade/sched-xact.glade: Need to start the Editor dialog
	  as non-visible so the ledger get's sized properly
	* src/gnome/dialog-scheduledxaction.c: resize the cal after the
	  dialog is shown, so it get's sized properly.

	Move some files around in preparation for re-factoring the
	reconcile-list code:
	* src/gnome-search/Makefile.am: removed search-param.[ch]
	* src/gnome-search/search-param.[ch]: moved the search-param to gnome-utils
	* src/gnome-utils/search-parah.[ch]: moved search-param from gnome-search
	* src/gnome-utils/Makefile.am: added search-param.[ch]

2003-02-07  Derek Atkins  <derek@ihtfp.com>

	* src/scm/main.scm:
	* src/scm/command-line.scm:
	  Add a flag to make it easier to turn on and off the various debug
	  messages (except the tip-list, which needs to be done manually).
	* src/scm/tip-list.scm: change the 'development' message

2003-02-05  Derek Atkins  <derek@ihtfp.com>

	* src/engine/gnc-lot-p.h: some strange platforms assume "char" is
	  0..255 instead of -128..127.  Force a "signed char" to make sure
	  we get the latter interpretation.

	* src/app-utils/gnc-ui-utils.c: Don't round unless force_fit is true.
	  Fixes Debian Bug #179802.

	* src/bin/overrides/gnucash-build-env.in: add business-utils

	* src/business/business-utils/Makefile.am: make scm-links so you
	  can run gnucash from within the build tree

2003-02-04  Benoit Grgoire  <bock@step.polymtl.ca>

	* src/import-export/import-backend.c: Add heuristic for duplicate matching by check number.
	* doc/README.OFX: Update

2003-02-04  Derek Atkins  <derek@ihtfp.com>

	* src/import-export/qif-import/qif-file.scm: mark "splits" as negative
	  to make sure the numbers are reflected appropriately.
	* src/import-export/qif-import/qif-objects.scm: add a neg? value to
	  a qif-split; use this when converting the split-amount.
	Fixes bug #105179

2003-02-03  Derek Atkins  <derek@ihtfp.com>

	* src/calculation/Makefile.am: need to add GUILE_INCS

	* src/engine/Makefile.am: add ${INTLLIBS} for gettext() et al on
	  platforms that don't have it in libc

	* src/backend/file/io-gncbin-r.c: don't need to define functions
	  that are never used, so move the #ifdef around.  Fixes # 105124

	* rpm/gnucash.in: don't call autoconf

	* src/import-export/qif-import/qif-file.scm: fix a
	  wrong-number-of-arguments fatal crash when trying to reparse
	  dates.

	* src/scm/main.scm: fix "development version" message in head

2003-02-02  Chris Lyttle  <chris@wilddev.net>

	* configure.in: change to 1.9.0 version
	* README: update for new unstable

2003-02-02  Chris Lyttle  <chris@wilddev.net>

	* rpm/gnucash.spec.in: add options to build ofx,hbci and postgresql

2003-02-02  Benoit Grgoire  <bock@step.polymtl.ca>

	* doc/README.OFX: I've quickly put together some docs for the ofx module and transaction matching.  Also includes a FAQ. Not perfect, but should closebug 99478.
	* doc/Makefile.am: Add README.OFX
	* src/import-export/ofx/README: Remove obsolete file.

2003-02-02  Derek Atkins <derek@ihtfp.com>

	* configure.in: re-enable -Werror, make sure it only is used with GCC,
	  but also move it to the end of the script so it wont interfere with
	  any other configuration test.

	* src/business/business-report/owner-report.scm: fix the column
	  headings and option names to match.  Fix the date-due column so
	  the heading properly goes away.  Also fix some of the
	  internationalization issues -- strings were translated but the
	  translation was not being used.   Fixes # 105036

	* src/backend/postgres/gncquery.c:  change INITIAL_BUFSZ to 32000

	* src/app-utils/option-util.c: use gh_scm2double() instead of
	  gh_scm2int() because guile-1.6 prefers it.  Fixes a crash when
	  opening the Pref's dialog when using guile-1.6.1

	* src/business/business-ledger/gncEntryLedgerLoad.c -- don't add
	  income accounts to bills, or expense accounts to invoices.  This
	  should help further reduce user confusion with what to do when
	  entering invoices.

	* src/report/standard-reports/cash-flow.scm: don't crash when a
	  user does something silly like having a split with no account.
	  Warn the user when we find this situation.

	* src/quotes/Makefile.am: add dump-finance-quote to the DIST

	* po/POTFILES.in:
	* src/import-export/Makefile.am:
	  Removed gnc-gen-transaction.[ch] "properly" for the dist.

2003-02-01  Benoit Grgoire  <bock@step.polymtl.ca>

	* src/import-export/gnc-ofx-import.c: No longer assume that transaction with type OFX_OTHER are investement transactions.  Fixes bug reported by Rik harris.
	* src/import-export/import-main-matcher.c: Fix unrelated display bug with balanced (typically investement) transactions.

2003-02-02  Christian Stimming  <stimming@tuhh.de>

	* configure.in: Disable error-on-warning by default because this
	seriously breaks quite a number of configure tests. May be enabled
	again for the development branch, but definitely not for
	end-users.

	* configure.in: Fix libofx test.

	* src/import-export/hbci/gnc-hbci-utils.c, po/de.po: Recognize
	even more error codes from OpenHBCI. Yes, I know this breaks
	string freeze -- but these strings *really* *only* apply to German
	users, so I just fixed the translation myself.

2003-02-01  Benoit Grgoire  <bock@step.polymtl.ca>

	* src/import-export/import-utilities.c: Build on Nigel's patch.
	This hopefully permanently closes
	http://bugzilla.gnome.org/show_bug.cgi?id=101705.

	* src/import-export/Makefile.am: No longuer compile Christian's
	old matcher.

2003-02-01  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/import-backend.c: Reduced the
	MATCH_DATE_NOT_THRESHOLD to 21 days. Yeah, this should rather be a
	user preference, but IMHO three weeks should already cover the
	basic problem.

	* src/import-export/import-account-matcher.c, import-backend.c,
	import-main-matcher.c, import-match-picker.c: Comment out
	stderr debugging output.

	* src/import-export/generic-import.scm: Move transaction matcher
	preferences to "Online Banking & Import" preference page.

	* src/import-export/hbci/gnc-hbci-cb.c: Add include config.h.

2003-02-01  Matthew Vanecek  <mevanecek@yahoo.com>

	* src/backend/postgres/PostgresBackend.c (pgendEnable):
	Added ENTER/LEAVE statements

	* src/backend/postgres/escape.c: Adde gnc-engine-util.h,
	  and "module = MOD_BACKEND"
	- (sqlEscape_destroy): Added ENTER/LEAVE statemtents.

	* src/backend/postgres/gncquery.c (sql_Query_destroy): Added
	ENTER/LEAVE statements.

	* src/backend/postgres/putil.h: Cleaned up the formatting on the
	SEND/FINISH/EXEC/GET_RESULT macros.  Changed them to use
	PQresultErrorMessage where possible. Made them all set the Backend
	error message string.  Removed the PQfinish() calls, and setting
	be->connection to NULL.  Reasoning: if a malformed query fails, there is
	no reason to close the connection.  If an update/insert fails,
	again, there is no need to close the connection.  The user should
	be presented an error message and respond appropriately.  If
	a update/insert/delete fails, then generally the transaction is
	rolled back to the last BEGIN, thereby preventing data corruption.

	* src/engine/QueryNew.c (gncQueryPrint): Check that q is not NULL
	prior to processing it.

	* src/engine/gnc-engine-util.c: turn off DEBUG on all the modules
	  (for the release).

	* accounts/C/acctchrt_business.gnucash-xea: fix some of the accounts
	  in the tree to be more accurate to the real world.

	* src/register/ledger-core/split-register-module.c: only set ReadOnly
	  status for Invoices, not Payments.  Fixes #105032

2003-02-01  Derek Atkins  <derek@ihtfp.com>

	* src/gnome/window-register.c: fix the query code to use the correct
	  param list.  Fixes bug #104951

2003-01-31  Derek Atkins  <derek@ihtfp.com>

	* src/import-export/qif-import/qif-file.scm: change the way that
	  parse-fields reports an error or warning.  In particular, return
	  a list such that the error is tied to the actual type.  This will
	  allow us to differentiate a date-parse ambiguity from any other
	  type of ambiguity.  Also add a new procedure that, when given the
	  (cdr parse-results) and a 'type' will return the actual error for
	  that particular type.
  	* src/import-export/qif-import/qif-import.scm: export the new symbol
	* src/import-export/qif-import/druid-qif-import.c: change the logic
	  to use the new parse results and only try to fill the date dialog if
	  there is actually a date parsing ambiguity.

	  Fixes Morrison J. Chang's QIF import problem.

	* src/business/business-gnome/dialog-invoice.c:
	* src/business/business-gnome/glade/invoice.glade:
	  add handlers to immediately save the active and notes fields
	  as they are edited.  Fixes #104954

	  NOTE: This has a side effect of removing an invoice from any
	  open searches, but NOT replacing it if you click on the "active"
	  button.

	* src/business/business-gnome/business-gnome.scm: fix the "bill
	  reminder" so it doesn't create a query if there are no payables
	  accounts.

	* src/gnome-utils/gnc-menu-extensions.c: dgettext() and gettext()
	  return const char*.

2003-01-30  Derek Atkins  <derek@ihtfp.com>

	* po/np.po -- add the proper "Plural" header so it builds again.

	* Nathan Neulinger's patch to gnc-split-reg.[ch] to implement
	  a summary-bar "Projected minimum balance".  Somewhat fixes #102440.

	* src/report/report-system/options-utilities.scm:
	* src/report/standard-reports/account-summary.scm:
	* src/report/standard-reports/balance-sheet.scm:
	* src/report/standard-reports/cash-flow.scm:
	* src/report/standard-reports/pnl.scm:
	  change the api to gnc:options-add-account-selection! to allow
	  the caller to set the default choice on "use-subaccounts", and
	  change the cash-flow report to default to 'no'.  This will make
	  sure that "Assets:A/P" is not included (since it shouldn't be).

2003-01-29  Matthew Vanecek <mevanecek@yahoo.com>

	* src/backend/postgres/Makefile.am: Changed the .sql.c target to
	not echo the beginning and ending quotes.  This is part of the
	gcc 3.x compatibility changes.

	* src/backend/postgres/PostgresBackend.c: Made some whitespace changes
	  for readability.
	- (pgend_book_load_poll): Commented out a PWARN about the old book
	  list not being empty. See added comments for why.
	- (pgend_book_load_poll): added a gnc_session_set_book() call so that
	  the session would have the correct book loaded (i.e., the book
	  that's stored in the DB).

	* src/backend/postgres/*.sql: Enclosed each line in a set of
	quotes "..".  The "multi-line literals" were causing compile errors
	for gcc 3.x.

	* src/backend/postgres/gncquery.c: ran indent on the file.
	- (STRING_TERM): Changed the comparison on STRING_MATCH_NORMAL to
	  STRING_MATCH_CASEINSENSITIVE for purposes of adding a '*' to the
	  comparison operator "~".  The code was writing a "=*" which is
	  invalid, but "~*" is valid for case-insensitive regex searches.
	- (sqlQuery_build): Added a "more_and = 0" to the final if statement
	  of the "for (il = qterms; il; il = il->next)" loop.  This will
	  prevent a stray "AND" being appended to the end of the "WHERE" clause
	  of a dynamic query.

	* src/backend/postgres/kvp-sql (store_cb): In "case KVP_TYPE_TIMESPEC",
	changed the 'cb_data->stype = "timespec"' to 'cb_data->stype = "time"'.
	The destination field in the database is defined as 4 characters, and
	the extra chars in stype were causing an insertion error.

	* src/backend/postgres/putil.h (FINISH_QUERY): Changed the error to use
	PQresultErrorMessage() instead of PQerrorMessage().

	* src/backend/postgres/test/db-control.sh (our_pg_ctl): Changed the
	script to return -1 if pg_ctl was not found in PATH.

	* src/backend/postgres/test/run-tests.sh: If db-control.sh returns
	failure, the attempt to connect to $PGHOST on $PGPORT.

	* src/backend/postgres/test/test-db.c: Included QueryNew.h.  Added the
	  _dbinfo struct to pass host, port, dbname, and mode information
	  around. Everywhere that used db_name/mode is now using DbInfor->*.
	- Ran indent on the file.
	- Added a drop_database function to call dropdb on the database used
	  for the tests.  This eventually needs to be changed so that every
	  "return FALSE" first calls gnc_session_destroy(session), before this
	  new function is called.
	- (db_file_url): Changed the function to handle TCP connections as well
	  as socket connections.
	- (load_db_file): Added a PGBackend object from which to get a PGconn
	  connection to store in DbInfo.
	- (test_raw_query): Added a call to gncQueryPrint() if
	  gnc_should_log(MOD_TEST, GNC_LOG_DETAIL)

2003-01-29  Herbert Thoma  <herbie@hthoma.de>

	* src/report/standard-reports/cash-flow.scm: only asset accounts
	  are in the default account selection, tables use normal-row
	  and alternate-row

2003-01-28  Derek Atkins  <derek@ihtfp.com>

	* configure.in -- fix the PG test to deal properly with non-standard
	  locations.  In particular, AC_CHECK_HEADERS() uses CPPFLAGS, not
	  CFLAGS.
	* src/backend/postgres/Makefile.am: use PGSQL_CFLAGS and PGSQL_LIBS
	* src/backend/postgres/test/Makefile.am: use PGSQL_CFLAGS

2003-01-28  Christian Stimming  <stimming@tuhh.de>

	* po/it.po: Updated Italian translation by Lorenzo Cappelletti
	<L.Cappelletti@mail.com>

2003-01-27  Christian Stimming  <stimming@tuhh.de>

	* po/nl.po: Updated Dutch translation by Hendrik-Jan Heins
	<hjh@passys.nl>

	* src/import-export/hbci/gnc-hbci-getbalance.c: Introduced yet
	more user messages about what is supported by the bank.

2003-01-27  Derek Atkins  <derek@ihtfp.com>

	* configure.in -- don't assume gtkhtml is avail from gnome-config
	  when testing for zvt.  Use the (already aquired) $GTKHTML_LIBS
	  instead.  Fixes Stan's problem from gc-devel.

2003-01-27  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/glade/hbci.glade: Some more GUI work for
	HBCI setup, like clarifying some comments.

2003-01-25  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/dialog-scheduledxaction.c (gnc_sxed_update_cal): Fix
	the Recurrence-Frequency example-calendar date calculation to show
	upcoming instances correctly.

	* src/engine/SchedXaction.c (xaccSchedXactionGetNextInstance):
	Remove the validity check on the temporal-state-data's notion of
	the last-occurance date; as invalidity means something important,
	we must let it through; fixes Bug#103955.

	* src/backend/file/gnc-schedxaction-xml-v2.c
	(gnc_schedXaction_dom_tree_create): Make output of the
	deferred-instance last-date node optional on it's validity.

	* src/gnome/dialog-sxsincelast.c (cancel_check): Change assertion
	into conditional-activity, allowing rational use-case and fixing
	Bug #103182.

	* src/gnome/dialog-scheduledxaction.c (editor_ok_button_clicked):
	Correctly update available SX lists instead of the one we were
	spawned from, which may have disappeared in the mean time.  Fixes
	Bug#103629 [and allows the future fix of not needing to open the
	SX List Dialog when clicking "Advanced..." in the sx-from-transaction
	SX Editor-open vector].

2003-01-26  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/hbci.scm, gnc-hbci-utils.c: Add
	preference (on advanced tab) to enable HBCI debug messages.

2003-01-25  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/gnc-hbci-getbalance.c: Fix HBCI problem
	with negative account balances.

	* src/engine/Scrub.c (xaccTransScrubImbalance): Fix rounding of
	the imbalance amount, #104343.

	* po/en_GB.po: Updated British English translation by Nigel Titley
	<nigel@titley.com>.

2003-01-23  Derek Atkins  <derek@ihtfp.com>

	* configure.in -- Apply Bill Nottingham's patch to use db4/db_185.h
	  (fixes #104178)

2003-01-22  David Hampton  <hampton@employees.org>

	* src/bin/gnucash: Tell guile 1.6 not to bitch about deprecated
	functions.

	* src/quotes/dump-finance-quote: Add new script that dumps all the
	data returned by F::Q for a stock.  It also indicates which data
	field gnucash requires, which are optional, etc.

2003-01-22  Derek Atkins  <derek@ihtfp.com>

	* src/business/business-reports/business-reports.scm -- need to
	  load business-gnome module, which loads gnome-utils module, for
	  a couple HTML definitions (which should eventually be moved
	  elsewhere) so that the reports themselves don't depend on
	  gnome...  This fixes Wilddev's report problem.

	* src/business/business-ledger/gncEntryLedgerModel.c -- relabel
	  the "Account" column to "Income Account" or "Expense Account"
	  to better encourage the user to "choose wisely".

	* src/business/business-ledger/gncEntryLedgerLoad.c -- limit the
	  accounts in the pull-down list to accounts that are NOT
	  placeholder, A/R, A/P, Cash, Bank, or Equity accounts.  This
	  is also to encourage the user to "choose wisely" :)

	* src/business/business-gnome/glade/*.glade -- fix a tooltip to
	  let the user know that they can (should?) leave the ID blank
	  so the system will choose one for them.

2003-01-21  David Hampton  <hampton@employees.org>

	* src/quotes/finance-quote-helper.in: Fix problem getting quotes
	from trustnet.

2003-01-21  Derek Atkins  <derek@ihtfp.com>

	* configure.in: be more liberal in the use of AS_SCRUB_INCLUDE

2003-01-20  Chris Lyttle  <chris@wilddev.net>

	* configure.in: release 1.7.8
	* NEWS: release 1.7.8

2003-01-20  John Pierce <john@killterm.org>

	* Makefile.am
	  Added distributed generated files to distcleancheckfiles.
          Added distcheck-hook to deal with automake1.5 stupidity.

	* src/doc/Makefile.am
	  Move doxygen log and cache to distclean-local.

2003-01-20  Derek Atkins  <derek@ihtfp.com>

	* src/engine/QueryNew.c -- g_list_append() can take a LONG time
	  and on big queries the merge can appear to take a long time.
	  So, let's use g_list_prepend() and g_list_reverse() to speed
	  up the process significantly.

	* src/engine/gnc-numeric. -- fix the gnc_numeric_lcd() algo to
	  actually work with numbers that are not co-divisible but have
	  multiple-powers of co-factors.  For example, the old algorithm
	  thought the LCM of 100,96875 was 3100, when it is really 387500,
	  because it was removing the factor of '5' too many times..

	* src/app-utils/test/test-scm-query-string.c -- fix a memory leak
	  in the test.

2003-01-19  John Pierce <john@killterm.org>

	* doc/Makefile.am
	* src/doc/Makefile.am
	* src/doc/design/Makefile.am
	* src/experimental/cgi-bin/Makefile.am
	  Added docs that were missing from dist.
	  Moved doxygen clean rules to maintainer-clean.
	  Moved texinfos to maintainer-clean.

	* lib/libc/Makefile.am
	  Added sources needed for OS X to dist.

	* src/app-utils/Makefile.am
	* src/backend/postgres/Makefile.am
	* src/business/business-core/Makefile.am
	* src/business/business-gnome/Makefile.am
	* src/business/dialog-tax-table/Makefile.am
	* src/core-utils/Makefile.am
	* src/engine/Makefile.am
	* src/gnc-module/Makefile.am
	* src/gnc-module/test/mod-bar/Makefile.am
	* src/gnc-module/test/mod-baz/Makefile.am
	* src/gnc-module/test/mod-foo/Makefile.am
	* src/gnome/Makefile.am
	* src/gnome-search/Makefile.am
	* src/import-export/Makefile.am
	* src/import-export/binary-import/Makefile.am
	* src/import-export/qif-io-core/Makefile.am
	* src/register/register-core/Makefile.am
	* src/report/report-gnome/Makefile.am
	* src/scm/Makefile.am
	* src/app-file/Makefile.am
	* src/gnome-utils/Makefile.am
	  Put generated headers into dist.
	  Moved symlinks to distclean.
	  Moved generated files to maintainer-clean.
	  Put generated gw-.*.scm files in dist for parity.
	  Put generated sources into dist.
	  Moved generated source to maintainer-clean.

	* src/bin/overrides/Makefile
	  Made built scripts depend on config.status to ensure
	  they're rebuilt when paths change.

2003-01-19  John Pierce <john@killterm.org>

	* macros/autogen.sh
	  Use variables for programs so they can be overridden easily.

2003-01-19  Derek Atkins  <derek@ihtfp.com>

	* src/engine/gnc-numeric.c -- be more intelligent when operating
	  on numbers of different denominators.  In particular, convert
	  both numbers to the lcd and then operate on them, instead of
	  assuming that a "cross-multiply" is safe.
	* src/app-utils/test/test-print-parse-amount.c -- add more tests for
	  PrintAmountInternal by checking force_fit and round.  Excercises
	  a bug (fixed in this patch) where cross-multiplies were NOT safe.

	* src/gnome-search/dialog-search.c -- reset the search-type to
	  "New Search" if we end up displaying no results.  Fixes bug #97095.

	* src/app-utils/prefs.scm -- combine all the Advanced prefs into one
	  location.  Then add the "New Search Limit" preference.
	* src/gnome-search/dialog-search.c --Use the "New Search Limit" pref
	  to decide when to start a new search vs. when refine the search.
	  Really fix #97095.

	* configure.in: scrub GNOME_PRINT_CFLAGS

	* src/gnome-utils/gnc-gui-query.c -- fix gnc_info_dialog() to deal
	  properly in the case that it's called before the UI is up.

	* src/app-utils/hooks.scm -- create a new 'post-ui-startup' hook
	* src/app-utils/app-utils.scm -- export the 'post-ui-startup' hook
	* src/scm/main.scm -- run the post-ui-startup hook after the UI
	  is up but before we run the ui-event-loop
	* src/business/business-utils/business-prefs.scm -- create two
	  new global preferences: "Notify Bills Due?" and "Bills Due Days"
	* src/business/business-gnome/business-gnome.scm -- create a dialog
	  are runtime (and via a new menu item) that displays all the bills
	  that are due withing "Bills Due Days" days from now.  It's ugly,
	  but it's functional.  Fixes #102439.

	* configure.in -- scrub the CFLAGS for postgres, as per Roland Roberts'
	  report.

2003-01-18  Derek Atkins  <derek@ihtfp.com>

	* src/business/business-core/gncTaxTable.[ch]: add functions to
	  get the GUID and lookup by direct GUID (suitable for wrapping)
	* src/business/business-core/gw-business-core-spec.scm: wrap
	  the taxtable get-guid and lookup methods
	* src/business/business-gnome/business-utils.[ch]: re-implement
	  the "generic option menu" code to allow get_value(), set_value(),
	  and changed_callback() functions.
	* src/business/business-gnome/business-options.c: create a taxtable
	  option type using the new generic optionmenu code
	* src/business/business-gnome/business-options.scm: define a taxtable
	  option.  Also fix all the other options when using a KVP storage
	  to actually load and save the options properly
	* src/business/business-gnome/business-prefs.scm: create a default
	  customer and default vendor taxtable option for the "File Properties"
	  option menu.

	  Initial fix for #93462.  Next commit will actually use the values.

	move code around a lot.
	* Rename a bunch of files:
	  business-options to business-options-gnome
	  business-utils to business-gnome-utils
	  - this required changes to a bunch of files in business-gnome
	* move business-options.scm and business-prefs.scm to business-utils
	* create a business-utils gnc-module
	  - required changes to configure.in, business/Makefile.am
	  - added a bunch of files (generally moved from business-gnome)
	* moved a bunch of other non-gnome definitions out of the gnome-specific
	  locations (gnome-utils -> app-utils, or business-gnome -> business-utils)

	* gncEntryLedgerLoad.c: commented-out code to load tax-tables from
	  the options; waiting until code is actually written.

	* src/app-utils/option-util.[ch]: add new functions to handle
	  kvp-options from C (similar to the gnome-utils functions to
	  create an option dialog from a kvp-frame for a particular
	  object).
	* src/business/business-utils/business-options.[ch]: add code to
	  lookup business options in an option database, from C.
	* src/business/business-ledger/Makefile.am: include business-utils headers
	* src/business/business-ledger/gncEntryLedgerLoad.c: load the tax-table
	  from the book-kvp options and use that as the default tax table

	FIXES 93462.

	* src/app-utils/prefs.scm: Remove "user name" and "user address"
	  preferences, as they are no longer used by anything.
	* src/report/standard/reports/register.scm: we're not using the
	  'invoice' portion anymore, so we don't need references to user
	  name and user address preferences.  This removes the "User Info"
	  page from the Global Preferences.

2003-01-16  Derek Atkins  <derek@ihtfp.com>

	* src/engine/commodity-table.scm: move gnc:commodity-is-currency? here
	* src/engine/engine.scm: export gnc:commodity-is-currency?
	* src/report/report-system/report-system.scm: remove ref to same.
	* src/report/report-system/report-system.scm: remove function above
	* src/import-export/qifiimport/qif-to-gnc.scm: fix the algorithm
	  to find/create new accounts.  All "parent" accounts are of
	  commodity "default-currency" (but don't really care about that).
	  When creating a leaf account, use the security if it's a
	  stock/mmf account, but the default-currency otherwise.
	  Fixes #103633.

	  NOTE:  Might need similar fixed in qif-io-core?

	* qif-merge-groups.scm: Limit matches against only the accounts in
	  the old group, so we don't match against ourselves.  This should
	  limit the matches to only "reasonable" matches, and should fix #102463

2003-01-15  David Hampton  <hampton@employees.org>

	* configure.in: Remove restriction on guile versions > 1.4.
	Provide a version dependant load path variable for the SRFI
	location. (Empty in 1.6 since they're bundled with guile.)

	* src/engine/Makefile.am: Don't hard code the location of the
	SRFIs into the guilel load path.

	* src/import-export/qif-import/qif-file.scm: The rdelim module
	moved locations in guile 1.6

2003-01-15  John H. Pierce <john@killterm.org>

	* Makefile.am:
	* configure.in:
	* src/app-file/Makefile.am:
	* src/app-utils/Makefile.am:
	* src/backend/net/Makefile.am:
	* src/backend/rpc/Makefile.am:
	* src/bin/Makefile.am:
	* src/business/business-core/Makefile.am:
	* src/business/business-gnome/Makefile.am:
	* src/business/dialog-tax-table/Makefile.am:
	* src/core-utils/Makefile.am:
	* src/engine/Makefile.am:
	* src/experimental/cgi-bin/Makefile.am:
	* src/experimental/cgi-bin/fastcgi-hello.c:
	* src/experimental/cgi-bin/gnc-server.c:
	* src/experimental/cgi-bin/hello3.c:
	* src/gnc-module/Makefile.am:
	* src/gnc-module/test/mod-bar/Makefile.am:
	* src/gnc-module/test/mod-baz/Makefile.am:
	* src/gnc-module/test/mod-foo/Makefile.am:
	* src/gnome/Makefile.am:
	* src/gnome-search/Makefile.am:
	* src/gnome-utils/Makefile.am:
	* src/import-export/binary-import/Makefile.am:
	* src/import-export/hbci/test/Makefile.am:
	* src/register/register-core/Makefile.am:
	* src/report/report-gnome/Makefile.am: Changes to make the build
	system work on multiple architectures and with multiple versions
	of the autotools suite.  Make generated g-wrap sources depend on
	config.status.

	* Makefile.DEPS:
	* src/bin/strsub.c: New files needed for automake 1.4.  These can
	be removed when automake 1.4 is no longer supported for building
	gnucash.

2003-01-15  Derek Atkins  <derek@ihtfp.com>

	* src/app-utils/test/test-print-parse-amount.c: set force_fit and
	  round to 0 (like they should be) so we don't hit the rounding
	  code and blow up.   Fixes #103536.

	* src/backend/postgres/test/Makefile.am: include run-tests.sh in
	  the distribution.

	* src/register/register-gnome/gnucash-sheet.c: fix a fencepost
	  error where it assumed there would be at least two "visible
	  rows" per block, so search through the end rather than skipping
	  the last row.  This fixes the page-up/page-down problem with
	  invoices.  Also add more places where the visible range is computed.

	* src/business/business-ledger/gncEntryLedgerLoad.c: add code to
	  "show_range()" which should fix the page-up/page-down problem.

2003-01-14  Derek Atkins  <derek@ihtfp.com>

	* src/engine/QueryNew.h: add QUERY_PARAM_ACTIVE
	* src/business/business-core/gncCustomer.c:
	* src/business/business-core/gncEmployee.c:
	* src/business/business-core/gncInvoice.c:
	* src/business/business-core/gncJob.c:
	* src/business/business-core/gncOrder.c:
	* src/business/business-core/gncVendor.c:
	  add the QUERY_PARAM_ACTIVE parameter support
	* src/app-util/prefs.scm: add hidden preference to store
	  the user's choice of searchin
	* src/gnome-search/search.glade: add a checkbox to search-for-all
	* src/gnome-search/dialog-search.c -- add preliminary support to
	  limit searches to only "active" objects.  Fixes bug #103506

	* src/gnome-search/dialog-search.c -- grey out the button if it
	  has no meaning for this particular search-type.

2003-01-13  David Hampton  <hampton@employees.org>

	* src/engine/engine-helpers.c: Make the gnc_scm_to_gint64()
	function work with either guile 1.4 or guile 1.6.

	* src/app-file/gnc-file.h:
	* src/engine/Backend.h:
	* src/engine/gnc-session-scm.c:
	* src/engine/gnc-session.h:
	* src/gnome-utils/gnc-mdi-utils.c:
	* src/gnome-utils/gnc-mdi-utils.h:
	* src/gnome-utils/gw-gnome-utils-spec.scm:
	* src/report/report-system/report-utilities.scm: Make the progress
	bar argument a double instead of an int.  This gets around an
	issue with guile 1.6.

2003-01-13  Derek Atkins  <derek@ihtfp.com>

	* src/app-utils/option-util.c: gh_str2scm() takes a char*, not a
	  const char* (at least in guile-1.3.4), so force the string to be
	  a char* to make the compiler happy.

	* src/engine/date.c: add spaces to the scanDate delimiters,
	  although it may not help if strptime() is doesn't like the
	  spaces.  Attempt to fix #103147, but it's probably a strptime
	  bug.

	* src/business/business-gnome/dialog-invoice.c -- make the Notes
	  field editable for new invoices.  Fixes #103345

	* src/import-export/import-utilities.c -- applied Nigel Titley's
	  patch for #101705

2003-01-12  Derek Atkins  <derek@ihtfp.com>

	* src/app-utils/global-options.[ch]: add gnc_default_report_currency()
	* src/app-utils/gw-app-utils-spec.scm: wrap gnc_default_report_currency()
	* src/app-utils/prefs.scm: add "Default Report Currency" preference
	* src/report/report-system/options-utilities.scm: use new report currency
	  preference to choose the "default" report currency.
	FIXES Bug #103160

	* src/business/business-core/gncOwner.[ch]: rename ...Commodity() to
	  ...Currency()
	* src/business/business-core/gncInvoice.[ch]: rename ...CommonCommodity()
	  to ...Currency()
	  use new gncOwner function name
	* src/business/business-core/gncEntry.c: use new Currency() functions
	* src/business/business-core/gw-business-core-spec.scm:
	  wrap gncInvoiceSetCurrency()
	  wrap gncInvoiceGetCurrency()
	  wrap gncOwnerGetCurrency()
	* src/business/business-core/file/gnc-invoice-xml-v2.c: use new funcs
	* src/business/business-gnome/dialog-invoice.c: use new functions --
	  set invoice currency based on owner's currency
	* src/business/business-reports/invoice.scm: use invoice's currency
	  for printing the invoice.
	PARTITAL fix for #101001

	* .../business-core/gncCustomer.[ch]:
	* .../business-core/gncVendor.[ch]:
	* .../business-core/gncEmployee.[ch]:
	  Rename ...Commodity() to ...Currency()
	* .../business-core/gw-business-core-spec.scm: fix function wrappings
	* .../business-core/file/gnc-customer-xml-v2.c:
	* .../business-core/file/gnc-vendor-xml-v2.c:
	* .../business-core/file/gnc-employee-xml-v2.c:
	  Use new function names.
	* .../business-gnome/business-gnome.scm:
	* .../business-gnome/dialog-customer.c:
	* .../business-gnome/dialog-vendor.c:
	* .../business-gnome/dialog-employee.c:
	  Use new ...Currency() functions
	More prep to fix #101001

	* .../business-gnome/business-gnome.scm:
	  Fix the Extensions hooks to connect menus properly when GNC_DEBUG=1
	* .../business-gnome/dialog-customer.c:
	* .../business-gnome/dialog-vendor.c:
	* .../business-gnome/dialog-employee.c:
	* .../business-gnome/glade/customer.glade:
	* .../business-gnome/glade/vendor.glade:
	* .../business-gnome/glade/employee.glade:
	  Add ability to edit currency in the UI.  Fixes #101001

	* .../business-ledger/gncEntryLedgerLayout.c: change the order
	  of columns in order to get page-up/page-down to work without going
	  into an infinite loop.
	* .../business-ledger/gncEntryLedgerLoad.c: suspend events
	  when we're creating a new entry.  Unfortunately the gnucash-sheet
	  still never counts the blank entry, and I don't know why.

	* src/engine/QueryCore.c: fix the algorithm to compute equality
	  of numerics so it copes with numbers in the "wrong" order.
	  Fixed bug #103341

2003-01-12  David Hampton  <hampton@employees.org>

	* macros/openhbci.m4: Scrub hbci include paths to prevent gcc 3.x
	compile errors.

	* src/app-utils/option-util.c:
	* src/app-utils/global-options.c: Add support for setting a string
	option.

	* src/app-utils/prefs.scm: Create hidden options for the saved
	default import/export path names.

	* src/app-utils/gnc-ui-util.c: Add routine for easily extracting a
	directory path from a filename.

	* src/import-export/ofx/gnc-ofx-import.c: Default the OFX import
	directory to the directory of the last OFX file imported, or the
	user's home dir for the first export. Remembered across
	invocations of gnucash. #94428

	* src/app-file/gnc-file.c: Default the save directory to the
	directory of the last file used. Default the exports directory to
	the directory of the last file exported, or the user's home dir for
	the first export. Remembered across invocations of gnucash. #94428

	* src/scm/price-quotes.scm: Correctly handle the case where no
	stocks have been defined and the user asks gnucash to get price
	quotes. #102560

	* src/network-utils/gnc-http.c: Work around bug in ghttp library
	so that intl users whose whole units/fractions separator is a
	comma can request web pages.

	* src/register/register-gnome/gnucash-sheet.c
	(gnucash_sheet_insert_cb): Return the number of characters
	entered, not the length of the encoded multi-byte string. Possible
	fix for 99419 and 102057.

2003-01-11  Derek Atkins  <derek@ihtfp.com>

	* src/business/business-core/gncBusGuile.[ch]: functions to interface
	  between business objects and scheme.  Add hooks to convert between
	  GncAccountValue* and scheme.
	* src/business/business-core/gw-business-core-spec.scm:
	  wrap the GncAccountValue*
	  wrap gncEntryReturnTaxValues()
	  wrap gncEntryGetInvTaxable() and gncEntryGetBillTaxable()
	* src/business/business-reports/invoice.scm: change a couple of
	  columns.  Enable viewing the "taxable" entry.  Enable viewing
	  all the tax accounts individually (fixes bug #102892)

	* src/business/business-core/gw-business-core-spec.scm:
	  wrap gncEntryGetInvTaxTable()
	  wrap gncEntryGetBillTaxTable()
	* src/business/business-reports/invoice.scm: only set the "taxable"
	  value to 'T' if the value is true AND we've got an actual tax table.

2003-01-11  David Hampton  <hampton@employees.org>

	* src/app-utils/gnc-ui-util.c: The "reverse balance" preference
	was moved a while back. Fix this missed reference.

	* src/engine/gnc-commodity.c: Convert from the old to new symbols
	for Russian Roubles (RUB -> RUR). #102705

2002-01-11  Benoit Grgoire  <bock@step.polymtl.ca>

	* src/import-export/import-backend.c: Fixed the date heuristics
	  modifications, which had an unfortunate interaction with old
	  debugging code, causing the score to be reversed, and making the
	  matcher mostly unusable.

2003-01-09  Derek Atkins  <derek@ihtfp.com>

	* src/register/ledger-core/split-register-model.c:
	* src/register/ledger-core/split-register-control.c:
	  Ignore certain splits with an "amount" of zero.

2003-01-09  Christian Stimming  <stimming@tuhh.de>

	* po/el.po: Updated translation, reviewed by
	ta_panta_rei@flashmail.com.

2003-01-08  Derek Atkins  <derek@ihtfp.com>

	* apply patch to use Euclid's algo for gnc_numeric_reduce
	  more fixes for #95474

	* src/business/business-core/gncInvoice.c: actually apply
	  a payment to the proper transfer account.  Fixes bug #102893

2003-01-08  Christian Stimming  <stimming@tuhh.de>

	* po/ru.po: Updated very complete (!) Russian translation by
	Vitaly Lipatov <lav@altlinux.ru>.

2002-01-07 Herbert Thoma <herbie@hthoma.de>

	* src/gnome-search/gncmod-gnome-search.c:
	* src/business/business-gnome/businessmod-gnome.c:
	* gnucash/src/gnome-utils/dialog-options.h:
	* src/import-export/binary-import/druid-commodity.h:
	* src/register/register-gnome/gnucash-color.c:
	* src/report/report-gnome/gncmod-report-gnome.c:
	  add #ifdef HAVE_CONFIG_H
	    #include <config.h>
	    #endif
	  this fixes compile errors on SuSE 8.0 + 8.1

2003-01-07  Derek Atkins  <derek@ihtfp.com>

	* src/business/business-core/file/* -- don't save half-built data.
	  Make sure that we're only saving the items that have been fully
	  created (not half-created).  Fixes the cause of bug #102776.

	* src/business/business-core/business-core.scm: return #f if
	  we cannot obtain an owner from a split (in the case of a regularly-
	  entered split)
	* src/business/business-reports/aging.scm:
	* src/business/business-reports/owner-report.scm:
	  Cope with not being able to obtain an owner from a split.
	  In particular, ignore it.  Fixes part of #97097.

2003-01-06  Derek Atkins  <derek@ihtfp.com>

	* macros/Makefile.am: include the rest of the macros in the dist.

	* src/engine/test/test-scm-query-import.scm: add a warning message
	  about potential "error" output which can be ignored.

	* intl-scm/Makefile.am: applied John's patch to build guile-strings.c
	  properly.

2003-01-05  Chris Lyttle  <chris@wilddev.net>

	* configure.in: release 1.7.7
	* NEWS: release 1.7.7

2003-01-05  John H. Pierce <john@killterm.org>
    * Makefile.am: Added rule for libtool rebuilding.

    * configure.in: Changed AC_DISABLE_STATIC to AM_DISABLE_STATIC
      Look in the right place for srfi modules.
      Reordered output files so directories get created in the right order.

    * intl-scm/Makefile.am: Only find scm files once.
      Fix for non-srcdir builds.

    * src/app-utils/Makefile.am:
    * src/business/business-core/Makefile.am:
    * src/business/dialog-tax-table/Makefile.am:
    * src/gnome/Makefile.am:
    * src/gnome-search/Makefile.am:
    * src/gnome-utils/Makefile.am:
    * src/business/business-gnome/Makefile.am:
    * src/gnc-module/Makefile.am:
      Removed unneeded depends, they interfere with the auto-generated ones.

    * src/gnc-module/test/mod-bar/Makefile.am:
    * src/gnc-module/test/mod-baz/Makefile.am:
    * src/gnc-module/test/mod-foo/Makefile.am:
    * src/gnc-module/test/misc-mods/Makefile.am:
      Don't install test modules.

    * src/backend/postgres/Makefile.am:
      Fixed auto-generation of sources out of srcdir.
      Moved auto-generation sources all to BUILT_SOURCES to generate
      correct depends.
      Removed incomplete explicit depends.

    * src/backend/rpc/Makefile.am:
    * src/backend/postgres/test/Makefile.am:
      Look in engine srcdir for guile stuff.

    * src/engine/Makefile.am:
      Remove absolute paths so automake gets dependencies right for libs.
      Remove unneeded depends.

    * src/engine/gnc-commodity.c:
    * src/engine/iso-currencies-to-c:
      Look for auto-generated files in srcdir.

2002-1-6  Benoit Grgoire  <bock@step.polymtl.ca>
	* src/import-export/import-backend.c: Give a much higher importance
	the date heuristics.   Exact date now worth +3, date within
	MATCH_DATE_THRESHOLD worth +2, and dates outside
	MATCH_DATE_NOT_THRESHOLD (now set to 25) are worth -100.
	The side effect it that any transaction outside a 25 day
	range can't be matched at all.
	-Disable skipping transactions which already have an online id
	during matching, untill a fix for the "transfer between two
	accounts" bug is properly fixed.
	* src/import-export/generic-import.scm:
	* src/import-export/import-settings.c:
	-Disable EDIT action enabling, (it won't be complete for 1.8.0).
	-Fix typos reported by Bill Wohler.
	-Adjust default ADD and RECONCILE threshold to account for above
	change.

2003-01-05  David Hampton  <hampton@employees.org>

	* src/app-utils/gnc-component-manager.c: New functions for
	attaching a session to a component, for finding all components
	with a given session, and for closing all components with a given
	session.

	* src/gnome-utils/dialog-account.c: Attach session values to the
	components for "New Account" and "Edit Account" windows. #103531

	* src/app-file/gnc-file.c (gnc_file_new): Before destroying the
	session, call new routine to close any open components related to
	this session. #102531

2003-01-05  Derek Atkins  <derek@ihtfp.com>

	* src/scm/main.scm -- mention bugzilla in the unstable message

	* src/backend/file/io-example-account.[ch]: add a flag that signifies
	  that an account-tree should NOT be included by "select-all"
	* src/gnome/druid-hierachy.c: ignore account-trees that are
	  marked for exclusion from "select-all".
	* accounts/C/acctchrt_business.gnucash-xea: mark this account as
	  "excluded from select-all"

	* src/backend/file/io-example-account.[ch]: add a flag that signifies
	  that an account-tree should start selected.
	* src/gnome/druid-hierarchy.c: when loading the example accounts, go
	  through the list and 'select' those that are marked as "start selected"
	* accounts/C/acctchrt_common.gnucash-xea: mark this account tree as
	  "start selected"

	* src/register/ledger-core/split-register-model-save.c: when
	  editing an exchange rate, always change the _VALUE_ of the
	  split, not the amount.  This has the affect of keeping the
	  visible number the same and changing the "other" account.  This
	  should fix #102161

	* src/backend/file/io-example-account.c: fix a logic bug
	* accounts/C/acctchrt_common.gnucash-xea: don't start selected
	* accounts/C/acctchrt_checkbook.gnucash-xea: provide a simple checkbook

2003-01-04  David Hampton  <hampton@employees.org>

	* src/backend/file/gnc-account-xml-v2.c:
	* src/backend/file/gnc-book-xml-v2.c:
	* src/backend/file/io-gncxml-v2.c:
	* src/backend/file/io-utils.c:
	* src/backend/file/test/test-xml-account.c: Don't export lots.

	* src/engine/gnc-session.c (gnc_session_destroy): Don't clear the
	current_session global unless the actual current session is being
	destroyed. 101707.

	* src/backend/file/io-gncxml-v2.c: Pipe the output through zlib if
	the user requested compression. This request is either setting a
	option in the preferences (for all files), or naming the
	particular data file with a .gz extension. #88509

	* src/backend/file/gnc-backend-file.c:
	* src/gnome/top-level.c:
	* src/app-utils/prefs.scm: Create a 'file compression' option and
	pass the data into the backend.

2003-01-04  Derek Atkkins  <derek@ihtfp.com>

	* add a set of business accounts to the setup druid
	* fix the full and common accounts to remove the (wrong) "Accounts Payable"
	  liability account.

	* src/engine/Transaction.[ch]: add TRANS_NOTES and supporting routines
	  to enable searching for notes.

	* src/gnome/dialog-find-transactions.c: search on NOTES
	  add code to prevent searching on template-txn accounts so SXes don't
	  show up in find results.

	* src/register/ledger-core/*: gnc_table_layout_get_cell() doesn't
	  look at the current cursor, so the multi-currency code was acting
	  all the time, instead of only in registers that needed to be corrected.
	  Fix the code to only apply the multi-currency changes to the correct
	  register types (e.g., NOT stock registers).  Fixes 102549.

2003-01-03  David Hampton  <hampton@employees.org>

	* src/gnome/druid-hierarchy.c:
	* src/gnome/druid-loan.c:
	* src/gnome/druid-stock-split.c:
	* src/gnome/window-reconcile.c:
	* src/gnome-utils/window-help.c:
	* src/import-export/qif-import/druid-qif-import.c: Add icons to
	gtk only windows. This can probably be reverted in the port to
	gnome2 when the icon functionality moves from gnome_xxx to
	gtk_xxx.

	* src/engine/gnc-pricedb.h:
	* src/gnome/dialog-price-edit-db.c: Add support for i18n of price
	source strings. Needs to be done at display time because the
	strings are embedded into the data file. #102156

	* src/import-export/qif-import/druid-qif-import.c:
	* src/import-export/qif-import/qif.glade: Add a smart function for
	going "back" from the "load a file" page.  If there are any files
	loaded it returns to the "loaded files" page instead of the
	initial druid page. #101818

	* src/backend/file/gnc-backend-file.c
	(gnc_file_be_load_from_file): Don't free the lockfile name any
	time there is an error.  Wait for the session to be destroyed so
	the lockfile will be cleaned up properly. #101004

	* src/app-file/gnc-file.c (gnc_file_query_save): Grab the current
	session each time around the while loop so as not to have a
	dangling pointer. #101004

2003-01-03  Derek Atkins  <derek@ihtfp.com>

	* src/business/business-gnome/glade/invoice.glade: fix a string
	  to make the meaning more clear (per user request)

2003-01-03  Matthew Vanecek <mevanecek@yahoo.com>
	* src/backend/postgres/Postgresbackend.c: Fixed some compiler
	warning messages about MODE_NONE and a some GUIDs used as
	string pointers in informational messages.

	* src/backend/postgres/test/test-db.c: Commented out the
	"short module" declaration.  It was not used and was causing a
	compiler warning.

	* src/backend/postgres/upgrade.c: Changed the "ALTER TABLE table
	ADD COLUMN..." statements to conform to the current Postgres
	implementation (and SQL 92) standard by putting the DEFAULT
	modifier in a separate ALTER statement.	 This was reported by
	Christopher B. Browne.

2003-01-02  David Hampton  <hampton@employees.org>

	* src/report/report-system/html-utilities.scm: Fix malformed URLs
	for bringing up a report options window.

	* src/report/report-system/options-utilities.scm:
	* src/report/report-system/report-system.scm: Add new option for
	specifying sort critera for piecharts and barcharts.

	* src/report/standard-reports/account-piecharts.scm: Add various
	sorting options.  Work around Guppi problem by replacing the
	character "&" with the word "and".

	* src/report/standard-reports/category-barchart.scm: Add various
	sorting options. The default is now by ammount instead of by
	account-code, which is a much more interesting report.  #102342
	Work around Guppi problem by replacing the character "&" with the
	word "and".  Don't "reverse" the barchart legend.  Double-clicking
	on the legend now opend the right child report.

	* src/report/standard-reports/net-barchart.scm: The report title
	should change when the report name field is changed in the
	options. #102266

	* src/report/standard-reports/pnl.scm: The report title should
	change when the report name field is changed in the
	options. #102267

	* src/gnome-utils/window-help.c (helpWindow): Correctly pass on
	the label when first opening a help window.

	* src/gnome-utils/gnc-html.c (gnc_html_load_to_stream): Delay
	jumping to a label until after the help window has been created on
	the screen. Without this gtk-html computes the wrong scroll offset
	for the window.

	* src/scm/price-quotes.scm: Remove the "checking sources" message.

2003-01-01  David Hampton  <hampton@employees.org>

	* src/gnome-utils/window-help.c (helpWindow): Correctly open a
	help window when the initial URL contains a label component to it.

	* src/gnome/window-reconcile.c: Make the reconciliation window
	respect the 'include subaccount' flag any time it opens a
	register.  Consolidate logic for opening a new register. Enhance
	the reconciliation start window to update the ending value when
	this flag is changed. #101150

	* src/gnome-utils/gnc-amount-edit.c (gnc_amount_edit_key_press):
	If the amount is monetary, map the keypad decimal key to the
	correct decimal character for the locale. #101957

2003-01-01  Derek Atkins  <derek@ihtfp.com>

	* src/register/ledger-core/split-register-control.c: invert the
	  exchange rate when we're swapping currencies, since the logic
	  of the transfer dialog was reversed.  Fixes bug #102157

	* src/gnome-utils/dialog-transfer.c: call the to_amount_update_cb
	  handler during certain paths of the ok_cb because the focus-out
	  signal may not get handled in all cases -- so force the issue.
	  Fixes bug #102163

	* src/gnome-utils/dialog-transfer.c: always set the exchange-rate
	  as a positive value (use ABS).  Fixes the rest of #102163.

	* src/register/ledger-core/split-register-layout.c: fix the
	  rate_cell layout for general ledgers.  Fixed the critical
	  failure from bug #101000

	* src/gnome-search/search-numeric.c:
	* src/gnome-search/search-double.c:
	* src/gnome-search/search-int64.c:
	  read the value out of the GNCAmountEdit entry when we create
	  the Query Predicate, because we're not getting the amount_changed
	  signal.  Fixes #101000.

	* src/business/business-core/gncInvoice.[ch]: create new function
	  for logic to apply a payment.  Moved logic from dialog-payment.
	* src/business/business-gnome/dialog-payment.c: move logic to
	  apply payment to business-core.

	* src/engine/Account.[ch]: add an xaccAccountRemoveLot() function to allow
	  the LOT code to clear memory when you destroy a lot.  Fixes a crash
	  when you destroy a lot.
	* src/engine/Transaction.[ch]: add an xaccTransClearReadOnly() function
	  to let you clear the flag so you can then remove an transaction.  Only
	  for internal uses only!  This is used by the Invoice UnPost code.
	* src/engine/gnc-lot.c: remove the lot from the account's list of lots
	  when the last split is gone.

	* src/business/business-core/gncInvoice.[ch]: implement Unpost function
	* src/business/business-ledger/gncEntryLedger.[ch]: change the
	  set_readonly() function to let you toggle back and forth between
	  readonly and readwrite ledgers.
	* src/business/business-gnome/dialog-invoice.c: implement unpost; set back
	  to readwrite if the unpost succeeds
	* src/business/business-gnome/dialog-order.c: use new set_readonly() API
	FIXES BUG #101452

	* configure.in: add a blatent warning that the RPC code is broke!
	* src/scm/command-line.scm: change the message to let people know that
	  the rpc-server command-line option only works if gnucash was compiled
	  with rpc enabled.

2002-12-30  Benoit Grgoire  <bock@step.polymtl.ca>
	* src/import-export/hbci/druid-hbci-initial.c
	* src/import-export/hbci/gnc-hbci-utils.c:
	Fix a bunch of "warning: deprecated use of label at end of
	compound statement" in gcc3 in select statements (added
	semicolons after default: so that I don't break anything,
	but it should probably output an error instead).

2002-12-30  Christian Stimming  <stimming@tuhh.de>

	* src/report/standard-reports/cash-flow.scm: Patch by Ed Warnicke
	<hagbard@physics.rutgers.edu>.

2002-12-30  Matthew Vanecek <mevanecek@yahoo.com>
	* src/backend/postgres/PostgresBackend.c: Added some ENTER
	and LEAVE statements to more of the functions.

	* src/backend/postgres/upgrade.c: Changed all the DATETIME
	SQL data types to TIMESTAMP.  DATETIME will not be in Postgresql
	as of 7.3.

	* src/backend/postgres/functions.sql: Changed all the DATETIME
	types in the DDL to TIMESTAMP.

	* src/backend/postgres/table-create.sql: Changed all the DATETIME
	types in the DDL to TIMESTAMP.

	* src/backend/postgres/table-audit.sql: Changed all the DATETIME
	types in the DDL to TIMESTAMP.

2002-12-30  Christian Stimming  <stimming@tuhh.de>

	* src/app-utils/prefs.scm, src/app-utils/global-options.c: Rename
	"Default currency" option to "New Account default currency" since
	*everybody* asks about that one.  Was reported in #102043,
	#100466, #99364, #87729.

	* src/business/business-gnome/dialog-invoice.c
	(gnc_invoice_id_changed_cb): More i18n fixes. Don't split up
	strings.

	* src/business/business-gnome/glade/*.glade: Correct spelling
	error.

	* src/engine/FreqSpec.c: Fix the i18n comments for the translators.

	* src/gnome-utils/gnc-dense-cal.c: i18n'ize the dense calendar
	widget.

2002-12-29  Christian Stimming  <stimming@tuhh.de>

	* src/gnome/dialog-scheduledxaction.c, dialog-sxsincelast.c: Some
	i18n fixes.

2002-12-28  Joshua Sled  <jsled@asynchronous.org>

	* src/register/register-gnome/formulacell-gnome.c: Changed
	FormulaCell from MOD_SX to MOD_REGISTER.

	* src/engine/FreqSpec.c (xaccFreqSpecGetFreqStr):
	s/g_string_sprintf/snprintf/, as the former can't handle the
	re-ordered format parameters which the po-files use; fixes
	Bug#101650.

2002-12-28  David Hampton  <hampton@employees.org>

	* src/gnome-utils/dialog-transfer.c: Revert pricedb lookup at
	warlord's request.

	* src/bin/test/Makefile.am:
	* src/doc/Makefile.am:
	* src/import-export/hbci/Makefile.am:
	* src/import-export/ofx/Makefile.am: Get 'make distcheck' working again.

2002-12-28  Christian Stimming  <stimming@tuhh.de>

	* src/scm/main.scm: Patch by Peter O'Gorman <peter@pogma.com> for
	Mac OS X.

2002-12-27  Christian Stimming  <stimming@tuhh.de>

	* src/engine/test-core/Makefile.am: Fix linker errors in
	src/engine/test/

	* src/import-export/hbci/hbci-interaction.c: Fix reparent
	warnings. Make the PIN dialog a bit nicer.

	* src/import-export/hbci/gnc-hbci-getbalance.c: Always use the
	"booked balance" instead of sometimes one or the other.

	* po/de.po: Updated translation.

2002-12-23  David Hampton  <hampton@employees.org>

	* src/import-export/qif-import/qif-parse.scm: Fix regexps to
	handle a leading '+' sign in the currency field. (Bug reported on
	gnucash-user.)


	* src/gnome-utils/gnc-html.c: The stream_handler hook needs to
	return a file size. Not all files opened by this function are
	ASCII text.  Reset the base_location properly when switching
	documents. Add debugging. #101783

	* src/report/report-gnome/window-report.c: Update the various
	functions used as stream_handlers to return correct file
	sizes. #101783


	* configure.in: When checking for gtkhtml-1.1, make the lack of
	pkg-config a fatal error. Also check for pkgconfig due to some
	clueless software mismanagement.

	* macros/autogen.sh: Enable -Werror for all builds.


	* src/app-file/gnc-file.c: Add missing error message.

	* src/backend/file/sixtp-dom-parsers.c:
	* src/backend/file/sixtp-stack.c:
	* src/backend/file/sixtp.c: Better handling of corrupt XML data
	files.  Print better error messages for unknown tags, or
	mismatched start/end tags.


	* src/engine/engine-utilities.scm: Check for errors when trying to
	open a new session file.

	* src/engine/gw-engine-spec.scm: Added wrappers to access the
	engine suspend/resume events functions.

	* src/scm/command-line.scm: Suspend engine events when running
	with the --add-price-quotes flag.

	* src/scm/price-quotes.scm: Add some additional checking.


	* src/gnome-utils/dialog-transfer.c: Change logic to multiply by
	the exchange rate instead of divide.  Look for both both forward
	and reverse currency quotes in the pricedb. Attempt to install
	currency quotes into the pricedb in a consistent manner.  Give the
	user better feedback on exactly what the exchange rate
	means. Obsolete the currency "swap" routine. #101450

	* src/gnome-utils/transfer.glade: Give the user better feedback on
	exactly what the exchange rate means.

	* src/register/ledger-core/split-register-control.c: Remove
	function call to obsolete routine.

	* src/engine/gnc-pricedb.c:
	* src/engine/gw-engine-spec.scm: Added a new function
	(gnc_pricedb_lookup_day) to retrieve a price quote from a certain
	day, not just an exact time.

	* ChangeLog: Spell check this file.

2002-12-22  Chris Lyttle  <chris@wilddev.net>

	* rpm/gnucash.spec.in: require g-wrap 1.3.4

2002-12-22  Chris Lyttle  <chris@wilddev.net>

	* NEWS: release 1.7.6
	* configure.in: release 1.7.6

2002-12-22  David Hampton  <hampton@employees.org>

	* src/gnome-utils/gnc-html.c: Build the URL correctly when using
	the base_location field. #101783

2002-12-21  Chris Lyttle  <chris@wilddev.net>

	* src/gnc-ui.h: Change help files
	* src/business/business-gnome/dialog-customer.c: fix help button
	* src/business/business-gnome/dialog-employee.c: fix help button
	* src/business/business-gnome/dialog-invoice.c: fix help button
	* src/business/business-gnome/dialog-job.c: fix help button
	* src/business/business-gnome/dialog-order.c: fix help button
	* src/business/business-gnome/dialog-vendor.c: fix help button
	* src/gnome-search/dialog-search.c: fix help button

2002-12-21  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/dialog-sx-from-trans.c (sxftd_compute_sx): Respect the
	user's Prefs regarding new SXes; fixes Bug#99566.

	* src/gnome/dialog-scheduledxaction.c (gnc_sxed_check_consistent):
	Don't ignore fractional currency-amounts; fixes Bug#97062.
	(gnc_ui_scheduled_xaction_editor_dialog_create): Changed some
	string-constants to their #defines.

2002-12-20  David Hampton  <hampton@employees.org>

	* src/register/ledger-core/gnc-ledger-display.c:
	Remove the original fix for #92158 as it caused #100852.

	* src/register/ledger-core/split-register-p.h:
	* src/register/ledger-core/split-register.c: Add place to save the
	list of splits used to fill the register.

	* src/register/ledger-core/split-register-load.c:
	If there is a transaction pending when updating the register, use
	the saved list so that the transaction is guaranteed to remain in
	the register until the user finishes editing it. Otherwise,
	populate the saved split list. #92158

	* src/gnome/gnc-split-reg.c: Don't let users delete the split that
	attaches a transaction to the current register.

	* src/gnome/window-reconcile.c: Make sure to set the balance
	properly for reversed accounts. #100998

2002-12-20  Chris Lyttle  <chris@wilddev.net>

	* src/pixmaps/gnucash-icon.png: new gnucash icon
	* rpm/gnucash.spec.in: remove help dirs, add finance-quote-check
	* src/gnome/gnucash.desktop.in: new gnucash icon
	* src/gnome-utils/gnc-gnome-utils.c: add custom icon function
	* src/pixmaps/Makefile.am: new gnucash icon

2002-12-20  Christian Stimming  <stimming@tuhh.de>

	* po/el.po, accounts/el_GR: Updated Greek translation by Nikos
	Charonitakis <charosn@her.forthnet.gr>

2002-12-19  David Hampton  <hampton@employees.org>

	* src/register/register-core/register-common.h: Large accounts are
	overflowing the data types used in the register code and are
	causing crashes. #92072, #98802

2002-12-16  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/glade/hbci.glade: Set max size of
	transaction fields according to HBCI spec.

2002-12-16  Chris Lyttle  <chris@wilddev.net>

	* Makefile.am: remove doc-tools dir
	* configure.in: remove making in doc-tools, sgml dirs
	* doc/Makefile.am: remove sgml dir
	* src/scm/help-topics-index.scm: add indexes for new help docs
	* doc-tools/build-help-index.in: removed
	* doc-tools/dbadd.c: removed
	* doc-tools/Makefile.am: removed
	* doc-tools/.cvsignore: removed
	* doc/manual/*: removed
	* doc/sgml/*: removed
	* doc/html/*: removed

2002-12-15  David Hampton  <hampton@employees.org>

	* src/report/standard-reports/advanced-portfolio.scm:
	* src/report/standard-reports/portfolio.scm: Add an option for
	changing the number of decimal places used in the shares
	column. #87164

	* src/app-utils/gnc-helpers.c:
	* src/app-utils/gnc-ui-util.c:
	* src/app-utils/gw-app-utils-spec.scm: New functions for creating
	a print-info data structure with an explicit number of decimal
	places.  Added flags to GNCPrintAmountInfo to control
	truncation/rounding of numbers.

	* src/report/report-system/report-utilities.scm: New helper
	routine for user feedback during rendering.

	* src/report/report-system/html-document.scm:
	* src/report/report-system/report-system.scm: Give user feedback
	during the rendering of a report. Clunky at this point since most
	reports are large tables (which is considered one html item).

	* src/engine/Query.c:
	* src/engine/QueryNew.c:
	* src/business/business-ledger/gncEntryLedger.c: Promote private
	build_param_list() function to a public function named
	xaccQueryBuildParamList().

	* src/engine/Query.h: Change cleared_match_t enum.

	* src/gnome/window-register.c:
	* src/gnome/glade/register.glade: Add menu items and code so a
	user can limit transactions in a register to any combination of
	the Reconciled/Cleared/Voided/Unreconciled states. #87990

	* src/gnome-utils/dialog-options.c: Fix the order of the dialog
	buttons to match the Gnome 1.x pattern. #98291

2002-12-15  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/dialog-scheduledxaction.c (gnc_sxed_check_consistent):
	Fixed balance checks to be per-transaction; fixes Bug#97062, as
	well as fixing another unfiled bug that would be possible with the
	old code.

2002-12-15  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/glade/sched-xact.glade: Clarified some text, removed
	unused widgets.

	* src/app-utils/gnc-ui-util.c (xaccSPrintAmount): Added useful comment.

	* src/gnome/druid-loan.c (ld_create_sxes): Re-written; now a much
	more principled implementation which passes a test-script; fixes
	Bug#100088, Bug#100085.

	* src/engine/SX-ttinfo.c (gnc_ttsplitinfo_get_debit_formula):
	Fixed potentially-nasty mem-handling bug.

2002-12-14  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/import-backend.c (matchmap_store_destination):
	Fix error messages when memo or description is empty.

	* src/import-export/hbci/gnc-hbci-gettrans.c: Switch to always
	using the import-main-matcher.

2002-12-13  Chris Lyttle  <chris@wilddev.net>

	* rpm/gnucash.spec.in: fix for problem reports on gnucash-user

2002-12-12  Benoit Grgoire  <bock@step.polymtl.ca>
	* src/import-export/import-account-matcher.c: Fix "level 3 and
	more subaccount not selected by default" bug.

2002-12-11  Derek Atkins  <derek@ihtfp.com>

	* configure.in: require g-wrap >= 1.3.3
	* src/engine/gw-engine-spec.scm: use gslist-of where needed
	* src/engine/gw-kvp-spec.scm: use gslist-of where needed

	NOTE: As of now you ABSOLUTELY REQUIRE G-WRAP >= 1.3.3

2002-12-11  David Hampton  <hampton@employees.org>

	* src/gnc-ui.h: New help URLs for Wilddev.

	* src/engine/Account.c:
	* src/gnome/glade/account.glade:
	* src/gnome-utils/dialog-account.c: Support for having an account
	scu that doesn't match the account commodity's scu.  This allows a
	user to notice/correct a case where the two are out of whack and
	correct them (#100295), or to intentionally set them that
	way. (E.G. A currency trading account that trades in $0.0001 USD
	even though the scu for USD is $0.01.)

	* src/backend/file/io-gncxml-v2.c: Call new routines to set the
	account non-standard scu flag, and to get the actual scu on the
	account regardless of the flag.

	* src/backend/file/gnc-account-xml-v2.c: Read/write new indicator
	that the account scu doesn't match the account commodity's scu.

2002-12-11  Derek Atkins  <derek@ihtfp.com>

	* src/gnome-utils/dialog-transfer.c -- lookup and store entries in
	  the pricedb, and use those entries when you change accounts and
	  dates.  It will only save one entry per "date-time", so you need
	  to use the price editor to remove/change entries in the pricedb.
	  It may be a bit over-zealous of using the pricedb entries -- if
	  you change the date or an account after typing in a number it will
	  over-write your change with the nearest pricedb entry.
	  Fixed Bug #100284.

2002-12-11  Christian Stimming  <stimming@tuhh.de>

	* accounts/el_GR/acctchrt_common.gnucash-xea: Greek account
	templates by Nikos Charonitakis <frolix68@yahoo.gr>

	* src/import-export/hbci/gnc-hbci-gettrans.c: Fix broken changes
	by Benoit.

2002-12-10  Christian Stimming  <stimming@tuhh.de>

	* src/report/report-system/commodity-utilities.scm: Fix bug
	#100463.

2002-12-10  Benoit Grgoire  <bock@step.polymtl.ca>
	* src/import-export/*: Add user pref to allow HBCI users
	to select if they want Christian's matcher or mine.
	Update OFX readme.
	Update column width in account-picker.

2002-12-09  Christian Stimming  <stimming@tuhh.de>

	* po/nl.po: Updated translation by Hendrik-Jan Heins
	<hjh@passys.nl>.

2002-12-09  Derek Atkins  <derek@ihtfp.com>

	* src/gnome/window-acct-tree.c: Disallow the deletion of accounts
	  with ReadOnly Transactions in them.  You must first "delete" the
	  RO Txns before you delete the account.  Fix for bug# 100727 (although
	  it requires invoice unposting to work).

2002-12-9  Benoit Grgoire  <bock@step.polymtl.ca>
	* src/import-export/import-main-matcher.c:
	* src/import-export/generic-import.glade: Change colors, remove
	imbalance column and put it's info into the "Select action column",
	 when appropriate.  Change many strings after discussion with
	Wilddev.

2002-12-8  Benoit Grgoire  <bock@step.polymtl.ca>
	* src/import-export/import-account-matcher.c,h: Add param to
	 gnc_import_select_account():
	@param ok_pressed A pointer to gboolean.  If non-NULL, whether or
    	not the picker dialog was closed by the user pressing ok will be
    	stored in the parameter.  If no dialog was created by the
    	gnc_import_select_account() call, TRUE is always returned.
	* src/import-export/ofx/gnc-ofx-import.c: Fix for above change.
	* src/import-export/gnc-gen-transaction.c: Take advantage of
	above change
	* src/import-export/import-main-matcher.c: Take advantage of
	above change.  Shorten the strings in the "Specific action to be
	taken" column.

2002-12-8  Benoit Grgoire  <bock@step.polymtl.ca>
	* src/import-export/import-backend.c: Make the auto-balance
	split have the correct amount in all cases by using
	xaccTransGetImbalance() instead of the first split's value.
	* src/import-export/import-account-matcher.c:
	-Performance improvements in the display code, and skipping
	lookup of the kvp frame when not needed.
	-Expand the tree when a subaccount is selected
	-Remove redundant selection lookup.

2002-12-08  Joshua Sled  <jsled@asynchronous.org>

	* src/engine/SchedXaction.h: Doxygen-related changes.

	* src/register/ledger-core/split-register-layout.c
	(gnc_split_register_layout_add_cells): Change F(DEBT|CRED)_CELL
	types to FORMULA_CELL from QUICKFILL_CELL.

	* src/register/register-gnome/gncmod-register-gnome.c
	(libgncmod_register_gnome_LTX_gnc_module_init): Add
	formulacell-gnome override to gnc_register setup.

	* src/register/register-core/formulacell.c:
	* src/register/register-gnome/formulacell-gnome.c: Filled in a
	long-thought of idea for a formula cell: can contain text unlike a
	pricecell, but doesn't really want to do auto-complete like a
	quickfill cell [what we had been using].  This allows us to
	provide the gnome formula cell which can remap the keypad '.'
	character based on locale; addresses Bug#97065, which is the
	cause of Bugs#97063 and #97062.

	* src/gnome/glade/sched-xact.glade: Remove "[Last Day]" option;
	add "/last day" to 29/30/31 options in gnc-frequency month-based
	selections.

	* src/gnome/dialog-scheduledxaction.c (new_button_clicked): Change
	default new SX frequency to monthly; fixes Bug#100615.

2002-12-08  Derek Atkins  <derek@ihtfp.com>

	* README.cvs: mention gettextize breakage and "cvs up -C"
	  workaround.

2002-12-08  Christian Stimming  <stimming@tuhh.de>

	* src/report/report-system/commodity-utilities.scm: For
	calculation of weighted average, use all accounts and not only
	currency/stock accounts now with the new exchange system.

	* src/import-export/import-backend.c: Fix zero amount in the
	'other' split of an imported transaction by now using
	SplitSetBaseValue.

2002-12-08  David Hampton  <hampton@employees.org>

	* src/gnome/glade/register.glade: Make the register's "Set Date
	Range" window more intuitive by moving a button.

	* src/scm/main.scm: Tweak the file name normalization code.

2002-12-7  Benoit Grgoire  <bock@step.polymtl.ca>

	* src/import-export/generic-import.glade:  Add user instructions,
	get rid of apply button.
	* src/import-export/import-main-matcher.c: Speed optimizations,
	implement import status notification with background color.
	Clarify strings.

	Note:  The matcher is now feature complete, except for manual
	transaction editing.  (More optimizations and code review still
	to be done)  I am awaiting comments about the matcher UI and
	and investment transaction importing.

2002-12-07  David Hampton  <hampton@employees.org>

	* src/app-utils/gnc-ui-util.c: Consolidate all knowledge about
	Finance::Quote sources into one place. New and renamed functions
	for mapping back and forth from Finance::Quote name to internal
	name to user visible name. Functions to record whether or not F::Q
	is installed properly, and if so, whether a particular source is
	available.

	* src/app-utils/gw-app-utils-spec.scm:
	* src/gnome-utils/dialog-utils.c:
	* src/scm/price-quotes.scm:
	Removed all knowledge about Finance::Quote sources and now use the
	common database.

	* src/quotes/finance-quote-helper.in: Collapse all stock price
	retrieval into a single call using the F::Q->fetch method instead
	of individual per-source calls.

	* src/quotes/finance-quote-check.in: New helper program to read
	and return a list of all available F::Q methods.

	* src/scm/price-quotes.scm: Code to call new finance-quote-check
	program.

	* src/scm/main.scm: Check for available F::Q methods when starting
	up.

	* src/gnome/glade/account.glade:
	* src/gnome-utils/dialog-account.c:
	* src/gnome-utils/dialog-utils.c:
	When not retrieving stock quotes for an account, dim the price
	source labels as well as the option menus.

2002-12-07  Derek Atkins  <derek@ihtfp.com>

	* src/register/ledger-core/split-register-control.c:
	  - Don't grab the register account for multi-split txns.  Just return NULL.
	  - Better logic in the exchange-rate handler function for when to
	    pop up the dialog, and what to put into it.
	  - add an error dialog for corner cases where we want to force
	    the user to expand the txn in order to get proper conversions.

	* src/register/ledger-core/split-register-model-save.c:
	  - export "split_needs_amount()" for use elsewhere
	  - fix the logic in handling debcred changes, in particular for
	    multi-currency cases.  Convert amount->value->amount properly.
	  - handle the case where you change the exchange-rate manually
	    (and do nothing else).
	  - fix the logic in the save-split post-processing for what gets
	    converted when.

	* src/register/ledger-core/split-register-p.h:
	  - export the "split_needs_amount()" api for use in the register.

	FIXES bug #100489

	* src/engine/gnc-commodity.c: change PWARN() to DEBUG() in
	  gnc_commodity_equal(), because the average user doesn't need
	  to know why commodities are not equal.

2002-12-07  Benoit Grgoire  <bock@step.polymtl.ca>

	More Doxygenification.  Created an Engine module, and a
	Deprecated list.  Unfortunately, unless we turn on EXTRACT_ALL
	(not very practical currently) not all functions will appear
	unless they are all documented.
	* src/engine/Transaction.h: More Doxygenification
	* src/engine/Account.h: Doxygenify
	* src/doc/doxygen.cfg.in: Minor config change.

2002-12-07  Christian Stimming  <stimming@tuhh.de>

	* configure.in: Require openhbci 0.9.4 for HBCI version choosing.

	* src/import-export/import-backend.c: Fix adding the balancing
	split.

	* src/import-export/hbci/gnc-hbci-utils.c: Correctly reparent the
	HBCI widgets when the parent window changes.

	* src/import-export/hbci/hbci-interaction[P].[hc],
	hbci-progressmon.c, hbci.scm: Add option for "close on finish" of
	the HBCI log window.

	* src/import-export/hbci/druid-hbci-initial.c, glade/hbci.glade:
	Add dialog for choosing HBCI version.

	* po/el.po: Updated translation by Nikos Charonitakis
	<charosn@her.forthnet.gr>

	* src/engine/Transaction.h: Extensively added function
	documentation (in order to avoid further amount/value confusion
	down the road), watch doxygen output. Added a lot of 'const' all
	over the place.

	* po/nl.po: Fix use of msgid_plural by adding the appropriate
	header entry.

2002-12-06  Benoit Grgoire  <bock@step.polymtl.ca>

	* src/import-export/ofx/gnc-ofx-import.c:  Do the "right"
	thing for setting split amount and value.
	* src/import-export/import-main-matcher.c: Cosmetic
	improvements for balance display and window resizing.
	* All other affected files:  Doxygenify everything.  Take a
	look, run make doc, and open src/doc/html/index.html

2002-12-06  Derek Atkins  <derek@ihtfp.com>

	* revert patch in src/engine/Transaction.c -- imbalance is computed
	  by _value_ -- ALWAYS.

	* po/nl.po -- don't use msgid_plural -- it fails to work.

2002-12-06  Benoit Grgoire  <bock@step.polymtl.ca>

	* src/import-export/import-backend.c:  Fix for gcc2

2002-12-06  Benoit Grgoire  <bock@step.polymtl.ca>

	Huge patch, this is the new generic import
	architecture/transaction matcher.  Many old
	files were renamed, split or deleted.

	* src/engine/Transaction.c,h:
	- Add a DxaccSplitSetAmount function,
	- Fix a bug in xaccSplitsComputeValue (Split values were
	sometimes being summed, which is illogical) that caused
	xaccTransGetImbalance to sometimes return incorrect values.
	Somebody please review this.  Playing in the engine during
	freeze isn't ideal.

	* src/import-export/import-backend.c,h: There is now a
	real backend, completely independent of the GUI.

	* src/import-export/gnc-gen-transaction.c: This is Christian's
	old matcher, I tried to maintain compatibility, but couldn't
	really test.  Please note that there is some code
	simplification that could be done there now that there is a
	clean backend, and that some values passed between the functions
	might no longer have any effect.

	* src/import-export/ofx/gnc-ofx-import.c:  Update for new
	matcher.  Use the currency reported by libofx and
	xaccSpiltSetBaseValue when adding a banking/credit card
	transaction.

	* src/import-export/import-account-matcher.c,h: This is a
	very generic and flexible account matcher/picker.

	* src/import-export/import-commodity-matcher.c,h: This is
	a generic commodity matcher/picker.

	* src/import-export/import-main-matcher.c,h: This is the
	main transaction matcher GUI. It's mostly feature complete
	and should be fairly stable, but probably leaks memory.

	* src/import-export/import-match-map.c,h: Derek Atkin's
	generic string/account matching infrastructure.

	* src/import-export/import-match-picker.c,h:  This is the
	interface to pick a matching transaction.  It has been
	completely ripped from the backend.

	* src/import-export/import-settings.c,h:  All user
	settings (or compiled-in settings) are now abstracted in
	an opaque structure with getter functions.

	* src/import-export/import-utilities.c:	These are utility
	functions to help import module writers.

2002-12-06  Christian Stimming  <stimming@tuhh.de>

	* po/nl.po, po/uk.po: Updated translations by Hendrik-Jan Heins
	<hjh@passys.nl> and Volodymyr M. Lisivka <lvm@mystery.lviv.net>.

2002-12-06  Derek Atkins  <derek@ihtfp.com>

	* src/register/ledger-core/split-register-control.c -- Fix the
	  amount display so that the exchange dialog always shows the
	  "amount" in the the local (register) currency.  It will convert
	  the amount to the txn currency if necessary in cases where all
	  accounts involved in a split are different (strange edge case).
	  Fixes #100277

	* src/register/ledger-core/split-register-model-save.c -- Handle
	  the case where only the exchrate changed.  Actually change it!

2002-12-06  David Hampton  <hampton@employees.org>

	* src/quotes/finance-quote-helper.in: Add an additional module to
	check for (LWP aka libwww-perl) before attempting to call
	Finance::Quote.  Work around the fact that the Finance::Quote::VWD
	module doesn't return the stock symbol.

2002-12-05  Derek Atkins  <derek@ihtfp.com>

	* src/gnome-search/Makefile.am: add GDK_PIXBUF_CFLAGS because
	  it is pulled in by gtkhtml, which is pulled in from window-help.

	* revert patch -- not needed.  Oops.

	* src/gnome/glade/register.glade -- add "Edit Exchange Rate" menu
	  items to the Actions menu and the context menu
	* src/gnome/gnc-split-reg.c -- turn off Exchange Rate editing on
	  "read-only" registers
	* src/register/ledger-core/split-register-control.c -- fix the logic
	  for when we pop-up the exchange-rate dialog, in particular when the
	  user requests it.   Fixes #100285

	* src/gnome-utils/dialog-transfer.[ch]: add two APIs to set the
	  exchange rate and to set "swapped currencies".  The former will
	  set the "price" and the latter will set a (as of yet unused) flag.
	* src/register/ledger-core/split-register-control.c: Don't pop up
	  the exchange dialog when it is not needed, even when requested.

2002-12-04  David Hampton  <hampton@employees.org>

	* src/quotes/finance-quote-helper.in (schemify_quote): Allow stock
	index names to be passed though from gnucash to
	Finance::Quote. Necessary but not sufficient to solve #88118.

	* src/scm/price-quotes.scm ((gnc:fq-get-quotes)): Beef up the
	error handling. Should now print a warning message if the price
	quote lookup fails, instead of crashing. #100186

2002-12-04  Derek Atkins  <derek@ihtfp.com>

	* src/register/ledger-core/split-register-p.h:
	* src/register/ledger-core/split-register.h:
	  move handle_exchange() API from -p.h to .h to export it
	  for the menus to call.

	* src/gnome/gnc-split-reg.c:  add a handler for
	  exchange-rate menu items..  Partial fix for #100285

	* README: fix references to g-wrap
	* acinclude.m4: fix g-wrap test to fail properly if it cannot
	  find g-wrap-config

	* remove src/experimental/ofx from the build system

	* src/import-export/qif-import/qif-parse.scm:
	* src/import-export/qif-io-core/qif-parse.scm:
	  deal with broken QIF files that give broken bang-fields.  In
	  particular, handle the case where it supplies "!Type Bank"
	  instead of "!Type:Bank"

2002-12-03  Derek Atkins  <derek@ihtfp.com>

	* src/register/ledger-core/split-register-control.c:
	  export the 'handle_exchange()' interface
	* src/register/ledger-core/split-register-p.h:
	  add the 'handle_exchange()' prototype
	* src/register/ledger-core/split-register.c:
	  call handle_exchange() from the save() function to make sure we
	  have an exchange rate if the user hits "Enter" instead of
	  tabbing off the end.  For the record, the logic of the register
	  is HORRIBLE, in that there are multiple code paths to deal with
	  moving the "current location" depending on _how_ you move!  This
	  is awful, and means you need a lot of duplicated code to deal
	  with all the different corner cases.  Someone should re-write
	  this all.

	  Closed bug # 97690

2002-12-03  David Hampton  <hampton@employees.org>

	* src/scm/main.scm ((gnc:account-file-to-load)): Normalize the
	path name before using it to open a config files. #90487

	* src/scm/path.scm (gnc:load-user-config-if-needed): Write out a
	new 1.8 version of the config file. Add the 1.8 version to the
	list of files to try an read when reading the config. #100266

	* src/engine/gnc-session.c (gnc_session_load): Don't erase the
	just loaded account information because the backend is reporting
	that the file is from a previous version.  Let the caller decide
	after querying the user. #97270.

	* src/gnome/window-main.c (gnc_main_window_about_cb): Put the
	build date into the about box for development versions of
	gnucash. #99775

	* src/register/ledger-core/split-register-control.c
	(gnc_split_register_move_cursor): Don't delete an empty split if
	its the current transaction split. Dangling pointers are no
	fun. #99774

2002-12-02  Chris Lyttle  <chris@wilddev.net>

	* NEWS: update to new version 1.7.5
	* configure.in: update to new version 1.7.5

2002-12-02  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/gnc-hbci-utils.c, gnc-hbci-gettrans.c,
	gnc-hbci-transfer.c: Create common functions for filling of
	description and memo fields.

2002-12-02  David Hampton  <hampton@employees.org>

	* src/doc/Makefile.am: Fix build issues with the html
	directory. Now also works in a split source/build tree.

	* src/doc/doxygen.cfg: Removed.
	* src/doc/doxygen.cfg.in: New file.

	* src/gnome/gnc-split-reg.c (gsr_default_delete_handler):
	Convert the delete dialogs to follow the existing gnucash standard
	where the cancel button is the rightmost button in the dialog box.
	#98291

	* src/register/register-core/table-allgui.c
	(gnc_table_get_cell_location): Search the entire cellblock for a
	cell. Don't bail if one of the entries isn't populated.  #93831

2002-12-02  Derek Atkins  <derek@ihtfp.com>

	* src/register/ledger-core/split-register-model-save.c -- fix a bug
	  updating two-split multi-currency transactions from the basic ledger.

	* src/register/ledger-core/split-register-model.c:
	* src/register/ledger-core/split-register-model-save.c:
	  Fix a few rounding errors when computing conversion rates.

	* src/gnome-utils/dialog-transfer.c:
	  don't make some checks if we're acting as an exchange dialog.
	  Set an initial exchange_rate when it's passed in.
	  Grab focus in the price-entry if we're acting as an exchange dialog.

	* src/register/ledger-core/split-register-control.c:
	  reset the rate if the account changed.
	  get the exchange dialog to pop up in expanded txns

	* src/register/ledger-core/split-register-model.c:
	  put the "proper" exchange rate in the RATE_CELL
v	  fix the print_info
	  use ALLOW_SHADOW so the rate-cell gets copied into the cursor

	* src/register/ledger-core/split-register.c:
	  initialize the RATE Cell print-info

	* src/register/ledger-core/split-register-control.c:
	  fill in the "exchange dialog" with entries from the current split/trans
	  change the API to allow a menu-item to pop up the exchange dialog

2002-12-02  Chris Lyttle  <chris@wilddev.net>

	* src/doc/Makefile.am: fix for failure when building rpm

2002-12-02  Chris Lyttle  <chris@wilddev.net>

	* NEWS: update to new version 1.7.4
	* configure.in: update to new version 1.7.4

2002-12-01  David Hampton  <hampton@employees.org>

	* src/engine/Transaction.c (xaccTransOrder): The sort on the
	transaction number filed should be a numeric sort not an alpha
	sort. #99579

2002-12-01  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome-utils/gnc-account-sel.c
	(gnc_account_sel_set_new_account_ability): Change the
	gnc-account-sel's "New..." account button to expand but not fill
	it's allocation.

	* src/gnome/druid-loan.c (ld_pay_prep, ld_pay_save_current): Add
	the ability to independently specify the source/from account of a
	payment; fixes Bug#99467.
	(ld_pay_prep, ld_pay_save_current): Add some insensitive widgets
	to show the escrow account; fixes Bug#99476.

	* src/gnome/druid-loan.c (ld_calc_upd_rem_payments): Get the
	currently-typed value for doing the recalculation, not what the
	gtk_spin_button reports.
	(gnc_ui_sx_loan_druid_create): Recalc the remaining months when
	the period-size OptionMenu changes.
	(ld_pay_prep): Handle better the act of setting up the payment
	page for both the Spec-FromAcct and Through-Escrow options.

2002-12-02  Christian Stimming  <stimming@tuhh.de>

	* src/gnome/window-main.c,
	src/business/business-gnome/business-gnome.scm, src/scm/main.scm:
	Yet more i18n menu insertion fixes.

	* src/gnome-utils/gnc-menu-extensions.[hc]: Added
	gnc_gnome_app_insert_menus to work around i18n problems with stock
	gnome menus. This is now also used from window-acct-tree.c.

2002-12-01  Derek Atkins <derek@ihtfp.com>

	* move QuickFill and dialog-transfer into gnome-utils

	* business-ledger/gncEntryLedger.c -- delay setting *new = FALSE until
	  just before we call the "new account" dialog.

	* src/gnome-utils/dialog-transfer -- update the dialog to enable
	  and "exchange dialog" -- limited use from the register.  This is
	  a first pass at getting multi-currency transactions to work from
	  the register.
	* register/ledger-core/split-register* -- hooks to deal with
	  multi-currency transactions better.  Remember the implicit
	  exchange rates and recompute the split values, so when you enter
	  an amount it gets converted properly and you see what you type
	  (mostly).  Call out to the exchange (transfer) dialog when you
	  create a split to an account different than the transaction
	  currency.  This is a partial fix for 97690.

2002-12-01  Joshua Sled  <jsled@asynchronous.org>

	* src/app-utils/gnc-helpers.c (g_date_equals, g_date_hash): Added
	to allow the use of GDates as GHashTable keys.

	* src/gnome/druid-loan.c (ld_rep_next): Fix bug in 'payment' page
	transitions.
	(ld_rev_prep, ld_rev_recalc_schedule, ld_rev_update_clist):
	Support for a loan amortization schedule review page; fixes
	Bug#98966.
	(ld_destroy): General post-run allocation cleanup.

2002-11-30  Derek Atkins  <derek@ihtfp.com>
	* src/register/ledger-core/split-register-model.c -- compute
	  implicit exchange rates for balanced, two-split transactions.
	  Fixes bug #99083 (for real)

	* src/register/ledger-core/split-register-model.c -- compute the
	  implicit exchange rates for ALL transactions when necessary.  No
	  longer requires the pricedb for printing split values.  This will
	  display all transactions in the currency of the current account,
	  regardless of the number of splits in the transaction.

2002-11-30  Herbert Thoma  <herbie@hthoma.de>

	* src/report/standard-reports/cash-flow.scm: Added new option
	for output formating, make the output "nicer"

2002-11-30  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/gnc-hbci-getbalance.c: More graceful
	fallback solution when returned balances are zero.

	* src/app-utils/gnc-ui-util.[hc]: Added
	gnc_locale_default_currency_nodefault function since
	locale_default_currency might return a non-locale related
	currency. Fix xaccSPrintAmount. Fixes #95404.

	* src/engine/iso-4217-currencies.scm ("rouble"): Fix mnemonic for
	Russian Rouble which is "RUR" instead of RUB.

	* src/business/business-gnome/business-gnome.scm,
	src/gnome-utils/gnc-mdi-utils.c,
	src/gnome-utils/gnc-menu-extensions.c,
	src/import-export/ofx/ofx-import.scm,
	src/import-export/qif-import/druid-qif-import.c: More i18n menu
	insertion fixes.

2002-11-30  Matthew Vanecek <mevanecek@yahoo.com>

	* Makefile.am: Added the GNC_CTAGS_FILE token, and added the
        ctags target.  Changed the TAGS target to etags, and
	GNC_TAGS_FILE to GNC_ETAGS_FILE.  Removed GNC_TAGS_FILE from the
	noinst_DATA variable.  This makes tag building a manual target.
	Run "make ctags" for Vi tags, or "make etags" for Emacs TAGS.

	* Makefile.TAGS:  Changed the TAGS target to etags, and added
	the ctags target.

	* configure.in:  Added the --enable-ctags option.

	* .cvsignore:  Added tags to .cvsignore.  tags is the file created
	by ctags.

02-11-29  David Hampton  <hampton@employees.org>

	* src/report/standard-reports/transaction.scm: Fix the grand
	totals in the transaction report when there is more than one type
	of currency/commodity to report. #89501

	* src/report/report-system/report.scm: Move the busy cursor logic
	so that it removes the busy cursor even after a report error.

	* src/report/locale-specific/us/taxtxf.scm:
	* src/report/standard-reports/transaction.scm: Provide progress updates
	while creating reports. #94280

2002-11-29  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/gnc-hbci-utils.c, gnc-hbci-*.c: Catch the
	condition gracefully when OpenHBCI config file does not exist.

2002-11-29  Derek Atkins  <derek@ihtfp.com>
	* src/gnome-utils/dialog-exchange.h -- header for the exchange-rate dialog

2002-11-28  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/gnc-gen-transaction.c: Use add_threshold
	instead of clear_threshold to determine default txn action.

	* src/import-export/hbci/gnc-hbci-gettrans.c: Give correct
	feedback when no transactions are there.

	* src/import-export/generic-import.glade: Add explaining label for
	importer window.

2002-11-27  Benoit Grgoire  <bock@step.polymtl.ca>

	* Makefile.am configure.in src/doc/Makefile.am
	src/doc/doxygen.cfg src/doc/doxygen_main_page.c: Added doxygen
	documentation support, and integrated it into the build system.
	There is a new target, make doc, that can be used to build the
	documentation if you have doxygen installed. Any file in the src
	tree will be included in the documentation if it follows doxygen
	conventions.  The doc created in src/doc/html.  Doxygen is now
	required for make dist.

	* src/import-export/:  Enable doxygen documentation.

2002-11-27  Christian Stimming  <stimming@tuhh.de>

	* accounts/pt_BR/*: Added Brazilian Portugese account templates by
	Lucimar Moresco <lucimarmoresco@hotmail.com>.

2002-11-27  Derek Atkins  <derek@ihtfp.com>
	* remove find.glade -- it is no longer used
	* src/gnome/dialog-findtransactions.c -- remove old code
	* po/POTFILES.in -- remove find.glade

2002-11-26  Derek Atkins  <derek@ihtfp.com>

	* src/import-export/Makefile.am -- make sure to distribute the scm files

2002-11-26  David Hampton  <hampton@employees.org>

	* src/report/report-system/commodity-utilities.scm:
	* src/report/report-system/html-utilities.scm:
	* src/report/report-system/report-utilities.scm:
	* src/report/report-system/report.scm:
	* src/report/standard-reports/*.scm:
	* src/business/business-reports/*.scm: Provide progress updates
	while creating reports. #94280

	* src/gnome-utils/gw-gnome-utils-spec.scm: Make the
	set_busy_cursor and unset_busy_cursor routines available from
	scheme.

2002-11-25  Derek Atkins  <derek@ihtfp.com>

	* src/engine/QueryCore.c -- make sure we have a string
	  when running string compares.  Partial fix for #99563
	* src/gnome/dialog-sx-from-trans.c -- suspend and resume
	  GUI events when building the template trans -- to make sure
	  that refreshes don't happen until after the txn is inserted.
	FIXES bug #99563

2002-11-26  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/Transaction-matcher.c:
	More code cleanup -- use getter functions instead of direct
	structure access to make potential file split easier.

	* src/import-export/gnc-gen-transaction.[hc]
	(gnc_gen_trans_get_fuzzy_amount): Add functions to get/set the
	fuzzy amount matching threshold, so that this feature can be used
	from gnc-ofx-import.c.

2002-11-25  Benoit Grgoire  <bock@step.polymtl.ca>
	* src/import-export/hbci/gnc-hbci-gettrans.c: Remove
	#include "gnc-generic-import.h"

2002-11-25  Benoit Grgoire  <bock@step.polymtl.ca>
	* src/import-export/Account-matcher.[c,h]: Minor changes to make
	the matcher more generic:  Improved text handling, default account
	support, enable account description, disable showing Online ID
	column if online_id isn't specified in the function call.
	* src/import-export/generic-import.glade: Adjust text for above 		changes.
	* src/import-export/gnc-gen-transaction.c:  Use the more feature		 complete Account-matcher.h from the generic import module instead
	 of dialog-account-pick.h.  Christian, tell me you didn't implement
	a fourth account picker from scratch.
	* src/import-export/ofx/gnc-ofx-import.c: Adapt text to
	Account-matcher changes.

2002-11-24  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/druid-loan.c (ld_rev_prep): Initial support for a
	payment schedule review page, addressing Bug#98966.

	* src/gnome/dialog-scheduledxaction.c (putSchedXactionInDialog):
	Don't double-free dates; fixes Bug#99452.

	* src/gnome/gnc-split-reg.c (gnc_split_reg_jump_to_split)
	(gnc_split_reg_jump_to_split_amount, gnc_split_reg_record)
	(gsr_emit_include_date_signal):
	* src/gnome/window-register.c (gnc_register_include_date_adapter):
	Add back in support for including a date in the range
	limited/viewed by the window-register.

	* src/gnome/gnc-split-reg.c (gnc_split_reg_get_read_only)
	* src/gnome/window-register.c (regWindowLedger): Change manner of
	setting window-title in read-only-register case so the
	gnc-split-reg isn't changing the window-titles of windows it has
	no authority over.  Fixed Bug#99396.

2002-11-25  Benoit Grgoire  <bock@step.polymtl.ca>
	* src/import-export/*.c,h: Split gnc-generic-import.h in one
	header per file.

2002-11-24  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/gnc-hbci-gettrans.c: Improve space
	trimming in imported description.

	* src/import-export/ofx/gnc-ofx-import.c: As a trial, use new
	generic transaction importer GUI. Changes are marked with 'CS:'.

2002-11-24  Derek Atkins  <derek@ihtfp.com>

	* src/engine/Account.c -- fix some compiler warnings
	* src/gnome/window-register.c -- fix a compiler warning
	* src/gnome/dialog-scheduledxaction.c -- fix a compiler warning

	* src/gnome-utils/exchange-dialog.glade -- New dialog to deal with
	  exchanges from "within the register", but here because it is
	  relatively generic.

	* src/register/ledger-core/split-register-load.c -- set the txn
	  currency based on the currency of the "default account"

	* src/register/ledger-core/split-register-model.c -- Always
	  display amounts in the currency of the current account.  Use the
	  pricedb to lookup conversion values if the transaction currency
	  is not the same as the current account commodity.
	* src/gnome/dialog-transfer.c -- Make sure the exchange rate stays
	  a decimal number instead of converting to a fraction.

2002-11-24  David Hampton  <hampton@employees.org>

	* src/app-file/gncmod-app-file.c:
	* src/gnome-utils/gnc-mdi-utils.c:
	* src/gnome-utils/gnc-mdi-utils.h: Rename the
	gnc_mdi_file_percentage function to gnc_mdi_show_progress.

	* src/gnome-utils/gw-gnome-utils-spec.scm: Wrap the
	gnc_mdi_show_progress function so it is accessible from scheme.

	* src/report/report-system/report-system.scm:
	* src/report/report-system/report-utilities.scm: Create utility
	functions for giving progress updates while building reports.

2002-11-23  Joshua Sled  <jsled@asynchronous.org>

	* src/app-utils/prefs.scm (gnc:make-number-range-option): Fix
	wording of pref-widget hints; fixes Bug#99389.

	* src/gnome/glade/sched-xact.glade:
	* src/gnome/dialog-sx-from-trans.c:
	* src/gnome/druid-loan.c (gnc_ui_sx_loan_druid_create):
	* src/gnome-utils/gnc-frequency.c (gnc_frequency_init):
	* src/gnome/dialog-scheduledxaction.c
	(gnc_ui_scheduled_xaction_editor_dialog_create):
	GnomeDateEdit -> GNCDateEdit; Fixes Bug#99357.

	* src/gnome/dialog-scheduledxaction.c
	(gnc_ui_scheduled_xaction_editor_dialog_create): Removed
	delete-event handling duplicated by close signal from GnomeDialog;
	fixes Bug#99399.
	(sxed_close_event): Check for a valid SX before proceeding; fixes
	Bugs#99350 and dupes [99348,99356,99397].

2002-11-23  Matthew Vanecek <mevanecek@yahoo.com>
	* src/engine/Account.c (xaccAccountCommitEdit): Internationalize
	the PWARN_GUI() string 	argument.

	* src/backend/postgres/PostgresBackend.c: Added messages.h to support
	string internationalization.

	* src/backend/postgres/PostgresBackend.c (pgend_session_begin):
	an xaccBackendSetMessage() call was missing the Backend argument.

2002-11-23  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/gnc-hbci-gettrans.c: Use the new generic
	transaction importer.

	* src/import-export/gnc-gen-transaction.[hc],
	generic-importer.glade: Added a new generic transaction importer,
	with GUI as proposed on gnucash-devel (one-page, one-listview).

	* src/import-export/Transaction-matcher.[hc]: Refactor the code
	even more and separate GUI-dependent from -independent tasks.
	(gnc_import_match_picker_run_and_close): Add a new "Match-Picker
	Dialog" for the non-usual case of where the user should pick
	between different possible duplicate matches.
	(matchmap_find_destination): Add automatic destination guessing
	and learning, based on the GncImportMatchMap.

	* po/POTFILES.in, de.po: Updated translations.

	* src/engine/Account.h, src/import-export/gnc-import-match-map.h:
	Clarify some comments.

2002-11-23  David Hampton  <hampton@employees.org>

	* src/gnome/reconcile-list.c (gnc_reconcile_list_commit): Don't
	override the previous state on all the transactions in the
	reconciliation window. Only set those the user identified as
	reconciled. #95639

	* src/register/ledger-core/gnc-ledger-display.c (refresh_handler):
	If there is a current split, then ensure that the transaction
	containing that split stays in the register.  This will make the
	transaction being edited stay in the register until you move to
	another transaction, even though the accounts may have been
	changes. #92158

	* src/register/ledger-core/split-register-control.c
	(gnc_split_register_move_cursor): If all the entries of the
	current split have been cleared, then delete this split. #98139
	(gnc_split_register_old_split_empty_p): New function.

	* src/engine/Account.c (xaccTransFixSplitDateOrder):
	(xaccTransFixSplitDateOrder): Prevent this routine from causing a
	recursive call to itself.

	* src/gnome-utils/commodity.glade: Change the title of the 'New
	Currency/Security' dialog to 'New Security' to match its actual
	function. #95596

	* src/gnome/glade/register.glade: Update help menu items. #99169

	* src/gnome/window-register.c (gnc_register_toolbar_cb): Remove
	unused routine.

	* src/import-export/qif-import/qif-merge-groups.scm: Add a new
	progress box for a function that takes forever and a day to
	complete.

	* src/import-export/qif-import/qif-to-gnc.scm:
	* src/import-export/qif-import/qif-file.scm: Mark progress box
	strings for i18n.

	* src/import-export/qif-import/druid-qif-import.c: Fix start
	declarations so emacs can find them.

2002-11-23  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/Transaction-matcher.c: Refactor *a lot* of the
	code -- try to separate GUI-dependent tasks from GUI-independent
	ones, and make many functions publicly reachable by declaring
	them in the header file.

	* src/import-export/gnc-generic-import.h, *.h: Move some function
	into new Transaction-Matcher.h (which is included from here for
	now), and add some const's at the kvp functions.

	* src/gnome-utils/dialog-utils.h: Added many comments for docs.

2002-11-22  David Hampton  <hampton@employees.org>

	* src/gnome/reconcile-list.c
	(gnc_reconcile_list_recompute_widths): Always make the contents of
	the reconciliation window fit within the allocated space.
	(gnc_reconcile_list_fill): For a split with a zero value, if the
	number field is non-null then assume this split is for a check and
	force it the credit list. #93832

2002-11-22  Christian Stimming  <stimming@tuhh.de>

	* src/gnome-utils/dialog-account-pick.[hc]: Move the account
	picker dialog from hbci/ to gnome-utils.

	* src/import-export/Transaction-matcher.c: Fix the case when
	trans_online_id exists but is empty. Simplify heuristics for date
	matching. Increase exact amount matching value.

2002-11-21  Derek Atkins  <derek@ihtfp.com>
	* business-core/test/*.c -- fix the tests for begin/commit edit

	* src/scm/main.scm -- fix the load of price-quotes on guile-1.4.1

	* README/README.cvs -- update to reference how to "properly" use
	  autogen.sh

2002-11-21  Benoit Grgoire  <bock@step.polymtl.ca>
	* src/import-export/Transaction-matcher.c: Tweak the matching
	heuristics.
	-Memo and description heuristics now both have a very primitive
	fuzzy match worth +1:  Only the first half of the string is compared.
	The rationale is that this will allow the matcher to skip the
	transaction number sometimes appended after the description by
	some banks.
	* src/import-export/ofx/gnc-ofx-import.c:  Transaction memo is
	always written in the split's memo.
	* src/doc/user-prefs-howto.txt:  Add new file, by Christian Stimming.

2002-11-21  Benoit Grgoire  <bock@step.polymtl.ca>
	* src/import-export/generic-import.scm: New file, contains user
	prefs for the Transaction matcher:
	Display, Auto-ADD and Auto-CLEAR thresholds can be adjusted.
	SKIP and REPLACE action can now be disabled.
	* src/import-export/gncmod-generic-import.c: Load generic-import.scm
	* src/import-export/Makefile.am: Add generic-import.scm
	* src/import-export/Transaction-matcher.c:
	-Use the new user prefs.
	-Change the name of the actions to hopefully reflect better the
	action that will be taken.  RECONCILE is now CLEAR, and IGNORE is
	now SKIP.
	-Disable numeric scoring.

2002-11-19  Christian Stimming  <stimming@tuhh.de>

	* src/engine/Scrub.c (xaccTransScrubCurrency): Add code to deal
	correctly with currency exchange transactions from 1.6. Fixes
	reported problems with importing 1.6 data files, #91505.

2002-11-18  Benoit Grgoire  <bock@step.polymtl.ca>
	* src/import-export/Transaction-matcher.c: Change default "RECONCILE"
	action from 'y' (reconciled) to'c' (cleared)

2002-11-18  Derek Atkins <derek@ihtfp.com>
	* configure.in -- fix OFX search to look in /usr/local if it cannot
	  find it in /usr.  It skips the second check if you supply an ofx-prefix.

2002-11-18  David Hampton  <hampton@employees.org>

	* configure.in: Fix problems with gtkhtml 1.1.

	* macros/as-scrub-include.m4: Fix problems with gcc 2.x.

2002-11-18  Chris Lyttle  <chris@wilddev.net>

	* NEWS: update to new version 1.7.3
	* configure.in: update to new version 1.7.3

2002-11-18  Benoit Grgoire  <bock@step.polymtl.ca>
	* src/import-export/Transaction-matcher.c: Remove constant length
	strings and replace with moving pointers.  I wish _("string")
	could be used as a could initializer like "string" can...

2002-11-17  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/dialog-sxsincelast.c:
	* src/gnome/dialog-scheduledxaction.c:
	Use printGDate() when we need to print dates; fixes Bug#96477.

	* src/engine/date.[ch] (printGDate): Convenience wrapper around
	printDate.

2002-11-17  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/druid-loan.c (ld_calc_current_instance_num): Do some
	work to figure out the correct current-instance-number for
	non-monthly Loan-Repayment SXes.
	(ld_create_sxes): Make the created SXes time out after the length
	of the loan, rather than trying to get the number-of-periods
	totally correct.  This obsoletes Bug#97808.

	* src/gnome/dialog-sxsincelast.c (sxsincelast_tc_row_sel): Don't
	assertion-failure if the user select a non-leaf row.

	* src/gnome/dialog-scheduledxaction.c (sxed_confirmed_cancel):
	Added; used by cancel button handler and [newly added] GnomeDialog
	"close" handler; fixes Bug#84683.

	* src/gnome/druid-loan.c: I18n of some strings previously
	unaccounted for.
	(ld_opt_consistency): Don't enable the "Through Escrow" checkbox
	if there is no escrow account defined.
	(ld_calc_upd_rem_payments): Added; calculate the number of
	remaining payments based on the start date, loan length and
	current date; fixes Bug#91815.

2002-11-17  David Hampton  <hampton@employees.org>

	* configure.in: Add support for gtkhtml 1.1.

	* various: Clean up compilation warnings.

	* src/gnome/window-reconcile.c: Fix a couple of functions that
	were illegally casting pointers to the wrong type.  Use the new
	gnc_split_reg_xxx functions instead of the old gnc_register_xxx
	functions.

	* src/gnome/window-register.c: Remove some functions that are no
	longer called.

	* macros/as-scrub-include.m4: New macro.

	* configure.in: Use the new AS_SCRUB_INCLUDE macro to remove
	system directories from the compile search path. Prevents GCC 3.x
	from complaining.

2002-11-17  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/gnc-hbci-utils.c: Fix caching of HBCI_API
	when using multiple files one after another.

2002-11-17  Matthew Vanecek <mevanecek@yahoo.com>
	* src/backend/postgres/putil.c: Added needed header files to the c
	file.

	* src/backend/postgres/PostgresBackend.c (pgend_session_begin): Added
	xaccBackendSetMessage for an unknown mode or for a bad connection.

	* src/engine/Backend.c (xaccBackendGetMessage): Allow function to
	return null if Backend->error_msg is NULL.

	* src/engine/Account.c (xaccAccountCommitEdit): Handle a NULL return
	from xaccBackendGetMessage().

	* src/engine/gnc-session.c (gnc_session_begin): Push the Backend
	error message onto the session error message (instead of NULL), if
	it exists.  If it's just a warning message (denoted by having a
	message, but ERR_BACKEND_NO_ERR is set), pop up a dialog.

2002-11-16  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome-utils/gnc-dense-cal.c (gnc_dense_cal_draw_to_buffer):
	Added double-buffering support to GncDenseCal.  Fixes Bug#96475.

2002-11-16  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/gnc-split-reg.c (gsr_setup_status_widgets): Only setup
	the status check if we've created it to prevent some
	warning/critical noise.
	(gnc_split_reg_class_init): Setup default signal handlers to
	GTK_RUN_LAST so that they can be stopped by callers.
	(gnc_split_reg_use_extended_popup): Added; replaces
	dialog-schedxaction.c version of same in a cleaner way.
	(gsr_default_schedule_handler): If the transaction which is
	requested to be "Schedule..."d was created from an SX, then the
	editor for the SX which created the txn is opened rather than from
	SX-From-Trans dialog.
	(gnc_split_reg_jump_to_blank, gnc_split_reg_jump_to_split_amount)
	(gnc_split_reg_jump_to_split): Add ledger refreshes to get correct
	behavior.

	* src/gnome/dialog-sxsincelast.c (sxsld_jump_to_real_txn): Added;
	jump to the correct [read: real] txn on a jump signal from the
	ledger.

	* src/gnome/gnc-split-reg.c (gsr_default_jump_handler): Use new
	regWindowSimple signature for creating new windows on a jump.

2002-11-16  David Hampton  <hampton@employees.org>

	* src/register/ledger-core/split-register.c (gnc_split_register_save):
	Check whats in the transfer cell values and possible ask the user
	if they want to create the account.
	(gnc_split_register_get_account_by_name): Return quietly if passed
	a null string.

2002-11-16  Derek Atkins  <derek@ihtfp.com>

	* Matthew Vanecek's patch:

	The attached patch contains some immediate bug fixes for the SQL
	back end, and it adds and error message string + accessor/mutator
	to Backend.  Also, in xaccAccountCommitEdit(), added the use of
	PWARN_GUI to display the error message.

	The bug fixes in the SQL backend involved converting the *_QUERY
	macros to functions.

2002-11-15  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/window-register.c (gnc_register_delete_cb): Change the
	order of window deletion to not cause a crash.

	* src/gnome/window-register.c (regWindowSimple),
	(regWindowAccGroup): Only return the GNCSplitReg, not the whole
	regData.  Fixes a bunch of existing and potential crashes.

	* src/gnome/window-main.c (gnc_main_window_gl_cb):
	* src/gnome/window-acct-tree.c
	(gnc_acct_tree_window_toolbar_open_cb)
	(gnc_acct_tree_window_menu_open_subs_cb)
	(gnc_acct_tree_window_menu_open_cb)
	(gnc_acct_tree_window_activate_cb):
	* src/gnome/top-level.c (gnc_html_register_url_cb):
	Modify to not necessarily expect a RegWindow for creation of a
	ledger view.  Fixes a bunch of existing and potential crashes.

	* src/gnome/gnc-split-reg.c (gnc_split_reg_delete_cb): Removed;
	dead.

2002-11-14  David Hampton  <hampton@employees.org>

	* src/register/ledger-core/split-register.c:
	(gnc_split_register_get_account_by_name): Fix register update bug.

2002-11-14  Joshua Sled  <jsled@asynchronous.org>

	* src/register/ledger-core/gnc-ledger-display.c
	(gnc_ledger_display_template_gl): Extended to allow a template GL
	without a specific transaction being displayed at the time of
	creation.

	* src/engine/SchedXaction.h: Removed some deprecated function defs.

	* src/gnome/gnc-split-reg.c (gsr_default_jump_handler): Don't make
	assumptions about the window-register.c code that we can't
	support, and don't let it be responsible for too much.  Fixes
	recent serious register crashes.

	* src/gnome/dialog-scheduledxaction.c
	(scheduledxaction_editor_dialog_destroy):
	* src/gnome/dialog-sxsincelast.c (sxsincelast_destroy):
	Close the ledger_display on window teardown.  Fixes sx-related
	register crashes.

2002-11-14  Christian Stimming  <stimming@tuhh.de>

	* po/*.po: Updated translations (merged from 1.6 branch plus
	updates from the Translation Project).

	* po/nb.po: New filename for Norwegian (bokmal) translation -- it
	used to be stored under no.po but that is no longer.

2002-11-13  Benoit Grgoire  <bock@step.polymtl.ca>
	* src/import-export/Transaction-matcher.c:
	-Don't show match with probability less than 1, so we don't
	end up showing the whole account.
	-Fix crash when importing a transaction twice
	-Copy the online id to the reconciled transaction, so the
	match will be remembered.
	-Do not consider transaction with an online_id kvp frame as
	potential match, as they have previously been downloaded
	online.
	-Steal a better pixmap from gnome drop down menu.

2002-11-13  Benoit Grgoire  <bock@step.polymtl.ca>

	* src/import-export/ofx/gnc-ofx-import.c: MAJOR improvement to
	investment support.  All transactions created from an investment
	account are now already balanced.  Explicitly support Dividend
	Reinvestment transactions which will now directly create a
	income account -> stock account transaction, and Income
	transactions which will directly create a
	income account -> cash account transaction.
	Support memorizing the income account association.  Several
	stock account can use the same income account if desired.

	* src/import-export/Transaction-matcher.c: Various bug fixes.

	* src/import-export/Account-matcher.c and
	src/import-export/gnc-generic-import.h: Support a new mode
	of operation for the account matcher to allow selection of
	an account without touching the online_id kvp frame.
	Currently used for income account selection or creation.

	* src/import-export/generic-import.glade: Set default size
	to a more reasonable 800x600, since the Auto Shrink trick
	doesn't work for everyone.

2002-11-12  Derek Atkins  <derek@ihtfp.com>

	* src/import-export/gnc-import-match-map.[ch]
	  Implement a generic Account Mapper for the import routines.
	  Still needs a GUI.

	* business/business-gnome/dialog-invoice.c
	  Add an unpost button.  It does nothing at this point.
	* business/business-gnome/glade/invoice.glade
	  Add an unpost button.
	* business/business-core/gncInvoice.c
	  change the readonly message to point to unposting invoices
	  NOTE: This just adds the icon and some new strings..  Functionality
	  to be added soon.

2002-11-12  David Hampton  <hampton@employees.org>

	* src/register/ledger-core/split-register-control.c
	(gnc_split_register_traverse): Check for leaving an action or a
	shares cell in a stock register. Enforce the rule that "Buys" must
	be a positive number of shares and "Sells" must be a negative
	number of shares. #92270

	* src/register/ledger-core/split-register-load.c
	(gnc_split_register_add_transaction): Don't sort transaction
	splits here. This function gets called every time you switch
	splits, and so can reorder them just when you least expect
	it. #92156

	* src/engine/Transaction.c (xaccTransCommitEdit): Sort transaction
	splits when the user has finished making changes to the
	transaction. #92156

	* src/register/ledger-core/split-register-control.c
	(gnc_split_register_traverse): Move the checking for non-existent
	and placeholder accounts to a separate function, and call that new
	function.

	* src/register/ledger-core/split-register.c
	(gnc_split_register_cancel_cursor_trans_changes): Do a full
	refresh after calling this function.  Cleans up some gui leftovers
	after a delete. (gnc_split_register_get_account_by_name): Add the
	new function that checks for non-existent and placeholder
	accounts.  (gnc_split_register_get_account): Call the new function
	to get the additional checks.  This solves #92157.

	* src/business/business-ledger/gncEntryLedger.c:
	* src/business/business-ledger/gncEntryLedgerControl.c: Implement
	the equivalent fixes for the business ledger.

2002-11-12  Benoit Grgoire  <bock@step.polymtl.ca>
	* src/import-export/Transaction-matcher.c: Fix previous patch.
	gcc 3.2 is too forgiving...

	* src/import-export/Transaction-matcher.c: Dynamically generate
	a pixmap to display match confidence graphically.

	* src/import-export/ofx/gnc-ofx-import.c: Fix call to
	g_strdup_printf in Christian's 2002-11-03 translation patch.

	* src/import-export/Transaction-matcher.c
	* src/import-export/generic-import.glade: First round of
	transaction matcher UI changes.  Create a pseudo-widget in first
	column to select the action to be taken with the transaction.

2002-11-12  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/dialog-sxsincelast.c
	(sxsincelast_tc_row_unsel, sxsincelast_tc_row_sel): Now [again]
	uses the read-only register to show the relevant template
	transaction, so the user has context about any variables they're
	being asked to fill in values for.

2002-11-11  David Hampton  <hampton@employees.org>

	* src/gnome/window-acct-tree.c: Make all the menu callbacks take a
	pointer to the GNC MDI main data structure instead of a pointer to
	a GNC MDI Child data structure. #94972

2002-11-11  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/window-register.c (regWindowLedger): If we
	gtk_widget_show_all the correct widget [the window], then it's
	available for setting its size and changing the style and whatnot.

	* src/gnome/orig-window-register.c (regWindowLedger): Hack for
	Bug#97640; re-init the style after we've shown the widgets to
	affect a "style change", which lets the GUI nature of the cells
	[combos, autocomplete] init and function.

2002-11-10  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/Transaction-matcher.c: Make newly imported
	transaction "cleared" instead of "reconciled".

2002-11-10  Derek Atkins  <derek@ihtfp.com>

	* Fix the Find-Transactions dialog so it only has "Share Price" once

2002-11-10  David Hampton  <hampton@employees.org>

	* src/scm/price-quotes.scm ((gnc:book-add-quotes book)): Don't get
	stock quotes for accounts where all the shares have all been
	sold. #95547

	* src/register/ledger-core/split-register.c
	(gnc_split_register_empty_current_trans_except_split): After
	modifying the transaction, leave it in "open" state and mark it as
	the currently pending transaction.  This insures that the register
	does the right thing when leaving this transaction. Also fix
	spelling error in function name. Fix this function to work
	correctly on the blank split. #98134
	(gnc_split_register_empty_current_trans): Fix spelling error in
	function name.

	* src/register/ledger-core/split-register.c: Fix spelling error in
	function names.

	* src/gnome/gnc-split-reg.c (gsr_default_reinit_handler): Fix
	spelling error in function name.
	(gnc_split_reg_reinitialize_trans_cb): Emit the right signal.
	(gnc_split_reg_jump_to_split_amount): Remove uninitialized
	variable.

2002-11-09  Herbert Thoma  <herbie@hthoma.de>

	* /src/report/standard-reports/cash-flow.scm: bug fix for cash flow
	  reports on stock accounts

2002-11-09  Derek Atkins  <derek@ihtfp.com>
	* gnome/dialog-new-user: don't call the qif-import-druid directly.
	  Add a callback API for the qif-import druid.  Use that callback
	  when the qif-import button is pressed.  Make the qif-import button
	  sensitive only when the qif-import module is loaded (i.e. only when
	  the callback function is non-NULL).
	* import-export/qif-import -- set the make_druid callback for the new-user
	  dialog.
	* gnome/Makefile.am -- remove dependency on qif-import library.
	* src/makefile.am -- re-order import-export after gnome

	* engine/Transaction.c -- allow deletion of a non-connected Splits
	  (fixes a SEGV problem)

	* engine/Account.c -- send an event whenever an account balance is updated.
	  Fixes bug # 97689

2002-11-08  Christian Stimming  <stimming@tuhh.de>

	* src/gnome/window-register.c (regWindowLedger): Fix menu
	extension setup by moving it after gnc_register_setup_menu.

2002-11-07  David Hampton  <hampton@employees.org>

	* src/engine/iso-4217-currencies.scm: Added a bunch of currencies. #95405

	* various: Update references to preferences to read the new
	"Advanced" settings. #97614

2002-11-06  Derek Atkins  <derek@ihtfp.com>
	* gnome/gnc-split-reg: export jump_to_* functions
	* gnome/window-reconcile.c: re-enable the 'jump to blank'
	* gnome/window-register.c: re-enable the 'jump to blank' by calling into
	  the split-reg's implementation.
	  fixes bug #97680

2002-11-06  Christian Stimming  <stimming@tuhh.de>

	* po/de.po: Completed German translation. Some typo fixed
	elsewhere.

2002-11-05  Christian Stimming  <stimming@tuhh.de>

	* po/it.po: Updated translation by Lorenzo Cappelletti
	<L.Cappelletti@mail.com>.

	* src/gnome/gnc-split-reg.c, src/gnome/glade/register.glade:
	Replace the term "reinitialize" by "Remove Transaction Splits".

2002-11-04  David Hampton  <hampton@employees.org>

	* src/engine/Transaction.c: New functions to get/set read-only
	status on a transaction, and to print a warning message if a
	transaction is read-only.  The engine will not let you delete a
	transaction (or split in a transaction) that is marked read-only.

	* src/business/business-core/gncInvoice.c
	(gncInvoicePostToAccount): Mark as read-only transactions that are
	generated from an invoice.

	* src/gnome/gnc-split-reg.c (gsr_default_delete_handler):
	(gsr_default_reinit_handler): Honor the read-only setting on a
	transaction.

	* src/register/ledger-core/split-register-model.c
	(gnc_split_register_confirm): Honor the read-only setting on a
	transaction.

2002-11-04  Herbert Thoma  <herbie@hthoma.de>

	* /src/report/standard-reports/cash-flow.scm: new report
	which shows inflow and outflow of money to a set of accounts

	* src/report/standard-reports/standard-reports.scm: add
	cash-flow.scm to gncscmmod_DATA

2002-11-04  Derek Atkins  <derek@ihtfp.com>

	* src/gnome/gnc-split-reg.c: remove reference to gnc-regwidget.h
	  (which no longer exists)

	* src/gnome-utils/gnc-gui-query.c: use the right string when building
	  the dialog (use the output from vsprintf, not the input)

	* src/app-utils/Makefile.am: install i18n.h but don't include it
	  in the DIST tarball -- let it be generated from i18n.h.in, which
	  IS distributed.

	* src/business/business-reports/invoice.scm: fix some strings
	  "Invoice Terms" -> "Billing Terms"

2002-11-03  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/dialog-sxsincelast.c: Use GNCSplitReg over
	GNCRegWidget.

	* src/gnome/dialog-scheduledxaction.c
	(schedXact_editor_create_ledger): Use GNCSplitReg over
	GNCRegWidget.

	* src/gnome/glade/register.glade: Moved a bunch of the
	previously-shared widget definitions into separate places to be
	accessed by window-register.c and gnc-split-reg.c.

	* src/gnome/window-register.c: Massive code-sucking into
	gnc-split-reg.c; this file now only handles the details of being
	the register window: dealing with dates and the extended menus and
	whatnot.

	* src/gnome/gnc-split-reg.c: Added; a better implementation of
	gnc-regWidget.  All the "common" register-editing code has been
	moved here from window-register.c.

	* src/register/ledger-core/gnc-regwidget.c: Removed; replaced with
	src/gnome/gnc-split-reg.c.

	* src/register/register-gnome/gnucash-date-picker.c
	(gnc_date_picker_new): Call gtk_widget_show_all rather than
	gtk_widget_realize in order to setup the calendar to a state
	sufficient for subsequent calls.

	* HACKING: Added description of how to start GnuCash in GDB.

2002-11-03  Derek Atkins  <derek@ihtfp.com>
	* engine/gnc-be-utils.h: implement macro helpers for begin/commit functions
	* business/business-core/*.c: Implement BeginEdit()/CommitEdit() functions
	  for all the business-accounting data objects.
	* Use the begin/commit calls in the GUI and file-backend.
	* mostly fixes bug #96855.

	* business/business-core/*.c: add begin/commit edit calls in every 'set'
	  function.  Fixes 96855.

	* gnome-utils/dialog-account.c: change the BeginEdit() call on the
	  (temporary) top-level account, so the SQL backend doesn't hate us
	  for committing and account without a commodity.

	* business/business-ledger/gncEntryLedgerLoad.c -- set the account
	  completion character for the account cells.  Fixes bug #97098

2002-11-03  Christian Stimming  <stimming@tuhh.de>

	* src/gnome/dialog-sxsincelast.c, src/gnome/window-main.c,
	src/engine/messages.h: Fix translation of plural forms by
	introducing ngettext(3).

	* src/import-export/ofx/gnc-ofx-import.c: Fix string translation
	issues.

2002-11-02  Derek Atkins  <derek@ihtfp.com>
	* gnc-engine-util.[ch]: add MOD_BUSINESS for logging (eww)

2002-11-01  Chris Lyttle  <chris@wilddev.net>

	* rpm/gnucash.spec.in: updated to work on rh8

2002-10-31  Derek Atkins  <derek@ihtfp.com>
	* import-export/ofx/Makefile.am: add gncscm_DATA to EXTRA_DIST

2002-10-30  Benoit Grgoire  <bock@step.polymtl.ca>
	* src/import-export/ofx/gnc-ofx-import.c: Fix security account creation bug caused by the presence of the character ':' in the account default name.  Fix compiler warnings.

2002-10-30  Derek Atkins  <derek@ihtfp.com>
	* configure.in -- improved libofx configure support.  Add --with-ofx-prefix
	  so users can define where to look for libofx.
	* import-export/ofx/Makefile.am -- use new configure glue

	* import-export/ofx/gnc-ofx-import.c: use gnc_timespec_to_iso8601_buff() instead of strftime()
	* import-export/ofx/gncmod-ofx-import.c: "remove" two unused variables

2002-10-28  Christian Stimming  <stimming@tuhh.de>

	* intl-scm/xgettext.scm: Add the file name of scheme files to
	translation messages.

2002-10-28  Chris Lyttle  <chris@wilddev.net>

	* NEWS: update for new release
	* configure.in: update to new version 1.7.2
	* rpm/gnucash.spec.in: now works building 1.7.x

2002-10-28  Chris Lyttle  <chris@wilddev.net>

	* src/scm/help-topics-index.old: Moved old file to here for now
	* src/scm/help-topics-index.scm: deleted the junk and put temp in
	* doc/sgml/C/topic.dat: add help topic
	* doc/sgml/C/Makefile.am: delete bunch of crud, add new crud yippie
	* doc/sgml/Makefile.am: remove translations of docs
	* doc/Makefile.am: remove html dir
	* doc/sgml/C/guide.sgml: temp placeholder for new help
	* doc/sgml/C/help.sgml: temp placeholder for new help
	* configure.in: remove translated doc dirs from makefiles

2002-10-28  David Hampton  <hampton@employees.org>

	* src/gnome-utils/gnc-html.c:
	* src/gnome/Makefile.am:
	* src/gnome/top-level.c (gnc_gui_init): Disable the gnucash
	network code.

	* src/app-utils/prefs.scm: Add option for enabling advanced
	pages. Move some existing prefs to an "Advanced" page.  Disable
	the gnucash network code.

	* src/gnome-utils/dialog-options.c: OK button should always be
	sensitive.  Add support for "Advanced" option pages. These option
	pages begin with the characters "_+".

2002-10-27  Derek Atkins  <derek@ihtfp.com>
	* gncInvoice.[ch]: create gncInvoiceGetTotal(), which currently does
	  nothing but will eventually return the actual invoice total.
	* dialog-invoice.c: add a summary bar with the invoice total
	* invoice.glade: add a summary bar dock at the bottom of the page.
	Partial fix for bug #96833

	* gncInvoice.c -- implement GetTotal() -- fixes #96833

	* invoice.glade -- add "View->SummaryBar" item to turn it off.

2002-10-27  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/*.c: add #include config.h for correct
	i18n.

	* src/app-utils/prefs.scm, src/import-export/hbci/hbci.scm: Move
	preference creation into hbci module. Renamed that preference tab
	into "Online Banking & Importing".

	* src/import-export/hbci/*: Add Direct Debit HBCI action. More
	work on error handling and user feedback. Make the caching of the
	PIN a user preference.

	* po/de.po, po/glossary/de.po, po/POTFILES.in: Update German
	Translation.

	* configure.in, macros/openhbci.m4: Update required OpenHBCI
	version (now 0.9.3 i.e. current OpenHBCI's CVS).

	* src/app-utils/prefs.scm,
	src/import-export/qif-import/druid-qif-import.c: Add cache-PIN
	preference for HBCI. Rename preference tab to "Importing/Online".

2002-10-27  David Hampton  <hampton@employees.org>

	* src/app-utils/option-util.c
	(gnc_option_db_section_reset_widgets): New function to reset one
	section [page] of widgets at at time.

	* src/gnome-utils/dialog-options.c: The cancel button should
	always be sensitive. The OK button should only be sensitive if
	changes have been made to an option. #96465
	(gnc_options_dialog_new): (gnc_options_dialog_append_page): Move
	the reset button to be per-page instead of global. #90370

	* accounts/fr_FR/*: Frederic Lespez's fixes for the
	French account templates.

	* src/import-export/qif-import/druid-qif-import.c: Add a working
	directory for the qif-import code; defaults to user homedir. Use
	the working directory in the file selection dialog and track any
	directory changes by the user. #95668

	* src/gnome-utils/gnc-mdi-utils.c (various routines): When
	switching between MDI styles, the gnome MDI code creates and
	destroys widgets at will.  Because of this, remember the list of
	menu/toolbar *names* to be modified and then look up the widgets
	each time a change needs to be made to the visibility/sensitivity
	of the item. #96302
 	(gnc_mdi_child_changed_cb): If the MDI style is "toplevel", then
	don't update the state of any menu/toolbar items when switching
	out of a window.  Leave them as they were since that window is
	still visible to the user.

	* src/report/report-gnome/window-report.c
	(gnc_report_window_load_cb): Don't try to unprotect the #f
	object. Scheme doesn't normally care, but this will crash if
	running under gdb.

2002-10-26  David Hampton  <hampton@employees.org>

	* src/app-utils/option-util.c (gnc_commit_option): Use the new
	function to send an error message to the gui code instead of
	printing a message on stdout. #96166

	* src/gnome-utils/gnc-currency-edit.c (currency_compare): Sort by
	currency identifier since it appears first in the display. #96159
	Change a couple other functions so that the full currency name is
	always displayed in the widget.

	* src/gnome/druid-hierarchy.c: Replace the commodity editor with a
	currency selector. #95594

2002-10-26  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/dialog-sxsincelast.c (sxsincelast_tc_row_sel): Place
	the template transaction associated with the SX in the window,
	fixing Bug#93900.

	* src/gnome/dialog-sxsincelast.c (sxsincelast_populate): Process
	the auto-create transactions if there are only auto-create,
	no-notify SXes as a result of the since-last-run-dialog
	invocation; fixes bug #96944.

	* src/gnome/dialog-sxsincelast.c (sxsincelast_populate): Changed
	return-value from sxsincelast_populate to reflect all the possible
	conditions, allowing...

	* src/gnome/window-main.c (gnc_main_window_sched_xaction_slr_cb):
	Changed since-last-run-dialog-create return-value handling; fixes
	Bug#90060.

	* src/gnome/dialog-sxsincelast.c (add_to_create_list_to_gui):
	Setup of to-create page more correct; the first item which needs
	interaction is selected, or the widgets are set to inactive.
	Fixes Bug#96669 and Bug#96665.

2002-10-26  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/gnc-hbci-kvp.h,
	src/import-export/hbci/gnc-hbci-gettrans.c: Remember the user's
	date of last transaction retrieval. REQUIRES updating to current
	OPENHBCI CVS.

	* src/import-export/hbci/gnc-hbci-utils.c: Cache the created
	HBCI_API for subsequent calls. Will also cache the user's
	password. Also, make more meaningful error handling.

	* src/import-export/hbci/dialog-daterange.[hc]: Add a dialog
	asking for the date range of transactions to retrieve.

	* src/engine/date.h: Add timespecToTime_t function.

2002-10-25  David Hampton  <hampton@employees.org>

	* src/gnome/window-register.c: Use a better function for making
	the register contents immutable.  Splits can now be viewed but not
	changed.  Make register altering menu/toolbar items insensitive.

	* src/register/ledger-core/split-register.c
	(gnc_split_register_set_read_only): New function to set the
	read-only bit on the table underlying the register window.

	* src/register/register-gnome/gnucash-sheet.c: Remove no longer
	used function from first pass at the placeholder account code.

	* src/gnc-ui.h:
	* src/gnome/window-main.c: Add a new help menu item for Wilddev and
	rename another one. #96821

	* src/gnome/window-register.c: Split the transaction delete
	functionality into two functions. The first deletes a split or
	transaction, as expected. The second handles what was an odd
	corner case of the delete command, and removes all splits except
	for the one attached to the current register. This is now called
	the "reinitialize" function. (Fixes 85904).

	* src/register/ledger-core/split-register.h:
	* src/register/ledger-core/split-register-p.h: Make
	gnc_split_register_get_current_trans_split() a public function.

	* src/register/ledger-core/split-register.c
	(gnc_split_register_empty_current_trans_except_split): New
	function that lets you specify which split to keep when
	reinitializing a transaction.

	* src/gnome-utils/gnc-gui-query.c: Add a couple more variant ways
	to create a dialog box.  At some point these should all be cleaned
	up and maybe made a subclass of a gnome dialog.

	* src/register/ledger-core/gnc-regwidget.c:
	* src/engine/Transaction.c: Move trans_has_reconciled_splits()
	function from one file to another and rename it
	xaccTransHasReconciledSplits().

2002-10-24  Christian Stimming  <stimming@tuhh.de>

	* src/gnome/window-acct-tree.c,
	src/import-export/hbci/gncmod-hbci.c: fix more menu item strings.

2002-10-23  Derek Atkins  <derek@ihtfp.com>
	* de.po: fix a string for Christian so it compiles.

	* new translations require leading underscores for menu names
	  or the lookups fail when adding new menus.  In particular,
	  "_Actions", "_Toolbar", and "_Status Bar".

	* gnc-backend-file.c: make sure a file HAS a date before actually
	  removing it.  Otherwise you will remove a foo.xac file by accident.

2002-10-22  Derek Atkins  <derek@ihtfp.com>
   Fix a bunch of compiler warnings:
	* Transaction-matcher.c: use "=" not "==" to set a variable
	* gncmod-generic-import.c: comment out unused variable "engine"
	* dialog-scheduledxaction.c: comment out unused function
	* gnc-splash.[ch]: change splash-update to take a const string

2002-10-22  Christian Stimming  <stimming@tuhh.de>

	* po/glossary/gnc-glossary.txt, po/glossary/*: Update glossary
	(added Scheduled Transactions). Merge glossaries from 1.6 branch
	onto HEAD.

2002-10-21  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/dialog-scheduledxaction.c (gnc_sxed_update_cal): Check
	validity of date before subsequent processing; fixes Bug#96467.

	* src/gnome-utils/gnc-dense-cal.c
	(gnc_dense_cal_mark)
	(gnc_dense_cal_mark_remove): Queue a re-draw when marks are added
	or removed; fixes Bug#96468.

	* src/gnome-utils/gnc-frequency.c (year_range_sels_changed): Emit
	"changed" signal when the year-range selections change; fixes
	Bug#96470.

	* src/gnome/dialog-scheduledxaction.c (gnc_sxed_check_consistent):
	Free the name str after we've used it [conrad-found, unfiled bug].

	* src/gnome-utils/gnc-dense-cal.c (populate_hover_window): Now
	more tolerant of mark sets without names.

	* src/gnome/druid-loan.c:
	* src/gnome/dialog-scheduledxaction.c: Cleaned up compilation
	warnings so -Werror can go back on soon.

	* src/gnome/window-main.c (gnc_main_window_create_menus): Reworded
	MenuItem for loan-repayment druid as per Chris' suggestion.

2002-10-21  Derek Atkins  <derek@ihtfp.com>
	* app-utils/options.scm -- fix (find-first-account) to search subaccounts

2002-10-20  Benoit Grgoire  <bock@step.polymtl.ca>
	* src/import-export/Trasaction-matcher.c: Fix compiler warnings.
	* src/import-export/ofx/gnc-ofx-import.c: Give the user more information
	  for account creation.

2002-10-20  Derek Atkins  <derek@ihtfp.com>
	* configure.in -- remove -Wno-uninitialized -Wno-unused, in preparation
	  for the "new g-wrap" which should output code that wont cause these
	  warnings.

	* gnc-vendor-xml-v2.c, test-customer.c, test-vendor.c -- fix compiler
	  warnings.
	* dialog-options.c -- remove unused variable
	* gnc-regwidget.c -- remove unused (module) variable

	* Peter O'Gorman's MacOS patch
	  This is mostly just a bunch of libgncmod_name_LTX_ symbol changes to
	  the modules.
	  Also had to remove -Werror from hbci/Makefile.am due to darn cc
	  warnings about order of includes.

2002-10-20  Benoit Grgoire  <bock@step.polymtl.ca>
	* Investment transactions now create two accounts, one is for the stock,
	  the other is the account defined by the FI, where the cash is swapped.

2002-10-19  Derek Atkins  <derek@ihtfp.com>
	* gnome/gw-gnc-spec.scm -- add "#include <gnc-splash.h>"
	* configure.in -- don't let GNOME_COMPILE_WARNINGS overwrite our list

	* configure.in -- don't double-add -Wall.  Only add -Wall for GCC.
	  let the user know what additional warnings are being added.

	* fix bug #95844 -- fix qif-import/qif-parse.scm to match
	  qif-io-core/qif-parse.scm w.r.t. parsing the numbers.

	* src/dialog-account/dialog-account.c,Makefile.am
	  prove to myself that there is no real dependency on src/gnome
	  by removing top-level.h and window-main.h and recompiling....
	  no warnings were output by the compiler.

	* dialog-account.[ch] -- add "destroy-window" callback registration.
	  remove dependencies on register/ledger
	* split-register.c -- register "destroy-window" callback

	* move dialog-account.[ch] from src/dialog-account to src/gnome-utils
	  fix all references (Makefile.am) to remove src/dialog-account
	* configure.in: remove src/account-dialog/Makefile

	* move gnc-account-sel.[ch] from src/gnome to src/gnome-utils

	* app-utils/options.scm -- define new account-sel options that let you
	  "select" an account.  You can only select one account using this option.
	* app-utils/app-utils.scm -- export new account-sel option types
	* gnome-utils/dialog-options.c -- use the GNCAccountSel to implement
	  the account-sel option.
	* business/business-reports/*.scm -- change to using the new account-sel
	  option type.  Fixes bug #96137

2002-10-19  Christian Stimming  <stimming@tuhh.de>

	* po/POTFILES.in: Update potfile.in for upcoming translations.

2002-10-18  Christian Stimming  <stimming@tuhh.de>

	* accounts/fr_FR/*: Some bug fixes by frederic.lespez@wanadoo.fr.

	* configure.in, macros/openhbci.m4: Add version control macro for
	OpenHBCI.

2002-10-18  Derek Atkins  <derek@ihtfp.com>
	* dialog-date-close.c: remove unused function and non-necessary header

	* gncEntryLedgerModel.c: don't use the currency symbol when printing
	  value and tax cells.

	* Matthew Vanecek's gncQueryPrint() patch

2002-10-18  Benoit Grgoire  <bock@step.polymtl.ca>

	* Implement a working commodity matcher for the generic import
	module.
	* src/gnome-utils/dialog-commodity.c,.h: Extend the API to allow
	the user to be told what he is trying to match, and to fill in
	default values for new commodities
	* Use the new matcher in the ofx module.  The latest libofx CVS
	is needed.

2002-10-17  Derek Atkins <derek@ihtfp.com>

	* fix bug #96030 -- change "Customer/Vendor Name" to "Company Name"

	* remove (old, unused) dialog-job-select.[ch] files from CVS.
	* fix bug #96035 -- do not limit searches to the last-chosen object.

	* fix some compiler warnings in dialog-customer and dialog-vendor
	* add a new function: gncOwnerIsValid() which is really a
	  scheme-helper to detect whether an owner is holding a NULL value
	  (i.e. a real container with no value in the container).
	* fix part of bug #96032 -- use (gnc:owner-is-valid) to detect owner
	  existence.

	* fix bug #95954 -- cache backend query compiles.  Add a hash table
	  to map book -> backend compile and fill it in when the terms are
	  recompiled.

	* add a 'modality' flag to the gnc-account-sel (which new-account API)
	  so that the new-account-window can be called using the modal dialog
	  interfaces.
	* use the GNCAccoutSel in the date-close dialog (fixes bug #94973)

	* create search-reconciled.[ch] to implement searches by reconcile flag
	* gnome-search/search-core-type.c: hook in "reconciled" type,
	  via the RECONCILED_MATCH_TYPE string
	* src/engine/Transaction.h -- add RECONCILED_MATCH_TYPE string
	* hook into the Find Transactions window (fixes bug #95634)

	* src/engine/test/test-querynew.c -- add a warning message about
	  known CRITICAL messages, which are safe to ignore..

	* gnc-ledger-display.c -- honor user defaults for A/R and A/P windows

	* table-model.h -- add a flag for "READ_ONLY" cells, to all you to
	  specify a cell as readonly.
	* table-allgui.c -- allow the cursor to enter a READ_ONLY cell.  Make
	  sure "editable" is FALSE for READ_ONLY cells.
	* split-register-model.c -- If the TxnType != NONE, set all cells as
	  READ_ONLY.
	* fixes bug 96028 by making posted invoices and payments read-only.

	* gnc-ledger-display.c -- fix a memory leak (you need to g_list_free()
	  the returned list from xaccGroupGetSubAccounts(), according to the docs)

2002-10-16  Joshua Sled  <jsled@asynchronous.org>

	* src/app-utils/gnc-exp-parser.c (gnc_exp_parser_parse): This
	function now fails correctly if there are un-bound variables in
	the expression.  This causes expressions like 'AUD 1.23' to fail.
	This is related to, but not a fix for, Bug#95474.

2002-10-16  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/hbci-account-picker.c,
	dialog-hbci-trans.c, glade/hbci.glade: Grey out unimplemented
	buttons.

2002-10-16  Derek Atkins  <derek@ihtfp.com>
	* add more debugging to new PostgresBackend functions

	* fix call to pgend_trans_rollback_edit()
	* fix call to pgend_trans_commit_edit()

2002-10-15  Derek Atkins  <derek@ihtfp.com>
	* Christian Krause's dialog-utils patch for style

	* Update the Backend API in the engine for better plugability.
	  Change the File, Net, and Postgres backends to use the new API.
	  Fixes bug 94648.

	* src/engine/engine-helpers.c: fix a compiler warning

2002-10-15  David Hampton  <hampton@employees.org>

	* src/gnome-utils/dialog-utils.c (gnc_handle_date_accelerator): Be
	more careful about what keystrokes are passed onto the menuing
	system. Clean up the code somewhat. #95787

	* src/gnome/reconcile-list.c (gnc_reconcile_list_select_row):
	(gnc_reconcile_list_unselect_row): If the user pressed the space
	key to toggle a transaction, move the focus down to the next row
	of the transaction.  This lets the user toggle successive
	transactions by repeatedly pressing the space bar (instead of
	alternating the space and the down arrow key.)

2002-10-14  David Hampton  <hampton@employees.org>

	* src/app-utils/prefs.scm: By default, remove old files after 30
	days.

	* src/gnome/dialog-print-check.c:
	* src/gnome/glade/print.glade: Use radio buttons for setting how
	the month is displayed. Reorganize the code.

2002-10-14  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/dialog-sxsincelast.c (process_auto_create_list): Use
	the appropriate function for creating toCreateInstances to fix
	Bug#95637.
	(sxsld_get_future_created_txn_count): Added to assist in
	next-page-determination.
	(sxsld_disposition_changed): Correctly predicts
	post-processing/future txn count; fixes Bug#95734.

	* src/app-utils/gnc-exp-parser.c (func_op): Remove
	seemed-like-a-bad-idea explicit negation of calculated values;
	fixes Bug#95781.

2002-10-14  Derek Atkins  <derek@ihtfp.com>
	* src/backend/file/test-xml-transaction.c -- use gnc_numeric_equal()
	  to compare split value and quantities in tests, because Splits can
	  adjust those values based on the commodity.

	* src/backend/file/test/test-file-stuff.c -- don't spew so much

	* src/test-core and src/engine/test-core should not be added to
	  the gnucash-build-env (noinst_ is a static library)

	* add library directories for "make check"

2002-10-14  Chris Lyttle  <chris@wilddev.net>

	* src/import-export/Makefile.am: fix make dist breakage
	* src/engine/Makefile.am: more fixes

2002-10-13  Chris Lyttle  <chris@wilddev.net>

	* accounts/fr_FR/Makefile.am: fix make dist breakage
	* rpm/gnucash.spec.in: update for release
	* configure.in: change to version 1.7.1
	* AUTHORS: moved Benoit to main developers
	* NEWS: added section for 1.7.1 release.

2002-10-13  David Hampton  <hampton@employees.org>

	* src/scm/printing/print-check.scm: The check printing setup
	dialog is now called directly, instead of as a callback from the
	check printing code.

	* src/gnome/window-register.c (gnc_register_print_check_cb): Call
	the check printing setup dialog directly.

	* src/gnome/dialog-print-check.c
	(gnc_ui_print_compute_new_format): Give feedback on the format
	string being used. (gnc_ui_print_check_dialog_create): Rework for
	being called directly from the register code.  Now hiding instead
	of destroying the dialog, so remove hooks to remember state.  If
	the current register already has a print dialog open, reuse
	it. (gnc_ui_print_check_dialog_destroy): Hide the dialog instead
	of destroying it. (gnc_ui_print_check_dialog_ok_cb): Call the
	scheme printing code directly.

	* src/gnome/gw-gnc-spec.scm: Remove unneeded references to check
	printing.

2002-10-13  Joshua Sled  <jsled@asynchronous.org>

	* src/register/ledger-core/gnc-regwidget.c
	(gnc_register_create_tool_bar): Added support for tooltips to the
	toolbar of the gnc-regwidget
	(gnc_regWidget_new): Added support for conditionally disallowing
	various capabilities of the reg-widget, as scheduled transactions
	use of the regwidget requires.  Fixes Bug#95009.

2002-10-12  David Hampton  <hampton@employees.org>

	* src/scm/printing/print-check.scm (gnc:*stock-check-positions*):
	Move the bottom check up by 1/2 inch. #95016 (gnc:print-check):
	Actually print the memo field on the check. #95015

	* src/gnome/window-register.c (gnc_register_print_check_cb): Print
	the Notes field of the transaction, not the memo field of the
	split. #95015

	* src/gnome/dialog-print-check.c
	(gnc_ui_print_compute_new_format): Update the sample date value in
	the dialog box any time one of the controls is updated.
	(gnc_ui_print_check_format_changed_cb): New callback function.
	(gnc_ui_print_check_dialog_create): Update for new controls and
	for the dynamically updating sample date string. #95022

	* src/gnome-utils/dialog-utils.c (gnc_option_menu_init_w_signal):
	Set up an option menu with an attached callback so that the
	program knows when the user changes the setting of the option
	menu.

	* src/engine/date.c (getDateFormat): New routines for getting
	preferred date style. (getDateFormatString): Get the numeric
	format string for a date, i.e. "12/31/2000".
	(getDateTextFormatString): Get the textual format string for a
	date, i.e. "December 31, 2000".

	* src/engine/gnc-session.c:
	* src/app-file/gnc-file.c:
	* src/app-utils/gnc-ui-util.c: Move gnc_get_current_session() into
	gnc-session.c. #94551

2002-10-09  Benoit Grgoire  <bock@step.polymtl.ca>

	* src/import-export/Account-matcher.c: Change "Account ID" text
	to "Full account ID" and make it translatable.
	* src/import-export/ofx/gnc-ofx-import.c: Use the new account
	name field of LibOFX to help the user identify the account.
	Starting now, until further notice you 	need LibOFX CVS available
	at http://sourceforge.net/cvs/?group_id=61170 to build the
	ofx module.

2002-10-08  Derek Atkins  <derek@ihtfp.com>
	* books do not need to generate events
	* however they should generate destroy events

2002-10-07  Derek Atkins  <derek@ihtfp.com>
	* Rename "print invoice" to "printable invoice"

	* Applied Matt Martin's advanced-portfolio patch.

	* created the backend-api document
	* removed the old Query code (bug #94318)

2002-10-07  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/druid-hbci-initial.c: Fix and activate
	the initialization functions again; therefore, the HBCI subsystem
	is now open for testing (requires openhbci-CVS as of Oct 03).

	* src/import-export/hbci/hbci-interaction.[hc]: Close button
	hides, not destroys.

	* src/import-export/hbci/hbci-account-picker.c: Fix account picker.

2002-10-06  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/druid-loan.c: The druid now enforces valid account
	selection for the GNCAccountSel widgets; fixes Bug#90784.

	* src/gnome/gnc-account-sel.c (gas_destroy): GNCAccountSel
	now cleans up after itself, especially with removing its engine
	event observation.  Moved from src/gnome-utils/ to src/gnome/
	because of circular dep introduced below.

	* src/dialog-account/dialog-account.c
	(gnc_ui_new_account_with_types): Added new function to create a
	NewAccount dialog with only a valid-types filtering list.

	* src/gnome-utils/gnc-account-sel.c
	(gnc_account_sel_set_acct_filters): Added support for filtering
	the accounts available through the GNCAccountSel.
	(gnc_account_sel_set_new_account_ability): Added support for a
	conditional "New..." button which allows the creation a new
	account.  If the selector has a filter in place, the filter will
	apply to the new-account creation as well.

	* src/gnome-utils/gnc-account-sel.c: Added ifdefs, comments around
	regions pertaining to unimplemented feature of completion.
	Fix for Bug#90779.
	(gnc_account_sel_event_cb): Added support for updating list
	contents when the account tree changes; the current selection is
	respected if the account still exists; fixes Bug#94951.

	* src/gnome/dialog-sxsincelast.c
	(sxsld_process_to_create_instance): Handle the corner case of not
	incrementing the state while postponing/ignoring a
	never-been-created SX.  Handle only incrementing the counters of
	newly-come-due SXes.

	* src/engine/SchedXaction.c (gnc_sx_create_temporal_state): Fix
	corner case of creating the temporal state of a never-been-created
	SX; fixes Bug#94947.

2002-10-06  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/gnc-hbci-gettrans.c, gnc-hbci-actions.c:
	More work on transaction invocation and importing. Is actually
	usable now.

2002-10-06  Derek Atkins  <derek@ihtfp.com>
	* Rename a bunch of reports as per Chris Lyttle's suggestions
	* Change the Report MENU names, not the REPORT names (except for
	  the "Welcome to GnuCash" report)

	* report-gnome/report-gnome.scm -- Create sorted menu items

	* taxtxf.scm -- Change "Accounts -> Tax Information" to Edit->Tax Options

2002-10-06  David Hampton  <hampton@employees.org>

	* src/engine/Account.c (xaccAccountGetDescendantPlaceholder): New
	function to check all descendants of an account to see if any of
	them is a placeholder account.

	* src/gnome/window-register.c (gnc_reg_get_placeholder):
	(regWindowDetermineReadOnly): New routines for determining if a
	register contains a placeholder account, and putting up a nice
	dialog about it.

	* src/register/register-gnome/gnucash-sheet.c
	(gnucash_register_set_sensitive): New routine to make the sheet
	insensitive for read-only accounts.

	* src/gnome-utils/dialog-utils.c (gnc_handle_date_accelerator): If
	an alphabetic character has any modifiers applied to it, pass it
	on to the window manager.  Fixes 88520.

	* src/register/ledger-core/split-register-model-save.c
	(gnc_split_register_save_data_new): Add a new arg to the register
	save data to indicate whether the transaction the user is working
	on is in expanded mode. (gnc_split_register_save_cells): Don't
	balance other split of two, when the register is in expanded mode.

	* src/register/ledger-core/split-register-control.c
	(gnc_split_register_auto_completion): Add new arg to function
	call.

	* src/register/ledger-core/split-register.c
	(gnc_split_register_save): Add new arg to function call.


2002-10-05  David Hampton  <hampton@employees.org>

	* src/engine/gnc-engine-util.c (gnc_set_xxx_message):
	(gnc_send_gui_xxx): New routines that let the engine display gui
	warning/error messages.  The callbacks must be initialized by the
	gui layer.

	* src/gnome-utils/gnc-gui-query.c: Reorganize some of the
	gnc_xxx_dialog routines. Add a couple of new routines that take a
	va_list but no window.

	* src/gnome-utils/gncmod-gnome-utils.c: Initialize the gui
	callbacks in the engine.

	* src/gnome/glade/newuser.glade: Remove the version number. Its
	already in the splash screen.

	* src/scm/main.scm (gnc:main): Erase the splash screen before
	starting the new user dialog.

2002-10-05  Derek Atkins <derek@ihtfp.com>
	* Fix the autoconf-2.13/2.52/2.53 problems -- Gnucash should now
	  work on all versions of auto-tools, although it now requires GnuMake.

	* configure.in -- just pass LIBOBJS directly to the Makefile; pass
	  a sed script that uses '$U' (which is a 2.53ism, but works right
	  on 2.13) to the Makefile.
	* lib/libc/Makefile.am -- Use LIBOBJS and GnuMake's $(shell) syntax
	  to create the list of libobjects to be linked into "libc-missing"

	* Check for gettext in -lintl for MacOS

	* Peter O'Gorman's patch for fixing libtool on darwin

	* Implement a core CheckboxCell register type (note, still needs a
	  pretty Gnome implementation)

	* use the checkbox cell in the EntryLedger

	* make the Invoiced? cell mutable under limited conditions

2002-10-03  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/gnc-hbci-gettrans.[hc]: Separate the
	Get-Transaction related HBCI functions into this file. Much more
	work here, so that most of transaction information is now filled
	into the right places. Requires totally up-to-date OpenHBCI CVS,
	though.

	* src/import-export/hbci/gnc-hbci-getbalance.[hc]: Separate the
	Get-Balance related functions to a separate file. Add invocation
	of account reconcile upon successful balance retrieval.

	* src/import-export/hbci/hbci-progressmon.c: Change to a
	GnomeDialog here, and fix handling of parent window.

	* src/gnome/window-main-summarybar.c: Introduce lookup of currency
	symbol. However, this doesn't quite fix bug #91724, since that one
	is related to the currency_item->assets_label and not to the label
	in front of that. What a pity.

	* src/RecnWindow.h (recnWindowWithBalance),
	src/gnome/window-reconcile.c: Add function to invoke account
	reconciliation with balance and date given.

2002-10-03  Derek Atkins <derek@ihtfp.com>
	* src/scm/main.scm -- move (setlocale ...) earlier in the startup.
	  it needs to run before app-utils is loaded (because gnc_localeconv()
	  caches the first run -- so if that happens before setlocale, you're
	  stuck!)  fixes 89471 and partially fixes 87729

2002-10-02  Derek Atkins <derek@ihtfp.com>
	* configure.in: check for ltdl.h

	* src/backend/postgres/gncquery.c - create proper SQL, ignore bookGUID

2002-10-01  Herbert Thoma  <herbie@hthoma.de>

	* /src/report/standard-reports/advanced-portfolio.scm: new report
	which shows money-in, money-out and gain of stock and fund accounts
	(based on the work of Martijn van Oosterhout and portfolio.scm
	by Robert Merkel)

	* src/report/standard-reports/standard-reports.scm: add
	advanced-portfolio.scm to gncscmmod_DATA

	* doc/build-suse.txt: updated for GnuCash 1.7

2002-10-01  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/gnc-hbci-actions.c: More work and fixes
	for balance/transaction retrieval.

2002-09-30  Derek Atkins <derek@ihtfp.com>
	* get (alpha) qif-io-core to load again and "make check" to
	  start working (sort-of).  Still needs more work.

	* wrap gnc_commodity_table_add_default_data()
	* src/engine/gnc-session.c -- don't try to modify a the path of a file: URL
	* src/engine/Transaction.c -- fail in mallocTrans if book is NULL
	* fix qif-io-core: use (gnc:transaction-set-currency) (not commodity)
	* qif-io-core.scm: need app-utils and to re-export simple-format
	* qif-io-core/test/Makefile.am: add app-file and backend/file dirs to tests
	* fix test-import-phase-1.scm: load app-file for symbols, fix
	  the commodity table; fix the "file save" portion

	* src/scm/main.scm -- fix menu issue for LANG=de_DE.. "Preferences" is
	  really "_Preferences"

	* src/gnc-test-env: define LTDL_LIBRARY_PATH
	* src/bin/overrides/gnucash-build-env: fix trailing whitespace bug

2002-09-29  Joshua Sled  <jsled@asynchronous.org>

	* src/backend/file/io-gncxml-v2.c
	(write_template_transaction_data): Updated for new
	backend-structure arguments, to not crash in the call to
	xml_add_trn_data.  Fixes unfiled bug.

	* src/gnome/dialog-sxsincelast.c:
	* src/backend/file/gnc-schedxaction-xml-v2.c
	(sx_defer_last_handler)
	(sx_defer_rem_occur_handler, sx_defer_inst_count_handler)
	(sx_defer_inst_handler):
	* src/engine/SchedXaction.c (gnc_sx_add_defer_instance)
	(_temporal_state_data_cmp, gnc_sx_remove_defer_instance)
	(gnc_sx_get_defer_instances):
	Added and modified to support postponing to-be-created SXes; fixes
	Bug#88981.

2002-09-29  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/gnc-hbci-actions.[hc]: Initial code for
	transaction download with usage of generic transaction
	import. Requires OpenHBCI CVS update.

2002-09-29  Benoit Grgoire  <bock@step.polymtl.ca>

	* src/import-export/Transaction-matcher.c: Fix	segfault when
	importing into a gnucash account which has no splits.

	* src/import-export/ofx/gnc-ofx-import.c: Code simplification for
	commodity autoselection.

2002-09-28  Derek Atkins  <derek@ihtfp.com>

	* fix g-wrap testing in configure to work with an existing config.cache

2002-09-26  David Hampton  <hampton@employees.org>

	* README: Updated the section on running gnucash.

	* doc/Makefile.am: Automatically update the date and version
	number in the man pages.

	* src/app-file/gnc-file.c(gnc_post_file_open): Change the button
	labels to be even more explicit.

	* src/report/standard-reports/balance-sheet.scm: Use the report
	name from the options instead of a hard coded report title.

2002-09-26  Benoit Grgoire  <bock@step.polymtl.ca>

	* src/import-export/ofx/gnc-ofx-import.c: The default commodity
	and account type are now preselected from OFX provided information
	when user choses to creates a new gnucash account in the account
	matcher dialog.  Fix a segfault when clicking cancel in the file
	selection dialog.

	* src/import-export/Account-matcher.c, gnc-generic-import.h:
	-Fix the new_account_default_type parameter of
	gnc_import_select_account() not selecting default type properly.
	-Add auto_create parameter to gnc_import_select_account().
	If this parameter is 0 and the function is called, it will silently
	return NULL if no matching account is found, instead of asking the
	user to select or create an account.
	-Clicking cancel will now cancel the import for the whole account
	instead of having to click cancel for each transaction.

2002-09-25  David Hampton  <hampton@employees.org>

	* src/gnome-utils/gnc-gui-query.c: Add routines to put up the
	various question/warning/error dialogs with a variable number of
	buttons.

	* src/app-file/gnc-file.c (gnc_file_set_shutdown_callback): Add a
	callback so the gnome specific code can call the "top level"
	shutdown function. (gnc_post_file_open): Rework the "file locked"
	query to include a "Quit" option.

2002-09-25  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/gnc-hbci-actions.c: Distinguish
	booked/noted balance now.

	* src/import-export/hbci/dialog-hbcitrans.c: Extend HBCI
	transaction dialog to use the gnc-amount-edit widget.

2002-09-23  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/gnc-hbci-actions.c,
	src/import-export/hbci/dialog-hbcitrans.[hc] : Connect the HBCI
	transaction-invocation and gnucash xfer dialog.

	* src/gnome/dialog-transfer.[hc]: Add set_memo access function.

2002-09-23  Benoit Grgoire  <bock@step.polymtl.ca>

	* src/import-export/Transaction-matcher.c, generic-import.glade:
	-Transactions just downloaded are now ignored from the matchlist.
	-Reimplement transaction duplicate detection using unique-ID.
	Transactions with a negative confidence are those that would normally
	be completely ignored (will be a user preference).
	-Added a split's memo column to downloaded list and match list
	(will be possible to turn it off in user prefs)
	-Fix segfault when toggling buttons without a transaction selected.
	-Fix action buttons refresh bugs.
	-Grayout inappropriate selections for action list and change the look
	of the buttons.
	-The REPLACE action really works this time.

	* src/import-export/generic-import.glade: Change the title of the
	transaction matcher and change the look and alignment of
	the action buttons.

2002-09-22  Benoit Grgoire  <bock@step.polymtl.ca>

	* src/import-export/gnc-generic-import.c: Remove obsolete file now
	split into Account.c Transaction.c and Utilities.c

	* src/import-export/generic-import.glade: Change label of "Online ID"
	column to "Account ID" in the account matcher for consistency

2002-09-19  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/gnc-hbci-actions.[hc], gnc-hbci-cb.[hc],
	dialog-hbcitrans.[hc], gncmod-hbci.c,
	src/import-export/hbci/glade/hbci.glade: Added dialog and HBCI
	code for HBCI online transaction invocation, and added a menu item
	to call this dialog.

2002-09-18  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/gncmod-hbci.c: Add menu-extension code
	for register menu items.

	* src/import-export/hbci/gnc-hbci-cb.h: add callback for register
	window's menu.

	* src/import-export/hbci/gnc-hbci-actions.c: Fix/improve first
	real HBCI task so that it might actually run.

2002-09-17  Christian Stimming  <stimming@tuhh.de>

	* src/gnome/window-register.c (regWindowLedger): Uses the
	menu_setup_with_data introduced below.

	* src/gnome-utils/gnc-menu-extensions.[hc]
	(gnc_extensions_menu_setup_with_data): Added, so that windows can
	pass userdata on to the extension menu's callback functions.

	* src/gnome/window-register.[hc]: Add getter functions for RegWindow
	data.

2002-09-17  David Hampton  <hampton@employees.org>

	Add progress bar to main window.  Shows progress of read, write
	and export functions.  Adds a callback for the backend to pass a
	percentage done number out to the session code, and a callback for
	the session code to pass this percentage out to the caller's gui
	display function.

	* src/app-file/gnc-file-p.h:
	* src/app-file/gnc-file.c (gnc_file_set_pct_handler): Add a file
	handler "percent done" routine that can be installed.

	* src/app-file/gnc-file.c (gnc_post_file_open) (gnc_file_save):
	Call the file handler routine pre/post file read/write, and pass
	the handler into the backend so that it can report percentage
	complete.

	* src/app-file/gnc-file.c (gnc_file_export_file):
	New export function.  This is the upper half of the exporting
	function.  This is designed similar to the read/write routines.

	* src/backend/file/gnc-backend-file.c
	(gnc_file_be_write_accounts_to_file): New export function.  This
	is part of the lower half of the exporting function.  This is
	designed similar to the read/write routines.

	* src/backend/file/io-example-account.c
	(gnc_write_example_account):New calling arguments.  Add counters.
	Invoke the percentage done callback where appropriate.

	* src/backend/file/io-gncxml-v2.c (add_schedXaction_local)
	(run_callback) (write_xxx): New calling arguments.  Add counters.
	Invoke the percentage done callback where appropriate.
	(file_rw_feedback): New function for XML read/write.  Computed
	percentage done then calls the callback function handed in from
	outside of the backend code.  (gnc_sixtp_gdv2_new): New auxiliary
	function. (gnc_book_write_to_xml_filehandle_v2)
	(gnc_book_write_accounts_to_xml_filehandle_v2): Remember count of
	items to process. (gnc_book_write_accounts_to_xml_file_v2): Other
	part of the lower half of the exporting function.

	* src/backend/file/io-utils.c (write_account_group)
	(write_accounts):New calling arguments.  Add counters.  Invoke the
	percentage done callback where appropriate.

	* src/backend/postgres/PostgresBackend.c:
	* src/backend/rpc/RpcBackend.c:
	* src/enfine/Backend.c:
	Initialize the new pointers in the backend data structure.

	* src/gnome/window-main.c (gnc_main_window_file_export_cb):
	The file export function was moved into gnc-file.c.

	* src/engine/Makefile.am:
	* src/engine/gnc-session-scm.[ch]: New files.  Moved the scheme
	session read/write hooks here because of the new callback. Keeps
	scheme out of the main session sources.

	* src/engine/gnc-session.c (gnc_session_load):
	(gnc_session_save): Added a callback for percentage done.
	(gnc_session_export): New export function. This is the middle of
	the exporting function.  This is designed similar to the
	load/save routines.

	* src/engine/gw-engine-spec.scm: New arguments to session
	load/save. New session export function.

	* src/gnome/gw-gnc-spec.scm: New function to destroy the splash screen.

	* src/gnome/top-level.c: No longer destroys splash screen.

	* src/scm/main.scm: I18n new splash screen strings. Destroy splash
	screen after loading data file.

2002-09-16  Derek Atkins  <derek@ihtfp.com>
	Fix bug #91413 -- Add TaxTable defaults to Customers and Vendors

	* business-core/gncCustomer.[ch] -- add API for TaxTable and TaxTableOverride
	* business-core/gncVendor.[ch] -- add API for TaxTable and TaxTableOverride
	* business-core/file/gnc-customer-xml-v2.c -- store TaxTable and TTOverride
	* business-core/file/gnc-vendor-xml-v2.c -- store TaxTable and TTOverride
	* business-gnome/dialog-customer.c -- display/choose TaxTable and TTOverride
	* business-gnome/dialog-vendor.c -- display/choose TaxTable and TTOverride
	* business-gnome/glade/customer.glade -- add TaxTable Menu and Override button
	* business-gnome/glade/vendor.glade -- add TaxTable Menu and Override button
	* business-ledger/gncEntryLedger.c -- set traverse_to_new = TRUE when
	  you create a new ledger.
	* business-ledger/gncEntryLedgerLoad.c -- don't load the ledger the
	  first time through (e.g. when there is no invoice and no entries).
	  Pull in the default TaxTable, TaxIncluded, and Discount flags.

2002-09-16  David Hampton  <hampton@employees.org>

	* src/business/business-gnome/search-owner.c:
	* src/gnome-search/search-xxx.c: Prefix various functions with
	gncs_ to prevent naming conflicts with system routines.

2002-09-15  Derek Atkins  <derek@ihtfp.com>
	* fix bug #93331
	* src/business/business-gnome/glade/payment.glade
	* src/business/dialog-tax-table/tax-tables.glade
		make resizable; increase default account-tree size

	* fix bug #93333
	* business-gnome/dialog-payment.[ch] --add API to create the payment
	  dialog with an initial value
	* business-gnome/dialog-invoice.c -- call the new payment API when
	  you try to pay an invoice from the invoice window or the invoice
	  search results.

	* business-ledger/gncEntryLedger.c -- fix vendor bills to print
	  subtotals properly on the current-line.

	* configure.in -- die during configure if g-wrap version is wrong

2002-09-15  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome-utils/gnc-dense-cal.c (gnc_dense_cal_mark): Fix
	assertion failure for ignorant callers, Bug#92779.

2002-09-14  David Hampton  <hampton@employees.org>

	Refactor the startup to display the splash screen faster (bug #92192)

	* src/app-utils/kvp-option-registry.scm -- use slib
	* src/gnome/gnc-splash.c -- add a progress bar to the splash screen.
	  don't timeout the screen, require the app to shut it down.
	* src/gnome/gnc-splash.h -- export new splash API
	* src/gnome/gw-gnc-spec.scm -- wrap init-splash and update-splash
	* src/gnome/top-level.c -- refactor gui_init into splash_init and gui_init.
	  destroy the splash screen once the main window is up.
	* src/gnome/top-level.h -- export init_splash_screen function
	* src/scm/main.scm -- refactor startup into multiple stages to bring the
	  splash screen up sooner.  Update the splash screen during different
	  stages of the startup.

	Font Problems

	* src/gnome/top-level.c (gnc_gui_init): Exit gracefully if the
	register fonts can't be loaded.

	* src/gnome/window-main.[ch] (gnc_shutdown): Export this function.

	* src/register/register-gnome/gnucash-style.c
	(gnucash_style_set_register_font_name):
	(gnucash_style_set_register_hint_font_name): Complain to the user
	if a font can't be loaded.  Don't release any existing font until
	the new font has been successfully loaded.
	(gnucash_style_init): Indicate if all fonts were loaded.

2002-09-14  Derek Atkins  <derek@ihtfp.com>
	Add TaxTable entries to Vendor Invoices (Bills); make sure it does
	not bleed over into billback items.  Fixes RFE #91415

	* business-core/gncEntry.[ch] -- change the API to provide
	  separate storage for Price, Taxtable information, etc. for
	  Invoices and Bills, for chargeback features
	* business-core/file/gnc-entry-xml-v2.c -- change the XML to
	  clearly separate the "bill" and "invoice" data.
	* business-core/gw-business-core-spec.scm -- change scheme API
	  to match the new gncEntry API

	* business-core/gncInvoice.c -- use new gncEntry API.  If posting
	  a bill, set the invoice-price on each "billable" item.

	* business-gnome/business-prefs.scm -- duplicate the Taxincluded
	  preference into Invoice Taxincluded and Bill Taxincluded.

	* business-gnome/dialog-invoice.c -- use proper Price (Invoice
	  Price or Bill Price) when sorting by price.

	* business-ledger/gncEntryLedgerP.h -- add "is_invoice" flag
	* business-ledger/gncEntryLedger.c -- set is_invoice at creation
	* business-ledger/gncEntryLedgerLayout.c -- add TaxTable columns to Bills
	* business-ledger/gncEntryLedgerLoad.c -- initialize the entry properly
	  based upon this being an invoice or a bill.  Use different global
	  pref's as well.
	* business-ledger/gncEntryLedgerModel.c -- Load/Save using the new API.
	  Make price-cell immutable if the ledger is an invoice-ledger and the
	  entry is attached to a bill.

	* business-reports/invoice.scm -- use new API

2002-09-07  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/gnc-generic-import.c, ...: Patch by Benoit
	Gregoire <bock@step.polymtl.ca>: This is the new transaction
	matcher GUI.  Basic functionality is 100% implemented.
	Transaction matching using unique-id was temporarily disabled to
	ease testing of the heuristics.  Will be re-implemented very soon.

2002-09-02  Derek Atkins  <derek@ihtfp.com>
	* src/gnome/.cvsignore: ignore gnc-version.h
	* src/report/report-system/html-style-info.scm: fix bug
	  (it should be gnc:amount->string, not ->string-helper)

2002-09-01  Derek Atkins  <derek@ihtfp.com>
	* configure.in: remove GNUCASH_BUILD_DATE
	* src/gnome/Makefile.am: build gnc-version.h, and #define a string
	  defining the time when gnucash was built (GNUCASH_BUILD_DATE)
	* src/gnome/gnc-splash.h: include the new gnc-version.h header

2002-09-01  David Hampton  <hampton@employees.org>

	* src/gnome-utils/gnc-menu-extensions.[ch]:
	* src/gnome-utils/gw-gnome-utils-spec.scm: Add support for a
	window name "prefix" to the menu extensions code.  All menu
	extensions must now indicate to which window they apply.

	* src/gnome/window-main.c: Added a prefix to the call that
	installs menu extensions.

	* src/business/business-gnome/dialog-invoice.c:
	* src/gnome/window-register.c: Now installs any menu extensions
	available for the window.

	* src/business/business-gnome/business-gnome.scm:
	* src/gnome-utils/gnc-menu-extensions.scm:
	* src/import-export/hbci/hbci.scm:
	* src/import-export/ofx/ofx-import.scm:
	* src/import-export/qif-import/druid-qif-import.c:
	* src/report/report-gnome/report-gnome.scm:
	* src/scm/main.scm: Add prefixes to the menu extensions.

2002-09-01  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/druid-hbci-initial.c: Adapt to latest
	changes in OpenHBCI -- requires OpenHBCI's CVS branch "aq-0_9"
	which is going to be the HEAD branch of OpenHBCI soon.

	* src/report/report-system/html-style-info.scm
	(gnc:default-html-gnc-monetary-renderer): Add new workaround to
	display the Euro symbol correctly in gtkhtml.

2002-08-28  Derek Atkins <derek@ihtfp.com>
	* Update README to mention g-wrap 1.3.2 (instead of 1.1.9)
	* Update ltmain.sh with a (commented-out) patch to maybe cope
	  with the "make install DESTDIR=..." problem.

2002-08-25  Derek Atkins <derek@ihtfp.com>
	* Pull up change from 1.6 to make "make dist" work on swig subdir
	without "swig" being installed.

2002-08-25  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/gnc-hbci-cb.h, gnc-hbci-actions.h, *:
	More HBCI work, including callbacks for account menu entries and
	the respective HBCI actions. Still nothing to test for the general
	public, though.

2002-08-18  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome-utils/gnc-frequency.c: Added support for a "changed"
	signal so callers can use their own calendar to show the effects
	of editing the FreqSpec.

	* src/gnome/dialog-sx-from-trans.c: Added support for using the
	dense-calendar for showing the effects of option changes.

	* src/gnome/dialog-scheduledxaction.c: Added editor support for
	using the dense-calendar for showing the effects of FreqSpec
	changes; re-arranged the editor layout to accommodate.  Added
	editor support for showing the last-occurred date of an SX.

	* src/gnome/glade/sched-xact.glade: Changes to sx-from-trans
	dialog, SX editor, GNCFrequency-widgets.

	* src/gnome/dialog-sxsincelast.c (sxsincelast_entry_changed):
	Added support for variable-entry parsing errors to go to an
	on-screen status bar instead of being printed to stderr
	[Bug#90354].

	* src/gnome/druid-loan.c (gnc_loan_druid_length_changed): Added
	change-handler to the total-loan-length spin; when it changes, the
	remaining-length spin changes the same [Bug#90785].
	(gnc_ui_sx_loan_druid_create): Adjusted the size/granularity of
	the interest-rate spin-button to 3 sig.digits. [Bug#90780].

	* src/gnome/glade/sched-xact.glade: Changed [back?] the
	shrink/auto-shrink flags on the since-last-run-druid, fixing
	Bug#90364 and strangely fixing Bug#90365.

2002-08-15  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/*: much more HBCI work. Ini-Letter of
	user can already be printed. However no information is *sent* to
	the bank or saved to disk so far, so everybody can play around as
	you like.

2002-08-14  Joachim Breitner <mail@joachim-breitner.de>

	It may not be appropriate for a newcomer in the gnucash community
	like me, but could you please please include this simple patch in
	the 1.6.7 release? The VWD source (already in Finance::Quote) is
	the only source that has the German Deka-Fonts.

2002-08-14  David Hampton  <hampton@employees.org>

	* business-gnome/Makefile.am: cross-link the business-core
	  library.  This appears to fix the "load on reiserfs" problem.

2002-08-14  Derek Atkins  <derek@ihtfp.com>

	* acinclude.m4: fix guile bounds-check to make sure guile-config exists

2002-08-13  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/*: more work on HBCI support. Added a
	progress window.

2002-08-11  David Hampton  <hampton@employees.org>

	* acinclude.m4:
	* configure.in: Add upper bounds checking on the versions of
	guile and g-wrap.

2002-08-11  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/dialog-pass.h: Added dialogs for password
	handling.

2002-08-10  David Hampton  <hampton@employees.org>

	* src/engine/Account.c (xaccAccountGetDescendants): New function
	for consolidating logic.

	* src/gnome/reconcile-list.c (gnc_reconcile_list_new): Use new
	xaccAccountGetDescendants function.

	* src/gnome/window-reconcile.c (recn_set_watches): Notice changes
	to all transactions in the reconciliation window, not just those
	transactions that are in the current account.

	* src/gnome-utils/gnc-mdi-utils.c (gnc_mdi_configure_toolbar_cb):
	Fix the gnc-mdi window to immediately track the toolbar text/icon
	setting instead of requiring a restart.

2002-08-10  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/hbci-interaction.[hc]: Add code for
	HBCI_API interaction. Will be migrated to gnucash-UI's code
	soon. Recent changes to HBCI code require yet another update to
	current OpenHBCI CVS.

	* src/import-export/hbci/*: Add druid-hbci-utils.[hc], implement
	more parts of HBCI setup. Requires update to current OpenHBCI CVS,
	though.

2002-08-09  Joshua Sled  <jsled@asynchronous.org>

	* src/engine/FreqSpec.c (gnc_freq_spec_compare),
	(int_cmp), (_gnc_freq_spec_get_min): Added to support ordering
	FreqSpecs for sorting.

	* src/gnome/dialog-scheduledxaction.c: Added support for
	column-sorting the SX list, resolving Bug#87865 fixed.  Cleaned up
	GDate allocation when done with them.  Fixed Bug#90326 relating to
	next-instance-date calculation, which was b0rken when the
	dense-calendar was added in cases where the next SX instance is
	outside of the visible calendar range.

2002-08-06  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/dialog-sxsincelast.c: Added support for saving the
	state of the ledger if a review-ledger is transitioned away from
	after a "simple" edit [Bug#90075].

	* src/gnome/dialog-sx-from-trans.c (sxftd_ok_clicked): *
	src/gnome/dialog-sxsincelast.c (gnc_sxsld_finish): Now updates the
	SX List [if open] when an obsolete SX is removed [Bug#84685].

2002-08-06  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/dialog-scheduledxaction.c (gnc_sxed_check_consistent):
	The pre-defined variable 'i' no longer blocks transactions from
	being created "auto-create".

	* src/calculation/expression_parser.c: Added documentation for
	function support in the expression parser.

	* src/gnome/dialog-sxsincelast.c (create_each_transaction_helper):
	Scrub created splits so they get setup correctly, fixing the
	"incorrect-running-balance" problem [Bug#89879].
	Wrote the oft-procrastinated memory-cleanup code; ensured [most]
	other dynamic memory allocation is clean.  Removed some dead
	code/debugging.

2002-08-06  David Hampton  <hampton@employees.org>

	* doc/sgml/*/Makefile.am: Tweak for newer versions of db2html.

2002-08-05  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/dialog-sxsincelast.c (add_reminders_to_gui): The SX
	nodes in the reminders tree are now not selectable, as is
	appropriate.
	(create_each_transaction_helper): Fixed a nasty problem with
	freeing a static string.
	(sxsincelast_populate): Be better about cleaning up after ourself
	during the initial instance generation.  Be better about writing
	clean, generic code.
	(processSelectedReminderList): Be better about writing clean,
	generic code.
	(to_create_prep): Empty the variable table when we transition into
	the page; closes Bug#84689.

2002-08-06  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/gnc-hbci-utils.[hc]: Added hbci functions
	that are to be used from the rest of the gnucash UI.

	* src/import-export/hbci/*: More work on HBCI support (HBCI data
	is now actually stored in book's and account's kvp frames).

	* src/import-export/gnc-generic-import.h: Clarified docs.

	* src/engine/kvp_frame.h: Clarified doc about kvp_value_get_string
	(which is in fact non-copying.)

2002-08-05  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/dialog-sxsincelast.c (to_create_next): Fix for
	re-creating to-create transactions when the variables change;
	fixes Bug#89924.  Fixed another small bug in the variable-table
	handling code.

2002-08-05  Joshua Sled  <jsled@asynchronous.org>

	* src/import-export/gnc-generic-import.c: #if-def'd out the
	original version, and replaced with a version sans the printf.
	For some reason, with the printf, GCC 3.1 can't compile this file.

	* src/gnome/dialog-sxsincelast.c: Added support for the Back [and
	Next] button to behave correctly in the Druid.  Closes Bug#84688.
	Fixed a double-freeing bug [Bug#89475].  Correct use of
	gnc_{suspend,resume}_gui_refresh makes Transaction processing much
	faster, closing Bug#84686.

2002-08-02  Christian Stimming  <stimming@tuhh.de>

	* src/business/business-gnome/dialog-invoice.c,
	src/gnome/dialog-commodities.c, src/gnome/dialog-price-edit-db.c,
	src/gnome/window-reconcile.c,
	src/register/ledger-core/gnc-regwidget.c: Changed wording of
	confirmation questions by s/current/selected/ as proposed by David
	Roundy <droundy@civet.berkeley.edu>.

2002-08-01  Christian Stimming  <stimming@tuhh.de>

	* src/AccWindow.h, dialog-account/dialog-account.c,
	import-export/generic-import-design.*,
	import-export/ofx/gnc-ofx-import.c: Patch by Benoit Gregoire.

2002-07-29  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/druid-hbci-initial.c: Added some initial
	OpenHBCI code. Still no network connectivity or data changing,
	though.

	* src/import-export/hbci/gnc-hbci-kvp.[hc]: Added kvp_frame
	handling for HBCI-related data.

	* configure.in: Added option --with-openhbci-prefix.

2002-07-28  Christian Stimming  <stimming@tuhh.de>

	* src/scm/main.scm: Add module-load for HBCI.

	* src/import-export/hbci/*: Thanks to Benoit Gregoire, the initial
	HBCI druid is at least visible now. Still no code that would
	really do anything, though.

2002-07-27  Christian Stimming  <stimming@tuhh.de>

	* configure.in: Add --enable-hbci configure option.

	* src/import-export/hbci/*: More HBCI GUI work. Some druid should
	be visible by now. The code doesn't really do anything so far,
	though.

2002-07-24  Joshua Sled  <jsled@asynchronous.org>

	* src/register/ledger-core/gnc-ledger-display.c
	(gnc_ledger_display_gl): Added filter for template
	transaction-accounts to General Ledger, fixing Bug 86302.

	* src/gnome/dialog-scheduledxaction.c (gnc_sxed_check_consistent):
	Changed wording to fix half of Bug 87622 [the other half being
	unreproducible :(].

	* src/gnome/dialog-sx-from-trans.c (sxftd_update_fs): Add support
	for Bi-Weekly to be part of the pull-down; fixes half of
	Bug 88178.

	* src/engine/FreqSpec.c (xaccFreqSpecGetWeekly): Keep the returned
	day-of-week within reasonable bounds.
	(xaccFreqSpecGetFreqStr): s/Anually/Yearly/ [sic] - Bug 88176.

	* src/gnome/glade/sched-xact.glade: Dead-UI
	removal. s/Anually/Yearly/ [sic] - Fixes Bug 88176.

2002-07-24  Joshua Sled  <jsled@asynchronous.org>

	* src/scm/fin.scm: Made the exposed calculation functions output
	positive values.

	* src/gnome/window-main.c (gnc_main_window_create_menus): Added
	accelerators to SX-related menu items.

	* src/gnome/druid-loan.c: Primary change: actually create the
	Scheduled Transactions which are setup by the user.  Miscellaneous
	other cleanups, text, layout and consistency changes.

	* src/gnome/dialog-sxsincelast.c: Support handling of the
	instance-count in forward-looking transaction creation.  Simplified
	some of the internal data-representation regarding lists of items
	to be created [removed autoCreateTuple, now uses toCreateTuple].
	Removed some DEBUGging output.  Handles setting up the implicit
	'i' variable.

	* src/gnome/dialog-sx-from-trans.c (sxftd_compute_sx): Create SXes
	with an appropriate initial instance-count value.

	* src/gnome/dialog-scheduledxaction.c
	(schedXact_editor_populate): Create SXes with an appropriate
	initial instance-count value.

	* src/engine/SchedXaction.[ch]: Added support for an
	instance-count, in order to support an implicit 'i' [of N]
	variable to SX formula/function processing.

	* src/engine/SX-ttinfo.c (gnc_ttsplitinfo_free): Made the
	ttsplitinfo_free'ing a bit safer.

	* src/calculation/expression_parser.c: Added support for
	parsing/handling quoted strings.  Intended to be parameters to
	functions.  Fixed bug regarding nested handling of strings in the
	parser.

	* src/backend/file/gnc-schedxaction-xml-v2.c: Added support for
	saving/restoring instance-count field of SXes.

	* src/app-utils/test/test-exp-parser.c
	(run_parser_test): Fixed pass/fail indication check.
	(test_parser): Added tests for string params to functions.

	* ChangeLog: Added entry I forgot from last time.

	* src/app-utils/gnc-exp-parser.c (func_op): Added support for
	typed parameters to functions; params are either numerics or
	strings.  Result of function is now parsed correctly.

2002-07-24  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/glade/hbci.glade: Some HBCI GUI work --
	still no real code yet.

2002-07-21  Christian Stimming  <stimming@tuhh.de>

	* src/app-utils/guile-util.c (gnc_get_debit_string): Fix by Matt
	Armstrong <matt@lickey.com> : Look for "Use accounting labels"
	option is under the "Accounts" section.
 	(gnc_get_credit_string): ditto.

	* src/backend/file/gnc-backend-file.c: File permission fix by Matt
	Brubeck <mbrubeck@cs.hmc.edu>

2002-07-12  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/glade/sched-xact.glade: Glade-side UI cleanup.

	* src/gnome/druid-loan.c: Many updates; now uses GNCAccountSel,
	more inter-page consistency checks. UI cleanup

	* src/gnome-utils/gnc-account-sel.[ch]: Added; GTK combobox for
	selecting an Account.

2002-07-11  Derek Atkins  <derek@ihtfp.com>

	* change gncEntry->account into gncEntry->invAccount and
	  gncEntry->billAccount.  Change the register so that Bills use
	  the BillAccount and Invoices use the InvoiceAccount.  This
	  allows the same Entry to have both an "expense" and "income"
	  account to offset each other.

2002-07-10  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/druid-loan.[ch]: Added; Initial implementation of
	Gnome Druid for setting up loan-repayment Scheduled Transactions.

	* src/doc/loans.txt: Added; notes about how loans will be dealt
	with in GnuCash.

	* src/gnome/glade/sched-xact.glade: Added loan-druid.

	* src/gnome/window-main.c (gnc_main_window_create_menus): Added
	'Mortgage/Loan Repayment Setup' Druid invocation menu item.

	* src/scm/fin.scm: Added. Implementations of 'ipmt', 'ppmt', 'pmt'
	and supporting code.

	* src/app-utils/test/test-exp-parser.c (test_parser): Added tests
	for functions-in-expressions.  Added [passed] test for Conrad's
	bug.

	* src/app-utils/gnc-exp-parser.c (func_op): Added. gnc-side
	callback for dealing with a function in an expression.

	* src/calculation/expression_parser.c: Added initial, undocumented
	support for functions in expressions.

2002-07-10  Derek Atkins  <derek@ihtfp.com>

	* add Billable flag and Bill-To (owner) to line-item entries.
	* save these flags only if the entry is attached to a Bill.
	* add a Billable column to Bill register

	* add gncQueryAddBooleanMatch() convenience function

	* add a BillTo owner in the GncInvoice object.  Save it in XML if
	  it's non-empty.

	* modify the Entry Ledger query to pull in Billable Entries from
	  Posted Bills that belong to an Invoice's Owner.

	* business-prefs: add the bill_reg_width preference to save the value
	* implement "Default Project" in the Bill register to enter a
	  default Bill-to customer/job.  It's only visible on Bills, not
	  Invoices.

2002-07-09  Derek Atkins  <derek@ihftp.com>

	* "global-replace for-each-in-order for-each" because the former
	  does not exist in current guiles.  Fixes bugID 87693

	* add "centered-label-cell" markup type to define a cell with tag
	  'b' and attribute "align center".

	* owner-report.scm: add a due-date column; change "Invoice" to
	  "Bill" for vendor reports.  Fix the aging table.  Reverse the
	  numerics for vendor reports.

	* prefs.scm: change A/P's "Invoice" column header to "Bill"

	* Separate Bills and Invoices into (somewhat) different things.
	  An Entry now has pointers to an Invoice and a Bill, although
	  both are represented by a GncInvoice.  Force a GncInvoice to a
	  Bill if the owner is a Vendor.  (It's a regular Invoice if the
	  owner is a Customer).  Eventually we can support Owner ==
	  Employee to deal with Expense Reports.
	* gncInvoice: add gncBill{Add,Remove}Entry
	* gncEntry: add gncEntry{Get,Set}Bill
	* gw-business-core: wrap gncEntryGetBill
	* gnc-entry-xml-v2: add entry:bill pointer
	* gncEntryLedger: deal with Bill Entry.  Don't need a lot of
	  columns (compared to Invoices).  This is not complete, but is
	  at a workable point now.
	* dialog-invoice: call the BILL vs. INVOICE entry-ledger based
	  on the invoice owner.

2002-07-08  Derek Atkins  <derek@ihtfp.com>

	* kvp-option-registry.scm: create a registry of kvp-options
	  generators for various objects.  This simplifies the distributed
	  generation of kvp-option dialogs.
	* app-utils.scm: export kvp-option-registry functions
	* option-util: add option_db_changed() function
	* business-gnome.scm: add "File -> File Preferences" menu item
	  which is the kvp-option dialog for the Book.
	* business-prefs.scm: register a kvp-option generator for gnc:id-book
	* gnc-book: add gnc_book_kvp_changed() function
	* gw-engine-spec.scm: wrap gnc_book_kvp_changed
	* dialog-options.c: only call the SCM apply_cb if the optiondb
	  actually changed.
	* gnome-utils.scm: create gnc:kvp-option-dialog procedure to create
	  an kvp-option dialog for the specified type.  Export this procedure.

2002-07-07  Derek Atkins  <derek@ihtfp.com>

	* options.scm: change gnc:make-option; add two new args, scm->kvp
	  and kvp->scp.  Implement these two methods for most of the options.
	* app-utils.scm: export the kvp->scm and scm->kvp procedures
	* business-options.scm: Implement the kvp->scm and scm->kvp methods
	  for the business options.

	* hooks.scm: fix documentation
	* gnc-file.c: change the open/closed book hooks to take a
	  <gnc:Session*> instead of a string.
	* binary-import.scm: fix the book-opened-hook.
	* main-window.scm: fix the book-opened/closed-hook calls
	* main.scm: fix the book-opened/closed-hook calls

	* gw-app-utils-spec.scm: wrap <gnc:OptionDB*>, option_db_new,
	  option_db_destroy()
	* options.scm: fix scm->kvp method; fix a typo; add clear-kvp?
	  argument to gnc:options-scm->kvp for whether to clear out the
	  kvp before saving it.
	* business-gnome.scm: add code to test the kvp option-dialog
	* kvp-scm.c: fix the delete_at_path() function to actually work right.
	* dialog-options: create a function (and support routines) to
	  use SCM apply_cb and close_cb callback functions:
	  options_dialog_set_callbacks()
	* gw-gnome-utils-spec.scm: wrap <gnc:OptionWin*>, options_dialog_new(),
	  options_dialog_destroy(), options_dialog_build_contents(), and
	  options_dialog_set_callbacks()

2002-07-06  Derek Atkins  <derek@ihtfp.com>

	* gw-kvp-spec.scm: wrap kvp_slot_set_slot_path_gslist(),
	  kvp_slot_get_slot_path_gslist(), and gnc_book_get_slots()

	* kvp-scm: create gnc_kvp_frame_delete_at_path() and wrap it.
	  This function will clear a sub-tree out of a kvp_frame.

	* kvp-scm: implement KVP_TYPE_FRAME kvp-values

	* gw-engine-spec.scm: wrap gnc_session_get_url(), in preparation
	  for changing the book-opened-hook and book-closed-hook
	  prototypes.

2002-07-05  Derek Atkins  <derek@ihtfp.com>

	* gw-engine-spec.scm: wrap gnc_lot_get_split_list
	* gw-business-core-spec.scm: wrap gncInvoiceGetPosted{Acc,Txn,Lot}

	* invoice.scm: add the ability to show the payments applied to
	  the invoice

2002-07-04  Derek Atkins  <derek@ihtfp.com>

	* option-util.c: add gnc_option_get_option_data() function
	* dialog-options: publish gnc_options_dialog_changed_internal() so
	  pluggable options can set the flag, too.

	* business-options: (new files) implement owner/customer/vendor
	  options to plug into the options dialog.
	* businessmod-gnome: initialize business options
	* business-utils: pack into box FALSE, not TRUE
	* owner-report: put the company into the options dialog instead of
	  hiding it.

	* business-core.scm: fix a typo
	* business-options.c: implement invoice option for the dialog
	* gncEntryLedgerLoad.c: fix a compiler warning
	* invoice.scm: make report visible; deal with no invoice; make
	  invoice a visible option on the general page; deal with "printing"
	  un-posted invoices.
	* receivables.scm: remove code I don't need

2002-07-03  Derek Atkins  <derek@ihtfp.com>

	* moved receivable and payable aging reports to business-reports;
	added "links" to the company, invoices, and company-report.
	Create a "Business Reports" menu item under "Reports" and put the
	business reports there.  This required a new startup hook to allow
	dynamic creation of the Report Menu.  Change the aging reports to
	use Invoices and Lots instead of the transaction description to
	differentiate actual companies.

	* dialog-invoice: publish the function to open a company-report

	* business-urls: hooks into gnc-html for business objects.
	Initialize at module load-time.  wrap the business url types.

	* business-core: create gnc:owner-from-split which is used by a
	bunch of the business reports.  wrap gncOwnerCopy().

	* fix the "Create Test Data" extension

2002-07-03  Christian Stimming  <stimming@tuhh.de>

	* src/gnome/druid-hierarchy.c (gnc_get_ea_locale_dir): If current
	locale doesn't work for account hierarchy druid, then check all
	abbreviated versions of that locale.

2002-07-02  David Hampton  <hampton@employees.org>

	* src/app-utils/gnc-ui-util.c (PrintAmountInternal): If the "auto
	decimal places" option has been set, force all numbers to be
	printed with that many decimal places.  That will prevent multiple
	conversion of a cell (e.g. 1234.00 => 1234 => 12.34) as a user
	tabs in and out of a cell.

2002-07-02  Derek Atkins  <derek@ihtfp.com>

	* register/register-gnome/gnucash-sheet.c: allow a caller to
	"unset" the popup menu by passing a NULL popup.

	* business/business-gnome/dialog-invoice.c: use glade for the
	popup.  Only set the popup for Read-Write invoices.
	* business/business-gnome/glade/invoice.glade: define the popup
	menu in glade.

	* add a menubar to the Invoice Window in glade

	* fill out the Invoice Window Menu, based upon the Register
	Window.  Fill in the callbacks required to get the menu to work.

	* Create a hook into the "owner-report" and link that into the
	Invoice Window, so you can print the report from any Invoice.

	* add a hook in the entry ledger to obtain the current Query (to
	set the sort order).

	* options.scm: Create gnc:make-account-list-limited-option
	function that adds a list of valid account-types; this limits the
	account-tree dialog to only "reasonable" accounts.

	* option-util.[ch]: add function to obtain GList* of valid
	account-types.  NULL means "all".

	* dialog-options: Limit account-list by types.

	* Update payables and receivables reports to limit account types.

2002-07-01  Derek Atkins  <derek@ihtfp.com>

	* business-gnome/dialog-invoice.c: make all my callbacks
	non-static; remove the toolbar creation code.
	* business-gnome/glade/invoice.glade: create the toolbar in glade.

2002-07-01  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/dialog-scheduledxaction.c:
	* src/gnome/dialog-sxsincelast.c:
	* src/app-utils/prefs.scm: Added options/code-support for
	saving/restoring sizes of SX-related windows.  Fixes bug 86007.

2002-07-01  Derek Atkins  <derek@ihtfp.com>
	* Convert all (well, most all) HTML URL-generators to use
	gnc_build_url() (or gnc:html-build-url in scheme) instead of
	assuming the HTML prototype string.  Unfortunately the
	help-window-index.scm cannot be fixed.

2002-07-01  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome-utils/gnc-dense-cal.c (gnc_dense_cal_mark_remove):
	Unrealistic marks [such as '-1'] are now ignored instead of
	hitting assertion.

	* src/gnome/dialog-scheduledxaction.c: Dead code removal; naming
	clarifications.
	(gnc_sxed_check_consistent): Added.
	(gnc_sxed_check_changed): Added; used when the cancel button is
	pressed.  SX editor now queries the user if the SX has changed.
	(gnc_sxed_save_sx): Added; separated from consistency-check.
	(_gnc_sxed_get_widgets): Added; many glade_xml_get_widget(...)s
	removed from code.
	(free_var_numeric): Added; we now cleanup the temporary variable
	table correctly after doing balance checking.
	(schedXact_editor_create_ledger): RegWidget toolbar shouldn't
	expand; fixed.
	(putSchedXactionInDialog): Fixed assertion-failure/abort when a
	previously-unscheduled SX is scheduled.

	* src/engine/SchedXaction.c (xaccSchedXactionGetNextInstance),
	(xaccSchedXactionGetInstanceAfter): Fixed bug in
	number-of-occurrence instance-state processing.

	* src/register/ledger-core/gnc-regwidget.c:
	* src/gnome/dialog-schedxaction.c:
	* src/gnome/dialog-sxsincelast.c:
	* src/engine/SchedXaction.[ch]:
	* src/engine/FreqSpec.[ch]: Dead code removal/cleanup.

2002-07-01  Derek Atkins   <derek@ihtfp.com>

	* gnc-html: convert URLType from enum to char*
	* gw-gnome-utils-spec: wrap URLType type, #defines, and gnc_build_url()
	* get the rest of the C code to use URLTypes properly

	* fix the business XML to use symbolic names for enums (instead of
	their integer values).  This is an incompatible change -- old
	business XML objects will not load properly.

2002-06-29  David Hampton  <hampton@employees.org>

	* configure.in:
	* src/gnome/gnc-splash.c (gnc_show_splash_screen): Add the current
	version number (or cvs build time) to the splash screen.

2002-06-27  Derek Atkins   <derek@ihtfp.com>

	* Change the "Owner Report" to a "Customer Report" and "Vendor
	Report" Create a plug-in system to plug reports into the Register
	Window, keyed off of the account type and whether a split exists
	(for a "Transaction" report).  This required changes to the
	payables and receivables (aging) reports.

	* Tie the Customer and Vendor reports in, so you can bring up a
	Customer Report by selecting a transaction in an A/R account and
	clicking on Reports -> Transaction Report.

	* Create an "owner-report" which prints out a set of Invoice and
	Payment transactions and also an aging report for a single "owner"
	(e.g. Customer or Vendor).  This is still a first pass, so it
	might not be correct.  It uses Lots, but it assumes that the
	Account is periodically closed and re-opened (does not have a
	'start-date').  It still needs to be tied into the main GUI.

	* gncJob: add gncJobRetGUID() and gncJobLookupDirect()

	* gncOwner: add gncOwnerRetGUID()

	* gw-business-core-spec.scm: wrap GncAmountType, GncTaxIncluded
	GncBillTermType, gncInvoiceGetInvoiceFromLot(), gncJobRetGUID(),
	jobJobLookupDirect(), gncOwnerGetEndOwner(),
	gncOwnerGetOwnerFromLot(), gncOwnerRetGUID()

	* business-gnome.scm: add extensions to test the owner-report

	* business-options.scm: add an "owner" option-type

2002-06-25  Derek Atkins   <derek@ihtfp.com>

	* gncOwner.[ch]: Provide functions to store/lookup an owner in a
	Lot's kvp_frame.

	* gncInvoice.c: add implementation of GetPostedLot(); when posting
	to an Account, look for any pre-payment Lots and post to that.  If
	the Invoice total < pre-payment, then automatically forward the
	payments to a future Lot.  If no pre-payment Lot is found, then
	create a new one.

	* dialog-payment.c: force payment amounts to be positive values
	(you cannot un-pay via this dialog).  Apply payments to open
	Invoice Lots in a FIFO manner (by Due Date).  If there is anything
	left over, then create a pre-payment Lot.

2002-06-24  David Hampton  <hampton@employees.org>

	* src/import-export/ofx/Makefile.am:
	* src/import-export/ofx/README:
	* src/import-export/ofx/gnc-ofx-import.c:
	* src/import-export/ofx/gnc-ofx-import.h:
	* src/import-export/ofx/gncmod-ofx-import.c:
	* src/import-export/ofx/ofx-import.scm: Benoit Gregoire's changes
	to make the OFX import module build its own menu item at runtime.

	* src/gnome-utils/gnc-mdi-utils.c:
	* src/gnome/dialog-price-edit-db.c:
	* src/gnome/window-acct-tree.c:
	* src/gnome/window-main.c: Fix parameter names in documentation.

2002-06-23  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/dialog-sxsincelast.c: Lists of SX instances [the
	Reminders and To-Create] are now trees instead of clists.
	Better structure of internal state.
	Fixed multiple-SX-reminder selection/processing bug [Bug#85997].

2002-06-22  David Hampton  <hampton@employees.org>

	* src/gnc-module/gnc-module.{c,h,scm} :
	* src/gnc-module/gw-gnc-module-spec.scm : Add support for loading
	an optional module.  I.E. Don't complain if you can't find it.

	* src/gnome/window-main.c : Add a File/Import submenu that will
	contain entries for QIF, OFX, etc.

	* src/import-export/Makefile.am :
	* src/import-export/gncmod-generic-import.c :
	* src/import-export/ofx/gnc-ofx-import.c :
	* src/import-export/ofx/gncmod-ofx-import.c :
	* src/scm/main.scm : OFX module loading tweaks.

	* src/gnome-utils/gnc-menu-extensions.[ch]:
	* src/gnome-utils/gw-gnome-utils-spec.scm: Add a new
	gnc_add_c_extension function. Rename the existing
	gnc_add_extension to gnc_add_scm_extension.

	* src/gnome/window-main.c:
	* src/import-export/qif-import/druid-qif-import.[ch]:
	* src/import-export/qif-import/gncmod-qif-import.c: Create the
	"Import QIF" menu item from within the QIF module.

2002-06-21  Derek Atkins   <derek@ihtfp.com>

	* integrate the Billing Terms into the Core, GUI, and XML Backend
	for the rest of the business objects that need billing terms.

	* .../business-core/gncBillTerm*.[ch]: Add Billing Term objects.
	Currently there are "Days" and "Proximo" billing terms available.

	* .../business-core/file/gnc-bill-term*: XML Backend storage for
	Billing Terms.

	* .../business-gnome/dialog-bill-terms.[ch]: Dialog to create,
	view, and edit Billing Terms.

	* .../business-gnome/business-prefs.scm: move the business
	preferences (default option creation) to its own scheme file.

2002-06-20  David Hampton  <hampton@employees.org>

	* src/engine/Transaction.[ch]: New function

	* src/import-export/<blah>:
	* src/import-export/ofx/<blah>: Benoit Gregoire's initial support
	for OFX import.

2002-06-18  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome-utils/gnc-dense-cal.[ch]: Added; a multiply-markable,
	visually-dense Gtk calendar widget, to be used by
	Scheduled Transactions.

	* src/gnome/dialog-scheduledxaction.c
	(putSchedXactionInDialog): Renamed; supports marking the new
	GncDenseCal.
	(delete_button_clicked): Now much less lame about dealing with the
	CList when items are removed; supports [un]marking the
	GncDenseCal.

	* src/gnome/dialog-scheduledxaction.c (editor_ok_button_clicked):
	Query the user if they want to create an unbalanceable
	[variable-containing] transaction. Inform the user if they try to
	create an auto-create transaction which has variables, as this is
	not allowed.


2002-06-18  David Hampton  <hampton@employees.org>

	* src/gnome/window-main.c: Make a couple of functions globally
	visible.

	* src/gnome/window-register.c:
	* src/gnome/glade/register.glade: Reorganize the menus in the
	register window.  Convert the register window over to a glade
	based window using glade_xml_signal_autoconnect.  Rename a bunch
	of short named function to the form gnc_register_xxx to insure
	uniqueness.

2002-06-16  Derek Atkins   <derek@ihtfp.com>

	* Refactor a lot of the business code.  Move the tax-table dialog
	to its own directory/gnc-module.  Move the business-gnome glade
	files to their own directory.  Create a business-reports directory
	for the current and future business reports.

	* Move to invoice report into business-reports (it _IS_ a business
	report after all).  Add a business-reports guile module, and get
	it all to work.  Fix the gnucash-build-env script to look in the
	new directories.

2002-06-16  Derek Atkins   <derek@ihtfp.com>

	Integrate the tax table into the gncEntry object; change how taxes
	and discounts are computed, stored, and returned.  Fix the Entry
	XML code to save/load the new taxtable data (not backward
	compatible).  Integrate new changes into the entry-ledger.

	fix some bugs in the business xml code.  fix some memory leaks.

2002-06-14  Derek Atkins   <derek@ihtfp.com>

	* business-core/file/gnc-tax-table-xml-v2.*: Create a preliminary
	xml implementation for storing tax tables.

	* business-core/gncTaxTable*: Create a preliminary implementation
	of Tax Tables.  They are currently not saved, and nothing uses
	them.  Link the initialization into the module.

	* business-gnome/dialog-tax-table*: Create a tax table GUI to
	create and edit tax tables.  G-wrap the editor-window create
	routine.

	* business-gnome.scm: add the Tax Table gui; rename the 'Invoice'
	option page to "Business".  Fix dialog-invoice to use the new
	option name.

2002-06-11  David Hampton  <hampton@employees.org>

	* src/gnome/druid-stock-split.c: Add automatic focusing on a
	couple of the druid pages.

	* src/gnome/window-acct-tree.c: Fix a compile of broken menu
	items.  Only enable the reconcile menu item when an account has
	been selected.

2002-06-10  David Hampton  <hampton@employees.org>

	* src/gnome/window-main.c: Update the view items to use
	gtkcheckmenuitems instead of having separate show and hide menu
	items.  Also flip the order of the Summary and Status menu items
	so that the menu order reflects the items order within the window.

2002-06-09  David Hampton  <hampton@employees.org>

	* src/gnome/window-acct-tree.c: Remove the 'tax information' item
	from the account window pop-up menu.

	* src/gnome/glade/price.glade:
	* src/gnome/dialog-price-editor.c: Set up all fields so that the
	Enter key triggers the OK button.

	* src/gnome/glade/price.glade:
	* src/gnome/dialog-price-edit-db.c: Sort the database by clicking
	on the column titles.  Removed old radio-buttons for sorting.  A
	double-click on an item will also open it for editing.

2002-06-08  David Hampton  <hampton@employees.org>

	* src/app-file/gnome/gnc-file-history.c (gnc_history_update_menu):
	Move the file history items into a sub-menu of the file menu.

	* src/gnome/window-acct-tree.c: Menu/toolbar items are now
	enabled/disabled depending upon whether or not an account is
	selected.  Integrated the account specific menu into the main
	application window menus.

	* src/gnome/window-main.c: Reorganize the menubar in the main
	window.  Add support for dispatching top level menu items to
	functions that operate on contained views (i,e, on a report).

	* src/gnome/window-register.c: Start reorganizing the menubar in
	the register window.

	* src/gnome-utils/gnc-mdi-utils.[ch]: Add new functions for
	finding/manipulating menu/toolbar items on the fly.  Add support
	for automatically showing/hiding/enabling/disabling menu/toolbar
	items when the view is changed in the MDI window. Add support for
	dispatching various main menu items to view specific callback
	functions.

	* src/report/report-gnome/window-report.c: Hook into the
	dispatching from the main window menubar.

	* src/gnome-utils/gnc-menu-extensions.scm
	* src/report/report-gnome/report-gnome.scm:
	* src/scm/main.scm: Reorganize menu items.

2002-06-06  Derek Atkins   <derek@ihtfp.com>

	Create a top-level Business menu item in the main window.  You
	don't need to run GnuCash with GNC_DEBUG=1 in order to use the
	business functionality.

2002-06-05  Derek Atkins   <derek@ihtfp.com>

	Integration of the new Query subsystem, to replace the old Query
	infrastructure.  This also replaces the old "Find Transaction"
	dialog with the new gnome-search dialog.  Registers, Reports, SXs,
	etc. all test out fine.  Integration with SQL has been "done"
	(i.e. it compiles cleanly) but not "tested."  Lots of the old code
	is still there, but #ifdef'ed out.  That code will go away
	shortly.

	There is only one known loss-of-functionality: the query->xml-v1
	converter was not re-implemented.  The current intention is, if
	this functionality is required, to use the query->scm converter
	and then convert the scm->string and insert that into an XML
	document.

	Fix a Transaction Void bug.

	Fix a few bugs in test code.

2002-06-04  David Hampton  <hampton@employees.org>

	* src/gnome-utils/gnc-mdi-utils.c (gnc_mdi_destroy): Work around a
	bug in the Gnome MDI code that is causing Gnucash to crash if the
	last window isn't the topmost window when the application is quit.

2002-06-05  Christian Stimming  <stimming@tuhh.de>

	* src/import-export/hbci/*: Add directory and initial files for
	HBCI support module.

2002-05-31  David Hampton  <hampton@employees.org>

	* src/gnome/reconcile-list.c: Fix the direction of the sort
	arrows.

	* src/gnome-utils/dialog-options.c: Preferences dialogs will now
	switch over from a tabbed notebook to a list/notebook pair if
	there are more than four pages.  Put radio buttons in a horizontal
	box instead of a vertical one.

	* src/gnome-utils/gnc-html.c:
	* src/gnome-utils/gw-gnome-utils-spec.scm:
	* src/gnome-utils/print-session.[ch]:
	* src/scm/printing/print-check.scm: Eliminate warning messages
	while printing.

2002-05-27  Derek Atkins   <derek@ihtfp.com>

	* src/app-utils/option-util.c: Add a function to reset all the gui
	widgets for an option-db, ignoring sections that begin "__".

	* dialog-options.c: remove all the 'set to default' buttons and
	add a single 'defaults' button in the dialog button box, which
	resets all the options to their default values.  The user still
	has to 'apply' the changes to take effect.  Also change "close" to
	"cancel".

2002-05-27  David Hampton  <hampton@employees.org>

	* src/dialog-account/dialog-account.c: Sort the account type list
	in the Edit Account dialog.

2002-05-27  Derek Atkins   <derek@ihtfp.com>

	* dialog-options.c: implement a radiobutton option type.
	* options.scm: implement a radiobutton option type.
	* app-utils.scm: export the new radiobutton option creators
	* prefs.scm: change the Account Separator to a radiobutton; move
	to its own page

2002-05-26  Derek Atkins   <derek@ihtfp.com>

	* src/gnome-util/dialog-options.[ch]: Create an option-type
	database so that modules can define new option-types and plug them
	into Gnucash.  Break apart the existing "if type == blah; else if
	type == blah blah..." code and use the new options-type database.
	New options require the implementation of three functions,
	set_widget(), set_value(), and get_value().

2002-05-24  Derek Atkins   <derek@ihtfp.com>

	* src/engine/GNCId.c: Implement xaccForeachEntity() as a which
	allows a traversal of all entities of a particular type.

	* Register GncObject_t descriptions for Splits, Transactions, and
	Accounts.  Move the QueryObject definitions into the actual module
	sources for Transactions, Splits, Accounts, and Books.  This
	allows QueryNew searches for Splits, Transactions, and Accounts.

	* gnc-engine.c: call the registration functions for Splits,
	Transactions, Accounts, and Books to enable searching using the
	new search subsystem.

2002-05-23  David Hampton  <hampton@employees.org>

	* src/gnome/reconcile-list.c: Encapsulate all list sorting logic
	within the GNCReconcileList object.  Reconciliation lists are now
	sorted by clicking on the column titles, and sorts can be both
	increasing and decreasing.

	* src/gnome/window-reconcile.c: Remove all list sorting logic.

	* src/gnome-utils/gnc-amount-edit.c: Reparent the amount editor
	widget so it is based upon a GtkEntry.  This allows trivial
	GtkEntry <-> GncAmountEdit conversions.

	* src/gnome/dialog-fincalc.c: Clean up code that uses a
	GncAmountEdit widget as a GtkEntry widget.

	* src/gnome/dialog-find-transactions.c
	(gnc_ui_find_transactions_dialog_create): Make all the editable
	fields trigger the dialog default button when <enter> is pressed.

2002-05-21  Joshua Sled  <jsled@asynchronous.org>

2002-05-18  David Hampton  <hampton@employees.org>

	* configure.in: Work around incompatibilities between autoconf
	2.52 and 2.53 wrt creating the LIBLTOBJS variable.

	* ltmain.sh: Mac OS X tweaks.

	* libc/Makefile.am: Use LIBLTOBJS instead of LIBOBJS.

	* src/backend/file/sixtp-utils.c (string_to_gint64):
	(string_to_gint32): (string_to_timespec_nsecs): Work around bugs
	in Mac OS X version of sscanf.

	* src/gnome/druid-hierarchy.c (gnc_get_ea_locale_dir): Work around
	lack of LC_MESSAGES on Mac OS X.

	* src/scm/main.scm (local-prefixes): Work around
	lack of LC_MESSAGES on Mac OS X.

2002-05-14  David Hampton  <hampton@employees.org>

	* configure.in (AC_CANONICAL_HOST): Remove redundant command.

	* Makefile.am (ACLOCAL_AMFLAGS): New variable required by gettext
	0.11.

	* po/hu.po:
	* po/it.po:
	* po/jp.po: Fix errors that have become fatal in gettext 0.11.

	* po/Makevars: New file required by gettext 0.11.

2002-05-13   Derek Atkins   <derek@ihtfp.com>

	Change the Search Dialog to use a CList and allow each object to
	provide its own column list for displaying search results.  Change
	the interface to require the list of columns.  Modify all the
	business dialogs to use the new search interface.

	Add a new interface to the QueryCore to convert any Core object
	into a string (or have it return NULL)

2002-05-09   Derek Atkins   <derek@ihtfp.com>

	Change the Date-Close dialog to use gnc-date-edit instead of the
	gnome-date-edit widget set.

	removed unused dialogs from job.glade and invoice.glade

	returned lost invoice functionality: open the invoice-register
	window when you 'ok' a new invoice.

2002-05-09   Derek Atkins   <derek@ihtfp.com>

	Fixed dialog-order.  Should now complain less during compilation.

2002-05-09  Derek Atkins   <derek@ihtfp.com>

	Create a new general_search widget that hooks into the search
	dialog and provides callbacks and signals for object selection.
	This fixes a lot of the nested-gtk_main() problems in the business
	code.  Still more separation to do, but MOST of the main modules
	are changed to use the new interfaces.  This is an interim commit;
	another commit will follow shortly.  The code works now, but
	dialog-order (in particular) will give you compiler warnings.

2002-05-07  David Hampton  <hampton@employees.org>

	Pogma's Mac OS X patches committed.  Added a new directory
	src/lib/libc for library routines not available on Mac OS X.
	Changed all of the module function names required by gnucash
	according to libltdl rules so that they are unique, though they
	all still appear the same to callers of libltdl.

2002-05-06  David Hampton  <hampton@employees.org>

	* src/engine/gnc-pricedb.[ch]:
	* src/engine/gw-engine-spec.scm: Another way to get a price GUID.

	* src/gnome/dialog-price-editor.c: Separate the "edit price
	database" dialog from the "edit a single price" dialog.  Move the
	former functionality into the dialog-price-edit-db.c file.

	* src/gnome/top-level.c:
	* src/gnome-utils/gnc-html.[ch]:
	* src/report/report-system/html-utilities.scm:
	* src/report/report-system/report-system.scm: Add hooks for a new
	type of URL, a gnc-price url.

	* src/report/standard-reports/portfolio.scm: The price of a stock
	is now a hyperlink which brings up an "edit a single price" dialog
	for that stock price.  Added an option for skipping stocks with a
	zero share balance.

	* rpm/gnucash.spec.in: Added more dependency information. Added
	support for building an additional RPM containing only the
	postgres backend files.

	* ChangeLog: Spell check this file.

2002-05-03  David Hampton  <hampton@employees.org>

	* src/gnome/top-level.c:
	* src/app-utils/prefs.scm: Add new preference for the number of
	days to keep old log and xac files.

	* src/backend/file/gnc-backend-file.c: New routines to get/set
	number of days to retain old files.  New routine to delete all old
	'LCK' files, and all old 'xac' and 'log' files older than the
	user specified number of days.

2002-04-27  David Hampton  <hampton@employees.org>

	* src/engine/Account.[c,h]: New routines to get/save last
	reconciliation interval.

	* src/engine/date.[c,h]: New routines for manipulating dates.

	* src/gnome/window-reconcile.c: When creating the reconcile
	window, bump the date by the same interval as last time, not a
	constant one month.  Also save whatever interval the user actually
	specified for next time.

	* src/app-utils/prefs.scm:
	* src/engine/date.c:
	* src/gnome/top-level.c (gnc_configure_date_format): Change the
	default date format to be the user's LOCALE setting.

	* src/engine/date.c (scanDate): Totally work over this routine to
	support a user entering one, two, or three numbers. If one, assume
	day.  If two assume day/month, ordering from locale. Three is
	day/month/year, ordering from locale.  Also protect against an old
	date string being supplied to the routine after the date format
	has been changed.

	* src/register/register-gnome/datecell-gnome.c
	(gnc_date_cell_leave): Reprint the time when leaving a date_cell
	field.

	* src/gnome-utils/gnc-date-edit.c (date_focus_out_event): New
	routine to reprint the time when tabbing out of a date_entry cell.
	(create_children): Tie in new routine.
	(gnc_date_editable_enters): New helper routine for setting
	gnome_dialog_editable_enters on a date_entry widget.

2002-04-23  David Hampton  <hampton@employees.org>

	* src/app-utils/gnc-component-manager.h: Change
	GNCComponentHandler handler type to return gboolean to indicate
	success/failure.

	* src/app-utils/gnc-component-manager.c
	(gnc_find_first_gui_component): Don't need to check for a NULL
	find_handler argument.  The called gnc_find_gui_components routine
	will DTRT without it.
	(gnc_forall_gui_components): Count successful calls to the
	callback routine, not all calls.

	* src/gnome/dialog-commodities.c:
	* src/gnome/dialog-fincalc.c:
	* src/gnome/dialog-price-editor.c:
	* src/import-export/qif-import/druid-qif-import.c: Show_handler()
	routine now returns T/F.

	* src/business/business-gnome/dialog-employee.c:
	* src/business/business-gnome/dialog-job.c:
	* src/business/business-gnome/dialog-order.c:
	* src/business/business-gnome/dialog-vendor.c:
	* src/gnome/dialog-sxsincelast.c: Add new logic for raising
	windows.

	* src/gnome/dialog-sxsincelast.c (sxsincelast_destroy): Unregister
	when window destroyed.

2002-04-21  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/dialog-sx-from-trans.c (sxftd_advanced_clicked): Since
	"Advanced..." editing completely entails the from-transaction
	dialog, we close it if the user selects "Advanced..." to prevent
	errors when the from-trans dialog is "Ok"'d.

	* src/gnome/dialog-scheduledxaction.c (delete_button_clicked):
	Better deletion confirmation checking; we now look for
	being-edited scheduled transactions and confirm them specially
	with the user to prevent inconsistencies from cropping up.

	* src/doc/TODO-schedxactions: Updated; more 'X'-ed off items make
	me happy.

2002-04-21  David Hampton  <hampton@employees.org>

	* src/gnc-ui.h:
	* src/app-file/gnc-file.c:
	* src/app-utils/option-util.c:
	* src/busiuness/business-gnome/dialog-date-close.c:
	* src/busiuness/business-gnome/dialog-order.c:
	* src/busiuness/business-ledger/gncEntryLedgerControl.c:
	* src/gnome/dialog-commodities.c:
	* src/gnome/dialog-price-editor.c:
	* src/gnome/dialog-scheduledxaction.c:
	* src/gnome/dialog-sxsincelast.c :
	* src/gnome/dialog-transfer.c:
	* src/gnome/druid-stock-split.c:
	* src/gnome/window-acct-tree.c:
	* src/gnome/window-main.c:
	* src/gnome/window-reconcile.c:
	* src/gnome/window-register.c:
	* src/gnome-utils/gnc-frequency.c:
	* src/gnome-utils/gnc-gui-query.c:
	* src/gnome-utils/gnc-gui-query.h:
	* src/gnome-utils/gnc-html.c:
	* src/gnome-utils/gw-gnome-utils-spec.scm :
	* src/import-export/qif-import/druid-qif-import.c:
	* src/register/ledger-core/gnc-regwidget.c:
	* src/register/ledger-core/split-register-control.c:
	* src/register/ledger-core/split-register-model.c:
	* src/register/ledger-core/split-register.c
	* src/report/report-gnome/window_report.c: Move string formatting
	logic into the gnc_xxx_dialog routines.

	* src/scm/price-quotes.scm: Include gw-gnome-utils module.
	(gnc:book-add-quotes book): Move string formatting logic into the
	gnc_xxx_dialog routines.

	* src/backend/file/gnc-xml-helper.h:
	* src/backend/file/sixtp.c:
	* src/backend/file/sixtp.h: Find SAX.h in either the libxml or
	gnome-xml directories.

2002-04-21  Joshua Sled  <jsled@asynchronous.org>

	* src/backend/file/sixtp.c (sixtp_parse_file): Explicitly create
	an xmlParserCtxt and keep it in the sixtp_sax_data, so we can...
	(sixtp_sax_start_handler): retain line/column numbers for stack
	frames, which pays off in...
	* src/backend/file/sixtp-stack.c (sixtp_stack_frame_print):
	printing the line/column numbers of parsing errors when they
	occur.
	* src/backend/file/sixtp.c (sixtp_parse_buffer): Analogous change
	for in-memory-buffer parsing.

2002-04-20  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/dialog-sxsincelast.c (process_auto_create_list): Added
	progress-bar support for transaction auto-creation.

2002-04-18  David Hampton  <hampton@employees.org>

	* configure.in:
	* src/bin/overrides/Makefile.am:
	* src/bin/overrides/gnucash-env.in: Propagate any non standard
	g-wrap prefix path to the setting of the LD_LIBRARY_PATH variable.

	* src/app-utils/gnc-component-manager.c:
	* src/app-utils/gnc-component-manager.h: Change
	gnc_forall_gui_components() to pass the registered user_data to
	the callback routine, and to return a count of the callback
	functions called.

	* src/gnome-utils/dialog-utils.c (gtk_window_present):
	* src/gnome-utils/dialog-utils.h: Added this routine to
	consolidate all logic in raising an existing window.

	* src/dialog-account/dialog-account.c
		(gnc_ui_edit_account_window_raise):
	* src/gnome/dialog-scheduledxaction.c
		(gnc_ui_scheduled_xaction_dialog_create):
		(gnc_ui_scheduled_xaction_editor_dialog_create):
	* src/gnome/dialog-totd.c (gnc_ui_totd_dialog_create_and_run):
	* src/gnome/window-acct-tree.c
		(gnc_acct_tree_window_toolbar_options_cb):
	* src/gnome/window-reconcile.c (gnc_ui_reconcile_window_raise):
	* src/gnome/window-register.c (gnc_register_raise):
		(gnc_register_show_date_window):
	* src/gnome-utils/dialog-options.c (gnc_show_options_dialog):
	* src/register/ledger-core/gnc-regwidget.c (gnc_register_raise):
	* src/report/report-gnome/dialog-column-view.c:
	* src/report/report-gnome/window-report.c
		(gnc_report_window_default_params_editor): Convert to use
	the new logic for raising windows.

	* src/gnome/dialog-commodities.c (gnc_commodities_dialog): Add new
	logic for raising windows.
	(show_handler): New routine.

	* src/gnome/dialog-fincalc.c (gnc_ui_fincalc_dialog_create): Add new
	logic for raising windows.
	(show_handler): New routine.

	* src/gnome/dialog-price-editor.c (gnc_prices_dialog): Add new
	logic for raising windows.
	(show_handler): New routine.

	* src/import-export/qif-import/druid-qif-import.c
	(gnc_file_qif_import): Add new logic for raising windows.
	(show_handler): New routine.
	(gnc_ui_qif_import_druid_make):Convert to use the new logic for
	raising windows.

2002-04-17  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/dialog-scheduledxaction.c
	(editor_ok_button_clicked): Added checks for ScheduledTransactions
	with no name, same name as existing SchedXaction.
	(row_select_handler): Resolved "critical" GTK run-time warning
	regarding navigating the Scheduled Transaction list with the arrow
	keys.

2002-04-16  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/dialog-scheduledxaction.c
	(editor_ok_button_clicked): Check to see if the user is attempting
	to create a Scheduled Transaction which can't occur; confirm with
	them if they are.

	* src/gnome-utils/gnc-frequency.c
	(freq_option_value_changed): StartDate and frequency-specific
	options now come into better sync [when possible] on
	frequency-type change.

2002-04-16  Joshua Sled  <jsled@asynchronous.org>

	* src/register/ledger-core/gnc-ledger-display.c: Some template-GL
	cleanup [debugging printf's removed].  Removed never-used
	LD_TEMPLATE type.

	* src/gnome/glade/sched-xact.glade: Removed unused start page.

	* src/gnome/dialog-sxsincelast.c: Added support for using the
	gnc-regWidget to display created transactions for review. Added
	'Cancel' support. Didn't remove enough dead code, but started to.

	* src/gnome/dialog-scheduledxaction.c: Added support for using the
	gncRegWidget in the SX editor.  Formatting changes.

	* src/register/ledger-core/gnc-regWidget.{h,c}: Added; a
	macro-widget roughly duplicating the src/gnome/window-register.c
	look-and-feel-and-behavior.

	* src/engine/SchedXaction.c: Added support for saving a "temporal
	snapshot" of a scheduled transaction. Rewrote "sequence state"
	manipulations in terms of temporal snapshots.

	* src/engine/Query.c: Add support for Querying the template
	AccountGroup.

	* src/doc/TODO-schedxactions: Updates.

	* src/engine/Makefile.am: Prepend-to instead of unconditionally
	setting GUILE_LOAD_PATH when creating iso-4217-currencies.c, for
	those of us that need to set it for whatever reason we need to do
	so.

2002-04-15  David Hampton  <hampton@employees.org>

	* src/register/ledger-core/split-register-layout.c
	(gnc_split_register_layout_add_cells): Fix problems entering stock
	transactions into the blank split.  Add the SHRS_CELL before the
	PRIC_CELL so that its callback is called first, since the price
	callback performs a computation based upon the number of shares.

	* src/gnome/druid-stock-split.c(-account_currency_filter):
	Removed.

	* src/gnome/druid-stock-split.c(gnc_stock_split_druid_create): On
	the "Cash In Lieu" page of the druid, remove the filter on which
	accounts can be selected.

2002-04-07  David Hampton  <hampton@employees.org>

	* make-gnucash-patch.in: Make sure the 'manifest' argument is a
	fully specified pathname before passing it off to the makepatch
	program.

	* src/gnome/dialog-transfer.c: Additional support for
	"placeholder" accounts.

	* src/gnome/druid-hierarchy.c: Additional support for
	"placeholder" accounts.

	* src/gnome/druid-stock-split.c: Additional support for
	"placeholder" accounts.

	* src/gnome/glade/account.glade: Additional support for
	"placeholder" accounts.

2002-04-04  David Hampton  <hampton@employees.org>

	* src/dialog-account/dialog-account.c: Initial support for
	"placeholder" accounts.

	* src/engine/Account.c: Initial support for "placeholder"
	accounts.

	* src/engine/Account.h: Initial support for "placeholder"
	accounts.

	* src/gnome/glade/account.glade: Initial support for "placeholder"
	accounts.

	* src/register/ledger-core/split-register-control.c: Initial
	support for "placeholder" accounts.

	* src/register/ledger-core/split-register-load.c: Initial support
	for "placeholder" accounts.

	* src/register/register-gnome/combocell-gnome.c: Initial support
	for "placeholder" accounts.

	* src/gnome/window-reconcile.c(recnRecalculateBalance,
	startRecnWindow): Fix reconciliation of a liability window.

2002-03-04  Derek Atkins <warlord@MIT.EDU>

	* Plug-in Extensions for backends, so pluggable objects can
	provide backend-support without changing the core backend
	implementation.

	* src/engine/gncObject: Add a 'mark_clean' data-type method()
				add backend extension registration.

	* src/engine/gnc-book.c: use mark_clean object interface

	* src/backend/file/io-gncxml-v2: use the backend extensions

	* src/business/business-core/gnc*: add the mark_clean methods
					   add commodities to many objects

	* src/business/business-core/gncInvoice.c: fix GetPaidTxn() bug

	* src/business/business-core/file: the XML backend extensions for
	business objects.

	* src/business/business-gnome/dialog-*: supply default commodities

2002-02-17  Christian Stimming  <stimming@tuhh.de>

	* src/report/report-system/html-utilities.scm: Added support for
	suppressing zero amounts.

	* src/report/report-system/*-utilities.scm: Clean up
	commodity-collector calling functions.

2002-02-08  Derek Atkins <warlord@MIT.EDU>

	* New Search GUI committed to the repository, with a search test
	available in the extensions menu to show how it works.  More to
	come as more core data types get supported.

2002-02-03  Derek Atkins <warlord@MIT.EDU>

	* Updated QueryNew interface.  Provide a GSList of terms in order
	to specify queries like "entry->order->owner->guid == XXX".
	Update the business objects to the new API.

	* Fix queryNew bug: various merging routines did not save the list
	of books.

	* add basic QueryNew tests

2002-02-03  Derek Atkins <warlord@MIT.EDU>

	* src/engine/gncObject.c: core object registration.

	* src/engine/gnc-book.c: call into the object registration whenever
	a book is created or destroyed.

	* src/engine/gnc-engine.c: initialize the object registration and
	QueryNew subsystems.

	* first revision of the "QueryNew" interface.  Note that the
	interface is not complete -- in fact, the API will be changing
	this afternoon, but I wanted a baseline (working) system checked
	into the repository.  Right now only the business code is using
	the new query -- the old query still exists, so you should see no
	functional difference in anything except the business code.

2002-01-29  Dave Peticolas  <dave@krondo.com>

	* src/report/standard-reports/account-piecharts.scm: bump up default
	pie chart height

	* src/bin/overrides/gnucash-env.in: set LTDL_LIBRARY_PATH, too

	* macros/gnome-gdk-pixbuf.m4: fix bug

2002-01-12  Dave Peticolas  <dave@krondo.com>

	* src/engine/gw-glib-spec.scm: remove

	* src/engine/gw-engine-spec.scm: g-wrap split & trans lookup

	* src/engine/gnc-engine-util.h: add more timing utils

	* src/engine/gnc-engine-util.c: add more timing utils

	* src/engine/Transaction.h: g-wrap split & trans lookup

	* src/engine/Transaction.c: g-wrap split & trans lookup

	* src/engine/Makefile.am: Take out glib wrapping cruft

2002-01-09  Rob Browning  <rlb@defaultvalue.org>

	* lib/srfi/Makefile.am: handle conditional per-SRFI install.

	* src/engine/engine-helpers.c: removed various glist processing
	helpers -- now handled by g-wrap.  However g-wrap doesn't ATM
	publish the glist->list and list->glist functions on the scheme
	side.  If we need that, it can be added.

	* configure.in: switch to check and only install the srfis we
	need. do the same for guile-www.
	(AM_PATH_GWRAP): require g-wrap 1.3.2.
	(CFLAGS): add -Wno-uninitialized and -Wno-unused to accommodate
	g-wrap issues.
	(GNUCASH_ENGINE_LIBS): remove libgw-glib -- now provided by g-wrap.

	* src/scm/main.scm (gnc:safe-strcmp): new public function -- we
	were using a g-wrapped version, but that seemed more expensive
	than necessary.

	* src/gnome-utils/dialog-options.c
	(gnc_option_set_ui_value_internal): switch to using
	gnc_scm_list_to_glist directly.
	(gnc_option_get_ui_value_internal): switch to using
	gnc_scm_glist_to_list directly.

	* src/report/standard-reports/transaction.scm (trep-renderer):
	quit using gnc:glist->list and gnc:list->glist -- new g-wrap
	eliminates need.

	* src/report/standard-reports/register.scm (reg-renderer): quit
	using gnc:glist->list -- new g-wrap eliminates need.

	* src/report/standard-reports/average-balance.scm (renderer): quit
	using gnc:glist->list and gnc:list->glist -- new g-wrap eliminates
	need.

	* src/report/standard-reports/aging.scm (aging-renderer): quit
	using gnc:glist->list -- new g-wrap eliminates need.

	* src/report/report-system/report-utilities.scm
	(gnc:account-get-comm-balance-at-date): quit using gnc:glist->list
	-- new g-wrap eliminates need.

	* src/report/report-system/commodity-utilities.scm
	(gnc:get-match-commodity-splits): quit using gnc:list->glist --
	new g-wrap eliminates need.
	(gnc:get-match-commodity-splits): quit using gnc:glist->list --
	new g-wrap eliminates need.

	* src/report/report-gnome/window-report.c:
	g-wrap-runtime-guile.h -> g-wrap-wct.h

	* src/report/report-gnome/dialog-column-view.c:
	g-wrap-runtime-guile.h -> g-wrap-wct.h

	* src/report/report-system/report-system.scm: fix for new g-wrap.

	* src/report/report-gnome/Makefile.am: fix for new g-wrap.

	* src/report/locale-specific/us/taxtxf.scm (make-split-list): quit
	using gnc:glist->list -- new g-wrap eliminates need.

	* src/import-export/qif-import/qif-merge-groups.scm
	(gnc:group-get-transactions): quit using gnc:list->glist -- new
	g-wrap eliminates need.
	(gnc:group-find-duplicates): quit using gnc:glist->list -- new
	g-wrap eliminates need.
	(gnc:group-find-duplicates): quit using gnc:glist->list -- new
	g-wrap eliminates need.

	* src/import-export/qif-import/druid-qif-import.c:
	g-wrap-runtime-guile.h -> g-wrap-wct.h

	* src/register/register-core/Makefile.am: fix for new g-wrap.

	* src/import-export/binary-import/Makefile.am: fix for new g-wrap.

	* src/gnome-utils/Makefile.am: fix for new g-wrap.

	* src/report/report-gnome/gw-report-gnome-spec.scm: fix for new g-wrap.

	* src/register/register-core/gw-register-core-spec.scm: fix for
	new g-wrap.

	* src/import-export/binary-import/gw-binary-import-spec.scm: fix
	for new g-wrap.

	* src/gnome-utils/gw-gnome-utils-spec.scm: fix for new g-wrap.

	* src/gnome/window-register.c: g-wrap-runtime-guile.h -> g-wrap-wct.h

	* src/gnome/top-level.c: g-wrap-runtime-guile.h -> g-wrap-wct.h

	* src/gnome/gw-gnc-spec.scm: fix for new g-wrap.

	* src/gnome/Makefile.am: fix for new g-wrap.

	* src/gnc-module/test/mod-foo/gnc-mod-foo.c: fix for new g-wrap.

	* src/gnc-module/test/mod-bar/gnc-mod-bar.c: fix for new g-wrap.

	* src/gnc-module/test/mod-baz/gnc-mod-baz.c: fix for new g-wrap.

	* src/gnc-module/test/mod-foo/foo-gwrap.scm: fix for new g-wrap.

	* src/gnc-module/test/mod-bar/bar-gwrap.scm: fix for new g-wrap.

	* src/gnc-module/test/mod-baz/baz-gwrap.scm: fix for new g-wrap.

	* src/gnc-module/test/mod-foo/Makefile.am: fix for new g-wrap.

	* src/gnc-module/test/mod-bar/Makefile.am: fix for new g-wrap.

	* src/gnc-module/test/mod-baz/Makefile.am: fix for new g-wrap.

	* src/gnc-module/gw-gnc-module-spec.scm: fix for new g-wrap.

	* src/gnc-module/gnc-module.scm: fix for new g-wrap.

	* src/gnc-module/Makefile.am: fix for new g-wrap.

	* src/engine/test/Makefile.am (LDADD): remove libgw-glib.

	* src/engine/kvp-scm.c: g-wrap-runtime-guile.h -> g-wrap-wct.h

	* src/engine/gw-kvp-spec.scm: fix for new g-wrap.

	* src/engine/gw-engine-spec.scm: fix for new g-wrap.

	* src/engine/gncmod-engine.c: fix for new g-wrap.

	* src/engine/engine.scm: fix for new g-wrap.

	* src/engine/engine-helpers.h: accommodate changes to
	engine-helpers.c.

	* src/engine/Makefile.am: fix for new g-wrap.

	* src/core-utils/gw-core-utils-spec.scm: fix for new g-wrap.

	* src/core-utils/Makefile.am: fix for new g-wrap.

	* src/business/business-gnome/gw-business-gnome-spec.scm: fix for
	new g-wrap.

	* src/business/business-gnome/Makefile.am: fix for new g-wrap.

	* src/business/business-core/gw-business-core-spec.scm: fix for
	new g-wrap.

	* src/business/business-core/Makefile.am: fix for new g-wrap.

	* src/backend/postgres/test/Makefile.am (LDADD): remove libgw-glib.la.

	* src/backend/file/test/Makefile.am (LDADD): remove libgw-glib.la.

	* src/app-utils/test/Makefile.am (LDADD): remove libgw-glib.la.

	* src/app-utils/option-util.c: g-wrap-runtime-guile.h -> g-wrap-wct.h

	* src/app-utils/gw-app-utils-spec.scm: fix for new g-wrap.

	* src/app-utils/guile-util.c: g-wrap-runtime-guile.h -> g-wrap-wct.h

	* src/app-utils/Makefile.am: fix for new g-wrap.

	* src/app-file/gw-app-file-spec.scm: fix for new g-wrap.

	* src/app-file/Makefile.am: fix for new g-wrap.

2002-01-08  Dave Peticolas  <dave@krondo.com>

	* src/backend/postgres/test/test-db.c: test for new accounts

	* src/backend/postgres/account.c: check for missing parent
	account when loading accounts

	* src/backend/postgres/PostgresBackend.c: check for bad
	commodity string name

2002-01-07  Dave Peticolas  <dave@krondo.com>

	* src/backend/postgres/account.c: check for missing currency
	when loading accounts

	* src/backend/postgres/PostgresBackend.c: check for missing
	currency when loading transactions

2002-01-07  Christian Stimming  <stimming@tuhh.de>

	* src/report/report-system/commodity-utilities.scm: Tweaked the
	exchange rate calculation so that it will work in even more
	complicated cases, involving different Euroland and other
	currencies.

2002-01-06  Christian Stimming  <stimming@tuhh.de>

	* src/report/report-system/html-utilities.scm,
	src/report/standard-reports/*: Added option hyperlink in report
	warnings.

	* doc/sgml/*/xacc-euro.sgml: Fixed DEM rate as pointed out by
	Gregor Hoffleit <gregor@hoffleit.de>.

2002-01-05  Christian Stimming  <stimming@tuhh.de>

	* src/report/report-system/html-*.scm,
	src/report/stylesheets/stylesheet-*.scm: Added nowrap attribute
	for cells containing numbers.

2002-01-03  Dave Peticolas  <dave@krondo.com>

	* src/backend/postgres/PostgresBackend.c: allow gnucash tables
	to be installed in an existing database.

	* src/backend/postgres/upgrade.c: use pointer<->int conversion
	macros

2001-12-27  Dave Peticolas  <dave@krondo.com>

	* src/backend/postgres/test/test-db.c: expand testing

	* src/engine/Transaction.c: fix bugs. keep positive editlevel
	while committing and rolling back transaction.

2001-12-25  Dave Peticolas  <dave@krondo.com>

	* src/backend/postgres/test/test-db.c: test rollback

	* src/engine/Transaction.c: fix bug in transaction rollback

	* src/engine/test-core/test-engine-stuff.h: add test routine

	* src/engine/test-core/test-engine-stuff.c: add test routine

2001-12-20  Dave Peticolas  <dave@krondo.com>

	* src/scm/main.scm: update for api changes

	* src/report/report-gnome/window-report.h: add new init api

	* src/report/report-gnome/window-report.c: move some report
	initialization here from top-level.c

	* src/report/report-gnome/gncmod-report-gnome.c: call new report
	initialization function

	* src/report/report-gnome/Makefile.am: add app-utils dependency

	* src/gnome/top-level.h: update for api changes

	* src/gnome/top-level.c: remove some gnome initialization &
	shutdown. change ui init api.

	* src/gnome/gw-gnc-spec.scm: update for api changes

	* src/gnome/argv-list-converters.h: remove

	* src/gnome/argv-list-converters.c: remove

	* src/gnome/Makefile.am: remove argv-list-converters.[ch]

	* src/gnome-utils/gw-gnome-utils-spec.scm: g-wrap new funcs

	* src/gnome-utils/gncmod-gnome-utils.c: remove #include cruft

	* src/gnome-utils/gnc-html.c: remove #include cruft

	* src/gnome-utils/gnc-gnome-utils.h: new file

	* src/gnome-utils/gnc-gnome-utils.c: new file -- init and shutdown
	functions

	* src/gnome-utils/argv-list-converters.h: add

	* src/gnome-utils/argv-list-converters.c: add

	* src/gnome-utils/Makefile.am: add new files

	* src/gnc-ui.h: remove cruft

	* src/scm/main.scm: remove some report menu setup functionality

	* src/report/report-gnome/report-gnome.scm: move some report
	menu setup functionality here

	* src/gnome/top-level.c: take out component manager initialization
	and shutdown

	* src/engine/Transaction.c: fix spelling

	* src/backend/postgres/test/test-db.c: work on tests

	* src/backend/postgres/test/.cvsignore: ignore database dirs

	* src/backend/postgres/txn.c: fix spelling

	* src/app-utils/gncmod-app-utils.c: perform component manager
	initialization and shutdown here

	* src/app-file/gnc-file.c: suspend engine events when
	creating new session

2001-12-19  Dave Peticolas  <dave@krondo.com>

	* src/engine/gw-engine-spec.scm: g-wrap event types enum

	* src/engine/gnc-session.c: set book backend to NULL before
	destroying old book in gnc_session_load

	* src/engine/Transaction.c: do checks & events when setting
	slots for transactions and splits.

	* src/engine/GNCId.h: add a const typedef for GNCIdType

	* src/backend/postgres/test/test-db.c: add a test for backend
	transaction rollback due to stale data in the engine

	* src/backend/postgres/txn.c: fix bugs restoring one transaction
	from database.

	* src/backend/postgres/putil.h: add EXEC_QUERY

	* src/backend/postgres/price.h: add pgendGetCommodity

	* src/backend/postgres/price.c: add pgendGetCommodity

	* src/app-utils/test/test-component-manager: test g-wrapped
	component manager

	* src/app-utils/test/Makefile.am: add test-component-manager

	* src/app-utils/gw-app-utils-spec.scm: g-wrap component manager

	* src/app-utils/gnc-component-manager.h: add some SCM api

	* src/app-utils/gnc-component-manager.c : add some SCM api

2001-12-17  Dave Peticolas  <dave@krondo.com>

	* src/gnome-utils/gw-gnome-utils-spec.scm: add wrapping for widgets
	and other api

	* src/backend/postgres/test/test-db.c: add check for initial
	account balances

	* src/backend/postgres/PostgresBackend.c: fix bug. begin/commit
	account group when loading initial balances

2001-12-12  Dave Peticolas  <dave@krondo.com>

	* src/report/report-gnome/test/test-load-module: add

	* src/report/report-gnome/test/test-link-module.c: add

	* src/report/report-gnome/test/Makefile.am: add

	* src/report/report-gnome/test/.cvsignore: add

	* src/report/report-gnome/Makefile.am: add test dir

	* configure.in: configure report-gnome/test directory

2001-12-11  Rob Browning  <rlb@defaultvalue.org>

	* src/scm/command-line.scm: reorganize a little to remove some of
	the top-level actions.  Accommodate the new -path vars instead of
	the old -dir vars.
	(gnc:initialize-config-vars): new function -- initialize config
	vars to defaults, respecting any relevant envt variable
	overrides.

	* src/scm/doc.scm (gnc:find-doc-file): use
	gnc:find-localized-file, not gnc:find-file.

	* src/scm/main-window.scm: fix hooks usage to be idempotent --
	file should (re)load safely now.

	* src/scm/main.scm: migrate some loads to the top level - though
	to really do this right, we're going to need more explicit
	use-modules and gnc:module-load deps expressed everywhere.
	(gnc:find-file): new exported function.
	(gnc:find-localized-file): new exported function.
	(gnc:*config-path*): new export.
	(gnc:*share-path*): new export.
	(gnc:*doc-path*): new export.
	(gnc:flatten): new function.
	(build-path): simplify.
	(gnc:print-unstable-message): simplify.

	* src/scm/path.scm: rework doc-path handling completely, migrating
	much of the code to command-line.scm.
	(gnc:expand-path): new function.
	(gnc:load-system-config-if-needed): use gnc:*config-path*, not
	gnc:*config-dir*.
	(gnc:locale-prefixes): removed.
	(gnc:default-doc-dirs): removed.
	(gnc:_expand-doc-path_): removed.

	* src/scm/price-quotes.scm
	(gnc:*finance-quote-helper*): use gnc:*share-path*, not
	gnc:*share-dir*.

	* src/scm/tip-of-the-day.scm: rewrite to be re-loadable -- you now
	need to call an init function after loading the file.  In the long
	run, this should still become a module (guile or gnc).
	(gnc:initialize-tip-of-the-day): new function.
	(gnc:tip-of-the-day-startup-func): new function.

	* src/scm/build-config.scm.in: rename -dir_ variables to -path_
	and remove help-dir in favor of doc-path.

	* src/scm/Makefile.am (build-config.scm): remove
	GNC_PKGLIB_INSTALLDIR.

	* src/report/utility-reports/hello-world.scm
	(hello-world-renderer): modify to reflect switch from share-dir to
	share-path.

	* src/report/report-gnome/.cvsignore: add missing bits.

	* configure.in: now that libgnc-engine doesn't depend on guile any
	more, migrate the guile flags from "BASE" to the regular vars.
	(GNUCASH_ENGINE_BASE_LIBS): remove guile bits.
	(GNUCASH_ENGINE_LIBS): add guile bits.
	(GNUCASH_ENGINE_BASE_CFLAGS): remove guile bits.
	(GNUCASH_ENGINE_CFLAGS): add guile bits.

	* src/engine/.cvsignore: add a few missing bits.

	* src/engine/iso-currencies-to-c: new file -- convert
	iso-4217-currencies.scm to iso-4217-currencies.c.  Amazingly
	easily.  Woohoo for languages with built in self-parsers.

	* src/engine/Makefile.am: accommodate new automatically generated C
	code for default commodity table initialization.

	* src/engine/gnc-commodity.h
	(gnc_commodity_table_add_default_data): new prototype.

	* src/engine/gnc-commodity.c
	(gnc_commodity_table_add_default_data): new function -- populate a
	commodity table with the "default" commodities/namespaces.
	#includes the automatically generated code from
	iso-4217-currencies.

	* src/engine/engine-helpers.c
	(gnc_engine_commodity_table_new): removed.

	* src/engine/commodity-table.scm: migrate commodity table
	construction to be C-only.
	(gnc:load-iso-4217-currencies): removed.
	(gnc:setup-default-namespaces): removed.

	* src/engine/gnc-book.c (gnc_book_init): switch to use non-guile
	based gnc_commodity_table_add_default_data.

	* src/engine/engine-helpers.h: remove
	gnc_engine_commodity_table_new.

	* src/engine/engine.scm: don't export deleted
	gnc:engine-commodity-table-construct.

	* src/engine/iso-4217-currencies.scm: fix some typos.

	* src/report/report-gnome/Makefile.am
	(AM_CFLAGS): add GLADE_CFLAGS.
	(.scm-links): add report link.

	* src/report/report-gnome/.cvsignore: add *.lo and *.la.

	* src/optional/.cvsignore: add *.lo and *.la.

	* src/gnome/dialog-sxsincelast.c: #include gnc-gui-query.h

	* src/bin/overrides/gnucash-build-env.in: add report-gnome to
	test-env.  Change envt vars to reflect new scheme:
	GNC_CONFIG_PATH, GNC_SHARE_PATH, and GNC_DOC_PATH.

	* src/backend/postgres/test/test-db.c
	(db_file_url): find the postgres communication socket directory
	via envt var TEST_DB_SOCKET_DIR.

	* src/backend/postgres/test/db-control.sh: rework to communicate
	with postgres through a file system socket rather than a TCP
	connection so tests will work even on machines that don't allow
	TCP.  This was a little tricky because shell substitutions were
	fighting the PG_CTL "-o '-k x -p y'" syntax.

	* src/backend/postgres/test/Makefile.am
	(AM_CFLAGS): add GUILE_INCS.
	(TESTS_ENVIRONMENT): add TEST_DB_SOCKET_DIR.

	* intl-scm/Makefile.am (guile-strings.c): add top_srcdir.

	* configure.in (error-on-warning): make this the default.  I'm
	tired of having to fix missing #includes, mismatched types,
	etc. after an update so I can get back to work, but if anyone has
	a real problem with this, I'd be happy to reconsider.

	* src/scm/bootstrap.scm.in: deleted (a few days ago actually).

2001-12-11  Dave Peticolas  <dave@krondo.com>

	* src/tax/us/test/Makefile.am: remove report-gnome from dirs

	* src/tax/us/us.scm: don't use gw-gnc

	* src/report/utility-reports/test/Makefile.am: remove report-gnome
	from dirs

	* src/report/utility-reports/welcome-to-gnucash.scm: don't use gw-gnc

	* src/report/utility-reports/view-column.scm: don't use gw-gnc

	* src/report/utility-reports/utility-reports.scm: don't use gw-gnc

	* src/report/utility-reports/iframe-url.scm: don't use gw-gnc

	* src/report/utility-reports/hello-world.scm: don't use gw-gnc

	* src/report/stylesheets/test/Makefile.am: remove report-gnome
	from dirs

	* src/report/stylesheets/stylesheets.scm: don't use gw-gnc

	* src/report/stylesheets/stylesheet-plain.scm: don't use gw-gnc

	* src/report/stylesheets/stylesheet-fancy.scm: don't use gw-gnc

	* src/report/standard-reports/test/Makefile.am: remove report-gnome
	from dirs

	* src/report/standard-reports/transaction.scm: don't use gw-gnc

	* src/report/standard-reports/standard-reports.scm: don't use gw-gnc

	* src/report/standard-reports/register.scm: don't use gw-gnc

	* src/report/standard-reports/price-scatter.scm: don't use gw-gnc

	* src/report/standard-reports/portfolio.scm: don't use gw-gnc

	* src/report/standard-reports/pnl.scm: don't use gw-gnc

	* src/report/standard-reports/net-barchart.scm: don't use gw-gnc

	* src/report/standard-reports/category-barchart.scm: don't use gw-gnc

	* src/report/standard-reports/balance-sheet.scm: don't use gw-gnc

	* src/report/standard-reports/account-summary.scm: don't use gw-gnc

	* src/report/standard-reports/account-piecharts.scm: don't use gw-gnc

	* src/report/report-system/test/Makefile.am: remove report-gnome
	dir

	* src/report/report-system/report.scm: don't use gw-gnc

	* src/report/report-system/report-system.scm: don't use gw-gnc

	* src/report/report-gnome/window-report.c: implement report
	export handling gui here instead of in reports

	* src/report/report-gnome/report-gnome.scm: don't use gw-gnc

	* src/report/locale-specific/us/test/Makefile.am: remove
	report-gnome from dirs

	* src/report/locale-specific/us/taxtxf.scm: don't use gw-gnc.
	take out gui code.

	* src/import-export/qif-io-core/qif-io-core.scm: don't use gw-gnc

	* src/import-export/qif-import/qif-parse.scm: fix i18n

	* src/import-export/qif-import/qif-import.scm: don't use gw-gnc

	* src/gnome/gw-gnc-spec.scm: remove remaining gnome-utils wrapping

	* src/gnome-utils/test/Makefile.am: remove report-gnome from dirs

	* src/gnome-utils/gw-gnome-utils-spec.scm: add more wrapping
	from gw-gnc

	* src/gnome-utils/gnome-utils.scm: don't use gw-gnc

	* src/app-utils/test/Makefile.am: remove report-gnome from dirs

	* src/app-file/test/Makefile.am: remove report-gnome from dirs

2001-12-11  Christian Stimming  <stimming@tuhh.de>

	* src/app-utils/gnc-euro.c (gnc_convert_to_euro): Fixed rounding
	error.

	* src/gnome-utils/druid-utils.[ch]: added
	gnc_druid_set_logo_image.

2001-12-10  Dave Peticolas  <dave@krondo.com>

	* src/scm/main.scm: handle welcome report gui here

	* src/report/utility-reports/welcome-to-gnucash.scm: remove gui code

	* src/report/utility-reports/view-column.scm: remove
	options-editor code

	* src/report/report-system/report.scm: remove options-editor code

	* src/report/report-system/report-system.scm: remove
	options-editor code

	* src/report/report-gnome/report.glade: add

	* src/report/report-gnome/report-gnome.scm: handle options-editors
	here instead of in other report modules

	* src/report/report-gnome/gw-report-gnome-spec.scm: g-wrap more
	report api

	* src/report/report-gnome/dialog-style-sheet.h: add

	* src/report/report-gnome/dialog-style-sheet.c: add

	* src/report/report-gnome/dialog-column-view.h: add

	* src/report/report-gnome/dialog-column-view.c: add

	* src/report/report-gnome/Makefile.am: add new files. fix .scm-links

	* src/gnome/glade/report.glade: remove

	* src/gnome/glade/Makefile.am: remove report.glade

	* src/gnome/dialog-style-sheet.h: remove

	* src/gnome/dialog-style-sheet.c: remove

	* src/gnome/dialog-column-view.h: remove

	* src/gnome/dialog-column-view.c: remove

	* src/gnome/gw-gnc-spec.scm: remove report-related wrapping

	* src/gnome/Makefile.am: remove deleted files

2001-12-09  Dave Peticolas  <dave@krondo.com>

	* src/backend/postgres: add auto-generated headers

	* configure.in: add new default warnings

2001-12-08  Dave Peticolas  <dave@krondo.com>

	* src/bin/overrides/gnucash-build-env.in: add report-gnome dir

	* src/backend/postgres/test/test-db.c: remove unused function

	* configure.in: remove -Wno-unused

2001-12-07  Dave Peticolas  <dave@krondo.com>

	* src/report/report-system/report.scm: move a gnome function
	to report-gnome module

	* src/report/report-system/report-system.scm: remove export

	* src/report/report-gnome/report-gnome.scm: new file.

	* src/report/report-gnome/gw-report-gnome-spec.scm: wrap some more
	report bindings.

	* src/report/report-gnome/gncmod-report-gnome.c: load g-wrapped
	and gnucash report-gnome modules.

	* src/report/report-gnome/Makefile.am: add report-gnome.scm module

	* src/gnome/gw-gnc-spec.scm: remove some report bindings

2001-12-05  Bill Gribble  <grib@billgribble.com>

	* use AM_PATH_LIBGLADE instead of gnome-config for libglade paths

	* add --disable-gui option to configure.in and reshuffle
	src/Makefile.am to not build gui code if it's used.

2001-12-04  Rob Browning  <rlb@defaultvalue.org>

	* src/scm/main.scm: merge bootstrap.scm contents here and
	rearrange code to eliminate most, if not all top-level activities.

	* src/scm/.cvsignore: remove bootstrap.scm and add build-config.scm.

	* src/scm/Makefile.am: remove depend.scm and handle switch from
	bootstrap.scm to main.scm and build-config.scm.

	* src/scm/build-config.scm.in: new file -- keep all the
	auto-generated bits (and only those) here.

	* src/scm/doc.scm (gnc:load-help-topics): just use
	%search-load-path for now, though in the future these files
	probably ought to be elsewhere.

	* src/scm/path.scm (gnc:default-doc-dirs): match build-config.scm
	var names for help dir.

	* src/scm/command-line.scm: add other env var lookups as part of
	startup changes.  Change bootstrap to main.
	(gnc:*load-path*): eliminate.

	* src/gnc-module/gnc-module.c: remove guile includes.

	* src/gnc-module/Makefile.am (libgncmodule_la_LIBADD): remove
	guile libs -- not needed any more.

	* src/engine/test/test-period.c: must load the engine
	before using it, and check to make sure the load works.

	* src/engine/test/test-group-vs-book.c (main_helper): check for
	failure loading the engine.

	* src/bin/overrides/gnucash-build-env.in: part 1 of startup
	changes -- use envt vars for more bits: GNC_CONFIG_DIR,
	GNC_SHARE_DIR, and GNC_DOC_PATH now.

	* src/bin/overrides/gnucash: use main, not bootstrap.

	* src/app-utils/app-utils.scm: accommodate removal of
	utilities.scm, and use main not bootstrap.

	* src/app-utils/utilities.scm: code moved to main.scm -- needed
	earlier in boot process.

	* src/app-utils/Makefile.am (gncscm_DATA): remove utilities.scm.

	* Makefile.am (TAGS): modify to fix the problem where you had to
	run make twice to get it to succeed.

	* Makefile.TAGS: new file.

	* src/scm/depend.scm: deleted.

	* src/report/standard-reports/net-barchart.scm: rename bootstrap to main.

	* src/report/standard-reports/category-barchart.scm: rename
	bootstrap to main.

	* src/report/standard-reports/balance-sheet.scm: rename bootstrap
	to main.

	* src/report/standard-reports/receivables.scm: rename bootstrap to main.

	* src/report/standard-reports/payables.scm: rename bootstrap to
	main.

	* src/report/standard-reports/standard-reports.scm: rename
	bootstrap to main.

	* src/report/standard-reports/register.scm: rename bootstrap to main.

	* src/report/standard-reports/price-scatter.scm: rename bootstrap
	to main.

	* src/report/standard-reports/portfolio.scm: rename bootstrap to main.

	* src/report/standard-reports/average-balance.scm: rename
	bootstrap to main.

	* src/report/utility-reports/welcome-to-gnucash.scm: rename
	bootstrap to main.

	* src/report/utility-reports/utility-reports.scm: rename bootstrap
	to main.

	* src/report/standard-reports/transaction.scm: rename bootstrap to main.

	* src/report/standard-reports/aging.scm: rename bootstrap to main.

	* src/report/utility-reports/view-column.scm: rename bootstrap to main.

	* src/report/standard-reports/account-summary.scm: rename
	bootstrap to main.

	* src/report/standard-reports/account-piecharts.scm: rename
	bootstrap to main.

	* src/report/utility-reports/iframe-url.scm: rename bootstrap to main.

	* src/report/utility-reports/hello-world.scm: rename bootstrap to main.

	* src/tax/us/us.scm: rename bootstrap to main.

	* src/scm/price-quotes.scm: rename bootstrap to main.

	* src/report/stylesheets/stylesheets.scm: rename bootstrap to main.

	* src/report/stylesheets/stylesheet-plain.scm: rename bootstrap to main.

	* src/report/stylesheets/stylesheet-fancy.scm: rename bootstrap to main.

	* src/report/report-system/report.scm: rename bootstrap to main.

	* src/report/report-system/report-system.scm: rename bootstrap to main.

	* src/report/locale-specific/us/taxtxf.scm: rename bootstrap to main.

	* src/import-export/qif-io-core/qif-io-core.scm: rename bootstrap
	to main.

	* src/gnome-utils/gnome-utils.scm: rename bootstrap to main.

	* src/import-export/qif-import/qif-import.scm: rename bootstrap to main.

	* src/report/standard-reports/pnl.scm: rename bootstrap to main.

2001-11-28  Rob Browning  <rlb@defaultvalue.org>

	* src/bin/Makefile.am: handle new overrides arrangement.

	* src/bin/generate-gnc-script: new script to generate all the
	trivial top-level gnucash redirection scripts.

	* src/scm/tip-of-the-day.scm (gnc:read-tips): use
	%search-load-path to find the tips, not gnc:find-in-directories
	and gnc:*load-path*.  In truth, the tips should be in sharedir
	anyway, but we'll handle that later.

	* src/scm/main.scm (gnc:startup): call gnc:setup-gettext and
	setlocale just after loading app-utils.  If this isn't early
	enough, we'll need to try something else.

	* src/scm/command-line.scm (gnc:*config-dir*): add GNC_CONFIG_DIR
	environment variable override.

	* src/scm/bootstrap.scm.in: switch to use load-from-path for
	main.scm.

	* src/bin/test/test-run-script: new file.

	* src/bin/overrides/gnucash-run-script: new file -- mostly content
	of ../gnucash-run-script.

	* configure.in: add adjustments for new static overrides scripts.

	* src/import-export/binary-import/Makefile.am
	(.scm-links): add some more links so runs from build dir will
	actually work.

	* src/gnome/Makefile.am: accommodate the removal of gnucash.h,
	gnucash.c.in, and the move of i18n.h.in which all resulted in the
	removal of libgncguile.la.

	* src/gnc-module/gnc-module.c
	(gnc_module_system_setup_load_path): don't do anything when dir
	list is empty.

	* src/business/business-core/gncInvoice.c
	(gncInvoiceGetInvoiceFromTxn): initialize book to NULL so warnings
	won't kill -Werror compiles.

	* src/app-utils/.cvsignore: add i18n.h.

	* src/app-utils/Makefile.am
	(gncinclude_HEADERS): add i18n.h
	(EXTRA_DIST): add i18n.h.in
	(i18n.h): new target.

	* src/app-utils/gw-app-utils-spec.scm: add wrapper for
	gnc:setup-gettext.

	* src/app-utils/README: new file.

	* src/bin/overrides/guile.in: moved from ../.

	* src/bin/overrides/gnucash-make-guids: new file -- mostly content
	of ../gnucash-make-guids.in.

	* src/bin/overrides/gnucash-env.in: moved from ../.

	* src/bin/overrides/gnucash-build-env.in: moved from ../.

	* src/bin/.cvsignore: update for file rearrangements.

	* src/bin/test/test-version: new file.

	* src/bin/test/test-guile-env-override: new file.

	* src/bin/test/fake-guile: new file.

	* src/bin/test/Makefile.am: new file.

	* src/bin/test/.cvsignore: new file.

	* src/bin/overrides/gnucash: new file.

	* src/bin/overrides/Makefile.am: new file.

	* src/bin/overrides/.cvsignore: new file.

	* src/bin/gnucash.in: removed.

	* src/bin/gnucash-make-guids.in: removed.

	* src/bin/gnucash-run-script.in: removed.

	* src/bin/guile.in: moved to src/bin/overrides.

	* src/bin/gnucash-env.in: moved to src/bin/overrides.

	* src/import-export/qif-import/Makefile.am (.scm-links): new target.

	* src/gnome/gnucash.h: removed.

	* src/gnome/gnucash.c.in: removed.

	* src/gnome/i18n.h.in: moved to src/app-utils.

	* src/import-export/qif-import/.cvsignore: add .scm-links.

	* src/gnome/top-level.c: remove gnucash.h include.

	* src/gnome/gw-gnc-spec.scm: remove gnucash.h include.

	* src/core-utils/.cvsignore: add .scm-links.

	* src/core-utils/gw-core-utils-spec.scm: new file.

	* src/core-utils/Makefile.am: accommodate new g-wrappers.

	* src/app-utils/gnc-gettext-util.c (gnc_setup_gettext): move here.

	* src/app-utils/gnc-gettext-util.h (gnc_setup_gettext): move here.

	* src/app-utils/i18n.h.in: move here from src/gnome.

2001-11-26  Robert Graham Merkel  <rgmerk@mira.net>

	* src/*/Makefile.am: add ${GLADE_CFLAGS} to AM_CFLAGS.

2001-11-21  Rob Browning  <rlb@defaultvalue.org>

	* README: add a note to the Running section indicating that it's
	obsolete.  We'll need to update this soon.

	* src/scm/startup-design.txt: some updates -- needs overhaul.

	* src/bin/guile.in: trivial guile override wrapper.

	* src/bin/gnucash.in: rearrange code so that the file can be
	interactively loaded for debugging without firing up gnucash
	immediately.

	* src/bin/gnucash-env.in: add the script-override directory to the
	front of the user's PATH.

	* src/bin/Makefile.am (gncoverridedir): new var.
	(gncoverride_SCRIPTS): new var -- add guile.
	(guile): new target -- guile override stub script.

	* src/bin/.cvsignore: add guile.

	* doc/gnucash.1: remove some vestigial envt var refs.

	* configure.in: add GNC_LIBEXECDIR.
	(AC_OUTPUT): add src/bin/Makefile.

	* src/bin/gnucash-env.in: carefully setup PATH to pick up correct
	guile.

	* src/bin/: new directory.  Added so that scripts will be in a
	subdir and can be re-made/installed without a full build.

	* src/bin/gnucash-env.in: new file -- you can use this to invoke
	programs or scripts with the proper gnucash
	environment. i.e. "gnucash-env guile -s foo bar" or
	"gnucash-env some-command arg1 arg2 ..."

	* src/gnome/window-main.c (gnc_shutdown): moved here for now, but
	should eventually be moved to app-utils (or similar) and made
	public again.

	* src/bin/gnucash.in: moved here from ../gnucash.sh.in.  Now uses
	gnucash-env to set up environment.

	* src/gnome/gnucash.c.in: removed all code except
	gnc_setup_gettext, which should be moved to app-utils, or
	core-utils soon.

	* src/scm/main.scm: remove append-path calls - handled in gnucash-env.
	(append-path): unused -- deleted.
	(gnc:main): handle setlocale here.

	* src/.cvsignore: remove bits that moved to src/bin.

	* src/Makefile.am: handle new src/bin directory, and remove all
	the old gnucash binary bits.

	* src/gnc-main.c: deleted.

	* src/gnucash-make-guids.in: moved to src/bin.

	* src/gnucash-run-script.in: moved to src/bin.

	* src/gnucash.sh.in: moved to src/bin/gnucash.in.

	* src/gnome/gnucash.h: removed many dead functions.

	* src/bin/gnucash-run-script.in: moved here from ..

	* src/bin/gnucash-make-guids.in: moved here from ..

	* src/bin/Makefile.am: new file.

	* src/bin/.cvsignore: new file.

2001-11-20  Rob Browning  <rlb@defaultvalue.org>

	* src/gnome/gnucash.c.in
	(gnucash_main_helper): switch to gnc_setenv.

	* src/gnome/Makefile.am (AM_CFLAGS): add core-utils.

	* src/gnc-module/gnc-module.c
	(gnc_module_system_setup_load_path): use gnc_setenv.

	* src/gnc-module/Makefile.am
	(AM_CFLAGS): add core-utils.
	(libgncmodule_la_LIBADD): add core-utils.

	* src/engine/gnc-engine-util.h: add #include config.h.

	* src/dialog-account/Makefile.am
	(AM_CFLAGS): add GDK_PIXBUF_CFLAGS.

	* src/core-utils/core-utils.h: new file.

	* src/core-utils/core-utils.c: new file.
	(gnc_setenv): new function.
	(gnc_unsetenv): new function.

	* src/core-utils/Makefile.am: new file.

	* src/core-utils/.cvsignore: new file.

	* src/business/business-gnome/Makefile.am
	(AM_CFLAGS): add GDK_PIXBUF_CFLAGS.

	* src/backend/file/test/test-save-in-lang.c
	(test_file): switch from putenv to gnc_setenv.
	(main): switch from putenv to gnc_setenv.

	* src/backend/file/test/Makefile.am (AM_CFLAGS): add src/core-utils.

	* configure.in (AC_OUTPUT): add src/core-utils.

	* src/backend/file/sixtp-utils.c (gnc_timegm): switch from putenv
	to gnc_setenv and gnc_unsetenv.

	* src/README.modules: add core-utils.

	* src/Makefile.am (SUBDIRS): add core-utils.

2001-11-17  Rob Browning  <rlb@defaultvalue.org>

	* src/business/business-gnome/.cvsignore: add various-things.

	* src/business/business-core/.cvsignore: add various things.

	* src/business/business-core/test/Makefile.am: fixup
	TESTS_ENVIRONMENT to use gnc-test-env.

	* src/business/business-core/test/.cvsignore: add various things.

	* src/business/.cvsignore: add Makefile.in.

	* src/gnc-module/test/test-scm-multi: turned into guile script
	invoked via /bin/sh.

	* src/gnc-module/test/test-scm-multi.scm: deleted.

	* src/gnc-module/test/Makefile.am: use gnc-test-env.
	(EXTRA_DIST): remove test-scm-multi.scm.

	* src/business/business-gnome/Makefile.am
	(AM_CFLAGS): add GNOME_PRINT_CFLAGS.

2001-11-16  Rob Browning  <rlb@defaultvalue.org>

	* configure.in (AC_OUTPUT): add src/dialog-account.

	* src/.cvsignore: add gnucash.sh.

	* src/gnucash.sh.in: new file -- this will eventually become the
	primary gnucash program, but for now, let's make it available for
	testing.

	* src/Makefile.am (SUBDIRS): re-order to fix dependency problems.
	(bin_SCRIPTS): add gnucash.sh.
	(EXTRA_DIST): add gnucash.sh.in.
	(gnucash.sh): new target.

	* src/gnc-module/test/test-scm-init: don't set %load-path
	internally anymore -- depend on a proper TESTS_ENVIRONMENT.

	* src/gnc-module/test/test-load-scm: turn in to a self-contained
	guile script launched by /bin/sh which will respect the PATH.

	* src/gnc-module/test/test-load-deps: turn in to a self-contained
	guile script launched by /bin/sh which will respect the PATH.

	* src/gnc-module/test/Makefile.am
	(EXTRA_DIST): remove test-load-deps.scm.

	* src/tax/us/test/Makefile.am: switch to use gnc-test-env to build
	TESTS_ENVIRONMENT.

	* src/scm/main.scm (gnc:startup): very ugly hack -- right now we
	switch the current-module briefly during the loads.  This should
	go away once the rest of the startup process is cleaned up.

	* src/gnc-module/gnc-module.c
	(gnc_module_system_setup_load_path): don't change %load-path
	anymore, augment LD_LIBRARY_PATH instead.  This reflects the
	change in how guile and g-wrap now load C shared libraries.

	* src/app-utils/file-utils.h: moved here from src/gnome.

	* src/app-utils/file-utils.c: moved here from src/gnome.

	* src/app-utils/Makefile.am: add file-utils.

	* src/gnc-module/test/test-load-deps.scm: deleted - unnecessary.

	* src/register/ledger-core/dialog-dup-trans.c: moved here from
	src/gnome.

	* src/register/ledger-core/Makefile.am: add dialog-dup-trans.
	(SUBDIRS): add . first so tests will work.
	(libgncmod_ledger_core_la_LIBADD): add missing dependencies.
	(AM_CFLAGS): add needed -I.

	* src/gnome-utils/window-help.h: moved here from src/gnome.

	* src/gnome-utils/window-help.c: moved here from src/gnome.

	* src/gnome-utils/Makefile.am: add window-help.

	* src/gnome/gnucash.c.in: add temporary helpers for gnucash
	scriptification.

	* src/gnome/top-level.c: remove spurious dialog-account.h include.

	* src/gnome/file-utils.h: moved to src/app-utils.

	* src/gnome/file-utils.c: moved to src/app-utils.

	* src/gnome/window-help.h: moved to src/gnome-utils.

	* src/gnome/window-help.c: moved to src/gnome-utils.

	* src/gnome/dialog-dup-trans.c: moved to src/register/ledger-core.

	* src/gnome/dialog-account.c: moved to src/dialog-account.

	* src/gnome/dialog-account.h: moved to src/dialog-account.

	* src/gnome/Makefile.am: accommodate file relocations.

	* src/dialog-account/dialog-account.c: moved here to break mutual
	dependency between ledger-core and libgncgnome.

	* src/dialog-account/dialog-account.h: moved here to break mutual
	dependency between ledger-core and libgncgnome.

	* src/dialog-account/Makefile.am: new file.

	* src/dialog-account/.cvsignore: new file.

2001-11-16  Christian Stimming  <stimming@tuhh.de>

	* src/Makefile.am, src/gnome-utils/Makefile.am: Moved
	${GUPPI_LIBS} to appear before GNOME_LIBDIR in *_LIBADD so that
	--with-libguppi-prefix can have any effect at all.

2001-11-13  Robert Graham Merkel <rgmerk@mira.net>

	* src/gnc-module/Makefile.am: libgw-gnc-module.la needs
          to be linked to libgncmodule.la

2001-11-12  Rob Browning  <rlb@defaultvalue.org>

	* src/gnome/Makefile.am (noinst_HEADERS): add gw-gnc.h.

	* src/report/utility-reports/test/Makefile.am: use gnc-test-env.

	* src/report/stylesheets/test/Makefile.am: switch to use gnc-test-env.

	* src/gnome/Makefile.am: accommodate files from src/guile.

	* src/gnome/gnucash.c.in: moved here from src/guile.

	* src/gnome/gnucash.h: moved here from src/guile.

	* src/gnome/i18n.h.in: moved here from src/guile.

	* src/gnome/.cvsignore: add files from src/guile.

	* src/Makefile.am: update to reflect deleted src/gnome.

	* configure.in: update to reflect deleted src/gnome.

	* src/guile: deleted -- remaining contents moved to src/gnome.

	* src/scm/Makefile.am: added config.

	* src/scm/config: moved from src/scm.

	* src/guile/Makefile.am: remove config.

	* src/guile/config: moved to src/scm.

	* src/report/standard-reports/test/Makefile.am: use gnc-test-env.

	* configure.in: set execute bit on gnc-test-env.

	* src/gnc-test-env: new script.

2001-11-09  Rob Browning  <rlb@defaultvalue.org>

	* src/gnc-module/test/Makefile.am (TESTS_ENVIRONMENT): add missing
	components in GUILE_LOAD_PATH.

	* src/gnome-utils/test/Makefile.am
	(INCLUDES): typo - GUILE_INCS not GUILE_CFLAGS.

	* src/tax/us/test/.cvsignore: add .libs.

	* src/report/locale-specific/us/test/.cvsignore: add .libs.

	* src/import-export/qif-import/test/.cvsignore: add .libs.

	* src/backend/file/test/Makefile.am
	(AM_CFLAGS): add GUILE_INCS.

	* src/guile/tip-of-the-day.h: moved to src/gnome.

	* src/guile/tip-of-the-day.c: moved to src/gnome.

	* src/gnome/tip-of-the-day.h: moved from src/guile.

	* src/gnome/tip-of-the-day.c: moved from src/guile.

	* src/guile/Makefile.am: remove tip-of-the-day.

	* src/gnome/Makefile.am: move tip-of-the-day here.

	* src/guile/Makefile.am: fix for new automake.

	* src/gnome-utils/Makefile.am (BUILT_SOURCES): fix for new automake.

	* src/app-file/test/.cvsignore: add Makefile.in.

	* src/import-export/qif-import/test/.cvsignore: add .deps.

	* src/report/locale-specific/us/test/.cvsignore: add .deps.

	* src/tax/us/test/.cvsignore: add .deps.

2001-11-06  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/dialog-sxsincelast.c (create_each_transaction_helper):
	Fixed credit/debit confusion.

	* src/gnome/dialog-sx-from-trans.c (sxftd_add_template_trans):
	Fixed credit/debit confusion.

2001-11-04  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome-utils/gnc-frequency.c: saving state and updating the
	calendar markings no longer force so much of a
	component-manager/UI refresh.

	* src/guile/gw-gnc-spec.scm: Changed sx-since-last return type to
	gboolean [bool]; added better sx-since-last-run-wrapper param name
	[s/foo/bookfile/].

	* src/gnome/dialog-scheduledxaction.c (new_button_clicked): Better
	initial-FreqSpec setup to prevent error from GNCFrequency.

	* src/engine/SchedXaction.c (xaccSchedXactionSetTemplateTrans):
	Added support for setting template-transaction currency from the
	TTinfo structure.

	* src/gnome/dialog-sxsincelast.c: Correct support for "nothing
	to do": if this is the case, don't load/create the UI.  Required
	much re-working due to my bad design. :(
	Added component-manager freeze/thaw [equivalents] around engine
	interaction to minimize program-wide GUI refresh during
	Transaction creation.
	(finish_finish): Added support for 'finish' button.
	(cancel_check): Initial support for cancel button, checking with
	user regarding.

2001-10-29  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/dialog-sxsincelast.c: Unused pages are skipped,
	initial version.

	* src/gnome/dialog-sx-from-trans.c: Added start date handling; as
	well, correctly update the start date when the frequency option
	changes.  Added using FreqSpecs for start date calculation.  Added
	correctly

	* src/gnome-utils/gnc-account-tree.c (gnc_account_tree_init): Make
	account-tree description column auto-resize.

	* src/engine/SchedXaction.c (xaccSchedXactionSetEndDate): Removed
	end date validity check; an invalid end date is how we signal "no
	end date".

2001-10-25  Dave Peticolas  <dave@krondo.com>

	* src/scm/Makefile.am: remove slib-backup.scm and startup.scm

	* src/scm/bootstrap.scm.in: remove out-of-date docs

	* src/scm/main.scm: load printing/print-check.scm

	* src/import-export/qif-import/Makefile.am: remove simple-obj.scm

	* src/import-export/qif-import/qif-import.scm: don't load
	simple-obj.scm

	* src/guile/gw-gnc-spec.scm: remove printing g-wraps

	* src/gnome-utils/gw-gnome-utils-spec.scm: add printing g-wraps

	* src/engine/Account.c (xaccAccountSetSlots_nc): set core_dirty

	* src/app-utils/Makefile.am: add simple-obj.scm

	* src/app-utils/app-utils.scm: export simple-obj api

2001-10-24  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/dialog-scheduledxaction.c (sxed_delete_event): Added.
	(gnc_ui_scheduled_xaction_editor_dialog_create): Added support for
	delete-event [WM window close].
	(sxed_check_close): Added close-check, including register check.
	(editor_cancel_button_clicked): Renamed from
	editor_close_button_clicked; correctly handles a cancel WRT ledger
	changes.

	* src/gnome/glade/sched-xact.glade: Added as-yet-unused Start
	Date widgets to make-from-transaction dialog.

	* src/gnome/dialog-sx-from-trans.c (sxftd_add_template_trans): Use
	the user-friendly amount formating instead of a stringified
	gnc_numeric.  Copies the account data over into the template
	transaction.
	(sxftd_init): Added; supports using the Description of the
	transaction as the initial name of the SX.

2001-10-22  Joshua Sled  <jsled@asynchronous.org>

	* src/engine/SchedXaction.c (xaccSchedXactionInit): Fixed
	number-of-occurrences init problem.

	* src/gnome/dialog-scheduledxaction.c (schedXact_editor_populate):
	Fixed bug in populating the editor.

2001-10-22  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/window-main.c (gnc_ui_mainWindow_nextrun_cb):
	Removed obsolete dialog.

2001-10-22  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/Makefile.am: Removed obsolete dialog-nextrun.{c,h}

	* src/gnome/window-main.c (gnc_main_window_create_menus): Added
	both Scheduled Transaction-related items to "Scheduled
	Transactions" sub-menu of "Tools".
	(gnc_main_window_about_cb): Added self to GUI About dlg.

	* src/gnome/dialog-scheduledxaction.c: Renamed '_'-led functions.

	* src/gnome/dialog-sxsincelast.c: Changed from a loose
	confederation of multiple dialogs to the strong central authority
	of a GnomeDruid-based since-last-run UI.  Renamed '_'-led
	functions.

	* src/gnome/glade/sched-xact.glade: Fixed a non-unique-name
	problem between the GnomeNumberEntry "end_nentry" and it's
	GtkEntry "end_nentry".  Added Druid-based Since-Last-Run dialog.

	* src/gnome/dialog-scheduledxaction.c (schedXact_editor_populate),
	(editor_ok_button_clicked): Added support for now-uniquely-named
	"end_gnome_nentry".

	* src/engine/SchedXaction.c
	(xaccSchedXactionCreateSequenceState): Added.
	(xaccSchedXactionIncrSequenceState): Added.
	(xaccSchedXactionDestroySequenceState): Added.
	Added support for opaque state data when generating a sequence of
	SX instances to support number-of-occurrence-terminated SXes.

	* src/backend/file/gnc-freqspec-xml-v2.c (dom_tree_to_freqSpec):
	Added missing instance of GNCSession propagation.

	* src/backend/file/io-gncxml-v2.c
	(write_template_transaction_data): Added correct determination for
	writing out the template-transaction section [before: only if
	transactions existed in accounts; now: if any accounts exist] to
	prevent read errors from SXes with valid-and-referenced Accounts,
	but no Transactions in them.

	* src/gnome-utils/gnc-frequency.c (gnc_frequency_setup): Better
	error text when UIFreqType isn't recognized or appropriate.

	* src/gnome/dialog-scheduledxaction.c (editor_ok_button_clicked):
	Correctly sets SXes to have no occurrence data if that's the case.
	Better option variable naming, usage.

2001-10-16  Dave Peticolas  <dave@krondo.com>

	* src/engine/test-core/test-engine-stuff.c: work on test
	infrastructure for making changes to existing data

	* src/engine/gnc-book.c: keep backends up to date

	* src/engine/gnc-session.c: keep backends up to date

	* src/backend/postgres/test/db-control.sh: bring down postmaster
	on database create and destroy

	* src/backend/postgres/test/test-db.c: work on single-update
	test

	* src/backend/postgres/txn.c: fix bug -- when deleting splits
	from the database that aren't in the engine, can't use
	xaccSplitLookup.

2001-10-14  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/dialog-scheduledxaction.c (delete_button_clicked):
	Fixed multiple bugs in deletion selection-handling.
	(schedXact_editor_populate), (schedXact_editor_create_ledger):
	Added code for respecting the user's Preferences.

	* src/gnome/dialog-scheduledxaction.c
	(gnc_ui_scheduled_xaction_dialog_create): Added support for only a
	single SX list to be up at any one time; if one already exists,
	show and raise that window instead of creating a new one.

	* src/gnome/dialog-scheduledxaction.c
	(gnc_ui_scheduled_xaction_editor_dialog_create): Only one editor
	for any Scheduled Transaction open at a time; if one already
	exists, show and raise it's window.

	* src/gnome/dialog-scheduledxaction.c
	(schedXact_editor_create_ledger): Add [read: steal from
	window-register.c] register toolbar, suitably modified for SXes.

	* src/app-utils/prefs.scm: Updates to wording, defaults for
	Scheduled Transaction preferences.

2001-10-14  Rob Browning  <rlb@defaultvalue.org>

	* src/backend/file/test/Makefile.am
	(TESTS_ENVIRONMENT): add paths.

	* src/app-utils/test/Makefile.am
	(TESTS_ENVIRONMENT): add paths.

	* src/tax/us/test/Makefile.am
	(TESTS_ENVIRONMENT): add paths.

	* src/tax/us/us.scm (gnucash): added use-modules.

	* src/scm/printing/print-check.scm: remove gnc:support and
	gnc:depend calls.

	* src/scm/gnumeric/gnumeric-utilities.scm: remove gnc:support and
	gnc:depend calls.

	* src/scm/xml-generator.scm: remove gnc:support call.

	* src/scm/substring-search.scm: remove gnc:support call.

	* src/scm/startup.scm: comment out everything -- if this works, we
	should remove this file soon.

	* src/scm/price-quotes.scm: make it a guile module -- add exports,
	use-modules, etc.

	* src/scm/path.scm (gnc:locale-prefixes): () -> '().

	* src/scm/main.scm (gnc:startup): change gnc:depend calls to
	load-from-path.
	(gnc:main): add second arg to eval call to comply with standard.

	* src/scm/main-window.scm: remove gnc:support call.

	* src/scm/extensions.scm: remove gnc:support call.

	* src/scm/doc.scm: remove gnc:support call.

	* src/scm/command-line.scm
	(gnc:*arg-defs*): use gnc:use-module-module-here!.

	* src/scm/bootstrap.scm.in: remove slib compatibility stuff.
	Add many exports for stuff that used to be "global".
	Load main.scm from here now.
	(gnc:use-guile-module-here!): new function.

	* src/scm/Makefile.am (gncscmmod_DATA): move bootstrap.scm here.

	* src/report/utility-reports/test/Makefile.am
	(TESTS_ENVIRONMENT): add paths.

	* src/report/utility-reports/welcome-to-gnucash.scm: added use-modules.

	* src/report/utility-reports/view-column.scm: added use-modules.

	* src/report/utility-reports/utility-reports.scm: added use-modules.

	* src/report/utility-reports/iframe-url.scm: added use-modules.

	* src/report/utility-reports/hello-world.scm: added use-modules.
	(hello-world-renderer): use share-dir config var, not bare binding.

	* src/report/stylesheets/test/Makefile.am
	(TESTS_ENVIRONMENT): add paths.

	* src/report/stylesheets/stylesheets.scm: added use-modules.

	* src/report/stylesheets/stylesheet-plain.scm: added use-modules.

	* src/report/stylesheets/stylesheet-fancy.scm: added use-modules.

	* src/report/standard-reports/test/Makefile.am
	(TESTS_ENVIRONMENT): add paths.

	* src/report/standard-reports/transaction.scm: added use-modules.

	* src/report/standard-reports/standard-reports.scm: added use-modules.

	* src/report/standard-reports/register.scm: added use-modules.

	* src/report/standard-reports/price-scatter.scm: added use-modules.

	* src/report/standard-reports/portfolio.scm: added use-modules.

	* src/report/standard-reports/pnl.scm: added use-modules.

	* src/report/standard-reports/payables.scm: added use-modules.

	* src/report/standard-reports/net-barchart.scm: added use-modules.

	* src/report/standard-reports/category-barchart.scm: added use-modules.

	* src/report/standard-reports/balance-sheet.scm: added use-modules.

	* src/report/standard-reports/account-summary.scm: added use-modules.

	* src/report/standard-reports/account-piecharts.scm: added use-modules.

	* src/report/report-system/report-system.scm: added use-modules.

	* src/report/locale-specific/us/test/Makefile.am
	(TESTS_ENVIRONMENT): add paths.

	* src/report/locale-specific/us/taxtxf.scm: added use-modules.

	* src/import-export/qif-io-core/qif-io-core.scm: added
	use-modules.

	* src/import-export/qif-import/qif-import.scm: added use-modules.

	* src/guile/gnucash.c.in
	(GNC_BOOTSTRAP_SCM): now in gnucash module dir.
	(gnc_gw_init): remove gw_init_module_gw_gnc call.
	(gnucash_main_helper): don't mess with startup, just run gnc:main.

	* src/guile/Makefile.am (gnucash): new symlink target.
	(g-wrapped): new symlink target.

	* src/gnc-module/gnc-module.c (gnc_module_system_init): add some
	error checking -- may need a way to return errors.

	* src/engine/test/Makefile.am (TESTS_ENVIRONMENT): add paths.

	* src/engine/engine.scm: added use-modules.

	* src/app-utils/guile-util.h:
	(gnc_depend): deleted.
	(gnc_scm_lookup): new prototype.

	* src/app-utils/guile-util.c
	(gnc_depend): deleted.
	(gnc_scm_lookup): new cross-guile function -- disabled until we
	can test it.

	* src/app-utils/app-utils.scm: added use-modules.

2001-10-13  Dave Peticolas  <dave@krondo.com>

	* src/guile/Makefile.am (libgncguile_la_LIBADD): remove gncgnome.la
	dependency

	* src/engine/test-core/test-engine-stuff.c (get_random_timespec):
	add flag to always set nsec to 0.
	(get_random_transaction_with_currency): new func
	(add_random_transactions_to_session): new func

	* src/backend/postgres/test/db-control.sh: add 'connect' argument
	to start psql connection

	* src/backend/postgres/test/test-db.c: add random transactions
	to the mix

	* src/backend/postgres/account.c (pgendStoreAccountNoLock): expound
	on commodity table comment

2001-10-12  Rob Browning  <rlb@defaultvalue.org>

	* src/scm/printing/print-check.scm: use number-to-words module.

	* src/scm/printing/number-to-words.scm: make a guile module.

	* src/scm/printing/Makefile.am
	(gncscmmoddir): added.
	(gncscmmod_DATA): number-to-words.scm now a guile module.
	(gncscm_DATA): removed number-to-words.scm.
	(EXTRA_DIST): handle number-to-words.scm move.

	* src/guile/Makefile.am
	(libgncguile_la_SOURCES): libgncguile is now a shared lib.
	(libgncguile_la_LIBADD): libgncguile is now a shared lib.
	(libgncguile_la_LDFLAGS): libgncguile is now a shared lib.
	(libgw_gnc_la_SOURCES): libgw-gnc is now a shared lib.
	(libgw_gnc_la_LIBADD): libgw-gnc is now a shared lib.
	(libgw_gnc_la_LDFLAGS): libgw-gnc is now a shared lib.

	* src/guile/.cvsignore: add files for shared libs.

	* src/gnome/Makefile.am
	(lib_LTLIBRARIES): libgncgnome is now a shared lib.
	(libgncgnome_la_SOURCES): libgncgnome is now a shared lib.

	* src/gnome/.cvsignore: add files for shared libs.

	* src/engine/Makefile.am
	(libgw_glib_la_LDFLAGS): use ${G_WRAP_LINK_ARGS}.
	(libgw_engine_la_LDFLAGS): use ${G_WRAP_LINK_ARGS}.
	(libgw_kvp_la_LDFLAGS): use ${G_WRAP_LINK_ARGS}.

	* src/Makefile.am (gnucash_LDADD): link gncguile and gncgnome as
	shared libs now.

	* .cvsignore: add stamp-h1 (where does this come from?).

	* configure.in (GNC_ADD_ON_SRFIS): compute needed SRFIs.

	* lib/srfi/Makefile.am: determine SRFI list via autoconf.

2001-10-12  Dave Peticolas  <dave@krondo.com>

	* src/test-core/test-stuff.c (get_random_string_without): new func

	* src/engine/test-core/test-engine-stuff.c
	(get_random_kvp_frame_depth): fix bug
	(get_random_session): new func

	* src/engine/Account.c (xaccAccountEqual): more warnings, use
	gnc_commodity_equal

	* src/engine/Group.c (xaccGroupEqual): more warnings

	* src/engine/Transaction.c: use gnc_commodity_equal

	* src/engine/gnc-book.c (gnc_book_equal): compare commodity tables

	* src/engine/gnc-commodity.c (gnc_commodity_equal): new func
	(gnc_commodity_table_equal): new func

	* src/engine/gnc-session.c (gnc_session_begin): destroy old backend

	* src/backend/postgres/test/.cvsignore: ignore test files

	* src/backend/postgres/test/Makefile.am: add file backend .la
	to get symbols for gdb

	* src/backend/postgres/test/run-tests.sh: remove test files
	before starting test

	* src/backend/postgres/test/test-db.c: when books differ, write
	out xml files

	* src/backend/file/test/test-xml-account.c (test_add_account):
	fix for strong commodity equal test

2001-10-11  Rob Browning  <rlb@defaultvalue.org>

	* configure.in: require at least g-wrap 1.3.1.

2001-10-11  Dave Peticolas  <dave@krondo.com>

	* src/register/register-core/table-allgui.c
	(gnc_table_traverse_update): remove assert

	* src/import-export/binary-import/druid-commodity.c: use g_assert

	* src/guile/gnucash.c.in (gnc_main): use g_assert

	* src/gnome-utils/gnc-account-tree.c: remove asserts

	* src/gnome/dialog-fincalc.c (normalize_period): remove asserts

	* src/gnome/dialog-find-transactions.c: remove asserts

	* src/gnome/dialog-scheduledxaction.c: remove asserts

	* src/gnome/reconcile-list.c: remove asserts

	* src/gnome/window-register.c: remove asserts

	* src/engine/Account.c: remove asserts

	* src/engine/Group.c: remove asserts

	* src/engine/Query.c:remove asserts

	* src/engine/TransLog.c: remove asserts

	* src/engine/Transaction.c: remove asserts

	* src/engine/gnc-engine-util.h: don't include assert.h

	* src/engine/gnc-engine.c: remove asserts

	* src/engine/gnc-numeric.c: remove asserts

	* src/engine/gnc-pricedb.c (gnc_price_unref): remove asserts

	* src/engine/messages.c: remove asserts

	* src/backend/file/test/test-xml-account.c: fix text handling

	* src/backend/file/test/test-xml-commodity.c: fix text handling

	* src/backend/file/test/test-xml-transaction.c: fix text handling

	* src/backend/file/gnc-freqspec-xml-v2.c: fix text handling

	* src/backend/file/gnc-pricedb-xml-v2.c: fix text handling

	* src/backend/file/gnc-schedxaction-xml-v2.c: fix text handling

	* src/backend/file/gnc-transaction-xml-v2.c: fix text handling

	* src/backend/file/io-gncxml-v1.c: fix text handling

	* src/backend/file/sixtp-dom-parsers.c: fix text handling

	* src/backend/file/sixtp-to-dom-parser.c (dom_chars_handler): don't
	ignore whitespace. This fixes text handling for strings like "< <"

	* src/app-utils/gnc-ui-util.c: remove asserts

	* src/app-utils/option-util.c: remove asserts

2001-10-11  Dave Peticolas  <dave@krondo.com>

	* src/test-core/test-stuff.c: allow option of including funky
	characters in random strings

	* src/engine/Transaction.c (xaccTransEqual): add warning strings

	* src/backend/postgres/test/.cvsignore: ignore test-escape

	* src/backend/postgres/test/test-escape: test string escaping

	* src/backend/postgres/test/Makefile.am: add test-escape

	* src/backend/postgres/builder.c (sqlBuild_Where_Str): don't
	escape string twice

	* src/backend/postgres/escape.c (sqlEscapeString): check for
	already-escaped string

	* src/backend/postgres/kvp-sql.c: escape path strings

	* src/backend/file/test/test-xml-transaction.c (test_add_transaction):
	test in reverse order, first orig, then new.

2001-10-10  Rob Browning  <rlb@defaultvalue.org>

	* src/test-core/Makefile.am
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/tax/us/test/Makefile.am
	(TESTS_ENVIRONMENT): fix for guile 1.3.4 and new g-wrap.

	* src/tax/us/Makefile.am
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/report/utility-reports/test/Makefile.am
	(TESTS_ENVIRONMENT): fix for guile 1.3.4 and new g-wrap.

	* src/report/utility-reports/iframe-url.scm: use slib and require
	format.

	* src/report/utility-reports/Makefile.am
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/report/stylesheets/test/Makefile.am
	(TESTS_ENVIRONMENT): fix for guile 1.3.4 and new g-wrap.

	* src/report/stylesheets/Makefile.am
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/report/standard-reports/test/Makefile.am
	(TESTS_ENVIRONMENT): fix for guile 1.3.4 and new g-wrap.

	* src/report/standard-reports/Makefile.am
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/report/report-system/test/Makefile.am
	(TESTS_ENVIRONMENT): fix for guile 1.3.4 and new g-wrap.

	* src/report/report-system/report-system.scm:
	(use-modules (g-wrapped gw-glib))

	* src/report/report-system/Makefile.am
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/report/locale-specific/us/test/Makefile.am
	(TESTS_ENVIRONMENT): fix for guile 1.3.4 and new g-wrap.

	* src/report/locale-specific/us/Makefile.am
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/register/register-gnome/test/Makefile.am
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/register/register-gnome/Makefile.am
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/register/register-core/test/Makefile.am
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/register/register-core/Makefile.am
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/register/ledger-core/test/Makefile.am
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/register/ledger-core/Makefile.am
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/optional/swig/Makefile.am
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/network-utils/test/Makefile.am
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/network-utils/Makefile.am
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/network-utils/.cvsignore: add .libs.

	* src/import-export/qif-io-core/test/Makefile.am
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/import-export/qif-io-core/Makefile.am
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/import-export/qif-io-core/.cvsignore: add .deps.

	* src/import-export/qif-import/Makefile.am
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/import-export/binary-import/test/Makefile.am
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/import-export/binary-import/Makefile.am : support new g-wrap
	.scm module files.
	(pkglib_LTLIBRARIES): move libgw-binary-import.la here.
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/import-export/binary-import/.cvsignore: add .libs and
	gw-binary-import.scm.

	* src/guile/Makefile.am: support new g-wrap .scm module files.
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/guile/.cvsignore: add gw-gnc.scm.

	* src/gnome-utils/test/Makefile.am
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/gnome-utils/Makefile.am
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/gnome-utils/.cvsignore: add .libs.

	* src/gnome/window-register.c
	(print_check_cb): coerce away guile 1.3.4 warning.
	(report_helper): coerce away guile 1.3.4 warning.

	* src/gnome/window-help.c
	(gnc_help_window_load_topics): coerce away guile 1.3.4 warning.

	* src/gnome/top-level.c
	(gnc_get_remaining_argv): coerce away guile 1.3.4 warning.
	(gnc_set_remaining_argv): coerce away guile 1.3.4 warning.

	* src/gnome/argv-list-converters.c
	(gnc_argvarr_to_scheme_list): coerce away guile 1.3.4 warning.

	* src/gnome/Makefile.am: use INTLTOOL_DESKTOP_RULE.
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/gnc-module/test/mod-foo/Makefile.am
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/gnc-module/test/mod-baz/Makefile.am
	(CFLAGS): add GUILE_INCS.

	* src/gnc-module/test/mod-bar/Makefile.am
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/gnc-module/test/test-scm-init: convert to shell script that
	invokes contents as guile script.

	* src/gnc-module/test/test-scm-dynload: adjust dynamic-link call
	based on guile version.

	* src/gnc-module/test/test-dynload.c
	(guile_main): call lt_dlinit();

	* src/gnc-module/test/Makefile.am
	(CFLAGS): add GUILE_INCS.

	* src/gnc-module/gnc-module.scm
	(gnc:module-system-init): adjust dynamic-link call based on guile
	version.

	* src/gnc-module/Makefile.am: support new g-wrap .scm module files.
	(CFLAGS): add GUILE_INCS.
	(pkglib_LTLIBRARIES): move libgw-gnc-module.la here.

	* src/gnc-module/.cvsignore: add gw-gnc-module.scm.

	* src/experimental/cgi-bin/Makefile.am
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/engine/test-core/Makefile.am
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/engine/test/Makefile.am
	(CFLAGS): move INCLUDES bits to CFLAGS.
	(TESTS_ENVIRONMENT): fix for guile 1.3.4 and new g-wrap.

	* src/engine/engine.scm: (use-modules (g-wrapped gw-runtime)).

	* src/engine/Makefile.am: support new g-wrap .scm module files.
	(pkglib_LTLIBRARIES): move libgw-glib.la, libgw-engine.la, and
	libgw-kvp.la here.
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/engine/.cvsignore: add gw-engine.scm, gw-glib.scm, and
	gw-kvp.scm.

	* src/calculation/Makefile.am
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/backend/rpc/Makefile.am:
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/backend/postgres/test/Makefile.am
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/backend/postgres/test/.cvsignore: add .deps.

	* src/backend/postgres/Makefile.am
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/backend/net/Makefile.am
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/backend/file/test/Makefile.am
	(TESTS_ENVIRONMENT): fix for guile 1.3.4 and new g-wrap.
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/backend/file/Makefile.am
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/app-utils/test/Makefile.am
	(TESTS_ENVIRONMENT): fix for guile 1.3.4 and new g-wrap.
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/app-utils/option-util.c
	(gnc_option_db_register_change_callback): coerce away guile 1.3.4
	warning.

	* src/app-utils/guile-util.c
	(gnc_depend): coerce away guile 1.3.4 warning.
	(gnc_split_scm_set_memo): coerce away guile 1.3.4 warning.
	(gnc_split_scm_set_memo): coerce away guile 1.3.4 warning.
	(gnc_split_scm_set_action): coerce away guile 1.3.4 warning.
	(gnc_trans_scm_set_num): coerce away guile 1.3.4 warning.
	(gnc_trans_scm_set_description): coerce away guile 1.3.4 warning.
	(gnc_trans_scm_set_notes): coerce away guile 1.3.4 warning.
	(gnc_get_debit_string): coerce away guile 1.3.4 warning.

	* src/app-utils/gnc-ui-util.c
	(gnc_ui_account_get_tax_info_string): coerce to suppress warning
	for guile 1.3.4.

	* src/app-utils/app-utils.scm: must load "gnucash/engine" module.

	* src/app-utils/Makefile.am: support new g-wrap .scm module files.
	(pkglib_LTLIBRARIES): move libgw-app-utils.la here.
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/app-utils/.cvsignore: add gw-app-utils.scm.

	* src/app-file/gnome/Makefile.am
	(CFLAGS): move INCLUDES bits to CFLAGS.

	* src/app-file/gnc-file.c
	(gnc_book_opened): coerce to suppress warning for guile 1.3.4.
	(gnc_file_new): coerce to suppress warning for guile 1.3.4.
	(gnc_post_file_open): coerce to suppress warning for guile 1.3.4.
	(gnc_file_save): coerce to suppress warning for guile 1.3.4.
	(gnc_file_quit): coerce to suppress warning for guile 1.3.4.

	* src/app-file/Makefile.am: support new g-wrap .scm module files.
	(CFLAGS): move INCLUDES bits to CFLAGS.
	(pkglib_LTLIBRARIES): move libgw-app-file.la here.

	* src/app-file/.cvsignore: add gw-app-file.scm.

	* macros/autogen.sh: update for intltool.

	* configure.in: update for intltool.  Update LIBTOOL macros to
	match libtool docs.  Require at least g-wrap 1.1.12.  Add
	src/backend/net/Makefile to output.

	* src/Makefile.am (CFLAGS): move INCLUDES bits to CFLAGS.

	* macros/autogen.sh: update for intltool.

	* acinclude.m4: added AM_ACLOCAL_INCLUDE so it would work from
	configure.in under the new auto* tools.

	* .cvsignore: add intltool files.

2001-10-10  Dave Peticolas  <dave@krondo.com>

	* src/engine/test-core/test-engine-stuff.c
	(get_random_kvp_frame_depth): use set kvp max elements number

	* src/engine/Account.c (xaccAccountEqual): add warning strings

	* src/engine/Group.c (xaccGroupEqual): add warning strings

	* src/engine/gnc-book.c (gnc_book_equal): add warning strings

	* src/engine/kvp_frame.c: treat empty frames as NULL

	* src/backend/postgres/test/run-tests.sh: enable test

	* src/backend/postgres/test/test-db.c (main): enable test

	* src/backend/file/test/test-kvp-frames.c (test_kvp_xml_stuff):
	print more debugging output

	* src/backend/file/sixtp-dom-generators.c (add_kvp_value_node):
	fix bug generating kvp string values (they weren't being escaped)

2001-10-09  Robert Graham Merkel  <rgmerk@mira.net>

	* src/engine/Transaction.{ch} (xaccTransGetVoidTime): new function.

2001-10-08  Robert Graham Merkel  <rgmerk@mira.net>

	* src/engine/test/test-transaction-voiding.c (run_test): remove
	diagnostic stuff needed for initial debugging, fix bug in test.

	* src/engine/Transaction.c: removed transaction void debugging
	stuff.

	* src/engine/test/Makefile.am: enable transaction voiding test.

2001-10-05  Robert Graham Merkel  <rgmerk@mira.net>

	* src/engine/test/test-transaction-voiding.c: new file.

	* src/engine/Transaction.c: debugging stuff for transaction
	voiding (will be removed later).

2001-10-03  Christian Stimming  <stimming@tuhh.de>

	* po/glossary/de.po, txt-to-pot.sh: Several updates from the
	stable branch.

	* po/glossary/es.po: Added Spanish translation by Ral Mir
	<cotin@geocities.com>

2001-10-03  Robert Graham Merkel  <rgmerk@mira.net>

	* */Makefile.am: changes for automake 1.5 compatibility (still not
	perfect).

	* configure.in: changes for automake 1.5 compatibility

	* src/engine/transaction.c: store values as well as amounts in
	voided splits' kvp frames

	* src/engine/gw-engine-spec.scm: wrap voiding functions

	* src/report/report-system/report-utilities.scm: added some
	convenience functions for adding voiding checks to queries and
	checking the voiding status of splits.

	* src/report/standard-reports/*: fixed up queries to exclude voids
	as appropriate.

2001-10-01  Robert Graham Merkel  <rgmerk@mira.net>

	* src/engine/Transaction.{ch} (xaccTransVoid),
	(xaccTransGetVoidStatus), (xaccTransGetVoidReason),
	(xaccSplitVoidFormerAmount): new functions.

	* src/engine/kvp_doc.txt: add new entries related to transaction
	voiding.

	* src/engine/Query.{ch}: add support for filtering queries on
	voided state.

2001-09-30  Josh Sled  <jsled@asynchronous.org>

	* src/gnome/dialog-sxsincelast.c: Displays
	auto-created-and-notification-requested scheduled transactions in
	a GL rather than a clist.

	* src/register/ledger-core/split-register-model.c
	(gnc_template_register_model_new): Added date-cell entry/io-flags
	handler for template register, making date cell inactive, and
	stating "Scheduled" instead of a date.

	* src/gnome/dialog-sxsincelast.c (_create_transactions_on): Now
	does appropriate cleanup in the case it needs to create a
	temporary toCreateTuple for transaction-creation.
	(_create_each_transaction_helper): Cleanup failed
	transaction-creation appropriately.  Support for returning a list
	of the GUIDs of created transactions.

2001-09-28  Robert Graham Merkel  <rgmerk@mira.net>

	* src/app-utils/date-utilities.scm ((gnc:deltasym-to-delta)): new
	function to convert datedelta symbols to the actual deltas.

	* src/app-utils/app-utils.scm: export gnc:deltasym-to-delta

	* src/report/standard-reports/net-barchart.scm (etc.): replace
	eval usage with gnc:deltasym-to-delta

2001-09-21  Robert Graham Merkel  <rgmerk@mira.net>

	* src/engine/SchedXaction.c: fix split account bugs.

	* src/gnome/dialog-sx-from-trans.c: fix freqspec bugs.

2001-09-14  Dave Peticolas  <dave@krondo.com>

	* src/register/register-gnome: add new headers

	* src/register/register-gnome/gncmod-register-gnome.c: initialize
	gnome-specific cells and table

	* src/register/register-gnome/pricecell-gnome.c
	(gnc_price_cell_gnome_new): new func.

	* src/register/register-gnome/quickfillcell-gnome.c
	(gnc_quickfill_cell_gnome_new): new func

	* src/register/register-gnome/table-gnome.c: new code to
	initialize table with gnome-specific callbacks

	* src/register/register-core/Makefile.am: add test subdir

	* src/register/register-core/pricecell.c: remove gui-specific stuff

	* src/register/register-core/quickfillcell.c: remove gui-specific stuff

	* src/register/register-core/table-allgui.c: implement gui cursor
	refresh as a callback.

	* src/gnome/window-register.c: fix menu names and help strings

	* src/backend/file/gnc-schedxaction-xml-v2.c
	(gnc_schedXaction_end_handler): open account for editing
	before destroying it.

	* src/backend/file/gnc-schedxaction-xml-v2.c (tt_act_handler):
	open account for editing and leave it open.

	* src/backend/file/io-gncxml-v2.c
	(add_template_transaction_local): commit the template account
	group after all transactions have been added.

	* configure.in: configure new test Makefile

2001-09-13  Dave Peticolas  <dave@krondo.com>

	* src/guile/gw-gnc-spec.scm: remove some unused wrappings

	* src/gnome-utils/Makefile.am: enable test dir

	* src/gnome-utils/dialog-commodity.c: re-factor help handler

	* src/gnome-utils/gnc-account-tree.c: re-factor account group handler

	* src/gnome-utils/gnc-html.c: re-factor help url handler

	* src/gnome/glade/commodity.glade: name help button

	* src/gnome/top-level.c: add in new handlers

	* src/gnome/window-main.c: remove toplevel api

2001-09-06  Dave Peticolas  <dave@krondo.com>

	* src/engine/Makefile.am: install public headers

	* src/engine/SX-ttinfo.h: add fixme, reformat to 80 columns

2001-09-05  Dave Peticolas  <dave@krondo.com>

	* src/Makefile.am: identify new scripts as built sources

	* configure.in: configure a gnucash-specific header directory

	* src/gnucash-run-script.in: new helper script for running gnucash
	guile scripts with the right directories set up.

	* src/Makefile.am: add new files

	* src/gnucash-make-guids.in: replace old gnucash-make-guid
	with a guile script

	* src/engine/gw-engine-spec.scm: wrap new function

	* src/engine/GNCId.c (xaccGUIDNewReturn): new function suitable
	for g-wrapping.

2001-09-06  Christian Stimming  <stimming@tuhh.de>

	* src/engine/messages.[hc]: Added support for i18n messages with
	qualifying prefix; adapted from code by Zbigniew Chyla
	<cyba@piast.t19.ds.pwr.wroc.pl>.

2001-09-05  James LewisMoss  <jimdres@mindspring.com>

	* src/register/ledger-core/split-register-model-save.c
	(gnc_split_register_save_template_cells): Add missing comma.

2001-09-05  Robert Graham Merkel  <rgmerk@mira.net>

	* src/register/ledger-core/split-register-model-save.c: replace
	kvp-frame key string literal with #defines from schedXaction.h

	* src/gnome/window-register.c: rename "recur" commands "schedule".

2001-09-04  Robert Graham Merkel  <rgmerk@mira.net>

	* several SX-related .c files: replaced use of
	kvp_frame_{set,get}_slot, with {set,get}_slot_path, replaced
	literals with #defines.

	* src/engine/SchedXaction.h: #define names for kvp_frame keys.

	* src/engine/dialog-sx-from-trans.h: fix freqspec and date/time
	setting bugs.

	* src/gnome/glade/sched-xact.glade: rename several items in editor
	dialog to match UI code.

2001-09-02  Dave Peticolas  <dave@krondo.com>

	* src/backend/file/sixtp-dom-generators.c (add_kvp_value_node):
	fix warning in case of empty kvp sub-frame

	* src/backend/file/io-gncxml-v2.c (clear_up_account_commodity):
	fix scu values

	* src/engine/Account.c (xaccInitAccount): initialize scu to 0

2001-09-02  Christian Stimming  <stimming@tuhh.de>

	* src/report/standard-reports/average-balance.scm: Ben Stanley
	<bds02@uow.edu.au>'s report fix.

2001-08-31  Dave Peticolas  <dave@krondo.com>

	* src/engine/Scrub.c: don't create accounts with no currency

2001-08-30  Robert Graham Merkel  <rgmerk@mira.net>

	* src/gnome/dialog-sx-from-trans.{ch}: New files, providing easy way
	to turn existing transactions into SX's.

	* src/engine/SX-ttinfo.{ch}: provide data structure for easy building
	of template transactions for SX.

	* src/engine/GNCId.h: changed include guards to fix in with policy.

	* src/engine/SchedXaction.{ch}: added function to turn structures in
	SX-ttinfo.c into real template trans, fixed bugs.

	* src/engine/kvp-doc.txt: updated docs.

	* src/gnome/glade/sched-xact.glade: added dialog for SX-from-trans

	* src/gnome/dialog-commodity.h: fixed include guards (previously, name
	started with underscore).

	* src/gnome/window-register.c: added code to let user activate
	SX-from-trans dialog

2001-08-25  Christian Stimming  <stimming@tuhh.de>

	* src/gnome/gnc-html-guppi.c: activate the [xy]_axis_label
	options.

2001-08-22  Dave Peticolas  <dave@krondo.com>

	* src/gnome/query-user.c
	(gnc_choose_radio_option_dialog_parented): add a cancel button

	* src/guile/gw-gnc-spec.scm: fix api naming

	* src/report/locale-specific/us/taxtxf.scm: fix api naming

2001-08-20  Dave Peticolas  <dave@krondo.com>

	* others: xaccGetAccountRoot->xaccAccountGetRoot

	* src/engine/messages.h: move this file here

	* src/engine/test/test-group-vs-book.c: new file. test group/book
	references

	* src/engine/test-core/test-engine-stuff.c (get_random_group): new
	func

	* src/engine/gnc-book.c: (gnc_book_set_group): update group's book

	* src/engine/Group.c (xaccGroupGetBook): new func
	(xaccGroupSetBook): new func

	* src/engine/GroupP.h: add a reference to the group's book

	* src/app-utils/global-options.[ch]: cleanup

	* src/app-utils/option-util.[ch]: cleanup

	* src/gnome/top-level.c: take out reverse balance implementations

	* src/app-utils/gnc-ui-util.c: take out deprecated api
        implementations. implement reverse balance api calls.

	* src/register/ledger-core/SplitLedger.[ch]: take out reverse
	balance callback. just use app-utils version.

	* src/app-utils/gnc-ui-util.h: remove deprecated api

	* src/engine/gnc-book-p.h: add const

	* src/engine/gnc-book.c: strdup error message for backend

	* src/backend/file/gnc-backend-file.c: fix bugs

2001-08-19  Christian Stimming  <stimming@tuhh.de>

	* po/gnc-glossary.txt, po/glossary/gnc-glossary.txt,
	po/glossary/txt-to-pot.sh, po/glossary/de.po: Moved from the
	concept of one big ASCII table to the concept of one po file for
	each translation of the glossary. Hence, created this
	subdirectory.

2001-08-18  Robert Graham Merkel  <rgmerk@mira.net>

	* src/engine/FreqSpec.c: i18n xaccFreqSpecGetFreqStr.

	* src/gnome/dialog-sxsincelast.c: fix bug in close callback.

2001-08-17  James LewisMoss  <jimdres@mindspring.com>

	* src/gnc-module/gnc-module.c (gnc_module_system_setup_load_path):
	add in void for empty argument list.

	* src/gnc-module/Makefile.am (libgw_gnc_module_la_SOURCES): add
	-lgncmodule to link link and libgncmodule.la to dependencies.

	* src/register/register-gnome/Makefile.am
	(libgncmod_register_gnome_la_LDFLAGS): add GNOMEUILIBS to module
	link line.

	* src/guile/Makefile.am: remove file-utils.[ch] &
	argv-list-encoders.[ch]

	* src/gnome/Makefile.am (SUBDIRS): add file-utils.[ch] &
	argv-list-encoders.[ch]

2001-08-16  Bill Gribble  <grib@billgribble.com>

	* move report system into gnc-modules. This required a new
	module of application framework stuff, src/app-utils.

	* src/report/report-system/: the report-html-generation code
	and the various report utilities and infrastructure

	* src/report/standard-reports/: non-locale-specific financial
	reports

	* src/report/utility-reports: non-financial reports

	* src/report/locale-specific: reports that only apply to specific
	locales.

	* src/report/stylesheet: report style sheet definitions

2001-08-16  James LewisMoss  <jimdres@mindspring.com>

	* src/guile/argv-list-converters.c (print_argv): remove unused
	function.

2001-08-16  Robert Graham Merkel  <rgmerk@mira.net>

	* src/engine/FreqSpec.c: Take out day and month name arrays - use
	strftime instead.  i18n Date formatting.  Replace magic numbers.

	* src/gnome/glade/sched-xact.glade: Add "select all" and "unselect all"
	buttons to obsolete-sx dialog.

	* src/gnome/dialog-sxsincelast.c: Remove string literals and magic
	numbers.  (freq_type_to_string) remove.  (_create_transactions_on):
	catch errors a bit better. (sx_obsolete_row_{un}sel): remove unnecessary
	warnings.  (sx_obsolete_{un}select_all_clicked): add callbacks for
	"select all" and "unselect all" buttons.

2001-08-15  James LewisMoss  <jimdres@mindspring.com>

	* Makefile.am: remove TAGS.stamp stuff.

2001-08-15  Christian Stimming  <stimming@tuhh.de>

	* src/gnome/window-acct-tree.c, window-register.c,
	window-reconcile.c, po/gnc-glossary.txt: Changed the term 'to
	scrub' to 'to check and repair'.

2001-08-15  Robert Graham Merkel  <rgmerk@mira.net>

	* src/engine/SchedXaction.c(xaccSchedXactionFree): fix
	bug.

	* src/gnome/dialog-sxsincelast.c: add "obsolete
	transactions" dialog.  Extensive changes.

	* src/gnome/glade/sched-xact.glade: add obsolete SX dialog
	stuff.

	* src/scm/report-utilities.scm (gnc:amount->string): fix
	bug.

2001-08-14  James LewisMoss  <jimdres@mindspring.com>

	* src/backend/file/gnc-schedxaction-xml-v2.c: add null stuff to
	end of struct.

2001-08-13  James LewisMoss  <jimdres@mindspring.com>

	* src/engine/gw-engine-spec.scm (((mod (gw:new-module
	"gw-engine")))): move some funcs to kvp-spec.

	* src/scm/report/balance-sheet.scm (optname-show-parent-balance):
	wrap all var usages with N_'ed vars with (_ ... )

2001-08-14  Dave Peticolas  <dave@krondo.com>

	* all others: update for api/reorganization

	* src/register/register-core/table-control.[ch]: encapsulate
	table control object.

	* src/register/ledger-core/split-register-util.c: split out
	general split register utilities

	* src/register/ledger-core/split-register-control.[ch]: split
	out split register control functionality

2001-08-13  Dave Peticolas  <dave@krondo.com>

	* all other files: update for change below

	* src/register/register-core/table-layout.[ch]: make cursors part
	of the table. allow them to be added dynamically.

2001-08-11  James LewisMoss  <jimdres@mindspring.com>

	* src/engine/md5.c: include string.h to get bcopy def.

2001-08-11  Christian Stimming  <stimming@tuhh.de>

	* src/FileDialog.c (show_book_error): fix message.

2001-08-11  Dave Peticolas  <dave@krondo.com>

	* src/register/register-core/table-allgui.[ch]: update for
	api changes. Move some layout code to table-layout.c.

	* src/register/register-core/splitreg.[ch]: update for api changes

	* src/register/register-core/cellblock.[ch]: move cursor
	changed functions here

	* src/register/register-core/Makefile.am: add new files

	* src/register/ledger-core/SplitLedger.c: update for api changes

	* src/register/register-core/table-layout.[ch]: new file.
	table layout object encapsulates table structure.

	* src/scm/main.scm: add lib path to LD_LIBRARY_PATH

2001-08-10  Christian Stimming  <stimming@tuhh.de>

	* po/gnc-glossary.txt: Updated explanation for "to scrub" to clear
	up some big misunderstandings here.

2001-08-10  Dave Peticolas  <dave@krondo.com>

	* src/register/register-core/cell-factory.c
	(gnc_cell_factory_add_cell_type): fix bug

2001-08-09  Dave Peticolas  <dave@krondo.com>

	* src/register/register-gnome/table-gnome.c
	(gnc_table_save_state): tweak cell width saving

2001-08-08  Dave Peticolas  <dave@krondo.com>

	* src/register/ledger-core/SplitLedger.c: fix bugs

	* src/register/register-gnome/pricecell-gnome.c: better 'return'
	handling.

2001-08-08  Bill Gribble  <grib@billgribble.com>

	* fix Makefile.am in various places to clean up libtool
	problems.  These changes may still need fine tuning to make
	everything work with both libtool 1.4 and 1.3.5

2001-08-08  Dave Peticolas  <dave@krondo.com>

	* src/engine/engine-helpers.[ch]: remove cruft

	* src/guile/gnc-helpers.c: fix warnings

	* src/import-export/qif-import/gncmod-qif-import.c: include api
	header

	* src/register/register-gnome/gncmod-register-gnome.c: include api
	header

	* src/register/register-core/gncmod-register-core.c: include api
	header

	* src/register/ledger-core/gncmod-ledger-core.c: include api header

	* src/backend/postgres/gncmod-backend-postgres.c: include api header

	* src/backend/rpc/gncmod-backend-rpc.c: include api header

	* src/backend/file/gnc-pricedb-xml-v1.c: fix warning

	* src/backend/file/Makefile.am (SUBDIRS): fix includes

	* src/backend/file/gncmod-backend-file.c: include api header

	* src/engine/gncmod-engine.c: include api header

	* src/gnc-module/test/test-dynload.c: fix warning

	* src/gnc-module/test/misc-mods/agedver.c: include api header

	* src/gnc-module/test/misc-mods/incompatdep.c: include api header

	* src/gnc-module/test/misc-mods/futuremodsys.c: include api header

	* src/gnc-module/test/mod-baz/gnc-mod-baz.c: include api header

	* src/gnc-module/test/mod-bar/gnc-mod-bar.c: include api header

	* src/gnc-module/test/mod-bar/Makefile.am: fix includes

	* src/gnc-module/test/mod-foo/gnc-mod-foo.c: include api header

	* src/gnc-module/test/mod-foo/Makefile.am: fix includes

	* src/gnc-module/gnc-module-api.h: new file. public module api

	* src/gnc-module/Makefile.am: add headers

2001-08-06  Bill Gribble  <grib@billgribble.com>

	* Added module/plugin system (src/gnc-module/*)

	* reshuffled source code from src/engine, src/register, and some
	from src/guile, src/scm, src/gnome (see src/README.modules).
	engine, backends, register, qif importer are now "modules".

	* unfinished new QIF import/export module (the old one's still
	there and still works)

	* really too many files touched to get into it.

2001-08-06  Dave Peticolas  <dave@krondo.com>

	* src/register/table-html.[ch]: remove

	* src/register/Makefile.am: add table-model.[ch],
	remove table-html.[ch]

	* src/MultiLedger.c: same as below

	* src/register/table-allgui.[ch]: same as below

	* src/register/table-model.[ch]: separate table model out from
	table code.

	* src/register/pricecell.c: fix bugs

	* src/engine/sql/upgrade.h: fix warning

	* src/engine/gnc-pricedb.[ch] (gnc_price_equal): new func

	* src/engine/FreqSpec.c: add comment

2001-08-05  Dave Peticolas  <dave@krondo.com>

	* src/gnome/window-register.c: move close button to left
	to be more consistent with main window

	* src/SplitLedger.c (sr_split_auto_calc): fix bug

2001-08-04  Dave Peticolas  <dave@krondo.com>

	* src/scm/main-window.scm: handle errors in creating
	~/.gnucash/books

	* src/scm/path.scm (gnc:make-dir): new func

	* src/scm/options.scm: same as below

	* src/scm/html-style-sheet.scm: handle file opening error

2001-08-03  Dave Peticolas  <dave@krondo.com>

	* src/gnome/dialog-sxsincelast.c: same as below

	* src/gnc-exp-parser.[ch]: seperate->separate

	* src/engine/gnc-book.c: fix warnings

	* doc/sgml/C/xacc-sxeditor.sgml: fix warning

2001-08-02  James LewisMoss  <jimdres@mindspring.com>

	* src/scm/prefs.scm (((current-value gnc:*debugging?*))): add
	devel mode setting.

	* src/scm/command-line.scm (gnc:*arg-defs*): add devel mode
	command line option.

2001-08-02  Robert Graham Merkel  <rgmerk@mira.net>

	* src/engine/SchedXaction.c (xaccSchedXactionSetEndDate): Reject
	bad data, log warning. (xaccSchedXactionSetRemOccur): ditto.
	(xaccSchedXactionSetSplits): remove already-#if'd out function.

	* src/engine/gnc-schedxaction-xml-v2.c: #define more tags.

2001-08-01  Robert Graham Merkel  <rgmerk@mira.net>

	* src/engine/SchedXaction.{ch}: modified indenting to 2 spaces.

	* src/engine/SchedXaction.{ch}: Added member for recording if
	SX has changed since last save.
	(xaccSchedXactionSetDirtyness) provide API for modifying that field.
	All setter functions changed to set member appropriately.
	(xaccSchedXactionSetSlot, XaccSchedXactionGetSlot): New functions

	* src/engine/gnc-book-p.h (struct gnc_book_struct): Added field
	for recording whether sx list had changed.

	* src/engine/gnc-book.c: (gnc_book_marked_save): mark the SX-related
	stuff as saved.
	(gnc_book_not_saved): look up the SX-related stuff as well.

	* src/engine/gnc-schedxaction-v2.c: once a scheduled transaction is
	loaded by the backend, mark it as not saved.

2001-07-30  Christian Stimming  <stimming@tuhh.de>

	* src/scm/html-utilities.scm: Fixed bug with sub-balances in
	account tables with non-default account selection.

2001-07-30  James LewisMoss  <jimdres@mindspring.com>

	* src/engine/Query.c: move test code to a test-queries in test
	directory.

	* src/engine/io-gncbin-r.c: remove #if 0'ed code.

2001-07-30  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/glade/sched-xact.glade: Added seperate reminders
	dialog from since-last-run dialog.  Removed reminders
	frame/section from since-last-run dialog.  Added alternative SX
	Editor UI [not presently used].

	* src/gnome/dialog-sxsincelast.c: Changes for
	reminders-as-seperate-dialog; selected reminders then update
	since-last-run dialog [whether it's open or not]; the dialogs
	[mostly] deal with their closing conditions correctly.  Support
	for ad-hoc variables in template-transaction-split formulas.

	* src/engine/gnc-schedxaction-xml-v2.c
	(gnc_schedXaction_end_handler): Added support for restoring
	in-development pre-template-account-stored-in-SX change.
	(tt_act_handler): Added support for restoring in-devel pre-CIT
	.gml2/XMLv2 files.

	* src/gnc-exp-parser.c (gnc_exp_parser_parse_seperate_vars): Added
	for Scheduled-Transaction-related since-last-run/split-formula
	parsing.

	* src/gnome/dialog-sxsincelast.c: Added support for variable entry
	before creation/formulas in template transactions.

2001-07-28  Robert Graham Merkel  <rgmerk@mira.net>

	* src/engine/SchedXaction.{ch}: Store template account in the
	SchedXaction structure, get rid of splitlist from structure.

	* src/engine/gnc-schedxaction-xml-v2.c: replaced tag literals
	with #define'd constants.
	(gnc_schedXaction_dom_tree_create, sx_templ_act_handler): added
	code for saving/restoring template account ID.

	* doc/sgml/C/xacc-sxeditor.sgml: new file.

2001-07-27  James LewisMoss  <jimdres@mindspring.com>

	* src/engine/gnc-schedxaction-xml-v2.c: remove include of removed
	file.

	* src/engine/gnc-freqspec-xml-v2.c: remove include of removed
	file.

	* src/engine/gnc-pricedb-xml-v1.c: remove include of
	sixtp-writers.h and remove func xml_add_gnc_pricedb (no longer
	used anywhere)
	(gnc_pricedb_parser_new): reorder functions.
	remove include of removed file.

	* src/engine/io-gncxml-v1.c: move v1 kvp parser code to this
	file.

	* src/engine/sixtp-parsers.h: remove old v1 parser decls to
	io-gncxml-v1.c

	* src/engine/gnc-schedxaction-xml-v2.c
	(gnc_schedXaction_dom_tree_create): remove usage of
	xml_add_gint32.

2001-07-26  James LewisMoss  <jimdres@mindspring.com>

	* configure.in: comment out AC_ARG_PROGRAM called.  Presumably
	called by one of the AM macros.

2001-07-26  Robert Graham Merkel  <rgmerk@mira.net>

	* src/engine/SchedXaction.c (xaccSchedTransactionInit):
	change declaration to static, uncommented g_free usage.

	* src/engine/SchedXaction.c: Moved a couple of functions
	about.

	* src/engine/FreqSpec.c (xaccFreqSpecInit): change
	declaration to static.  Moved a couple of functions
	about.

	* src/engine/FreqSpec.h, SchedXaction.h: remove "Init"
	function prototypes

2001-07-25  Robert Graham Merkel  <rgmerk@mira.net>

	* src/engine/SchedXaction.c
	(sxprivtransactionListMapDelete): renamed function.

2001-07-24  Robert Graham Merkel  <rgmerk@mira.net>

	* doc/sgml/C/xacc-sxeditor.sgml: New file.

	* doc/sgml/C/Makefile.am, gnucash.sgml: updates for new file

	* src/gnome/glade/sched-xact.glade: add help button

	* src/gnome/dialog-schedxaction.c: add callback for help button.

	* src/gnome/gnc-ui.h: pointer to help file.

2001-07-22  Dave Peticolas  <dave@krondo.com>

	* src/test/gnc-test-stuff.[ch] (get_random_price): new func.

	* src/register/splitreg.[ch]: remove null cell

	* src/engine/Transaction.h: update docs

2001-07-21  Dave Peticolas  <dave@krondo.com>

	* src/register/cell-factory.[ch]: a new object for creation of
	register cells. allows new cell types to be added dynamically.

	* src/register/gnome/gnucash-style.c: fix for removal of
	label from cellblock cells.

	* src/register/table-allgui.[ch]: fix for changed flag and
	callback changes.

	* src/register/splitreg.[ch]: remove fixed cells, use a dynamic
	list. Fix code appropriately.

	* src/register/register-common.[ch]: add wrapper for a global cell
	factory.

	* src/register/gnome/datecell-gnome.c: same as below

	* src/register/gnome/combocell-gnome.c: same as below

	* src/register/textcell.[ch]: same as below

	* src/register/recncell.[ch]: same as below

	* src/register/quickfillcell.[ch]: same as below

	* src/register/pricecell.[ch]: same as below

	* src/register/numcell.[ch]: same as below

	* src/register/datecell.h: same as below

	* src/register/combocell.h: make destructor private.
	constructor returns 'BasicCell *'.

	* src/register/cellblock.[ch]: remove 'label' members -- no longer
	used.

	* src/register/basiccell.[ch]: 'virtualize' destructor.
	simplify changed flags.

	* src/register/Makefile.am (SUBDIRS): add cell-factory.[ch]

	* src/gnome/gnc-html.c: fix includes

	* src/SplitLedger.c: update for api changes

	* src/MultiLedger.c: update for api changes

2001-07-20  James LewisMoss  <jimdres@mindspring.com>

	* src/gnome/top-level.c (gnucash_ui_init): remove the \n's from
	the ENTER and LEAVE calls.

2001-07-19  James LewisMoss  <jimdres@mindspring.com>

	* src/engine/gnc-book.c (gnc_book_save): use all_sync if available
	else sync separately.
	(gnc_book_save): extract out duplicate error handling code.

2001-07-19  Robert Graham Merkel  <rgmerk@mira.net>

	* src/scm/report/payables.scm: add column totals, add some
	clarifying comments.

2001-07-18  Dave Peticolas  <dave@krondo.com>

	* src/gnc-ui-util.c (balance_helper): fix bug

2001-07-17  Dave Peticolas  <dave@krondo.com>

	* src/engine/Scrub.c (xaccGroupScrubCommodities): use group
	begin/commit to speed up processing

	* src/engine/Group.[ch] (xaccAccountGroupBeginEdit): make public

2001-07-18  Robert Graham Merkel  <rgmerk@mira.net>

	* src/scm/report/payables.scm: Make creditor display
	order configurable.

	* src/guile/gnc.gwp: wrap safe_strcmp.

	* src/gnome/dialog-print-check.c: revert inadvertent change
	(sorry . . .).

2001-07-17  Dave Peticolas  <dave@krondo.com>

	* doc/sgml/C/xacc-features.sgml: Matt Krai's doc patch

	* doc/sgml/C/xacc-about.sgml: Matt Krai's doc patch

	* AUTHORS: credits

	* doc/sgml/C/xacc-about.sgml: credits

	* src/gnome/gnc-dateedit.c: Matt Kraai's date accelerator bug fix

	* src/engine/io-gncbin-r.c: fix bug with price import (use
	posted date, not entered date).

	* src/engine/gnc-pricedb.[ch]: fix bugs with setting currency and
	commodity and with converting from legacy commodities.

	* src/engine/Transaction.c (xaccTransAppendSplit): make sure
	split's value conforms to the transaction common currency.

2001-07-12  Dave Peticolas  <dave@krondo.com>

	* src/gnome/window-register.c: same as below

	* src/scm/report/taxtxf.scm: use split amount

2001-07-13  Robert Graham Merkel  <rgmerk@mira.net>

	* src/scm/report/payables.scm: New file - an
	"Accounts payable by creditor" report.

	* src/scm/date-utilities.scm: Added a couple
	more datedeltas.

	* src/scm/Makefile.am: update for new file.

2001-07-12  Dave Peticolas  <dave@krondo.com>

	* src/register/splitreg.[hc]: same as below

	* src/SplitLedger.c: remove share balance cells, they are now
	redundant

	* accounts/*/*: currency->commodity

	* src/scm/engine-interface.scm: quantity->amount

	* src/guile/guile-util.[ch]: quantity->amount

	* src/guile/gnc.gwp: quantity->amount

	* src/SplitLedger.c: quantity->amount

	* src/gnc-ui-util.[ch]: quantity->amount

	* src/scm/report/transaction.scm: remove old api

	* src/scm/report-utilities.scm: remove old api

	* src/scm/commodity-utilities.scm: remove old api

	* src/scm/engine-interface.scm: remove old api

	* src/scm/extensions.scm: remove old api

	* src/scm/report-utilities.scm: remove old api

	* src/gnome/reconcile-list.c: remove old api

	* src/scm/report/register.scm: remove old api

	* src/engine/Scrub.c: remove old api

	* src/engine/sql/txn.c: remove old api

	* src/engine/rpc/RpcUtils.c: remove old api

	* src/guile/gnc.gwp: remove cruft

	* src/scm/extensions.scm: remove cruft

	* src/guile/gnc-helpers.[ch]: remove old api

	* src/engine/io-gncbin-r.c: remove old api

	* src/guile/gnc-helpers.c: remove old api

	* src/SplitLedger.c: remove old api

	* src/engine/Transaction.[ch]: remove share api and older api

	* src/engine/Transaction-xml-parser-v1.c: remove old api

	* src/gnome/druid-stock-split.c: remove share api

	* src/engine/Account.[ch]: remove 'share' api and other
	unused api.

	* src/scm/qif-import/qif-to-gnc.scm: remove share api

	* src/guile/gnc.gwp: remove share api

	* src/gnome/window-reconcile.c: remove share api

	* src/gnome/window-register.c: remove share api

2001-07-11  Dave Peticolas  <dave@krondo.com>

	* src/engine/io-gncxml-v2.c: same as below

	* src/engine/io-gncbin-r.c: same as below

	* src/engine/io-example-account.c: same as below

	* src/engine/Ledger-xml-parser-v1.c: remove autocode

	* src/engine/Group.[ch]: remove autocode api. This hasn't
	really been used in a while, and account codes are generally
	assigned based on account function, not just hierarchy position.

	* src/engine/Account.[ch]: remove autocode api

	* src/guile/gnc.gwp: remove auto code api

	* src/scm/commodity-utilities.scm: fix function calls

	* src/test/test-xml-transaction.c: CIT (currency-in-transaction)

	* src/test/test-xml-account.c: CIT

	* src/test/gnc-test-stuff.c: CIT

	* src/scm/report/taxtxf.scm: CIT

	* src/scm/qif-import/qif-to-gnc.scm: CIT

	* src/scm/qif-import/qif-dialog-utils.scm: CIT

	* src/scm/text-export.scm: CIT

	* src/scm/price-quotes.scm: CIT

	* src/scm/main-window.scm: CIT

	* src/scm/engine-interface.scm: CIT

	* src/guile/gnc.gwp: CIT. remove unused api

	* src/gnome/glade/transfer.glade: remove currency account list

	* src/gnome/glade/account.glade: remove security gui

	* src/gnome/window-reconcile.c: CIT

	* src/gnome/window-main-summarybar.c: CIT

	* src/gnome/window-acct-tree.c: CIT

	* src/gnome/druid-stock-split.c: CIT

	* src/gnome/druid-qif-import.c: CIT

	* src/gnome/druid-hierarchy.c: CIT

	* src/gnome/druid-commodity.c: CIT

	* src/gnome/dialog-transfer.c: CIT. don't use currency accounts

	* src/gnome/dialog-commodities.c: CIT

	* src/gnome/dialog-account.c: CIT

	* src/gnome/account-tree.c: CIT

	* src/engine/sql/txn.c: fix for CIT

	* src/engine/sql/account.c: remove old currency/security cruft

	* src/engine/sixtp-dom-parsers.[ch]: allow parsing kvp data into
	an existing frame

	* src/engine/kvp_doc.txt: document new keys used for storing
	old currency/security fields

	* src/engine/io-gncxml-v2.c: CIT

	* src/engine/io-gncxml-r.c: CIT

	* src/engine/io-gncbin-r.c: CIT

	* src/engine/io-example-account.c: CIT

	* src/engine/gnc-transaction-xml-v2.c: CIT

	* src/engine/gnc-schedxaction-xml-v2.c: load kvp data
	into existing frame

	* src/engine/gnc-commodity.[ch]: add new lookup api, fixes
	for NULL pointers

	* src/engine/gnc-book.c: don't scrub (moved elsewhere)

	* src/engine/gnc-account-xml-v2.c: store transaction currency
	and account commodity.

	* src/engine/Transaction.[ch]: add a transaction currency

	* src/engine/TransLog.c: CIT

	* src/engine/Scrub.[ch]: add api for fixing up
	account and transaction commodities.

	* src/engine/SchedXaction.c: CIT

	* src/engine/Ledger-xml-parser-v1.c: CIT

	* src/engine/Group.[ch]: don't cache a group balance

	* src/engine/Account.[ch]: CIT. remove currency, security
	fields, add commodity fields. Store old currency/security
	in kvp_data.

	* src/engine/Account-xml-parser-v1.c: fix for CIT

	* src/gnc-ui-util.[ch]: fix for CIT

	* src/gnc-component-manager.c: remove deleted api

	* src/SplitLedger.c: fix for currency-in-transaction (CIT)

2001-07-11  James LewisMoss  <jimdres@mindspring.com>

	* configure.in (GNOME_XML_CFLAGS): add Richard Braakman's xml
	version patch.

	* src/engine/sql/PostgresBackend.c (pgend_session_begin): used
	backend arg directly.

	* src/engine/BackendP.h (struct _backend ): add Backend arg to
	book_begin.

	* src/engine/rpc/RpcBackend.c (rpcendInit): use xaccInitBackend to
	set everything in the backend to default values.
	(rpcend_book_begin): use backend var directly.

	* src/engine/sql/PostgresBackend.c (pgendInit): use
	xaccInitBackend to set everything to default values.

	* src/engine/gnc-book.c (gnc_book_destroy): use destroy backend
	method to free backend if it's set.

2001-07-09  Dave Peticolas  <dave@krondo.com>

	* configure.in: check for ghttp_ssl.h

	* src/gnome/gnc-http.c: conditionally include ghttp_ssl.h

	* doc/sgml/C/xacc-whats-new.sgml: fix spelling

	* doc/sgml/C/xacc-about.sgml: fix version

	* src/Makefile.am: link intl libs with gnucash-make-guids

	* src/register/QuickFill.c: same as below

	* src/register/quickfillcell.c: conditionally include wctype.h

	* configure.in: check for wctype.h

2001-07-07  Dave Peticolas  <dave@krondo.com>

	* src/test/gnc-test-stuff.c (get_random_query): not so many terms

	* src/test/Makefile.am: add test-scm-query

	* src/test/.cvsignore: add test-scm-query

	* src/test/test-scm-query.c: new test -- check query<->scm
	conversion

	* src/guile/gnucash.h: new func api

	* src/guile/gnucash.c.in (gnc_gw_init): new func

	* src/guile/gnc-helpers.c: fix bugs

	* src/engine/Query.c: fix bugs

2001-07-06  Dave Peticolas  <dave@krondo.com>

	* src/gnome/glade/sched-xact.glade: tweak

	* src/test/gnc-test-stuff.c (get_random_boolean): new func.
	(get_random_query): new func.

2001-07-06  Robert Graham Merkel  <rgmerk@mira.net>

	* src/scm/report/transaction.scm: Add new sort option "register
	order", make it the default for secondary sorting.

	* po/ChangeLog: removed from CVS.

2001-07-06  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/gnc-schedxaction-xml-v2.c: Support for new
	SchedXaction options [create/remind-days-in-advance; auto-create,
	notify-on-creation].

	* src/gnome/dialog-scheduledxaction.c (putSchedXactionInClist):
	Fix for next-occurrence processing.

	* src/engine/SchedXaction.c (xaccSchedXactionGetNextInstance):
	Better handling of start date/last-occur date/current dates when
	generating the next occurrence date.  Gotta remember to clear those
	g_dates, lest the come up 'valid' due to stack trash... :(

	* src/gnome/gnc-sxlastrun.{h,c}: Added; newer/better
	since-last-occur dialog.

	* src/gnome/window-main.c: Added Scheduled Transaction stuff to
	"Tools" menu.

	* src/scm/prefs.scm: Added initial cut at Scheduled Transaction
	preferences.

2001-07-06  Robert Graham Merkel  <rgmerk@mira.net>

	* doc/sgml/C/xacc-balancreport.sgml: minor updates

	* doc/sgml/C/image/regwin*.png, appr-income.png, bal-graph.png,
	  report-hierachical.png: no longer used, so removed.

	* doc/sgml/C/image/*tax*.png: resaved as compressed png.

	* doc/sgml/C/image/report-folio.png: reshot for 1.6.

	* doc/sgml/C/image/Makefile.am: updated for removed files.

2001-07-05  Dave Peticolas  <dave@krondo.com>

	* src/engine/Query.c (xaccQueryEqual): new func.

	* doc/sgml/C/xacc-common-report-options.sgml: fix my fix

	* doc/sgml/C/xacc-price-sources.sgml: fix warnings

	* src/guile/gnc.gwp: wrap new func

	* src/gnome/druid-stock-split.c: use new func

	* src/gnome/window-register.c: use new func

	* src/gnome/window-reconcile.c: use new func

	* src/gnome/reconcile-list.c: use new func

	* src/gnc-ui-util.c (gnc_account_print_info): new func. this
	replaces 'quantity' and 'value' print info for the currency-
	in-transaction switch. Delete the 'quantity' version.

2001-07-04  Dave Peticolas  <dave@krondo.com>

	* AUTHORS: credits

	* doc/sgml/C/xacc-about.sgml: credits

	* src/scm/report/transaction.scm: Michael T. Garrison Stuber's
	transaction report patch.

	* doc/sgml/C/xacc-common-report-options.sgml: fix warning

2001-07-05  Robert Graham Merkel  <rgmerk@mira.net>

	* doc/sgml/C/xacc-depreciation.sgml: Minor updates.

	* doc/sgml/C/xacc-price-sources.sgml: Updated for 1.6

	* doc/sgml/C/image/ticker-{a,b}.png: Removed.

	* src/gnome/druid-qif-import.c: fix syntax bug.

	* doc/sgml/C/image/<lots.png>: new and updated screenshots.

	* doc/sgml/C/image/Makefile.am: include new files.

	* doc/sgml/C/{lots}.sgml: update for new screenshots.

2001-07-04  Bill Gribble  <grib@billgribble.com>

	* src/gnome/druid-qif-import.c: fix cut-n-paste error in
	default_acct_back handler; fixes bug #106.

	* src/gnome/glade/qif.glade: add some explanatory text about
	what the "back" button does where it's not obvious

	* (later) actually fix #106... first patch didn't do it

2001-07-04  Dave Peticolas  <dave@krondo.com>

	* Makefile.am: add gnc-glossary.txt to the dist

	* src/engine/sixtp.c (sixtp_handle_catastrophe): fix bug -- don't
	destroy last stack frame

2001-07-03  Dave Peticolas  <dave@krondo.com>

	* src/scm/report/register.scm: add exported functions and needed
	modules

	* AUTHORS: credits

	* doc/sgml/C/xacc-about.sgml: credits

	* src/scm/date-utilities.scm: Nicholas Lee's bug fix

	* src/.cvsignore: adjust for new program

	* rpm/gnucash.spec.in: adjust for new program

	* src/Makefile.am: adjust for new program

	* src/gnucash-make-guids.c: new program to aid in GUID creation

	* src/engine/sql/putil.h: Alex Zepeda's patch converting atol->strtoll.

	* src/scm/commodity-utilities.scm: fix bug -- use srfi-1 to
	make sure we get the right 'last'

	* src/scm/Makefile.am: same as below

	* src/scm/report/Makefile.am: fix bugs -- put modulized scm
	files back into dist and strings targets

	* src/scm/report/taxtxf.scm: fix bug, eliminate use of append

	* src/MultiLedger.c: same as below

	* src/register/table-allgui.c: same as below

	* src/register/splitreg.c: same as below

	* src/register/splitreg.h: same as below

	* src/register/table-allgui.h: rename TableView to TableModel.
	Put cell data handlers into the model.

2001-07-02  Dave Peticolas  <dave@krondo.com>

	* many header files: apply Ben Stanley's script to
	convert __HEADER_H__ to HEADER_H. All names starting
	with '_' are reserved.

	* src/gnome/gnc-dateedit.c: sync with datecell-gnome.c

	* src/register/gnome/datecell-gnome.c: use GDate to do
	date manipulations.

	* src/scm/bootstrap.scm.in: instead of the scheme command,
	just tell the user to run gnucash once as root.

2001-07-01  Dave Peticolas  <dave@krondo.com>

	* src/gnc-ui-util.[ch]: implement towupper and iswlower
	if they are missing

	* src/register/quickfillcell.c: include gnc-ui-util.h

	* src/register/QuickFill.c: include gnc-ui-util.h

	* configure.in: check for towupper

2001-06-29  Joshua Sled  <jsled@asynchronous.org>

	* src/gnome/gnc-frequency.c: Added functions for dealing with
	widget changes in the year-subset freq. panels [quarterly,
	tri-yearly, semi-yearly, yearly].

	* src/gnome/gnc-frequency.c (gnc_frequency_save_state): Some
	improvement regarding saving the state of scheduled transactions.
	(gnc_frequency_setup): Much improvement regarding the setup of
	scheduled transactions.
	(year_range_sels_changed): Added to simplify modifications to
	year-range scheduled transactions.

2001-06-29  Dave Peticolas  <dave@krondo.com>

	* src/engine/gnc-account-xml-v2.c: Alex Zepeda's patch
	adding a missing include.

2001-06-28  James LewisMoss  <dres@ioa.com>

	* src/engine/gnc-book.c (xaccAddEndPath): new func.
	(xaccUserPathPathGenerator): new func.
	(xaccDataPathGenerator): new func.
	(xaccCmdPathGenerator): new func.
	(xaccResolveFilePath): refactor and use new funcs.

2001-06-27  Dave Peticolas  <dave@krondo.com>

	* src/register/QuickFill.c: same as below

	* src/register/quickfillcell.c: use wide character conversion
	functions

	* AUTHORS: credits

	* doc/sgml/C/xacc-about.sgml: credits

	* po/fr.po: Paul Poulain's French translations

2001-06-26  James LewisMoss  <jimdres@mindspring.com>

	* src/engine/gnc-book.c (gnc_book_begin): convert strncmp ->
	g_strncasecmp (strncmp isn't universally available)

2001-06-26  Dave Peticolas  <dave@krondo.com>

	* src/engine/sixtp-dom-parsers.c: same as below

	* src/engine/gnc-commodity-xml-v2.c: same as below

	* src/engine/gnc-account-xml-v2.c: don't use node content member
	directly -- if libxml was configured to use buffers, this won't
	work.

	* src/register/gnome/gnucash-sheet.c
	(gnucash_sheet_key_press_event): allow shift-pgup and shift-pgdn
	to go to top & bottom of register respectively.

	* src/register/gnome/datecell-gnome.c (DateDirect): allow '-'
	hotkey to work if there is a full date there, or the cell is
	blank.

	* src/gnome/gnc-html.c: don't handle key presses, let the gtkhtml
	object do it.

2001-06-25  Dave Peticolas  <dave@krondo.com>

	* src/engine/sql/kvp-sql.c: include gnc-engine-util.h for stpcpy

	* src/engine/gnc-engine-util.c (gnc_stpcpy): add func

	* src/engine/gnc-engine-util.h: add definition of gnc_stpcpy.
	if stpcpy is not available, define stpcpy as gnc_stpcpy.

	* src/gnc-ui-util.c: remove gnc_stpcpy

	* src/gnome/window-main-summarybar.c: fix bug in euro profit
	calculation. use share prices in calculating totals.

	* AUTHORS: credits

	* doc/sgml/C/xacc-about.sgml: credits

	* src/scm/report/balance-sheet.scm: Daniel Hagerty's patch
	to add an unrealized gain/loss line to the balance sheet.

2001-06-24  Dave Peticolas  <dave@krondo.com>

	* src/scm/report/account-piecharts.scm: fix sign bug

	* src/engine/sql/kvp-sql.c: same as below

	* src/engine/sql/txn.c: same as below

	* src/engine/sql/price.c: same as below

	* src/engine/sql/checkpoint.c: use strtoll instead of atoll

2001-06-24  Kevin Finn  <kevinfinn@mediaone.net>

	* src/gnome/dialog-transfer.[ch]: reformatted my previous changes
	to 80 cols.  Added interface to specify whether description
	quickfill will be based on From or To account splits.  Enhance
	quickfill to also select the appropriate account in the account
	tree for the matched transaction.

	* src/gnome/window-reconcile.c: reformatted my previous changes to
	80 cols.  Change the auto interest xfer dialog so that it
	quickfills based on the reconcile account, rather than always on
	the From account.

2001-06-24  Dave Peticolas  <dave@krondo.com>

	* AUTHORS: credits

	* doc/sgml/C/xacc-about.sgml: credits

	* configure.in: Alex Zepeda's postgres configure patch

2001-06-23  Kevin Finn  <kevinfinn@mediaone.net>

	* src/gnome/window-reconcile.c: fix for display of auto end value
	updates.

2001-06-23  Dave Peticolas  <dave@krondo.com>

	* doc/sgml/C/xacc-about.sgml: credits

	* AUTHORS: credits

	* configure.in: Bill Nottingham's guile configuration patch

2001-06-20  Dave Peticolas  <dave@krondo.com>

	* configure.in: better error messages. remove cruft.

2001-06-19  Dave Peticolas  <dave@krondo.com>

	* src/engine/gnc-numeric.c: use C comments.

	* src/engine/SchedXaction.[ch]: use C comments.

	* src/gnome/gnc-frequency.[ch]: use C comments. fix warnings

2001-06-19  Bill Gribble  <grib@billgribble.com>

	* src/scm/qif-import/qif-parse.scm: convert to gnc-numeric when
	parsing, using string length as the precision

	* src/scm/qif-import/qif-to-gnc.scm: use gnc-numeric
	math routines where necessary

	* src/scm/qif-import/qif-file.scm: pass an equality test
	predicate to check-and-parse-fields

	* src/scm/report/*: fix module reports to use-modules on
	srfi-1 and slib where needed.

2001-06-19  Dave Peticolas  <dave@krondo.com>

	* src/gnome/dialog-nextrun.h: add guards

	* src/gnome/dialog-nextrun.c: use C comments.

2001-06-19  Bill Gribble  <grib@billgribble.com>

	* src/scm/qif-import/qif-objects.scm: initialize fields to ""
	rather than #f

	* src/scm/qif-import/qif-to-gnc.scm: fix cut-n-paste error

2001-06-19  Dave Peticolas  <dave@krondo.com>

	* src/gnome/dialog-scheduledxaction.c: use C comments. fix warning

2001-06-18  Dave Peticolas  <dave@krondo.com>

	* src/test/test-stuff.[ch]: fix warning

2001-06-18  James LewisMoss  <jimdres@mindspring.com>

	* src/engine/gnc-transaction-xml-v2.c
	(gnc_transaction_end_handler): use dom_tree_to_transaction.

	* src/engine/gnc-account-xml-v2.c (gnc_account_end_handler): use
	dom_tree_to_account.

2001-06-18  Rob Browning  <rlb@cs.utexas.edu>

	* src/scm/report/report-list.scm: switch to use-modules for
	some reports.

	* po/.cvsignore: add ChangeLog.

	* src/scm/report/transaction-report.scm: renamed to transaction.scm

	* src/scm/report/transaction.scm: renamed from
	transaction-report.scm and converted to guile module.

	* src/scm/report/taxtxf.scm: convert to guile module.

	* src/scm/report/register.scm: convert to guile module.

	* src/scm/report/price-scatter.scm: convert to guile module.

	* src/scm/report/portfolio.scm: convert to guile module.

	* src/scm/report/pnl.scm: convert to guile module.

	* src/scm/report/net-barchart.scm: convert to guile module.

	* src/scm/report/iframe-url.scm: convert to guile module.

	* src/scm/report/hello-world.scm: convert to guile module.

	* src/scm/report/category-barchart.scm: convert to guile module.

	* src/scm/report/balance-sheet.scm: convert to guile module.

	* src/scm/report/average-balance.scm: convert to guile module.

	* src/scm/report/account-summary.scm: convert to guile module.

	* src/scm/report/account-piecharts.scm: convert to guile module.

	* src/scm/report/Makefile.am (gncscmmoddir): dir for report modules.
	(gncscmmod_DATA): add reports that have been modularized.
	(gncscm_DATA): remove reports that have been modularized.

	* src/scm/bootstrap.scm.in (gnc:load): don't silently succeed on
	load errors -- fail.

	* src/scm/report-html.scm: make (ice-9 slib) dependency explicit.

	* src/scm/depend.scm (gnc:depend): add optional timing facility.

	* src/gnome/gnc-frequency.c: fixed some type problems.

	* src/gnome/dialog-scheduledxaction.c: fixed some type problems.

	* src/gnome/dialog-nextrun.c: fixed some type problems.

2001-06-18  Dave Peticolas  <dave@krondo.com>

	* src/engine/gnc-schedxaction-xml-v2.c: same as below

	* src/MultiLedger.c: same as below

	* src/SplitLedger.c: same as below. fix indentation. please
	use the indentation style already present in the file.

	* src/engine/gnc-freqspec-xml-v2.c: same as below

	* src/engine/FreqSpec.[ch]: fix warnings. use standard C comments

	* doc/sgml/C/xacc-about.sgml: update credits

2001-06-17  Joshua Sled  <jsled@asynchronous.org>

	* src/engine/gnc-account-xml-v2.c (dom_tree_to_account): Added.

	* src/engine/gnc-transaction-xml-v2.c (dom_tree_to_transaction):
	Added.

	* src/FileDialog.c: Added support for copying
	scheduled-transaction-related GNCBook fields.

	* src/engine/FreqSpec.{h,c}: Added.

	* src/engine/SchedXaction.{h,c}: Added.

	* src/engine/gnc-{freqspec,schedxaction}-xml-v2.c: Added

	* src/engine/gnc-book.c: Added the template group [template
	transaction belong to the template group] and the Scheduled
	Transaction list.

	* src/gnome/glade/sched_xact.glade: Added.

	* src/gnome/dialog-nextrun.{h,c}: Added.

	* src/gnome/dialog-scheduledxaction.{h,c}: Added.

	* src/gnome/gnc-frequency.{h,c}: Added.

	* src/SplitLedger.c, src/MultiLedger.c: Added support for a
	Template Ledger.

	* src/guile/gnc.gwp: Added wrapping for
	dialog-{scheduledxactions,nextrun}-creation functions.

	* src/register/splitreg.c: Added formula credit and debit cells,
	and flags for template-register support.

	* src/register/formulacell.h: Added.

	* src/gnome/gnc-dateedit.h: Added explanatory comment from dave_p
	in IRC.

	* src/gnome/query-user.h: Added prototype of
 	gnc_verify_dialog_parented(...), so I could use it the SX UI
	stuff.

2001-06-17  Kevin Finn  <kevinfinn@mediaone.net>

	* src/gnome/window-reconcile.c: Implemented automatic interest
	transfer as a stripped-down transfer dialog.  This allows the user
	to automatically enter an interest charge or payment for bank or
	credit accounts prior to starting reconciliation, subject to both
	a global and per-account preference.

	* src/gnome/dialog-transfer.c,h: Add interfaces to allow the
	dialog-transfer to be manipulated as necessary to create the auto
	interest transfer dialog.

	* src/scm/prefs.scm: added new Reconcile boolean: Automatic
	Interest Transfer

	* src/engine/Account.c,h: Add access functions
	for per-account auto interest xfer kvp

	* src/engine/kvp_doc.txt: Document new kvps.

2001-06-17  James LewisMoss  <jimdres@mindspring.com>

	* src/engine/gnc-commodity-xml-v2.c (set_commodity_value): strip
	string before setting things.

	* src/engine/io-gncxml-v2.c (gnc_book_write_to_xml_file_v2): check
	return of fclose.

2001-06-17  Dave Peticolas  <dave@krondo.com>

	* src/gnome/cursors.c (gnc_set_busy_cursor): fix warning

	* src/scm/date-utilities.scm: use gnc:print-date instead of
	strftime

	* src/scm/report/hello-world.scm: fix docs

	* src/scm/report/transaction-report.scm: fix date printing

	* src/scm/report/register.scm: remove cruft

	* src/register/gnome/gnucash-style.c (gnucash_font_load): new func
	If gdk_fontset_load doesn't work, try gdk_font_load.
	(gnucash_style_set_register_font_name): use gnucash_font_load
	(gnucash_style_set_register_hint_font_name): use gnucash_font_load

	* src/FileDialog.c (gncFileSave): save the window state on a save
	(gncFileQuerySave): don't provide cancel option when the ui can't

	* src/scm/main-window.scm (gnc:main-window-save-state): new func
	don't save state when the ui can't

	* src/gnome/window-main.c
	(gnc_main_window_can_cancel_exit): new func
	(gnc_main_window_can_save): new func
	(gnc_main_window_has_apps): new func

	* src/gnc-ui.h: add new api

	* src/gnome/top-level.c (gnc_ui_can_cancel_exit): new func

2001-06-16  Dave Peticolas  <dave@krondo.com>

	* src/guile/gnc.gwp: update for api change

	* src/scm/main.scm: update for api change

	* src/gnome/glade/newuser.glade: new file for new user glade xml

	* src/gnome/glade-support.[ch]: remove generated files

	* src/gnome/new-user-*.[ch]: remove old files

	* src/gnome/dialog-new-user.c: new file for new user dialog code.

	* src/gnome/druid-hierarchy.c: new file for account hierarchy
	creation druid code. Rename api calls to reflect the more
	general use of the druid.

2001-06-16  Robert Graham Merkel <rgmerk@mira.net>

	* po/POTFILES.in : remove references to deleted files.

2001-06-15  James LewisMoss  <jimdres@mindspring.com>

	* src/engine/gnc-book.c (gnc_book_write_to_file): remove useless
	line.
	(make_backup): new func for duplicate functionality
	(copy_file): new func to copy file.
	(gnc_book_backup_file): use make_backup
	(gnc_book_write_to_file): use make_backup

2001-06-15  Dave Peticolas  <dave@krondo.com>

	* src/gnome/dialog-account-picker.c: use libglade

	* src/gnome/dialog-print-check.c: use libglade

	* src/gnome/dialog-find-transactions.c: use libglade

	* src/guile/gnc.gwp: remove budgeting api

	* src/gnome/dialog-budget.[ch]: remove

	* src/gnome/dialog-fincalc.c: use libglade

	* src/gnome/dialog-commodity.c: use libglade

	* src/gnome/dialog-account.c: use libglade

	* src/gnome/dialog-userpass.c: fix bloop

	* src/gnome/druid-commodity.c: use libglade

2001-06-14  Dave Peticolas  <dave@krondo.com>

	* src/gnome/druid-qif-import.c: use libglade

2001-06-14  Robert Graham Merkel  <rgmerk@mira.net>

	* src/engine/Transaction.c (get_corr_account_split): Fix
	bug - lookup split values rather than balances.

2001-06-14  Dave Peticolas  <dave@krondo.com>

	* src/gnome/dialog-transfer.c: use libglade

	* rpm/gnucash.spec.in: fix bug

2001-06-13  Dave Peticolas  <dave@krondo.com>

	* src/experimental/cgi-bin/Makefile.am: add .cvsignore to dist

	* src/scm/report/account-summary.scm: fix string

	* src/guile/gnc-helpers.c (gnc_scm_list_to_glist): fix bug

	* src/scm/extensions.scm: fix bug

	* src/gnome/dialog-progress.c: use libglade

	* src/gnome/window-help.c: use libglade

	* src/gnome/dialog-utils.c (gnc_glade_lookup_widget): new func

	* src/gnome/dialog-tax-info.c: use libglade

	* src/gnome/dialog-style-sheet.c: use libglade

2001-06-13  James LewisMoss  <jimdres@mindspring.com>

	* configure.in (CFLAGS): add test-files makefiles to list.

	* src/test/Makefile.am: add SUBDIRS test-files.

	* src/test/test-load-xml2.c (main): add test for file ending so we
	don't get the Makefiles

	* doc/sgml/de_DE/Makefile.am: remove empty SUBDIRS setting.

2001-06-13  Dave Peticolas  <dave@krondo.com>

	* src/gnome/glade/stocks.glade: new file for old stock split druid

	* src/gnome/druid-stock-split.c: use libglade

	* src/gnome/glade/userpass.glade: new file for old
	username/password dialog

	* src/gnome/dialog-userpass.c: use libglade

	* src/gnome/dialog-column-view.c: more libglade work

2001-06-13  Bill Gribble  <grib@billgribble.com>

	* src/sc/qif-import/qif-guess-map.scm: fix bug in
	account name guessing

2001-06-13  Herbert Thoma <herbie@hthoma.de>

	* po/de.po: updated German translation for transfer dialog.

	* doc/build-suse.txt: updated for gnucash 1.6 / SuSE 7.2

2001-06-12  Dave Peticolas  <dave@krondo.com>

	* src/gnome/glade/report.glade: new file for old report dialogs

	* src/gnome/dialog-column-view.c: use libglade

2001-06-12  Dave Peticolas  <dave@krondo.com>

	* src/gnome/dialog-price-editor.c: fix bug

	* src/gnome/glade/price.glade: new file for old price dialogs

	* src/gnome/dialog-price-editor.c: use libglade

	* src/gnome/reconcile-list.c: obey new option below

	* src/scm/prefs.scm: add option wrt checking off cleared
	transactions when reconciling

	* src/register/table-allgui.[ch]: move function to .c file

	* src/scm/tip-list.scm: update tip

	* src/register/register-common.h: move function defs to
	register-common.c

	* src/register/register-common.c: new file

	* src/gnome/glade/Makefile.am: new file

	* src/gnome/glade/commodity.glade: new file. glade file for
	commodity dialog

	* src/gnome/dialog-commodities.c: use libglade

	* src/gnome/dialog-utils.c (gnc_glade_xml_new): new func
	(gnc_glade_xml_new_widget): new func

	* rpm/gnucash.spec.in: add glade dir

	* configure.in: move libglade check to glade section.
	add configured glade file dir.

	* src/gnome/Makefile.am: add glade flags & glade dir

	* src/Makefile.am: add glade libs

	* src/scm/report/account-piecharts.scm: same as below

	* src/scm/report/category-barchart.scm: remove hint text

	* src/engine/gnc-book.c (gnc_book_get_file_lock): some file systems
	don't support hard links. If the error code indicates this, go
	ahead and grant the lock. Is there a better way?

2001-06-11  Dave Peticolas  <dave@krondo.com>

	* src/register/gnome/gnucash-date-picker.c
	(gnc_date_picker_key_event): fix bug

	* src/scm/Makefile.am: same as below

	* src/scm/price-quotes.scm: same as below

	* src/scm/process.scm: re-modulize process.scm

2001-06-10  Christian Stimming  <stimming@tuhh.de>

	* de.po: updated German translation.

	* configure.in, doc/sgml/Makefile.am, doc/sgml/de_DE/*: Added
	German translation of a few manual pages, including a Whats-New
	table for the translated words.

2001-06-10  Dave Peticolas  <dave@krondo.com>

	* doc/sgml/C/xacc-print.sgml: fix docs

	* src/engine/gnc-engine-util.c: change debug levels to warning

2001-06-10  Bill Gribble  <grib@billgribble.com>

	* src/scm/report/welcome-to-gnucash.scm: fix bug in "welcome to
	gnucash" report

	* src/gnome/dialog-column-view.c: remove printout

2001-06-09  Dave Peticolas  <dave@krondo.com>

	* configure.in: fix bug

	* doc/sgml/C/xacc-about.sgml: update credits

	* src/gnome/window-main.c (gnc_main_window_about_cb): update
	credits

	* AUTHORS: update credits

	* src/gnome/reconcile-list.c (gnc_reconcile_list_refresh): fix
	bugs

	* src/gnome/dialog-utils.c (gnc_clist_add_check): fix bugs

	* doc/sgml/pt_PT/Makefile.am: remove adjust balance docs

	* doc/sgml/C/Makefile.am: remove adjust balance docs

	* doc/sgml/de_DE/xacc-quickstart.sgml: fix docs

	* doc/sgml/pt_PT/xacc-quickstart.sgml: fix docs

	* doc/sgml/C/xacc-quickstart.sgml: fix docs

	* src/scm/help-topics-index.scm: work on index

	* src/gnome/window-help.c (gnc_help_show_topic): first check
	current location for match

	* src/SplitLedger.c (xaccSRDuplicateCurrent): fix bug

	* src/gnc-ui-util.c (gnc_find_or_create_equity_account): allow
	group to be specified
	(gnc_account_create_opening_balance): search in given account's
	group

2001-06-08  Dave Peticolas  <dave@krondo.com>

	* src/gnc-ui-util.c (gnc_find_or_create_equity_account): first
	search for untranslated name, then translated name.

	* src/gnome/new-user-callbacks.c
	(on_chooseAccountTypesPage_prepare): suspend & resume gui
	refreshes while loading accounts.
	add more suspend & resume calls for other big changes

	* src/gnome/new-user-funs.c (gnc_create_newUserDialog): make clist
	column titles passive

	* src/gnome/new-user-callbacks.c
	(on_chooseAccountTypesPage_prepare): use pointer<->int conversion
	macros
	(gnc_get_ea_locale_dir): take out debugging messages
	(on_newAccountTypesList_unselect_row): fix bug
	(on_newAccountTypesList_select_row): fix bug
	(add_each_gea_to_clist): fix mem leak
	(on_newAccountCurrencyChoosePage_prepare): use pointer<->int
	conversion macros

	* src/SplitLedger.c (xaccSRGetEntryHandler): handle reconcile
	cell string as appropriate for translate flag.

	* src/register/table-allgui.c (gnc_table_get_entry): return
	translated version
	(gnc_table_get_entry_internal): return untranslated version

	* src/register/table-allgui.h: add 'translate' argument to
	entry handler api.

2001-06-08 Christian Stimming <stimming@tuhh.de>

	* configure.in, accounts/Makefile.am, accounts/de_DE/*: add
	account template files for German locale.

	* src/gnome/gnucash.desktop, po/de.po: updated German translation.

2001-06-08  Dave Peticolas  <dave@krondo.com>

	* src/doc/design/engine.texinfo: update docs

	* src/doc/design/gnucash-design.texinfo: update docs

2001-06-08  Robert Graham Merkel  <rgmerk@mira.net>

	* doc/sgml/C/xacc-file-operations.sgml, xacc-quickstart.sgml,
	xacc-regwin.sgml: updates and corrections.

2001-06-07  Dave Peticolas  <dave@krondo.com>

	* src/scm/price-quotes.scm: same as below

	* src/scm/Makefile.am: same as below

	* src/scm/process.scm: un-modulize process.scm. Let's experiment
	with this after 1.6.

	* src/gnome/new-user-callbacks.c (gnc_get_ea_locale_dir): if first
	check fails, see if 2-letter prefix succeeds

2001-06-07  James LewisMoss  <jimdres@mindspring.com>

	* doc/README.translator.txt (variables): add instructions for
	manual and account hierarchy files.

	* src/gnome/new-user-callbacks.c: fix test for commodity added by
	setting data on druid rather than a global variable (bad jim.
	global variable bad).
	(on_chooseAccountTypesPage_prepare): remove old comment.
	(on_chooseAccountTypesPage_prepare): set object data that account
	lists loaded.
	(on_chooseAccountTypesPage_prepare): use new func to determine
	locale dir.
	(gnc_get_ea_locale_dir): new func to determine locale correct dir
	to read account files from.

	* src/gnome/new-user-funs.c (gnc_get_new_user_dialog): new func.

	* src/gnome/new-user-callbacks.c (set_first_startup): simplify
	using the global-options.h func gnc_set_boolean_option.

	* src/FileDialog.c (gncFileNew): lookup pref and do or don't run
	new account list druid.

	* doc/sgml/C/image/Makefile.am (image_DATA): add new user images.

	* src/gnome/new-user-callbacks.c
	(on_newAccountCurrencyChoosePage_prepare): remove old comment.

	* doc/sgml/C/xacc-quickstart.sgml: add link to
	account-hierarchy-creator.

	* doc/sgml/C/Makefile.am (GNUCASH_SGML_FILES): add account
	hierarchy sgml file to list.

2001-06-07  Dave Peticolas  <dave@krondo.com>

	* src/doc/design/gnucash-design.texinfo: update docs

	* src/doc/design/engine.texinfo: update docs

2001-06-06  Dave Peticolas  <dave@krondo.com>

	* src/scm/report-html.scm: remove unneeded (require 'printf).
	This is invoked as part of testing for slib > 2c4. For slib
	< 2c4, printf is loaded from slib-backup.scm.

2001-06-07  Robert Graham Merkel  <rgmerk@mira.net>

	* doc/sgml/C/xacc-regwin.sgml: Chris "Wilddev" Lyttle's
	register documentation update.

	* doc/sgml/C/image/MakeFile.am, autosplitledger.png,
	basicledger-transfer.png, basicledger.png editaccount.png,
	transactionjrnl.png: Wilddev's screenshots.

	* doc/sgml/C/xacc-toplevel.sgml, xacc-calculator.sgml,
	xacc-file-operations.sgml: more new docs.

	* doc/sgml/C/xacc-quickstart.sgml, xacc-mainwin.sgml,
	xacc-reports.sgml, gnucash.sgml: updates.

	* doc/examples/reg_doc_example.xac: add register doc
	example file.

	* AUTHORS: added Chris Lyttle.

	* src/scm/help-topics-index.scm: Updates to reflect doc work.


2001-06-06  Dave Peticolas  <dave@krondo.com>

	* src/gnome/gnc-dialogs.glade: fix string

	* src/scm/report.scm: fix i18n bug

2001-06-06  James LewisMoss  <jimdres@mindspring.com>

	* README.patches: remove warning at top.  Up version number to
	1.6.

	* README: fix dependencies.  Spell check.

2001-06-06  Dave Peticolas  <dave@krondo.com>

	* src/test/test-real-data.sh: Josh Sled's bug fix

	* src/doc/design/engine.texinfo: document prices and their API

	* src/doc/design/gnucash-design.texinfo: update docs

	* macros/gnome.m4: Chris J (Oakton) Leach's macro patch

	* AUTHORS: update credits

	* doc/sgml/C/xacc-about.sgml: update credits

2001-06-05  Dave Peticolas  <dave@krondo.com>

	* src/gnome/dialog-fincalc.c: grey out the frequency menu
	when compounding is continuous.

	* src/engine/sql/Makefile.am: add checkpoint.h

2001-06-05  Christian Stimming  <stimming@tuhh.de>

	* src/scm/report/category-barchart.scm, average-balance.scm,
	net-barchart.scm: changed price source default to
	weighted-average.

	* src/scm/prefs.scm: fix string.

	* src/scm/options-utilities.scm: added date interval Quarter, Half
	Year.

	* src/scm/date-utilities.scm: added QuarterDelta, HalfYearDelta

	* po/de.po: Updated German transl

2001-06-05  James LewisMoss  <jimdres@mindspring.com>

	* doc/sgml/C/xacc-gpl.sgml: more cleanups.

	* doc/sgml/C/xacc-locatingtxns.sgml: promote sect3's to sect2's.

	* doc/sgml/C/xacc-gpl.sgml: remove sect1.  cleanup.

	* doc/sgml/C/xacc-print.sgml: wrap content in sect1.

	* doc/sgml/C/xacc-gpl.sgml: remove sect1.  promote rest of
	sections.

	* doc/sgml/C/xacc-y2k.sgml: wrap content in sect1

	* doc/sgml/C/xacc-stock-price-report.sgml: remove section title.

	* doc/sgml/C/xacc-txf-export.sgml: wrap content in sect1.

	* doc/sgml/C/xacc-txf-export-anomalies.sgml: wrap content in
	sect1.

	* doc/sgml/C/xacc-txf-categories.sgml: wrap content in sect1.

	* doc/sgml/C/xacc-trans-report.sgml: wrap content in sect1.

	* doc/sgml/C/xacc-tax-report.sgml: wrap content in sect1.

	* doc/sgml/C/xacc-reports.sgml: remove sectionness of first section.

	* doc/sgml/C/xacc-regwin-kbd.sgml: wrap content in sect1.

	* doc/sgml/C/xacc-regwin.sgml: remove sectionness of first
	section.

	* doc/sgml/C/xacc-quickstart.sgml: remove sect1.  promote sect2's
	to sect1's.

	* doc/sgml/C/xacc-qif-import.sgml: remove sect1.  promote sect2's
	and sect3's one up.

	* doc/sgml/C/xacc-print-check.sgml: remove sect1.  promote sect2's
	to sect1's.

	* doc/sgml/C/xacc-portfolio-report.sgml: remove section title.

	* doc/sgml/C/xacc-pnl.sgml: wrap content in sect1.

	* doc/sgml/C/xacc-net-worth-barchart.sgml: remove section title.

	* doc/sgml/C/xacc-multicolumn-view-reports.sgml: remove section
	title.

	* doc/sgml/C/xacc-mainwin.sgml: wrap content in sect1.

	* doc/sgml/C/xacc-locatingtxns.sgml: remove sect1. promote sect2's
	to sect1's.

	* doc/sgml/C/xacc-income-expense-piecharts.sgml: remove section
	title.

	* doc/sgml/C/xacc-income-expense-barcharts.sgml: remove section
	title.

	* doc/sgml/C/xacc-gnucash-web-browser.sgml: remove section title.

	* doc/sgml/C/xacc-gnome-mdi.sgml: remove first section's
	sectionness.

	* doc/sgml/C/xacc-dateinput.sgml: remove section title.

	* doc/sgml/C/xacc-euro.sgml: remove top level sect1 and promote
	all sect2's to sect1's.

	* doc/sgml/C/xacc-currencyhandling.sgml (LINKEND): remove first
	section.

	* doc/sgml/C/xacc-common-report-options.sgml: remove section
	title.

	* doc/sgml/C/xacc-commodity.sgml: insert section around
	everything.

	* doc/sgml/C/xacc-balancesheet.sgml: remove section title.

	* doc/sgml/C/xacc-balancereport.sgml: insert section around
	everything.

	* doc/sgml/C/xacc-depreciation.sgml: remove sectionness of first
	bit.  leave para's as top level.

	* doc/sgml/C/xacc-apar.sgml: remove sectionness of first bit.
	leave para's as top level.

	* doc/sgml/C/xacc-adjbalwin.sgml: remove section title.

	* doc/sgml/C/xacc-newacctwin.sgml: remove section title.

	* doc/sgml/C/xacc-asset-liability-piecharts.sgml: remove section
	title.

	* doc/sgml/C/xacc-asset-liability-barcharts.sgml: remove section
	title.

	* doc/sgml/C/xacc-accountedit.sgml: Remove title for section so
	"Editing an Account" doesn't appear twice.

	* doc/sgml/C/xacc-acctypes.sgml: Remove title for section so
	"Account Types" doesn't appear twice.

2001-06-05  Dave Peticolas  <dave@krondo.com>

	* src/gnome/druid-commodity.c: use new func

	* src/gnome/new-user-funs.c: use new func

	* src/gnome/druid-qif-import.c: use new func

	* src/gnome/druid-utils.c (gnc_druid_set_colors): new func

	* doc/sgml/C/xacc-about.sgml: update credits

	* AUTHORS: update credits

2001-06-04  Dave Peticolas  <dave@krondo.com>

	* src/gnome/new-user.glade: tweak gui. fix strings.

	* src/gnome/window-main.c: fix mem leak

	* doc/sgml/C/xacc-about.sgml: update credits

	* AUTHORS: update credits

	* lib/srfi/srfi-19.scm: fix bug.

2001-06-04  Rob Browning  <rlb@cs.utexas.edu>

	* lib/srfi/srfi-19.scm: updated to include guile-core bug fixes.
	Removed syncase dependency.
	(priv:open-input-string): removed -- check for open-input-string
	and define that if not found.
	(:optional): removed - just as easy to handle by-hand -- all funcs
	that called :optional have been adjusted.
	(priv:read-tai-utc-data): remove priv: from open-input-string.
	(string->date): remove priv: from open-input-string.
	(date): change constructor name to make-date.
	(priv:decode-julian-day-number): add inexact->exact after
	truncate.
	(time-utc->date): add inexact->exact and int-secs.
	(priv:locale-reader): use reverse! on result rather than reverse.

	* src/scm/Makefile.am (gnc_regular_scm_files): remove process.scm.
	(gncscmmoddir): new directory for gnucash guile modules --
	i.e. for files available via (use-modules (gnucash foo)).
	(gncscmmod_DATA): first gnucash guile module (gnucash process).

	* src/scm/price-quotes.scm: use (gnucash process) module.

	* src/scm/process.scm: now a guile module (gnucash process).
	(gnc:cleanup-sub-process): fix several missing waitpid pid args.

2001-06-04  James LewisMoss  <jimdres@mindspring.com>

	* src/test/test-xml-commodity.c (node_and_commodity_equal): use
	string_to_gint64 rather than string_to_integer.

	* src/engine/sixtp-utils.c: (string_to_gint64) return FALSE if the
	content is NULL.

	* src/engine/gnc-commodity-xml-v2.c (set_commodity_value): use
	string_to_gint64 rather than string_to_integer.

	* src/engine/io-gncxml-v2.c (gnc_counter_end_handler): use
	string_to_gint64 rather than string_to_integer.

	* src/engine/sixtp-dom-parsers.c (string_to_integer): remove
	func.  duplicates string_to_gint64

2001-06-04  Dave Peticolas  <dave@krondo.com>

	* src/SplitLedger.c: fix spelling errors

	* src/register/gnome/gnucash-item-edit.c: same as below

	* src/register/gnome/gnucash-sheet.c: check change confirmation
	before popping up combo list.

	* src/register/table-allgui.c (gnc_table_confirm_change): new func

2001-06-03  Christian Stimming  <stimming@tuhh.de>

	* po/de.po: Massive update of the German translation according to
	the finalized glossary. Should be ready for 1.6 by now, pending a
	spell check by other translators.

	* po/gnc-glossary.txt: Four more entries added, that's it for now.

2001-06-02  Dave Peticolas  <dave@krondo.com>

	* src/gnome/top-level.c (gnc_ui_start_event_loop): remove
	debugging comment

	* src/scm/report/register.scm: fix bugs

	* src/scm/html-utilities.scm: fix bugs

	* src/gnome/window-register.c: fix bugs

	* src/scm/report/price-scatter.scm: same as below

	* src/scm/prefs.scm: same as below

	* src/gnc-ui-util.c: same as below

	* src/gnome/druid-qif-import.c: same as below

	* src/gnome/dialog-price-editor.c: same as below

	* src/gnome/dialog-fincalc.c: same as below

	* src/SplitLedger.c: use gnc_default_currency instead
	of gnc_locale_default_currency.

	* src/scm/options-utilities.scm: use new func

	* src/scm/report/transaction-report.scm: handle splits with no
	account

	* src/gnome/dialog-account.c: use new func

	* src/gnome/window-main-summarybar.c: use new func

	* src/guile/gnc.gwp: wrap new func below

	* src/guile/global-options.c (gnc_default_currency): new func
	to return user-set default currency

	* src/engine/gnc-book.c (gnc_book_backup_file): use g_free
	instead of free.

2001-06-02  Christian Stimming  <stimming@tuhh.de>

	* po/gnc-glossary.txt: Updated glossary, 15 new terms, and lots of
	explanations. Feedback welcome.

2001-06-02  Dave Peticolas  <dave@krondo.com>

	* src/register/gnome/gnucash-date-picker.c (gnc_date_picker_new):
	fix bug

	* src/SplitLedger.c: fix mem leak

	* src/gnome/top-level.c: handle X errors ourselves

2001-06-01  Dave Peticolas  <dave@krondo.com>

	* src/gnc-ui-util.c: use new scanf macro below

	* src/engine/sixtp-dom-parsers.c (string_to_integer): use new
	scanf macro below

	* src/engine/sixtp-utils.c: use new scanf macro below

	* src/engine/gnc-numeric.c: use new scanf macro below

	* src/engine/gnc-engine-util.h: define GNC_SCANF_LLD macro to use
	for scanf long long int conversion. This is needed since there is
	not a common solution between Linux, Solaris, and FreeBSD. Thanks
	to Matthew Condell for finding the problem and to Matt and Alan
	Orndorff for testing it.

	* configure.in: invoke conversion test below

	* acinclude.m4: add test for %lld scanf conversion

	* README: update info

2001-06-01  Robert Graham Merkel  <rgmerk@mira.net>

	* src/scm/commodity-utilities.scm: exchange functions
	now return unchanged quantity if the two currencies are
	identical.

2001-06-01  Dave Peticolas  <dave@krondo.com>

	* src/doc/design/engine.texinfo: document commodity table API

	* src/doc/design/gnucash-design.texinfo: update docs

2001-05-31  Dave Peticolas  <dave@krondo.com>

	* src/engine/sixtp-dom-parsers.c (string_to_binary): fix sanity
	checks
	(dom_tree_to_gnc_numeric): fix mem leak

	* src/test/test-dom-converters1.c (test_dom_tree_to_gnc_numeric):
	fix bug

	* src/engine/sixtp-utils.c (string_to_gint32): use intermediate
	variable in case int != gint32.

	* src/test/test-dom-converters1.c: fix spelling

	* src/engine/sixtp-dom-generators.c (int_to_dom_tree): cast
	gint64 to long long int for %lld.

2001-05-31  James LewisMoss  <jimdres@mindspring.com>

	* src/scm/tip-of-the-day.scm ((gnc:current-tip-number)): reset
	number if greater.  tips read before config file so this number
	gets reset by config file too high.

2001-05-31  Dave Peticolas  <dave@krondo.com>

	* src/doc/design/gnucash-design.texinfo: update docs

	* src/doc/design/engine.texinfo: document commodities & their API

	* doc/sgml/C/xacc-price-editor.sgml: fix warnings

2001-05-31  Robert Graham Merkel  <rgmerk@mira.net>

	* doc/sgml/C/xacc-ticker.sgml: renamed xacc-price-sources.sgml
	in preparation for rewriting - some material to be excised.

	* doc/sgml/C/xacc-price-editor.sgml: new file.

	* doc/sgml/C/gnucash.sgml: updated for new/changed file names.

	* doc/sgml/C/*.sgml: change xacc-ticker references to
	xacc-price-sources, or remove them entirely.

2001-05-30  Dave Peticolas  <dave@krondo.com>

	* src/test/Makefile.am: add missing link lib

	* src/engine/sixtp.c: include sys/types.h for ssize_t under
	freebsd

	* src/engine/sixtp-utils.c (timespec_secs_to_given_string): use
	gnc_timezone

	* src/engine/date.c (gnc_timezone): new func
	(gnc_iso8601_to_timespec): use gnc_timezone
	(gnc_timespec_to_iso8601_buff): use gnc_timezone

2001-05-29  Dave Peticolas  <dave@krondo.com>

	* configure.in: call new macro below

	* acinclude.m4: add macro to check for tm_gmtoff struct tm member

	* src/engine/date.c: handle all uses of nl_langinfo.

2001-05-30  Robert Graham Merkel  <rgmerk@mira.net>

	* src/engine/date.c (printDate): Workaround for
	missing nl_langinfo.

	* src/engine/Query.c: moved sys/types.h before
	regex.h.

	* acinclude.m4 (HAVE_LANGINFO_D_FMT): add check
	for working nl_langinfo(D_FMT).

	* configure.in: use check for nl_langinfo(D_FMT).

2001-05-29  Robert Graham Merkel  <rgmerk@mira.net>

	* src/gnome/dialog-options.{ch} (gnc_options_dialog_new):
	provide the ability to (optionally) set a title for
	the options dialog box.  API changed.

	* src/gnome/dialog-column-view.c, dialog-style-sheet.c,
	window-acct-tree.c :modify to use changed API.

	* src/gnome/window-report.c: use new API to title report
	options dialogs.

2001-05-28  Dave Peticolas  <dave@krondo.com>

	* doc/sgml/pt_PT/*: add Duarte Loreto's updated translations

	* src/engine/gnc-pricedb.c (compare_prices_by_date): stabilize
	sort using guids

	* src/engine/gnc-pricedb-xml-v1.c (price_parse_xml_sub_node): fix
	mem leak

2001-05-27  Christian Stimming  <stimming@tuhh.de>

	* src/scm/tip-list.scm: edited some tips after consultation with
	Robert Graham Merkel.

	* po/sv.po: by Pablo Saratxaga <pablo@mandrakesoft.com>: changed
	DOS end of lines to Unix end of lines.

2001-05-26  Dave Peticolas  <dave@krondo.com>

	* src/gnome/dialog-fincalc.c: Kevin Foss's bug fix

	* src/engine/sql/kvp-sql.h: add /* */ around #endif comment

	* src/gnc-component-manager.c (gnc_cm_event_handler): ignore
	price events

2001-05-26  James LewisMoss  <jimdres@mindspring.com>

	* src/gnome/new-user-funs.c (gnc_new_user_dialog_is_new_user): new
	func to test is new user.
	(gnc_ui_show_new_user_window): add arg for new user or not.
	(gnc_ui_show_new_user_choice_window): call
	gnc_ui_show_new_user_window with one argument saying it is a new
	user call.

	* src/gnome/new-user-callbacks.c (cancel_everything_out): new func
	extracting out shared functionality.
	(on_accountChooseDruidPage_cancel): add check to only pop up
	cancel dialog for new user stuff.

	* src/FileDialog.c (gncFileNew): call gnc_ui_show_new_user_window
	with one argument saying it isn't new user call.

	* src/gnome/new-user-callbacks.c
	(on_newAccountTypesList_select_row): deal with change in the text
	setting to a label rather than a gtktext.
	(on_newAccountTypesList_unselect_row): same.

	* Makefile.am (TAGS): ignore debian dir.

2001-05-26  Dave Peticolas  <dave@krondo.com>

	* src/gnome/window-acct-tree.c: fix label alignment

	* src/gnome/window-report.c: fix label alignment

	* src/gnome/window-main.c: put child menu after tools menu

2001-05-25  Dave Peticolas  <dave@krondo.com>

	* src/gnome/dialog-column-view.c (gnc_column_view_edit_size_cb):
	fix bug

	* src/scm/report/transaction-report.scm: default to sign-reverse
	credit accounts. fix i18n bug.

	* src/doc/design/engine.texinfo: update docs

	* configure.in: add Norwegian to list of translations

	* AUTHORS: add credits

	* doc/sgml/C/xacc-about.sgml: add credits

2001-05-25  Christian Stimming  <stimming@tuhh.de>

	* po/no.po: Kjartan Maraas' Norwegian updated translation.

	* src/gnome/gnc-html-guppi.c (gnc_has_guppi_version): generalized
	this function for arbitrary Guppi versions. Tried to enable
	barchart axis-labels for CVS Guppi but this gives nothing but
	segfaults. Shit.

2001-05-25  Dave Peticolas  <dave@krondo.com>

	* src/scm/report/account-summary.scm: fix bug

	* src/gnome/window-main.c: add close window button to toolbar

	* doc/sgml/C/xacc-about.sgml: fix warnings

	* doc/sgml/C/xacc-quickstart.sgml: fix warnings

2001-05-24  Dave Peticolas  <dave@krondo.com>

	* doc/sgml/C/xacc-features.sgml: fix docs

	* doc/sgml/C/xacc-account-summary.sgml: fix spelling

	* src/gnome/new-user-funs.c (gnc_ui_show_new_user_choice_window):
	jump to new user quickstart help when appropriate

	* src/gnc-ui.h: add new help file

2001-05-25  Robert Graham Merkel  <rgmerk@mira.net>

	* src/scm/report/average-balance.scm: catch all-zero-data
	case, display warning message rather than let the graphing
	code catch it.

	* src/scm/html-utilities.scm: display report title
	string in gnc:html-no-account-warning and
	gnc:html-make-empty-data-warning.  API changed.

	* src/scm/report/*.scm: update to use changed
	functions described above.

	* src/scm/tip-list.scm: fix spelling mistake.

2001-05-24  Christian Stimming  <stimming@tuhh.de>

	* po/gnc-glossary.txt: added file for all our translators.

	* src/scm/report/average-balance.scm: made strings more
	consistent.

	* src/scm/options-utilities.scm: adjusted the upper bound for plot
	size.

	* src/gnome/dialog-column-view.c: use menu-name in report-list.

	* src/scm/report.scm (gnc:report-menu-name),
	(gnc:report-template-menu-name/name): added functions.

2001-05-24  Robert Graham Merkel  <rgmerk@mira.net>

	* doc/sgml/C/gnucash.sgml: add references to new files.

	* doc/sgml/C/xacc-quickstart.sgml: New file, new user
	documentation.

	* doc/sgml/C/xacc-features.sgml: New file, describing
	the features of GnuCash.

	* doc/sgml/C/Makefile.am: update for new files.

	* lib/srfi/srfi-19.scm: revert to older version.

	* src/scm/tip-list.scm: more tips.

2001-05-23  Christian Stimming  <stimming@tuhh.de>

	* po/pt_PT.po: Duarte Loreto's updated translation.

	* src/scm/prefs.scm, options-utilities.scm: fix string.

2001-05-23  Rob Browning  <rlb@cs.utexas.edu>

	* configure.in (AC_OUTPUT): remove src/scm/srfi/Makefile (again?).

	* src/scm/report/transaction-report.scm: add use-modules
	for syncase.

	* lib/srfi/srfi-19.scm: update to new guile-core version.  (Grab
	my fixes).

2001-05-23  Dave Peticolas  <dave@krondo.com>

	* src/doc/design/gnucash-design.texinfo: update docs

	* src/doc/design/engine.texinfo: update docs

	* src/gnome/window-reconcile.c (startRecnWindow): fix bug

	* src/scm/bootstrap.scm.in: fix test for slib

2001-05-22  Christian Stimming  <stimming@tuhh.de>

	* src/register/splitreg.c (configAction): fix comments for i18n.

2001-05-22  Dave Peticolas  <dave@krondo.com>

	* src/gnome/druid-qif-import.c: fix scrollbar bug. raise qif
	window to top

2001-05-21  Dave Peticolas  <dave@krondo.com>

	* src/gnome/window-main.c: remove cruft

	* src/gnome/new-user-callbacks.c: use gncp_new_user_finish

	* src/gnome/new-user-funs.c: finish new user choices dialog.
	(gncp_new_user_finish): new func

	* src/scm/main.scm: use new 'new user' call

	* src/guile/gnc.gwp: change new user api

	* src/guile/gnucash.h: change new user api

	* doc/sgml/C/xacc-balancesheet.sgml: fix warning

2001-05-20  Dave Peticolas  <dave@krondo.com>

	* src/gnome/new-user-funs.h: add api & glade work for new
	user choices dialog.

2001-05-21  Robert Graham Merkel  <rgmerk@mira.net>

	* doc/sgml/C/xacc-whats-new.sgml: New file.

	* doc/sgml/C/xacc-multicolumn-view-reports.sgml: preliminary
	description.

	* doc/sgml/C/xacc-report.sgml, xacc-balancesheet.sgml,
	xacc-asset-liability-piecharts.sgml : more updates.

	* src/scm/tip-list.scm: more tips.

2001-05-19  Dave Peticolas  <dave@krondo.com>

	* src/engine/sixtp.c (gnc_is_our_xml_file): fix mem leak

	* src/engine/io-gncxml-v2.c (gnc_book_load_from_xml_file_v2): fix
	mem leak

	* src/gnome/window-acct-tree.c: fix mem leak

	* src/doc/design/engine.texinfo: update docs

	* src/gnome/window-acct-tree.c: fix mem leaks

	* src/engine/io-gncxml-v2.c (gnc_counter_end_handler): fix mem
	leak

	* src/engine/gnc-account-xml-v2.c (account_parent_handler): fix
	mem leak

	* src/engine/Group.c (xaccFreeAccountGroup): set parent's child
	pointer to NULL
	(xaccAccountRemoveGroup): set parent's child pointer to NULL

	* src/engine/sixtp-dom-parsers.c (dom_tree_to_integer): fix mem
	leak

2001-05-18  James LewisMoss  <jimdres@mindspring.com>

	* src/FileDialog.c (gncFileNew): create new user dialog on new
	file new.

2001-05-18  Dave Peticolas  <dave@krondo.com>

	* src/engine/io-gncxml-w.c: remove

	* src/engine/Group.h: fix prototype

	* src/doc/design/engine.texinfo: update docs

	* src/gnome/dialog-price-editor.c: add button to remove
	prices before a user-entered date.

	* src/gnome/file-history.c: fix for menu changes

	* src/scm/report.scm: move reports menu to top-level

2001-05-17  James LewisMoss  <jimdres@mindspring.com>

	* src/engine/Makefile.am (libgncengine_la_SOURCES): remove
	io-gncxml-w.c.

2001-05-17  Dave Peticolas  <dave@krondo.com>

	* src/doc/design/engine.texinfo: update docs

	* src/engine/Account.c (xaccAccountRecomputeBalance): include
	frozen splits in reconciled balance. Fix variable names.

	* accounts/C/*: tweak detailed descriptions

	* doc/sgml/C/xacc-reports.sgml: fix warnings

	* doc/sgml/C/xacc-net-worth-barchart.sgml: fix warnings

	* doc/sgml/C/xacc-gnucash-web-browser.sgml: fix warnings

	* doc/sgml/C/xacc-gnome-mdi.sgml: fix warnings

	* doc/sgml/C/xacc-common-report-options.sgml: fix warnings

	* doc/sgml/C/Makefile.am: add new file to Makefile.am

	* src/doc/design/gnucash-design.texinfo: update docs

	* src/doc/design/engine.texinfo: update docs

	* src/engine/Account.c: same as below

	* src/engine/Account.h: use GNCAccountType instead of 'int'

2001-05-17  Robert Graham Merkel  <rgmerk@mira.net>

	* doc/sgml/C/xacc-gnucash-web-browser.sgml: New file.

	* doc/sgml/C/Makefile.am: add new file.

	* doc/sgml/C/gnucash.sgml, xacc-gnome-mdi.sgml,
	xacc-asset-liability-piecharts.sgml: more updated/new content.

	* ChangeLog: fix wrong path in (my) previous changelog
	entry.

2001-05-16  Dave Peticolas  <dave@krondo.com>

	* src/doc/design/gnucash-design.texinfo: update docs

	* src/doc/design/engine.texinfo: update docs

	* src/engine/Account.c (xaccCloneAccountSimple): remove
	redundant initialization
	(xaccAccountGetSlots): handle NULL

	* src/engine/Account.h: fix docs

	* src/engine/AccountP.h: fix spelling errors in comments

2001-05-16  Robert Graham Merkel  <rgmerk@mira.net>

	* src/scm/html-utilities.scm ((gnc:html-make-empty-data-warning)):
	update message.

	* doc/sgml/C/{gnucash.sgml, xacc-account-summary.sgml,
	xacc-asset-liability-barcharts.sgml, xacc-reports.sgml}: more new
	material.

	* src/scm/xacc-stock-price-report.sgml: new file.

2001-05-15  Christian Stimming  <stimming@tuhh.de>

	* src/scm/commodity-utilities.scm: added another case to
	gnc:case-exchange-time-fn. Needs more work.
	(gnc:exchange-by-euro): new function. Added this function to all
	other exchange function so that exchange of EURO currencies works
	auto-magically in some more places. Doesn't work often enough,
	though. Darn.

	* src/scm/report/price-scatter.scm: Catch all cases that would
	cause Guppi's scatterplot to barf.

2001-05-15  Rob Browning  <rlb@cs.utexas.edu>

	* doc/sgml/C/Makefile.am (GNUCASH_SGML_FILES): remove entries
	listing missing files -- build was broken.

	* src/scm/report/transaction-report.scm (addto!): make a
	let-syntax since you apparently can't define-syntax before other
	defines in a nested let.

	* src/scm/report/register.scm (addto!): make a let-syntax since
	you apparently can't define-syntax before other defines in a
	nested let.

	* src/scm/gnumeric/gnumeric-utilities.scm: use srfis as modules.

	* src/scm/srfi/: moved to lib/srfi.

	* src/scm/srfi/.cvsignore: moved to lib/srfi.

	* src/scm/srfi/Makefile.am: moved to lib/srfi.

	* src/scm/srfi/README: moved to lib/srfi.

	* src/scm/srfi/srfi-1.r5rs.scm: merged to lib/srfi/srfi-1.scm.

	* src/scm/srfi/srfi-1.unclear.scm: merged to lib/srfi/srfi-1.scm.

	* src/scm/srfi/srfi-19.scm: moved to lib/srfi.

	* src/scm/srfi/srfi-8.guile.scm: merged to lib/srfi/srfi-8.scm.

	* src/scm/srfi/srfi-8.scm: merged to lib/srfi/srfi-8.scm.

	* src/scm/utilities.scm (flatten): improved via grib's version.

	* src/scm/text-export.scm: use srfis as modules.

	* src/scm/main.scm: use srfis as modules.

	* src/scm/date-utilities.scm: use srfi-19 as a module.

	* src/scm/Makefile.am (SUBDIRS): remove srfi.

	* src/gnome/window-main.c
	(gnc_main_window_restore): fix prototype (const-wise).

	* src/gnome/window-main.h
	(gnc_main_window_restore): fix prototype (const-wise).

	* Makefile.am (TAGS): add a msg to suggest --enable-tags.

	* lib/Makefile.am (SUBDIRS): add srfi.

	* configure.in: add lib/srfi/Makefile to AC_OUTPUT.

	* lib/srfi/srfi-2.scm: new file.

	* lib/srfi/srfi-9.scm: new file.

	* lib/srfi/srfi-11.scm: new file.

	* lib/srfi/srfi-8.scm: moved from src/scm/srfi/.

	* lib/srfi/srfi-19.scm: moved from src/scm/srfi.

	* lib/srfi/README: moved from src/scm/srfi/.

	* lib/srfi/srfi-1.scm: moved from src/scm/srfi/.

2001-05-15  James LewisMoss  <jimdres@mindspring.com>

	* src/test/test-xml-account.c (node_and_account_equal): add equals
	tests for currency and security scu.

	* src/test/gnc-test-stuff.c (equals_node_val_vs_int): new func.

	* src/engine/gnc-account-xml-v2.c (gnc_account_end_handler):
	reorder some things: cleanup.

	* src/test/test-xml-account.c (node_and_account_equal): return
	strduped strings now.
	(test_account): make sure to free string.
	(test_real_account): free string.

	* src/engine/gnc-account-xml-v2.c (gnc_account_dom_tree_create):
	use new func.

	* src/engine/gnc-commodity-xml-v2.c
	(gnc_commodity_dom_tree_create): use new func.

	* src/engine/sixtp-dom-generators.c (int_to_dom_tree):new func.

2001-05-14  James LewisMoss  <jimdres@mindspring.com>

	* src/engine/gnc-account-xml-v2.c (gnc_account_dom_tree_create):
	add currency and security scus.
	(account_currency_scu_handler): new func.
	(account_security_scu_handler): new func.
	Add refs to new funcs to parsing structure.

2001-05-15  Robert Graham Merkel  <rgmerk@mira.net>

	* doc/sgml/C/xacc-reports.sgml, xacc-about.sgml,
	xacc-dateinput.sgml, xacc-account-summary.sgml,
	xacc-balancesheet.sgml, xacc-common-report-options.sgml
	xacc-mainwin.sgml: update documentation for new features.

	* doc/sgml/C/xacc-asset-liability-barcharts.sgml: new file.
	Placeholder at this stage.

	* doc/sgml/C/xacc-asset-liability-piecharts.sgml, xacc-gnome-mdi.sgml,
	xacc-income-expense-barcharts.sgml, xacc-income-expense-piecharts.sgml,
	xacc-multicolumn-view-reports.sgml: ditto.

2001-05-15  Dave Peticolas  <dave@krondo.com>

	* src/doc/design/engine.texinfo: update docs

2001-05-15  Christian Stimming  <stimming@tuhh.de>

	* src/scm/commodity-utilities.scm, report/portfolio.scm: major
	code cleanup. (gnc:pricealist-lookup-nearest-in-time) code moved
	from report/portfolio.scm to commodity-utilities.scm.

2001-05-14  Christian Stimming  <stimming@tuhh.de>

	* src/scm/report/category-barchart.scm: fix bug.

2001-05-14  Dave Peticolas  <dave@krondo.com>

	* src/gnome/druid-qif-import.c: fix bug

	* src/engine/Account.c (xaccAccountGetChildren): fix bug

	* src/engine/sixtp-dom-generators.c (add_kvp_value_node): use
	xmlNewTextChild.

	* src/scm/report/register.scm: reverse balance where appropriate.
	put total in proper column.

	* src/scm/report/price-scatter.scm: use a commodity option
	so stocks/mutuals can be selected.

	* src/engine/gnc-book.c (gnc_book_begin_file): check for missing
	directory

	* src/gnome/file-history.c (gnc_history_add_file): fix bug

2001-05-13  Kevin Finn  <kevinfinn@mediaone.net>

   * src/gnome/window-register.c:  flag summarybar as NEVER_VERTICAL

2001-05-13  Christian Stimming  <stimming@tuhh.de>

	* src/scm/report/portfolio.scm: Added price-source option. Added
	code to use prices from transactions.

	* src/scm/commodity-utilities.scm: fix warnings.

2001-05-13  Dave Peticolas  <dave@krondo.com>

	* src/FileDialog.c (gncPostFileOpen): fix bug -- current_book
	might be changed by book-opened-hook.

	* src/scm/tip-list.scm: fix tip

	* src/engine/Account.c (finder_help_function): fix warning

2001-05-13  Kevin Finn  <kevinfinn@mediaone.net>

	* src/SplitLedger.c, src/engine/Account.c, src/engine/Account.h:
	moved function gnc_find_trans_in_account_by_desc from SR to become
	new functions xaccAccountFindTransByDesc and
	xaccAccountFindSplitByDesc so they could be used outside of the
	register code.

	* src/gnome/dialog-transfer.c: Added quickfill/autocomplete
	functionality to the transfer dialog, based on the Description.

2001-05-13  Dave Peticolas  <dave@krondo.com>

	* src/gnome/window-main.c: write commodities with accounts

	* src/engine/io-gncxml-v2.c (write_commodities): make public

	* src/gnome/new-user.glade: tweak gui

	* src/gnome/window-main.c: the "destroy" handler does not
	return a result. add menu item & functionality for account
	hierarchy export.

	* src/scm/report/welcome-to-gnucash.scm: take out the ugly :)

2001-05-12  Christian Stimming  <stimming@tuhh.de>

	* src/scm/report/category-barchart.scm, net-barchart.scm,
	average-balance.scm: Added price-source option. Uses new function
	gnc:make-exchange-nearest-function to offer time-varying exchange
	rates.

	* src/scm/report-utilities.scm
	(gnc:acccounts-get-all-subaccounts): added.

	* src/scm/commodity-utilities.scm
	(gnc:make-exchange-nearest-function): Added this and many more
	functions to enable time-variant currency exchange.

	* src/scm/report/price-scatter.scm: Add warnings if data is empty.

2001-05-12  Bill Gribble  <grib@billgribble.com>

	* src/gnome/dialog-options.c: fix destructor bug

	* src/gnome/window-report.c: add options dialog to edited list
	even if opened by a URL click.

	* src/gnome/window-main.c: handle close of last window safely.
	Still don't save MDI info correctly with WM close, though.

2001-05-12  Dave Peticolas  <dave@krondo.com>

	* src/FileDialog.c (gncFileSaveAs): don't use a default filename

	* src/scm/report/hello-world.scm: put under utility menu

	* src/scm/report/welcome-to-gnucash.scm: don't show in menu

	* src/scm/report/iframe-url.scm: put under utility menu

	* src/scm/report.scm: add 'utility reports' menu

	* src/gnome/new-user-funs.c: add support for opening balances

	* src/gnome/gnc-amount-edit.c (gnc_amount_edit_evaluate): allow
	empty string as zero

	* src/gnome/new-user-callbacks.c: add support for opening balances

	* src/gnome/dialog-account.c (gnc_account_list_fill): fix warning
	(gnc_account_window_destroy_cb): destroy callback has no return
	(gnc_ui_to_account): reverse opening balance appropriately

	* src/engine/Account.c: change return type to const

2001-05-12  Christian Stimming  <stimming@tuhh.de>

	* src/scm/report/pnl.scm, account-piecharts.scm,
	account-summary.scm: Added price-source option. Use new function
	gnc:case-exchange-fn.

	* src/scm/date-utilities.scm (gnc:get-end-cur-fin-year): added
	function.

	* src/scm/options-utilities.scm (gnc:options-add-date-interval!):
	changed the order of relative dates - which order is best?

	* src/scm/report/balance-sheet.scm: use new function
	gnc:case-exchange-fn.

	* src/scm/commodity-utilities.scm (gnc:case-exchange-fn): add
	function.

	* src/scm/report/price-scatter.scm: adapted helper function name
	to other reports.

	* src/scm/report/price-scatter.scm: Extended option to use the
	pricedb as a price source.

	* src/scm/commodity-utilities.scm: Added functions for getting
	sorted commodity splits, for total-average-prices of a
	commodity-list, for instantaneous prices, for instantaneous prices
	of a commodity-list, and for cooking your morning coffee :)

	* src/scm/report-utilites.scm, html-utilities.scm: create new
	function (gnc:accounts-get-commodities), use it in
	html-utilities.scm.

	* src/scm/html-scatter.scm: add workaround for rgba color.

2001-05-12  Robert Graham Merkel  <rgmerk@mira.net>

	* src/scm/main-window.scm: create .gnucash if it doesn't exist
	when saving a book config file.

2001-05-11  Dave Peticolas  <dave@krondo.com>

	* src/engine/Account.c (xaccCloneAccountSimple): use
	xaccAccountSetCurrency -- it does more than just set the pointer!

	* src/gnome/new-user-funs.c (clone_account): don't use engine
	private functions.

	* src/engine/io-example-account.c (add_account_local): fix up
	currency & security for new example accounts

	* src/engine/io-utils.c: add emacs mode comment to cancel
	XML comment

	* src/gnome/new-user-callbacks.c: fix compiler warning

	* src/engine/gnc-book.c (gnc_book_set_group): fix bug

	* src/engine/sql/Makefile.am: add files for make dist

2001-05-11  Bill Gribble  <grib@billgribble.com>

	* src/scm/main-window.scm: force-output when saving param files.
	otherwise they don't get written until program exit, which can
	cause problems.  Add newlines to acct tree output.

2001-05-11  Dave Peticolas  <dave@krondo.com>

	* src/doc/design/engine.texinfo: update docs

2001-05-11  Robert Graham Merkel  <rgmerk@mira.net>

	* src/scm/report/account-piecharts.scm: add checks for empty
	data.

2001-05-10  Dave Peticolas  <dave@krondo.com>

	* src/scm/main-window.scm ((gnc:main-window-book-open-handler
	book-url)): restore the main window even if we can't get a
	conf-file-name.

	* src/scm/main.scm (gnc:load-account-file): if we have a file to
	open, only run book-opened-hook if file open returns false.

	* src/FileDialog.c (gncPostFileOpen): once book-closed-hook has
	been run, run book-opened-hook if opening the file fails for some
	reason.

	* src/guile/gnc.gwp: update ui-open-file api.

	* src/gnome/top-level.c (gnucash_ui_open_file): return TRUE/FALSE
	for success/failure. use gboolean instead of int for boolean
	returns.

2001-05-10  Bill Gribble  <grib@billgribble.com>

	* src/gnome/dialog-column-view.c: change handling of component
	reports.  now we explicitly handle the case of the column view,
	which is the only report that needs to save/restore its children.

	* src/gnome/gnc-html-guppi.c: add printing support for graphs.
	Doesn't really work on my system ATM.  I'll follow up on it.

	* src/gnome/window-main.c: move save/restore forms out of gnome
	MDI config string.  rename some functions.

	* src/gnome/window-report.c: save the initial report in a window
	for special treatment.  It's the one that gets saved and restored,
	and whose title appears in the tab.

	* src/scm/*: remove instances of report-add-child and friends.
	The concept is unnecessary.

	* src/scm/main-window.scm: save report and account data to a new
	file named after the book in the directory ~/.gnucash/books.

	* src/scm/options.scm: run option-changed callbacks in the order
	they were added.  Add gnc:options-touch to dirty the options
	without changing anything.

	* src/scm/report.scm: add new optional fields for the
	define-report form: 'options-cleanup-cb and 'options-changed-cb.
	'options-cleanup-cb is called before book save to allow you to
	clean up any mess that you don't want saved.  'options-changed-cb
	is called after any report option is changed.  Both are optional.

	Also get rid of the concept of 'display-lists' for reports and
	let the displays update themselves with callbacks.  Get rid of
	parents and children for the reports.

	* src/scm/report/view-column.scm: revamp to handle options
	processing, saving, and rendering better.

2001-05-10  James LewisMoss  <jimdres@mindspring.com>

	* src/scm/main.scm ((gnc:main)): remove the main window startup
	with new user startup (moved to end of new user stuff).

	* src/engine/sql/PostgresBackend.c (pgendGetAllAccountKVP): same
	as below.

	* src/engine/rpc/RpcUtils.c (rpcend_build_gncacctlist):
	xaccGroupForEachAccountDeeply -> xaccGroupForEachAccount(...TRUE)
	(rpcend_build_gncacct_verslist): same.

	* src/engine/gnc-book.c (gnc_book_set_group): free account group
	when setting new one.

	* src/engine/Group.c (xaccGroupForEachAccount): change from
	xaccGroupForEachAccountDeeply and add argument on whether it
	should do things deeply.

	* src/engine/Account.c (xaccCloneAccountSimple): new func.
	(xaccAccountEnumAsString): change arg to GNCAccountType.

	* src/gnc-ui-util.c (gnc_ui_account_get_balance):
	xaccGroupForEachAccountDeeply -> xaccGroupForEachAccount(...TRUE)

	* src/engine/Account.c (xaccAccountGetChildren): Add children
	group if ->children == NULL.

2001-05-10  Dave Peticolas  <dave@krondo.com>

	* src/guile/File.c (gncFindFile): handle NULL arg
	(gncReadFile): use glib mem routines

	* src/doc/design/engine.texinfo: update docs

	* src/scm/command-line.scm: fix bugs

	* src/engine/kvp_frame.c: handle NULL args

2001-05-10  Christian Stimming  <stimming@tuhh.de>

	* src/scm/report/account-summary.scm, balance-sheet.scm, pnl.scm:
	moved foreign currency display option to display tab.

	* src/scm/html-utilities.scm
	(gnc:html-acct-table-comm-row-helper!): fixed display bug.

	* src/engine/gnc-pricedb.c (gnc_pricedb_lookup_nearest_in_time):
	Fixed this function so that it works properly now.

	* src/scm/commodity-utilities.scm
	(gnc:get-match-commodity-splits): fix bug.

2001-05-09  Dave Peticolas  <dave@krondo.com>

	* src/doc/design/engine.texinfo: update docs

	* src/engine/*.[ch]: add GPL headers

2001-05-09  Christian Stimming  <stimming@tuhh.de>

	* src/scm/report/price-scatter.scm: use the configurable report
	title.

2001-05-09  Dave Peticolas  <dave@krondo.com>

	* src/doc/design/user-preferences.texinfo: update docs

	* src/doc/design/reports.texinfo: update docs

	* src/doc/design/top-level.texinfo: update docs

	* src/doc/design/register.texinfo: update docs

	* src/doc/design/component-manager.texinfo: update docs

2001-05-09  Christian Stimming  <stimming@tuhh.de>

	* src/scm/report/price-scatter.scm: Added new option: get weighted
	average prices from the past, not only the instant prices.

	* src/scm/commodity-utilities.scm
	(gnc:get-commodity-totalaverage-prices): Added
	function. Eventually this could be an extension/alternative to
	prices from the pricedb.

2001-05-09  Robert Graham Merkel  <rgmerk@mira.net>

	* src/scm/report/net-barchart.scm: check for empty data
	and empty account lists.

	* src/scm/report/category-barchart.scm: check for empty
	data, print a nice error message.

	* src/scm/html-piechart.scm: now produces a warning if an
	empty piechart is sent to it.

	* src/scm/html-barchart.scm: now checks for and warns
	against empty barcharts

2001-05-08  Christian Stimming  <stimming@tuhh.de>

	* src/scm/options-utilities.scm, src/scm/report/price-scatter.scm:
	moved gnc:options-add-marker-choice! from price-scatter.scm to
	options-utilities.scm.

2001-05-08  Dave Peticolas  <dave@krondo.com>

	* src/scm/price-quotes.scm: add currency quote support

	* src/gnome/dialog-account.c: add currency quote support

	* src/engine/Account.c: allow CURRENCY accounts to have price
	source set.

	* src/quotes/finance-quote-helper.in: add currency quote support

2001-05-07  Christian Stimming  <stimming@tuhh.de>

	* src/scm/commodity-utilities.scm: Always use the absolute value
	when building a weighted average.

2001-05-06  Christian Stimming  <stimming@tuhh.de>

	* src/scm/report/price-scatter.scm: add options for marker shape
	and color.

	* src/scm/report/transaction-report.scm: fix bug.

2001-05-05  Dave Peticolas  <dave@krondo.com>

	* src/gnome/window-main.c: fix bugs

2001-05-05  Christian Stimming  <stimming@tuhh.de>

	* src/scm/report/price-scatter.scm: More experiments with scatter
	plots which are working now. Doesn't look too nice though.

	* src/scm/commodity-utilities.scm
	(gnc:get-match-commodity-splits): new function.

	* src/scm/date-utilities.scm (gnc:date->timepair): new
	function. Code cleanup.

	* src/guile/gnc.gwp: more price handling functions.

2001-05-04  Dave Peticolas  <dave@krondo.com>

	* src/register/splitreg.c: set action cell to autosize

	* src/register/gnome/combocell-gnome.c (xaccComboCellSetAutoSize):
	new func.

	* src/register/gnome/gnucash-item-list.c (gnc_item_list_autosize):
	return the clist width

	* src/register/gnome/gnucash-item-edit.c (item_edit_show_popup):
	fix bug

	* src/scm/main.scm: run the book-opened hook before showing
	the new-user window.

	* src/guile/Makefile.am: remove references to gnc-autogen.h.
	Clean gnc.c and gnc.h.

2001-05-03  Dave Peticolas  <dave@krondo.com>

	* src/engine/date.c (timespec_normalize): fix bug

	* doc/sgml/C/xacc-about.sgml: update credits

	* src/gnc-ui-util.h (_GNCPrintAmountInfo): make commodity const

	* src/gnome/window-register.c: fix compiler warning

2001-05-04  Robert Graham Merkel  <rgmerk@mira.net>

	* src/scm/report/transaction-report.scm : Add labels
	to subtotals.

2001-05-04  Conrad Canterford <conrad@mail.watersprite.com.au>

	* make-gnucash-patch.in: add --manifest option (allow use of a
	manifest file. Also, change --file option to allow multiple files.
	Fix bug in previous change.

	* README.patches: Updated to reflect new capabilities.

2001-05-03  Dave Peticolas  <dave@krondo.com>

	* doc/sgml/*/xacc-hierarchical-report.sgml: remove file

	* doc/sgml/pt_PT/xacc-txf-categories.sgml: add missing </article>

	* doc/sgml/pt_PT/gnucash.sgml: add missing file

	* doc/sgml/es/xacc-txf-categories.sgml: add missing </article>

	* doc/sgml/es/gnucash.sgml: add missing file

	* doc/sgml/C/xacc-txf-categories.sgml: add missing </article>

	* src/engine/DateUtils.c: config.h goes first

	* make-gnucash-patch.in: fix bug

	* README.cvs: update info

2001-05-03  Christian Stimming  <stimming@tuhh.de>

	* src/scm/report/account-summary.scm: fix bug.

	* src/scm/html-document.scm: added handler for scatter plots.

	* src/scm/report/price-scatter.scm: Added file. This eventually
	should show prices over time. ATM it demonstrates scatter plots in
	a meaningless report.

	* src/scm/html-scatter.scm: Added file. Provides scatter plots for
	reports.

	* src/scm/options.scm (gnc:color->hex-string): added function.

2001-05-03  Robert Graham Merkel <rgmerk@mira.net>

	* src/scm/report/transaction-report.scm: fix bug with secondary
	subheadings.

2001-05-03  Dave Peticolas  <dave@krondo.com>

	* many files: fix spelling errors

	* src/gnome/gnc-html-guppi.c: use unsigned int for color

2001-05-02  Dave Peticolas  <dave@krondo.com>

	* src/gnome/window-main.c: set the app's mdi mode from user prefs

	* README.cvs: add README about cvs write access

	* src/scm/report/net-barchart.scm: same as below

	* src/scm/report/category-barchart.scm: same as below

	* src/scm/report/average-balance.scm: same as below

	* src/scm/report/account-piecharts.scm: don't combine liabilities
	& equity together.

	* src/gnome/dialog-column-view.c: work on gui

	* src/gnome/dialog-utils.c (gnc_clist_columns_autosize): new func

2001-05-02  Robert Graham Merkel  <rgmerk@mira.net>

	* src/scm/report/transaction-report.scm: Fix bug with subheading
	display.

2001-05-01  Dave Peticolas  <dave@krondo.com>

	* src/gnome/dialog-transfer.c: fix bugs

	* src/guile/gnucash.c.in: update last stable version

2001-05-01  Conrad Canterford <conrad@mail.watersprite.com.au>

        * make-gnucash-patch.in: add --file option to allow single file
	patches to be made.

	* README.patches (new file): Moved patch instructions from README
	file into this new file, and added detailed descriptions of all
	the options for make-gnucash-patch.

        * README: see above

2001-05-01  Dave Peticolas  <dave@krondo.com>

	* src/scm/report/stylesheet-plain.scm: fix i18n bugs

	* src/scm/report/stylesheet-fancy.scm: work on colors,
	fix i18n bugs

	* src/gnome/dialog-style-sheet.c: fix i18n bugs

	* src/gnome/window-acct-tree.c: add popup menu to account tree

	* src/gnome/mainwindow-account-tree.c
	(gnc_mainwin_account_tree_attach_popup): add user_data argument
	for popup menu

	* src/gnome/window-register.c: same as below

	* src/gnome/window-main.c: same as below

	* src/gnome/window-register.c: obey gnome preferences for
	menubar & toolbar detachability

2001-05-01  Christian Stimming  <stimming@tuhh.de>

	* src/scm/report/average-balance.scm: moved from
	average-balance-2.scm. Fix bug.

2001-04-30  Dave Peticolas  <dave@krondo.com>

	* src/scm/report/portfolio.scm: fix bug

	* src/scm/price-quotes.scm: handle 'nav' and 'price' types

	* src/gnome/dialog-price-editor.c: update for nav price type

	* src/quotes/finance-quote-helper.in: try 'nav' and 'price' if
	'last' fails.

2001-05-01  Robert Graham Merkel  <rgmerk@mira.net>

	* src/engine/Query.{ch}: added date-granularity sorting functionality
	to queries.

	* src/engine/date.[ch] (timespecCanonicalDayTime): new function
	migrated from the scheme code.

	* src/guile/gnc.gwp: added wrappers for the above.

	* src/scm/date-utilities.scm (gnc:timepair-canonical-day-time):
	removed, replaced by new C function.

	* src/scm/report/*.scm: added checks for "no-accounts-selected".

	* src/scm/report/average-balance-2.scm: New (temporary) file.
	The average balance report with a rewritten calculation engine.

	* src/scm/report/register.scm: Modified to use global styles

	* src/scm/report/transaction-report.scm: use improved sorting ability,
	get report title from options.

	* src/scm/html-utilities.scm (gnc:html-make-no-account-warning): new
	function. (remove-last-empty-row): minor changes.

	* src/scm/report-utilities.scm: added the ability to get "numitems"
	out of a stats collector for debugging purposes.

2001-04-30  Christian Stimming  <stimming@tuhh.de>

	* src/scm/report/net-worth-timeseries.scm,
	income-expense-chart.scm: removed files.

2001-04-29  Dave Peticolas  <dave@krondo.com>

	* src/gnc-ui-util.c (gnc_locale_default_currency): handle no
	default currency

	* src/gnome/dialog-transfer.c: fix bugs

2001-04-28  Christian Stimming  <stimming@tuhh.de>

	* src/scm/date-utilities.scm: Fixed a whole lot of bugs in the
	relative-date functions (did *nobody* ever test those???). Added
	relative dates end-cal-year, end-current-quarter, and
	end-this-month. Added comments.

	* src/scm/options-utilities.scm: Changed date-options to be combo
	options of both relative and absolute dates.

	* src/scm/report/portfolio.scm, taxtxf.scm: adapt to usual option
	conventions.

	* src/scm/report/account-summary.scm: Fix bug.

2001-04-27  Christian Stimming  <stimming@tuhh.de>

	* src/scm/report/balance-sheet.scm: Added workaround for gtkhtml
	column width.

2001-04-27  Dave Peticolas  <dave@krondo.com>

	* src/SplitLedger.c (xaccSRExpandCurrentTrans): if expanding
	a transaction, try to show all of it

	* src/register/table-gnome.c (gnc_table_show_range): new func

	* src/register/gnome/gnucash-sheet.c (gnucash_sheet_show_range):
	new func

2001-04-27  Christian Stimming  <stimming@tuhh.de>

	* src/scm/report/balance-sheet.scm: Added option to choose the
	source of prices. Adapted to changes in html-utilities.

	* src/scm/report/pnl.scm: Adapted to changes.

	* src/scm/report-utilities.scm (gnc:monetary->string): Fix bug.

	* src/scm/html-utilities.scm (gnc:html-make-exchangerates):
	Switched to different arguments. Fix bug.

	* src/scm/commodity-utilities.scm: fix bug

	* src/scm/options-utilities.scm (gnc:options-add-price-source!):
	added function.

	* src/engine/gnc-pricedb.c (gnc_pricedb_lookup_nearest_in_time):
	fix bug.

2001-04-26  Christian Stimming  <stimming@tuhh.de>

	* src/scm/commodity-utilities.scm
	(gnc:exchange-by-pricedb-{latest,nearest}): new functions.

2001-04-26  Dave Peticolas  <dave@krondo.com>

	* src/gnome/window-main.c: handle scm parsing errors

	* src/scm/report.scm: fix bug

	* src/guile/gfec.c: handle NULLs

2001-04-26  Christian Stimming  <stimming@tuhh.de>

	* src/scm/report/net-barchart.scm: New file, it is the merger of
	income-expense-graph.scm and net-worth-timeseries.scm.

	* src/scm/report/*.scm: adapt to changed gnc:make-report-anchor.

	* src/scm/html-utilities.scm (gnc:make-report-anchor):
	gnc:report-add-child-by-id! is now used inside here. API changed.

2001-04-25  Dave Peticolas  <dave@krondo.com>

	* src/scm/commodity-utilities.scm: fix fixme

	* src/engine/Group.c (xaccGroupGetAccount): remove pokey warning

	* src/engine/gnc-transaction-xml-v2.c: read & write split action
	field

	* src/gnome/druid-commodity.c: do gncFileNew after gncFileQuit

	* src/guile/gnc.gwp: remove pokey functions (not used anymore)

	* src/scm/main.scm: fix bug. don't do new user dialog if we
	have a file on the command line.

	* src/FileDialog.c (gncAddHistory): fix bug. check for NULL.

	* src/guile/gnucash.c.in: include string.h

	* src/gnome/window-main.c: don't restore state for old format files

2001-04-24  Dave Peticolas  <dave@krondo.com>

	* src/scm/options.scm: check for deleted accounts in account
	list option. fix bug.

	* src/scm/report/pnl.scm: filter out non income/expense accounts

	* src/scm/report/budget-report.scm: remove

	* src/scm/qif-import/qif-to-gnc.scm: remove cruft

	* src/engine/Account.c: take out pokey warnings

2001-04-25  Robert Graham Merkel  <rgmerk@mira.net>

	* src/scm/html-utilities.scm:
	(gnc:html-table-append-ruler/markup!) new function.  Also modify
	(gnc:html-build-acct-table) and other functions to use global row
	styles.

	* src/scm/html-table.scm:(gnc:html-table-prepend-row/markup!)  fix
	bug.

	* src/scm/report/balance-sheet.scm: use new global row styles.

	* src/scm/report/stylesheet-*.scm: add new global row styles.

	* src/scm/report/transaction-report.scm: use new global row styles,
	fix bug with memo display.  Remove local color options.

2001-04-24  Bill Gribble  <grib@billgribble.com>

	* src/FileDialog.c: call book-opened-hook and book-closed-hook
	where appropriate

	* src/gnome/dialog-column-view.c: change to single-parent model

	* src/gnome/top-level.c: don't do MID state saving and restoring
	here... do it in the book save/load hooks.

	* src/gnome/window-main.c: the configstring stored in MDI is now a
	Scheme form which restores the window state.  save/restore it.
	Also, change the MDI session name to encode the book URL
	(have to encode it to escape some chars, notably /, which MDI
	doesn't like in section names)

	* src/scm/main-window.scm: new file.  get the main-window
	save/restore functions out of prefs.scm

	* src/scm/report/scm: only one parent per report; write save
	routines to save all parents and children.

2001-04-24  Dave Peticolas  <dave@krondo.com>

	* src/gnome/window-register.c: add additional warnings when
	deleting reconciled splits/transactions

2001-04-24  Christian Stimming  <stimming@tuhh.de>

	* src/guile/gnc.gwp: g-wrap all the euro-related functions.

2001-04-24  Dave Peticolas  <dave@krondo.com>

	* src/gnome/dialog-transfer.c: set price for euro currencies
	automatically

	* src/EuroUtils.c (gnc_euro_currency_get_rate): new func

2001-04-23  Dave Peticolas  <dave@krondo.com>

	* src/gnome/gnc-html-guppi.c: check for new guppi args before
	passing them

2001-04-23  Christian Stimming  <stimming@tuhh.de>

	* src/scm/report/transaction-report.scm: Make more sanity
	checks. Fix bugs.

2001-04-23  Dave Peticolas  <dave@krondo.com>

	* src/engine/Query.c (xaccQueryGetSplitsUniqueTrans): fix bug

	* src/engine/Account.c (xaccAccountSetPriceSrc): fix bug

2001-04-23  Kevin Finn  <kevinfinn@mediaone.net>

	* src/engine/Account.c src/engine/Account.h: added
	xaccAccountGetBalanceAsOfDate and
	xaccAccountGetShareBalanceAsOfDate, to determine the balance of an
	account on a given date.

	* src/gnome/window-reconcile.c: added appropriate callbacks so
	that changes to the startRecnWindow date entry will update the
	ending balance amount entry.  Once the user manually updates the
	ending balance amount, the automatic updates will no longer occur
	if the date entry is changed again.  Changed
	gnc_get_reconcile_info to use the *AsOfDate funcs if possible.

2001-04-22  Christian Stimming  <stimming@tuhh.de>

	* src/scm/report/transaction-report.scm: More work on subtotal
	options.

	* src/scm/report/net-worth-timeseries.scm: Add links to new
	reports on bars.

	* src/scm/options.scm, html-utilities.scm: Fix bugs with wrong
	report names.

2001-04-22  Dave Peticolas  <dave@krondo.com>

	* src/gnome/dialog-find-transactions.c: remove tags notebook page.

2001-04-22  Christian Stimming  <stimming@tuhh.de>

	* src/scm/report/income-expense-graph.scm: Add links to new
	reports on bars.

2001-04-22  Dave Peticolas  <dave@krondo.com>

	* src/scm/report/transaction-report.scm: use new api for
	changing sensitivity

	* src/guile/gnc.gwp: wrap new function

	* src/guile/global-options.c (gnc_set_option_selectable_by_name):
	new func

	* src/guile/option-util.c
	(gnc_option_db_set_option_selectable_by_name): new func

	* src/gnome/dialog-options.c (gnc_set_option_selectable): new func

	* src/gnome/dialog-account.c (gnc_type_list_unselect_cb): fix bug

	* src/scm/report/register.scm: use query option to store query

	* src/gnome/window-register.c (report_helper): don't copy
	the query -- it's converted to scm now

	* src/guile/gnc-helpers.c: more work on scm<->query

2001-04-22  Christian Stimming  <stimming@tuhh.de>

	* src/scm/report/transaction-report.scm: Added new options for
	specifying whether a subtotal will be printed. Unfinished.

	* src/scm/report.scm, src/scm/report/*.scm: Defined more string
	constants for option names. Used them in the reports.

2001-04-21  Christian Stimming  <stimming@tuhh.de>

	* src/scm/options.scm (gnc:make-multichoice-callback-option):
	Added multichoice option with callback functions, just like the
	complex-boolean-option.

	* src/scm/report/transaction-report.scm: Fixed date bug.

2001-04-21  Dave Peticolas  <dave@krondo.com>

	* src/guile/gnc-helpers.c: more work on scm<->query.

2001-04-20  Dave Peticolas  <dave@krondo.com>

	* src/gnome/window-report.c: raise app of new report to top

	* src/register/recncell.c: add confirmation callback

	* src/SplitLedger.c: implement reconcile confirm cb

	* src/gnome/gnc-html.c: add missing include

	* src/gnome/dialog-transfer.c: fix spelling

2001-04-20  Bill Gribble  <grib@billgribble.com>

	* src/gnome/dialog-column-view.c: maintain the report window
	edited list when closing dialog.  raise an existing edit dialog.

	* src/gnome/gnc-html.c: make sure we know about options editors
	launched from gnc-options: urls

	* src/gnome/window-report.c: numerous changes to improve handling
	of options dialogs.

	* src/scm/report.scm: new function, gnc:report-edit-options.

2001-04-20  Dave Peticolas  <dave@krondo.com>

	* src/guile/gnc-helpers.c: remove cruft. work on converting
	Query objects to and from a scheme representation (unfinished)

	* src/guile/gnc.gwp: wrap more of the Query enums

	* src/engine/Query.c (xaccQueryAddAccountGUIDMatch): new func

	* src/scm/options.scm: add a query option type

	* src/scm/report/report-list.scm: don't bother hiding tax report

2001-04-19  Bill Gribble  <grib@billgribble.com>

	* src/gnome/top-level.c: add call to skeleton "welcome" report
	if user has not run 1.5/1.6 before

	* src/scm/html-document.scm: changes to make sure styles are
	set for component reports in multicolumn view

	* src/scm/report.scm: clean up rendering with/without headers

	* src/scm/report/stylesheet-plain.scm: get rid of <center> tag
	on <body>

	* src/scm/report/welcome-to-gnucash.scm: new report and function
	to set up welcome to gnucash report

2001-04-19  Dave Peticolas  <dave@krondo.com>

	* src/register/gnome/gnucash-item-edit.c (item_edit_draw_info): fix
	some left-right scrolling glitches

	* src/gnome/dialog-tax-info.c: implement tax info api

	* src/gnome/account-tree.c: same as below

	* src/gnome/window-acct-tree.c: add tax info field

	* src/scm/report.scm: add an export callback for reports

	* src/guile/gnc.gwp: wrap radio chooser api

	* src/scm/report/taxtxf.scm: use export callback to choose
	between html & txf

	* src/gnome/window-report.c: implement export callback

2001-04-19  James LewisMoss  <jimdres@mindspring.com>

	* src/gnome/new-user-funs.c (gnc_new_user_get_clist): new func to
	remove duplicate code.

2001-04-18  Dave Peticolas  <dave@krondo.com>

	* src/SplitLedger.c: fix for api change below

	* src/gnc-ui.h: api change below

	* src/gnome/query-user.c
	(gnc_choose_radio_option_dialog_parented): use glist instead of
	pointer array for list of strings argument

2001-04-18  Bill Gribble  <grib@billgribble.com>

	* src/gnome/dialog-options.c: don't destroy options dialog twice.

	* src/gnome/window-main.c: hopefully last MDI fixes; rearrange
	menu and replace "New Window" with "Move to New Window."

2001-04-18  Dave Peticolas  <dave@krondo.com>

	* src/gnc-ui-util.c (gnc_ui_account_get_balance): use current
	stock quotes to get balances for stock/mutual/currency accounts

	* src/gnome/window-main.c: check for NULL toolbar parents

	* src/engine/sixtp-xml-write-utils.c: use new func below

	* src/engine/sixtp-dom-generators.c (timespec_sec_to_string): use
	new func below.

	* src/engine/sixtp-utils.c (timespec_secs_to_given_string): new
	func. format timezone string by hand (solaris fix)

	* src/engine/gnc-account-xml-v2.c (gnc_account_end_handler): only
	begin editing the account if parsing was successful

	* src/test/test-xml-account.c (test_add_account): don't delete
	the account, because it's referenced by the parser after the
	callback.

2001-04-17  Bill Gribble  <grib@billgribble.com>

	* src/gnome/window-main.c: More changes for MDI.  I think we
	finally have toolbars handled right.  Also new windows for account
	trees.

2001-04-17  Rob Browning  <rlb@cs.utexas.edu>

	* src/scm/utilities.scm (string-split): used to be string-split-on
	in qif-utils.scm

	* src/scm/qif-import/qif-utils.scm: move string-split-on to
	utilities.scm as string-split to better match string-join.

	* src/scm/qif-import/qif-to-gnc.scm (qif-import:qif-to-gnc):
	string-split-on -> string-split.

	* src/scm/qif-import/qif-dialog-utils.scm
	(qif-import:get-all-accts): string-split-on -> string-split.

	* src/scm/price-quotes.scm (yahoo-get-historical-quotes): new
	function - retrieve lists of historical quote information.

	* src/scm/bootstrap.scm.in (%load-path): add new guile-modules
	directory so we can use-modules from there.

	* src/guile/Makefile.am (CLEANFILES): add gnucash.c so it goes
	away on "make clean" in addition to "make distclean".

	* src/engine/gnc-pricedb.c: minor doc updates.

	* src/engine/gnc-pricedb.h: much more documentation.

	* lib/guile-www: new directory - contains guile-www CVS module.
	Used by new historical quote function.  Several new files added.
	Installed to new install directory GNC_SHAREDIR/guile-modules such
	that it is available via (use-modules (www main)), etc.

	* lib/Makefile.am (SUBDIRS): add guile-www

	* configure.in (AC_OUTPUT): add lib/guile-www/Makefile

2001-04-17  Dave Peticolas  <dave@krondo.com>

	* src/gnome/file-history.c: fix bug

2001-04-17  Bill Gribble  <grib@billgribble.com>

	* fixes to MDI bugs: only one param editor for accounts and
	reports, make sure reports reference and created children

	* new report: 'Frame URL'.  Give it an URL and it will display the
	contents in an <iframe>... handy for putting that stock ticker
	graph from yahoo or wherever in a sidebar of a multicolumn view.

2001-04-17  James LewisMoss  <jimdres@mindspring.com>

	* src/test/test-load-example-account.c (main): ignore the README
	file.

2001-04-17  Dave Peticolas  <dave@krondo.com>

	* lots of files: handle NULL pointer printf problems,
	fix some mem leaks

2001-04-16  Dave Peticolas  <dave@krondo.com>

	* src/gnc-ui-util.c (gnc_account_get_balance_in_currency): new func

	* src/gnome/dialog-price-editor.c: button for online quotes

	* src/scm/price-quotes.scm: handle missing lib errors. i18n
	some strings

	* src/quotes/finance-quote-helper.in: return error symbol when
	libraries are missing.

	* src/guile/guile-util.c (gnc_book_to_scm): new func

2001-04-15  Dave Peticolas  <dave@krondo.com>

	* src/register/gnome/gnucash-sheet.c: some more error checking

	* src/gnome/top-level.c: check for no children when creating default
	window

	* src/gnome/window-main.c: Kevin Finn's patch to shutdown gnucash
	when the main window is deleted. Handle remove_child events to
	prevent accessing deleted windows.

	* src/engine/sixtp-dom-parsers.c (string_to_integer): same as
	below

	* src/engine/sixtp-dom-generators.c (add_kvp_value_node): same as
	below

	* src/engine/sixtp-xml-write-utils.c: same as below

	* src/engine/sixtp-utils.c: same as below

	* src/engine/gnc-numeric.c: same as below

	* src/engine/TransLog.c: same as below

	* src/engine/kvp_frame.c: same as below

	* src/engine/sql/kvp-sql.c: same as below

	* src/engine/sql/builder.c (sqlBuild_Set_Int64): don't assume
	long long int == gint64

	* src/gnome/window-main.c: take out devel menu

	* src/gnome/dialog-price-editor.c (price_ok_clicked): fix bug

2001-04-15  Christian Stimming  <stimming@tuhh.de>

	* src/scm/report.scm: Defined global identifiers for some option
	names.

	* src/scm/report/category-barchart.scm: Added menu tips, menu
	names. Use Reportname option for report title. Added an
	explanatory text (only for devel info, will be removed again in
	some weeks).

	* src/scm/html-barchart.scm: Fix bug.

	* src/gnome/gnc-html-guppi.c (guppi_bar_1_callback): Fix bug.

2001-04-14  Dave Peticolas  <dave@krondo.com>

	* src/scm/path.scm: version the .gnucash/config* files.

	* src/scm/: change several other files to use versioned config

	* src/gnome/window-main.c: show current filename in app titles

2001-04-13  Bill Gribble  <grib@billgribble.com>

	* Bug fixes and a couple of new features for MDI stuff.

	* src/scm/prefs.scm: new option to set MDI mode (prefs/general)

	* src/gnome/{window-acct-tree.c,window-report.c,window-main.c}:
	bug fixes to handle runtime MDI mode changes.

2001-04-13  Dave Peticolas  <dave@krondo.com>

	* src/scm/report/*: update several reports to use
	the new date option api.

	* src/scm/options.scm: change date options to return
	the same values as they accept.

	* src/guile/option-util.c: update for new date option api.
	wrap scheme api for C.

	* src/gnome/dialog-options.c: update for new date option api.
	fix bugs.

	* src/gnome/query-user.c: fixes for no toplevel window

	* src/gnome/window-main.c (gnc_main_window_get_toplevel): check
	for NULL

2001-04-13  Christian Stimming  <stimming@tuhh.de>

	* src/scm/report/balance-sheet.scm: Cleanup code. Use new funcs
	from html-utilities.

	* src/scm/report/stylesheet-{plain,fancy}.scm: Added some styles
	for table-cells.

	* src/scm/html-utilities.scm (gnc:html-acct-table-cell),
	(gnc:html-acct-table-row-helper!),
	(gnc:html-acct-table-comm-row-helper!): Added functions i.e. moved
	them out of gnc:html-build-acct-table. Use table-cell-markup
	instead of direct markup-b.

	* Several reports: Added option page "Account" or "Display" so
	that every report has those.

2001-04-12  Bill Gribble  <grib@billgribble.com>

	* Lots and lots of changes to support Gnome MDI.  And I thought it
	would be an easy way to get that toolbar problem fixed.  Short
	story is lots of function prototypes changed to reflect the notion
	that there is no longer a single top-level gnucash window or
	account tree.  41 files changed, which is too many for me to
	itemize :)

	* src/gnome/window-acct-tree.{c,h}: new file; the "account tree
	window" is the contents of the former main window.  Now you can
	have as many of them open as you want.  account trees and reports
	are the 2 kinds of "main window children" which MDI manages.

	* src/gnome/window-main-summarybar.{c,h}: new file.  I moved the
	summary bar stuff out of the account tree because there's one
	summary bar per top-level window but possible many account trees
	per top-level window.

	* src/gnome/window-main.c: this is not what it used to be at all.
	the main gnucash ui element is now a 'GnomeMDI'.  The only menus
	and toolbar items here are ones that are always visible in any
	top-level window.

	* src/scm/prefs/scm: acct tree prefs are treated differently (one
	options obj per acct tree) and are auto-saved and restored.

	* src/scm/report.scm: report options are auto saved and restored.

	* src/scm/html-style-sheet.scm: so are style sheets.

2001-04-12  James LewisMoss  <jimdres@mindspring.com>

	* accounts/C/Makefile.am (EXTRA_DIST): move some of the files to
	the EXTRA_DIST rule for the moment (we don't want them installed
	at the moment)

	* accounts/C/acctchrt_*: Include Carol's documentation fixes.

2001-04-12  Dave Peticolas  <dave@krondo.com>

	* src/register/gnome/gnucash-item-list.c: same as below

	* src/register/gnome/combocell-gnome.c (popup_post_show): fix for
	making the scrollbars appear under gtk+ 1.2.9.

	* src/gnome/dialog-commodity.c: add api to edit commodities

	* src/gnome/dialog-commodities.c: allow commodities to be edited

2001-04-12  Christian Stimming  <stimming@tuhh.de>

	* src/scm/report/account-piecharts.scm: Added menu tips, menu
	names. Use Reportname option for report title. Added an explanatory
	text (only for devel info, will be removed again in some weeks).

2001-04-12  Robert Graham Merkel  <rgmerk@mira.net>

	* src/engine/Transaction.[ch] (xaccSplitGetCorrAccountFullName): new
	functions.  (xaccSplitCompareAccountNames): rename
	to xaccSplitCompareAccountFullNames and compare using full names.
	(xaccSplitCompareOtherAccountNames): renaming as above.

	* src/engine/Query.[ch]: rename sort enumeration values.

	* src/guile/gnc.gwp: update to match above changes.

	* src/scm/report-utilities.scm (gnc:split-get-corr-account-full-name):
	new function.

	* src/scm/report/transaction-report.scm: use above changes to sort
	and optionally display full account names.  Fix unrelated bugs with
	sorting options.

2001-04-11  Dave Peticolas  <dave@krondo.com>

	* src/scm/report/hello-world.scm: add a menu tip as an example

	* src/scm/report.scm: add menu names and menu tips to reports

2001-04-11  Christian Stimming  <stimming@tuhh.de>

	* src/scm/report/average-balance.scm, category-barchart.scm,
	income-expense-graph.scm, net-worth-timeseries.scm, portfolio.scm:
	Added menu-path for reports.

	* src/scm/report/account-piecharts.scm: Report title is now
	fetched from Reportname option. Slices and legend now have
	different URLs.

2001-04-11  Dave Peticolas  <dave@krondo.com>

	* src/gnome/dialog-commodities.c: more work

	* src/engine/gnc-commodity.c (gnc_commodity_table_remove): new func

	* src/engine/gnc-commodity.h: add ASX namespace

	* src/gnome/dialog-commodity.c (gnc_ui_edit_commodity_modal): new
	func. unfinished. rename some functions to reflect that it's also
	an editing dialog now.

2001-04-11  Robert Graham Merkel  <rgmerk@mira.net>

	* src/scm/report/transaction-report.scm (render-month-subheading):
	fix bug.

2001-04-11  Christian Stimming  <stimming@tuhh.de>

	* src/scm/report/account-piecharts.scm: Simplified anchors for
	other reports by using gnc:make-report-anchor.

	* src/scm/html-utilities.scm (gnc:make-report-anchor): New
	function.

	* src/scm/options.scm (gnc:options-copy-values): New function.

	* src/scm/report/account-piecharts.scm: Added anchors to yet other
	reports on the slices of the pie. Simplified creation of other
	report's options.

	* src/scm/report/category-barchart.scm: Simplified creation of
	other report's options.

	* src/scm/report/report-list.scm: Renamed file.

	* src/scm/report/account-piecharts.scm: Renamed to this filename
	(used to be: income-or-expense-pie.scm). Introduced some more
	generality such that this file also has an asset and a liability
	balance piechart.

	* src/scm/report/category-barchart.scm: Introduced some
	more generality such that this file also has a asset and liability
	balance barchart.

2001-04-10  Christian Stimming  <stimming@tuhh.de>

	* src/scm/report-utilities.scm: Added function
	(gnc:account-get-type-string-plural). Changed
	gnc:decompose-accountlist to return AccountType symbols.

	* src/scm/html-utilities.scm,
	src/scm/report/net-worth-timeseries.scm, balance-sheet.scm:
	Adapted to changed gnc:decompose-accountlist.

2001-04-10  Dave Peticolas  <dave@krondo.com>

	* src/engine/date.c (__EXTENSIONS__): add a define for solaris

	* src/gnome/dialog-commodities.c: new file. commodity editor.
	unfinished.

2001-04-10  Christian Stimming  <stimming@tuhh.de>

	* src/scm/report/net-worth-timeseries.scm: Fixed date argument
	bug. Added auto label rotation.

	* src/scm/date-utilities.scm: Renamed gnc:dateloop to
	gnc:make-date-interval-list and gnc:dateloop-simple to
	gnc:make-date-list.

	* src/scm/report/category-barchart.scm, income-expense-graph.scm:
	Adapt to gnc:dateloop's namechange.

2001-04-10  Robert Graham Merkel  <rgmerk@mira.net>

	* src/scm/report/net-worth-timeseries.scm: New file.  You guessed
	it,  a time series net worth barchart.

	* src/scm/report/date-utilities.scm: add gnc:dateloop-simple to
	generate simple timeseries for net worth barchart.

	* src/scm/report/{Makefile.am, report-list.scm}: add new barchart.

2001-04-10  James LewisMoss  <jimdres@mindspring.com>

	* src/engine/io-utils.c (write_accounts): Pull out function from
	io-gncxml-v2.c.
	(write_account_group): same.
	(write_emacs_trailer): abstract out functionality.

2001-04-09  James LewisMoss  <jimdres@mindspring.com>

	* src/engine/sixtp-dom-parsers.c (dom_tree_to_guid): handle new
	and guid types the same for the moment.

2001-04-09  Dave Peticolas  <dave@krondo.com>

	* src/gnome/dialog-price-editor.c: more work

2001-04-09  Robert Graham Merkel  <rgmerk@mira.net>

	* src/scm/report/balance-sheet.scm (balance-sheet-renderer):
	use gnc:decompose-accounts to split up accounts.

	* src/scm/report-utilities.scm (gnc:decompose-accountlist):
	add credit accounts to the list of liability accounts.

2001-04-08  Dave Peticolas  <dave@krondo.com>

	* src/gnome/dialog-price-editor.c: more work

	* src/gnome/account-tree.c (gnc_account_tree_insert_row): speedup
	refreshing

	* src/gnome/account-tree.h: remove duplicate declaration

	* src/scm/report/taxtxf.scm: don't use deprecated calls

	* src/guile/gnc.gwp: wrap xaccAccountGetSplitList

	* src/engine/Query-xml-parser-v1.c
	(qrestore_datepred_start_handler): use g_new0 instead of bzero --
	more portable

2001-04-07  Dave Peticolas  <dave@krondo.com>

	* src/engine/md5.h: include stddef.h for size_t

	* src/engine/sql/PostgresBackend.c: include ctype.h for tolower

	* src/engine/guid.h: include stddef.h for size_t

	* src/engine/gnc-engine-util.h: include stddef.h for size_t

	* src/scm/report/taxtxf.scm: fix bug

	* src/scm/text-export.scm: fix for api change

	* src/scm/report-utilities.scm: fix for api change

	* src/scm/engine-utilities.scm: change gnc:group-map-accounts
	to gnc:group-map-all-accounts. make gnc:group-map-accounts do
	only the immediate children.

	* src/gnome/dialog-price-editor.c: more work

	* src/engine/gnc-pricedb.c: add an error check

	* ChangeLog: split changelog

2001-04-06  Rob Browning  <rlb@cs.utexas.edu>

	* src/scm/process.scm (gnc:run-sub-process): some process control
	fixes seen on guile-devel.

2001-04-06  Dave Peticolas  <dave@krondo.com>

	* src/gnome/dialog-price-editor.c: new file with price db
	editor. Unfinished.

	* src/engine/gnc-pricedb.c: connect prices to pricedbs

2001-04-05  Dave Peticolas  <dave@krondo.com>

	* src/engine/io-gncxml-v2.c (gnc_book_load_from_xml_file_v2): fix
	for files with no pricedb section

2001-04-04  Dave Peticolas  <dave@krondo.com>

	* src/scm/prefs.scm: add price editor geometry options

2001-04-06  Christian Stimming  <stimming@tuhh.de>

	* src/scm/report/balance-sheet.scm: Major overhaul. Adapted to new
	options in gnc:html-build-acct-table. Cleaned up code. Corrected
	column alignment.

	* src/scm/html-utilities.scm (gnc:html-table-append-ruler!): New
	function.
	(gnc:html-build-acct-table): Added new arguments for how to show
	non-leaf accounts: with subtotal or not, with own balance or
	not. Removed some empty lines in the html-table.

	* src/scm/report/pnl.scm, account-summary.scm: Added support for
	new gnc:html-build-acct-tree options.

	* src/scm/report-utilities.scm (gnc:decompose-accountlist): Added
	equity accounts.

2001-04-05  James LewisMoss  <jimdres@mindspring.com>

	* src/test/test-xml-transaction.c: guess what?

	* src/test/test-xml-commodity.c: genericify all over.

	* src/test/test-xml-account.c: genericify all over.

	* src/test/gnc-test-stuff.c (test_load_file): use new generic
	interface.
	(test_files_in_dir): same.

	* src/engine/io-gncxml-v2.h (struct sixtp_global_data_v2_struct):
	remove all the stuff made unnecessary by generification.

	* src/engine/io-gncxml-v2.c (gnc_counter_end_handler): same as below.
	(generic_callback): new func for generic callback.
	(gnc_book_load_from_xml_file_v2): use new generic callback
	mechanism.

	* src/engine/gnc-transaction-xml-v2.c
	(gnc_transaction_end_handler): same as below.

	* src/engine/gnc-pricedb-xml-v1.c (pricedb_v2_end_handler): same
	as below.

	* src/engine/gnc-commodity-xml-v2.c (gnc_commodity_end_handler):
	same as below.

	* src/engine/gnc-account-xml-v2.c (gnc_account_end_handler):
	genericify the callback mechanism.

	* src/engine/io-gncxml-v2.c (gnc_book_load_from_xml_file_v2): move
	xaccLogDisable call.

2001-04-05  Christian Stimming  <stimming@tuhh.de>

	* src/scm/html-table.scm (gnc:html-table-remove-last-row!): Added
	function.

	* src/scm/html-utilities.scm (gnc:html-build-acct-table): Added
	removal of the last empty line above the total sum.

	* src/scm/html-document.scm: changed rendering of #f from one
	whitespace to equally arbitrary three whitespaces. FIXME: This
	should be configurable by a style-sheet.

	* src/scm/report/pnl.scm: deactivated column headers.

2001-04-05  Robert Graham Merkel  <rgmerk@mira.net>

	* src/scm/report/balance-sheet.scm: Relabel summary rows, fix
	asset calculation bugs.

2001-04-04  Robert Graham Merkel  <rgmerk@mira.net>

	* src/scm/report/balance-sheet.scm: calculate retained profits
	explicitly, display (liabilities + equity) to allow people
	to check balances.

2001-04-04  Dave Peticolas  <dave@krondo.com>

	* src/register/gnome/gnucash-sheet.c
	(gnucash_register_goto_next_trans_row): new func.

	* src/gnome/window-register.c: make 'enter' toolbar button
	move to next transaction

	* src/gnome/dialog-tax-info.c: more work

	* src/gnome/dialog-account.c: allow opening balances to come
	from other accounts

	* src/gnome/dialog-totd.c (totd_close_cb): don't bother with the
	help dialog after disabling tips

2001-04-04  Christian Stimming  <stimming@tuhh.de>

	* src/gnome/gnc-html-guppi.c, src/scm/html-barchart.scm: Added new
	option for barchart: legend-reversed.

2001-04-04  Robert Graham Merkel  <rgmerk@mira.net>

	* src/scm/report/balance-sheet.scm: calculate retained profits
	explicitly, display (liabilities + equity) to allow people
	to check balances.

2001-04-04  James LewisMoss  <jimdres@mindspring.com>

	* src/engine/sixtp-dom-parsers.c (dom_tree_to_timespec): use
	g_free rather than free (ben's find)
	(dom_tree_to_gnc_numeric): same.

2001-04-03  Dave Peticolas  <dave@krondo.com>

	* src/register/gnome/gnucash-sheet.c: move cursor before showing
	popup menu

	* src/gnome/window-register.c: add a Transaction->Invoice item

	* src/engine/Query.c: add GUID predicate

	* src/gnome/dialog-commodity.c: add namespace picker getter.
	Show "CURRENCY" instead of "ISO4217" when displaying.

	* src/gnome/druid-commodity.c: use namespace picker getter

	* src/gnome/druid-qif-import.c: use namespace picker getter

	* src/scm/report/register.scm: more work

	* src/engine/gnc-commodity.c (reset_printname): take the namespace
	out of the printname

	* src/gnome/dialog-account.c: add opening balance support

	* src/gnc-ui-util.c (gnc_find_or_create_equity_account): new func.
	(gnc_account_create_opening_balance): new func.

	* src/gnome/gnc-dateedit.c: add some error checking

	* src/gnome/gnc-commodity-edit.c: add "changed" signal

	* src/scm/report/register.scm: fix bug

2001-04-03  Robert Graham Merkel  <rgmerk@mira.net>

	* src/scm/report/html-table.scm (gnc:html-table-prepend-row!): Fix
	bug.

	* src/scm/report/html-utilities.scm (gnc:build-html-acct-table): Add
	show-col-headers option.

	* src/scm/report/balance-sheet.scm: New file.  Code for a balance
	sheet report.  Numbers should be correct, presentation is
	rudimentary as usual.

	* src/scm/report/account-summary.scm: modify for changed arguments
	to gnc:build-html-acct-table.

	* src/scm/report/pnl.scm: modify for changed arguments to
	gnc:build-html-account-table.

2001-04-02  Dave Peticolas  <dave@krondo.com>

	* Makefile.am: add po/README

	* src/gnome/window-main.c: hide developer menu

	* src/gnome/window-register.c: add invoice menu item

	* src/scm/prefs.scm: add user name & address option for invoice
	report. add option for whether reports appear in main window or
	open in new window

	* src/scm/report.scm: open reports based on new option

	* src/scm/report/transaction-report.scm: more work

	* src/scm/report/register.scm: more work

2001-04-01  Dave Peticolas  <dave@krondo.com>

	* src/FileDialog.c: update for api change

	* src/gnome/window-report.c: update for api change

	* src/gnome/gnc-html.c: update for api change

	* src/gnome/window-main.c: update for api change

	* src/gnome/cursors.c (gnc_set_busy_cursor): add extra arg
	to determine whether to update cursor immediately

	* src/gnome/druid-qif-import.c: update for api change

	* src/gnome/window-help.c: expand the top nodes initially
	(gnc_help_show_topic): show the topic in the tree when it
	can be found

	* src/gnome/gnc-html.c: set busy cursor before start request

2001-03-31  Dave Peticolas  <dave@krondo.com>

	* src/gnome/dialog-utils.c (gnc_get_gdk_imlib_image): new func

	* src/scm/report.scm: translate report name

	* src/gnome/window-main.c: fix some i18n bugs

2001-03-31  Christian Stimming  <stimming@tuhh.de>

	* src/scm/html-utilities.scm (gnc:html-build-acct-table): fix
	horizontal line width if foreign currencies are shown.

2001-03-31  James LewisMoss  <jimdres@mindspring.com>

	* src/test/test-xml-account.c (node_and_account_equal): fix parent
	id test.  duh.

	* src/test/test-real-data.sh (EXIT_VALUE): check for empty FILES
	return.

	* src/test/test-xml-commodity.c (main): fix argc test.

	* src/test/test-xml-account.c (main): fix argc test.

	* src/test/test-xml-commodity.c (main): fix argc test

	* src/test/test-load-xml2.c (main): call xaccLogDisable

	* src/test/test-xml-transaction.c (main): call xaccLogDisable

	* src/engine/io-gncxml-v2.c (gnc_book_load_from_xml_file_v2):
	comment out load debug info.

	* src/test/test-real-data.sh (EXIT_VALUE): don't run on a
	directory.

	* src/test/gnc-test-stuff.c (test_files_in_dir): rename vars
	file_count -> argc, files -> argv to be more accurate.

2001-03-31  Dave Peticolas  <dave@krondo.com>

	* src/scm/options.scm: add a text option type

	* src/gnome/dialog-options.c: add support for text options

	* src/gnome/window-main.c (gnc_ui_about_cb): set parent

	* src/scm/report/register.scm: more work

	* src/scm/html-document.scm: fix bug

2001-03-30  James LewisMoss  <jimdres@mindspring.com>

	* src/engine/io-gncxml-v2.c (gnc_book_load_from_xml_file_v2): add
	stuff from file format 1 ledger data start and end handlers to
	disable enable log, mark saved, and the rest.

	* src/engine/gnc-book.c (gnc_book_write_to_file): clean up
	writing.  Write only once.
	(gnc_book_write_to_file): extract out backup functionality.
	(gnc_book_backup_file): new func with extracted functionality.
	(gnc_book_backup_file): add more permanent backup for binary
	data.

	* src/engine/gnc-account-xml-v2.c (gnc_account_end_handler): add
	begin edit so that everything doesn't get recomputed till end.

	* src/engine/io-gncxml-v2.c (gnc_book_load_from_xml_file_v2): add
	commit of all accounts at end.

	* src/engine/gnc-book.c (gnc_book_write_to_file): use v2 write.
